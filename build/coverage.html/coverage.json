{"/home/travis/build/npmtest/node-npmtest-actionhero/test.js":{"path":"/home/travis/build/npmtest/node-npmtest-actionhero/test.js","s":{"1":2,"2":2,"3":2,"4":2,"5":2,"6":2,"7":2,"8":1,"9":2,"10":2,"11":1,"12":1,"13":1,"14":1,"15":2,"16":2,"17":2,"18":2,"19":1,"20":1,"21":2,"22":2,"23":2,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":1,"31":1,"32":1,"33":1,"34":1,"35":1,"36":1,"37":1,"38":1,"39":2,"40":2,"41":1,"42":2,"43":2,"44":1,"45":2,"46":2,"47":1,"48":2,"49":2,"50":1,"51":1,"52":1,"53":1,"54":1},"b":{"1":[2,1,1,1],"2":[1,1,1,1],"3":[1,1],"4":[1,1],"5":[1,1],"6":[1,1],"7":[1,1],"8":[1,1],"9":[1,1],"10":[1,1,1],"11":[1,1],"12":[1,1],"13":[1,1],"14":[1,1],"15":[1,1],"16":[1,1],"17":[1,1]},"f":{"1":2,"2":2,"3":2,"4":2,"5":2,"6":1,"7":1,"8":1,"9":2,"10":2,"11":2,"12":2,"13":1},"fnMap":{"1":{"name":"(anonymous_1)","line":12,"loc":{"start":{"line":12,"column":1},"end":{"line":12,"column":13}}},"2":{"name":"(anonymous_2)","line":19,"loc":{"start":{"line":19,"column":5},"end":{"line":19,"column":17}}},"3":{"name":"(anonymous_3)","line":23,"loc":{"start":{"line":23,"column":24},"end":{"line":23,"column":36}}},"4":{"name":"(anonymous_4)","line":61,"loc":{"start":{"line":61,"column":5},"end":{"line":61,"column":17}}},"5":{"name":"(anonymous_5)","line":82,"loc":{"start":{"line":82,"column":5},"end":{"line":82,"column":17}}},"6":{"name":"(anonymous_6)","line":91,"loc":{"start":{"line":91,"column":77},"end":{"line":94,"column":10}}},"7":{"name":"(anonymous_7)","line":112,"loc":{"start":{"line":112,"column":83},"end":{"line":115,"column":10}},"skip":true},"8":{"name":"(anonymous_8)","line":123,"loc":{"start":{"line":123,"column":77},"end":{"line":126,"column":10}},"skip":true},"9":{"name":"(anonymous_9)","line":139,"loc":{"start":{"line":139,"column":12},"end":{"line":139,"column":40}},"skip":true},"10":{"name":"(anonymous_10)","line":147,"loc":{"start":{"line":147,"column":77},"end":{"line":150,"column":10}},"skip":true},"11":{"name":"(anonymous_11)","line":158,"loc":{"start":{"line":158,"column":83},"end":{"line":161,"column":10}},"skip":true},"12":{"name":"(anonymous_12)","line":169,"loc":{"start":{"line":169,"column":79},"end":{"line":172,"column":10}},"skip":true},"13":{"name":"(anonymous_13)","line":180,"loc":{"start":{"line":180,"column":75},"end":{"line":183,"column":10}},"skip":true}},"statementMap":{"1":{"start":{"line":12,"column":0},"end":{"line":195,"column":5}},"2":{"start":{"line":14,"column":4},"end":{"line":14,"column":14}},"3":{"start":{"line":19,"column":4},"end":{"line":56,"column":9}},"4":{"start":{"line":21,"column":8},"end":{"line":21,"column":19}},"5":{"start":{"line":23,"column":8},"end":{"line":35,"column":13}},"6":{"start":{"line":24,"column":12},"end":{"line":34,"column":13}},"7":{"start":{"line":25,"column":16},"end":{"line":28,"column":30}},"8":{"start":{"line":30,"column":16},"end":{"line":33,"column":27}},"9":{"start":{"line":37,"column":8},"end":{"line":39,"column":21}},"10":{"start":{"line":40,"column":8},"end":{"line":53,"column":9}},"11":{"start":{"line":43,"column":12},"end":{"line":46,"column":14}},"12":{"start":{"line":47,"column":12},"end":{"line":47,"column":18}},"13":{"start":{"line":50,"column":12},"end":{"line":51,"column":46}},"14":{"start":{"line":52,"column":12},"end":{"line":52,"column":18}},"15":{"start":{"line":55,"column":8},"end":{"line":55,"column":35}},"16":{"start":{"line":61,"column":4},"end":{"line":63,"column":9}},"17":{"start":{"line":62,"column":8},"end":{"line":62,"column":15}},"18":{"start":{"line":64,"column":4},"end":{"line":77,"column":5}},"19":{"start":{"line":70,"column":8},"end":{"line":70,"column":14}},"20":{"start":{"line":76,"column":8},"end":{"line":76,"column":14}},"21":{"start":{"line":82,"column":4},"end":{"line":84,"column":9}},"22":{"start":{"line":83,"column":8},"end":{"line":83,"column":15}},"23":{"start":{"line":85,"column":4},"end":{"line":194,"column":5}},"24":{"start":{"line":91,"column":8},"end":{"line":99,"column":10}},"25":{"start":{"line":98,"column":12},"end":{"line":98,"column":35}},"26":{"start":{"line":102,"column":8},"end":{"line":104,"column":63}},"27":{"start":{"line":105,"column":8},"end":{"line":105,"column":14}},"28":{"start":{"line":112,"column":8},"end":{"line":121,"column":10},"skip":true},"29":{"start":{"line":119,"column":12},"end":{"line":119,"column":55},"skip":true},"30":{"start":{"line":120,"column":12},"end":{"line":120,"column":48},"skip":true},"31":{"start":{"line":123,"column":8},"end":{"line":136,"column":10},"skip":true},"32":{"start":{"line":130,"column":12},"end":{"line":130,"column":76},"skip":true},"33":{"start":{"line":131,"column":12},"end":{"line":131,"column":73},"skip":true},"34":{"start":{"line":132,"column":12},"end":{"line":132,"column":74},"skip":true},"35":{"start":{"line":133,"column":12},"end":{"line":133,"column":79},"skip":true},"36":{"start":{"line":134,"column":12},"end":{"line":134,"column":25},"skip":true},"37":{"start":{"line":135,"column":12},"end":{"line":135,"column":45},"skip":true},"38":{"start":{"line":138,"column":8},"end":{"line":145,"column":14},"skip":true},"39":{"start":{"line":143,"column":16},"end":{"line":143,"column":29},"skip":true},"40":{"start":{"line":144,"column":16},"end":{"line":144,"column":55},"skip":true},"41":{"start":{"line":147,"column":8},"end":{"line":156,"column":10},"skip":true},"42":{"start":{"line":154,"column":12},"end":{"line":154,"column":25},"skip":true},"43":{"start":{"line":155,"column":12},"end":{"line":155,"column":45},"skip":true},"44":{"start":{"line":158,"column":8},"end":{"line":167,"column":10},"skip":true},"45":{"start":{"line":165,"column":12},"end":{"line":165,"column":25},"skip":true},"46":{"start":{"line":166,"column":12},"end":{"line":166,"column":48},"skip":true},"47":{"start":{"line":169,"column":8},"end":{"line":178,"column":10},"skip":true},"48":{"start":{"line":176,"column":12},"end":{"line":176,"column":25},"skip":true},"49":{"start":{"line":177,"column":12},"end":{"line":177,"column":46},"skip":true},"50":{"start":{"line":180,"column":8},"end":{"line":189,"column":10},"skip":true},"51":{"start":{"line":187,"column":12},"end":{"line":187,"column":94},"skip":true},"52":{"start":{"line":188,"column":12},"end":{"line":188,"column":48},"skip":true},"53":{"start":{"line":192,"column":8},"end":{"line":192,"column":35},"skip":true},"54":{"start":{"line":193,"column":8},"end":{"line":193,"column":14},"skip":true}},"branchMap":{"1":{"line":25,"type":"binary-expr","locations":[{"start":{"line":25,"column":23},"end":{"line":25,"column":62}},{"start":{"line":26,"column":20},"end":{"line":26,"column":70}},{"start":{"line":27,"column":20},"end":{"line":27,"column":71}},{"start":{"line":28,"column":20},"end":{"line":28,"column":29}}]},"2":{"line":30,"type":"binary-expr","locations":[{"start":{"line":30,"column":23},"end":{"line":30,"column":37}},{"start":{"line":31,"column":20},"end":{"line":31,"column":61}},{"start":{"line":32,"column":20},"end":{"line":32,"column":70}},{"start":{"line":33,"column":20},"end":{"line":33,"column":26}}]},"3":{"line":37,"type":"cond-expr","locations":[{"start":{"line":38,"column":14},"end":{"line":38,"column":20}},{"start":{"line":39,"column":14},"end":{"line":39,"column":20}}]},"4":{"line":40,"type":"switch","locations":[{"start":{"line":42,"column":8},"end":{"line":47,"column":18}},{"start":{"line":49,"column":8},"end":{"line":52,"column":18}}]},"5":{"line":44,"type":"binary-expr","locations":[{"start":{"line":44,"column":16},"end":{"line":44,"column":44}},{"start":{"line":44,"column":48},"end":{"line":44,"column":66}}]},"6":{"line":50,"type":"binary-expr","locations":[{"start":{"line":50,"column":21},"end":{"line":50,"column":49}},{"start":{"line":50,"column":53},"end":{"line":50,"column":72}}]},"7":{"line":64,"type":"switch","locations":[{"start":{"line":69,"column":4},"end":{"line":70,"column":14}},{"start":{"line":75,"column":4},"end":{"line":76,"column":14}}]},"8":{"line":85,"type":"switch","locations":[{"start":{"line":90,"column":4},"end":{"line":105,"column":14}},{"start":{"line":111,"column":4},"end":{"line":193,"column":14},"skip":true}]},"9":{"line":91,"type":"binary-expr","locations":[{"start":{"line":91,"column":42},"end":{"line":91,"column":73}},{"start":{"line":91,"column":77},"end":{"line":99,"column":9}}]},"10":{"line":102,"type":"binary-expr","locations":[{"start":{"line":102,"column":18},"end":{"line":102,"column":32}},{"start":{"line":103,"column":12},"end":{"line":103,"column":53}},{"start":{"line":104,"column":12},"end":{"line":104,"column":61}}]},"11":{"line":112,"type":"binary-expr","locations":[{"start":{"line":112,"column":45},"end":{"line":112,"column":79},"skip":true},{"start":{"line":112,"column":83},"end":{"line":121,"column":9},"skip":true}]},"12":{"line":123,"type":"binary-expr","locations":[{"start":{"line":123,"column":42},"end":{"line":123,"column":73},"skip":true},{"start":{"line":123,"column":77},"end":{"line":136,"column":9},"skip":true}]},"13":{"line":138,"type":"binary-expr","locations":[{"start":{"line":138,"column":48},"end":{"line":138,"column":85},"skip":true},{"start":{"line":139,"column":12},"end":{"line":145,"column":13},"skip":true}]},"14":{"line":147,"type":"binary-expr","locations":[{"start":{"line":147,"column":42},"end":{"line":147,"column":73},"skip":true},{"start":{"line":147,"column":77},"end":{"line":156,"column":9},"skip":true}]},"15":{"line":158,"type":"binary-expr","locations":[{"start":{"line":158,"column":45},"end":{"line":158,"column":79},"skip":true},{"start":{"line":158,"column":83},"end":{"line":167,"column":9},"skip":true}]},"16":{"line":169,"type":"binary-expr","locations":[{"start":{"line":169,"column":43},"end":{"line":169,"column":75},"skip":true},{"start":{"line":169,"column":79},"end":{"line":178,"column":9},"skip":true}]},"17":{"line":180,"type":"binary-expr","locations":[{"start":{"line":180,"column":41},"end":{"line":180,"column":71},"skip":true},{"start":{"line":180,"column":75},"end":{"line":189,"column":9},"skip":true}]}},"code":["/* istanbul instrument in package npmtest_actionhero */","/*jslint","    bitwise: true,","    browser: true,","    maxerr: 8,","    maxlen: 96,","    node: true,","    nomen: true,","    regexp: true,","    stupid: true","*/","(function () {","    'use strict';","    var local;","","","","    // run shared js-env code - pre-init","    (function () {","        // init local","        local = {};","        // init modeJs","        local.modeJs = (function () {","            try {","                return typeof navigator.userAgent === 'string' &&","                    typeof document.querySelector('body') === 'object' &&","                    typeof XMLHttpRequest.prototype.open === 'function' &&","                    'browser';","            } catch (errorCaughtBrowser) {","                return module.exports &&","                    typeof process.versions.node === 'string' &&","                    typeof require('http').createServer === 'function' &&","                    'node';","            }","        }());","        // init global","        local.global = local.modeJs === 'browser'","            ? window","            : global;","        switch (local.modeJs) {","        // re-init local from window.local","        case 'browser':","            local = local.global.utility2.objectSetDefault(","                local.global.utility2_rollup || local.global.local,","                local.global.utility2","            );","            break;","        // re-init local from example.js","        case 'node':","            local = (local.global.utility2_rollup || require('utility2'))","                .requireExampleJsFromReadme();","            break;","        }","        // export local","        local.global.local = local;","    }());","","","","    // run shared js-env code - function","    (function () {","        return;","    }());","    switch (local.modeJs) {","","","","    // run browser js-env code - function","    case 'browser':","        break;","","","","    // run node js-env code - function","    case 'node':","        break;","    }","","","","    // run shared js-env code - post-init","    (function () {","        return;","    }());","    switch (local.modeJs) {","","","","    // run browser js-env code - post-init","    case 'browser':","        local.testCase_browser_nullCase = local.testCase_browser_nullCase || function (","            options,","            onError","        ) {","        /*","         * this function will test browsers's null-case handling-behavior-behavior","         */","            onError(null, options);","        };","","        // run tests","        local.nop(local.modeTest &&","            document.querySelector('#testRunButton1') &&","            document.querySelector('#testRunButton1').click());","        break;","","","","    // run node js-env code - post-init","    /* istanbul ignore next */","    case 'node':","        local.testCase_buildApidoc_default = local.testCase_buildApidoc_default || function (","            options,","            onError","        ) {","        /*","         * this function will test buildApidoc's default handling-behavior-behavior","         */","            options = { modulePathList: module.paths };","            local.buildApidoc(options, onError);","        };","","        local.testCase_buildApp_default = local.testCase_buildApp_default || function (","            options,","            onError","        ) {","        /*","         * this function will test buildApp's default handling-behavior-behavior","         */","            local.testCase_buildReadme_default(options, local.onErrorThrow);","            local.testCase_buildLib_default(options, local.onErrorThrow);","            local.testCase_buildTest_default(options, local.onErrorThrow);","            local.testCase_buildCustomOrg_default(options, local.onErrorThrow);","            options = [];","            local.buildApp(options, onError);","        };","","        local.testCase_buildCustomOrg_default = local.testCase_buildCustomOrg_default ||","            function (options, onError) {","            /*","             * this function will test buildCustomOrg's default handling-behavior","             */","                options = {};","                local.buildCustomOrg(options, onError);","            };","","        local.testCase_buildLib_default = local.testCase_buildLib_default || function (","            options,","            onError","        ) {","        /*","         * this function will test buildLib's default handling-behavior","         */","            options = {};","            local.buildLib(options, onError);","        };","","        local.testCase_buildReadme_default = local.testCase_buildReadme_default || function (","            options,","            onError","        ) {","        /*","         * this function will test buildReadme's default handling-behavior-behavior","         */","            options = {};","            local.buildReadme(options, onError);","        };","","        local.testCase_buildTest_default = local.testCase_buildTest_default || function (","            options,","            onError","        ) {","        /*","         * this function will test buildTest's default handling-behavior","         */","            options = {};","            local.buildTest(options, onError);","        };","","        local.testCase_webpage_default = local.testCase_webpage_default || function (","            options,","            onError","        ) {","        /*","         * this function will test webpage's default handling-behavior","         */","            options = { modeCoverageMerge: true, url: local.serverLocalHost + '?modeTest=1' };","            local.browserTest(options, onError);","        };","","        // run test-server","        local.testRunServer(local);","        break;","    }","}());",""],"l":{"12":2,"14":2,"19":2,"21":2,"23":2,"24":2,"25":2,"30":1,"37":2,"40":2,"43":1,"47":1,"50":1,"52":1,"55":2,"61":2,"62":2,"64":2,"70":1,"76":1,"82":2,"83":2,"85":2,"91":1,"98":1,"102":1,"105":1,"112":1,"119":1,"120":1,"123":1,"130":1,"131":1,"132":1,"133":1,"134":1,"135":1,"138":1,"143":2,"144":2,"147":1,"154":2,"155":2,"158":1,"165":2,"166":2,"169":1,"176":2,"177":2,"180":1,"187":1,"188":1,"192":1,"193":1}},"/home/travis/build/npmtest/node-npmtest-actionhero/lib.npmtest_actionhero.js":{"path":"/home/travis/build/npmtest/node-npmtest-actionhero/lib.npmtest_actionhero.js","s":{"1":2,"2":2,"3":2,"4":2,"5":2,"6":2,"7":2,"8":1,"9":2,"10":2,"11":2,"12":2,"13":1,"14":1,"15":1,"16":1},"b":{"1":[2,1,1,1],"2":[1,1,1,1],"3":[1,1],"4":[2,2],"5":[1,1]},"f":{"1":2,"2":2,"3":2},"fnMap":{"1":{"name":"(anonymous_1)","line":12,"loc":{"start":{"line":12,"column":1},"end":{"line":12,"column":13}}},"2":{"name":"(anonymous_2)","line":19,"loc":{"start":{"line":19,"column":5},"end":{"line":19,"column":17}}},"3":{"name":"(anonymous_3)","line":23,"loc":{"start":{"line":23,"column":24},"end":{"line":23,"column":36}}}},"statementMap":{"1":{"start":{"line":12,"column":0},"end":{"line":53,"column":5}},"2":{"start":{"line":14,"column":4},"end":{"line":14,"column":14}},"3":{"start":{"line":19,"column":4},"end":{"line":52,"column":9}},"4":{"start":{"line":21,"column":8},"end":{"line":21,"column":19}},"5":{"start":{"line":23,"column":8},"end":{"line":35,"column":13}},"6":{"start":{"line":24,"column":12},"end":{"line":34,"column":13}},"7":{"start":{"line":25,"column":16},"end":{"line":28,"column":30}},"8":{"start":{"line":30,"column":16},"end":{"line":33,"column":27}},"9":{"start":{"line":37,"column":8},"end":{"line":39,"column":21}},"10":{"start":{"line":41,"column":8},"end":{"line":41,"column":54}},"11":{"start":{"line":43,"column":8},"end":{"line":43,"column":55}},"12":{"start":{"line":45,"column":8},"end":{"line":51,"column":9}},"13":{"start":{"line":46,"column":12},"end":{"line":46,"column":61}},"14":{"start":{"line":48,"column":12},"end":{"line":48,"column":35}},"15":{"start":{"line":49,"column":12},"end":{"line":49,"column":49}},"16":{"start":{"line":50,"column":12},"end":{"line":50,"column":43}}},"branchMap":{"1":{"line":25,"type":"binary-expr","locations":[{"start":{"line":25,"column":23},"end":{"line":25,"column":62}},{"start":{"line":26,"column":20},"end":{"line":26,"column":70}},{"start":{"line":27,"column":20},"end":{"line":27,"column":71}},{"start":{"line":28,"column":20},"end":{"line":28,"column":29}}]},"2":{"line":30,"type":"binary-expr","locations":[{"start":{"line":30,"column":23},"end":{"line":30,"column":37}},{"start":{"line":31,"column":20},"end":{"line":31,"column":61}},{"start":{"line":32,"column":20},"end":{"line":32,"column":70}},{"start":{"line":33,"column":20},"end":{"line":33,"column":26}}]},"3":{"line":37,"type":"cond-expr","locations":[{"start":{"line":38,"column":14},"end":{"line":38,"column":20}},{"start":{"line":39,"column":14},"end":{"line":39,"column":20}}]},"4":{"line":41,"type":"binary-expr","locations":[{"start":{"line":41,"column":16},"end":{"line":41,"column":44}},{"start":{"line":41,"column":48},"end":{"line":41,"column":53}}]},"5":{"line":45,"type":"if","locations":[{"start":{"line":45,"column":8},"end":{"line":45,"column":8}},{"start":{"line":45,"column":8},"end":{"line":45,"column":8}}]}},"code":["/* istanbul instrument in package npmtest_actionhero */","/*jslint","    bitwise: true,","    browser: true,","    maxerr: 8,","    maxlen: 96,","    node: true,","    nomen: true,","    regexp: true,","    stupid: true","*/","(function () {","    'use strict';","    var local;","","","","    // run shared js-env code - pre-init","    (function () {","        // init local","        local = {};","        // init modeJs","        local.modeJs = (function () {","            try {","                return typeof navigator.userAgent === 'string' &&","                    typeof document.querySelector('body') === 'object' &&","                    typeof XMLHttpRequest.prototype.open === 'function' &&","                    'browser';","            } catch (errorCaughtBrowser) {","                return module.exports &&","                    typeof process.versions.node === 'string' &&","                    typeof require('http').createServer === 'function' &&","                    'node';","            }","        }());","        // init global","        local.global = local.modeJs === 'browser'","            ? window","            : global;","        // init utility2_rollup","        local = local.global.utility2_rollup || local;","        // init lib","        local.local = local.npmtest_actionhero = local;","        // init exports","        if (local.modeJs === 'browser') {","            local.global.utility2_npmtest_actionhero = local;","        } else {","            module.exports = local;","            module.exports.__dirname = __dirname;","            module.exports.module = module;","        }","    }());","}());",""],"l":{"12":2,"14":2,"19":2,"21":2,"23":2,"24":2,"25":2,"30":1,"37":2,"41":2,"43":2,"45":2,"46":1,"48":1,"49":1,"50":1}},"/home/travis/build/npmtest/node-npmtest-actionhero/example.js":{"path":"/home/travis/build/npmtest/node-npmtest-actionhero/example.js","s":{"1":2,"2":2,"3":2,"4":2,"5":2,"6":2,"7":2,"8":1,"9":2,"10":2,"11":2,"12":2,"13":1,"14":2,"15":2,"16":2,"17":2,"18":2,"19":0,"20":2,"21":1,"22":1,"23":1,"24":1,"25":1,"26":0,"27":0,"28":1,"29":1,"30":2,"31":0,"32":0,"33":0,"34":1,"35":2,"36":2,"37":3,"38":3,"39":3,"40":3,"41":0,"42":3,"43":3,"44":3,"45":1,"46":3,"47":1,"48":1,"49":1,"50":1,"51":1,"52":1,"53":1,"54":1,"55":1,"56":1,"57":0,"58":1,"59":6,"60":6,"61":1,"62":2,"63":0,"64":2,"65":1,"66":1,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0},"b":{"1":[2,1,1,1],"2":[1,1,1,1],"3":[1,1],"4":[2,2],"5":[1,1],"6":[1,1],"7":[2,0],"8":[2,1,1,1,1,1],"9":[0,2,0],"10":[1,1],"11":[2,1,1],"12":[1,0],"13":[0,2],"14":[2,0,0,0,0,0,0],"15":[0,3],"16":[3,0],"17":[1,1],"18":[0,1],"19":[1,2,0,2],"20":[1,0],"21":[1,1],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0]},"f":{"1":2,"2":2,"3":2,"4":2,"5":2,"6":2,"7":3,"8":3,"9":3,"10":1,"11":6,"12":0},"fnMap":{"1":{"name":"(anonymous_1)","line":26,"loc":{"start":{"line":26,"column":1},"end":{"line":26,"column":13}}},"2":{"name":"(anonymous_2)","line":33,"loc":{"start":{"line":33,"column":5},"end":{"line":33,"column":17}}},"3":{"name":"(anonymous_3)","line":37,"loc":{"start":{"line":37,"column":24},"end":{"line":37,"column":36}}},"4":{"name":"(anonymous_4)","line":69,"loc":{"start":{"line":69,"column":31},"end":{"line":69,"column":48}},"skip":true},"5":{"name":"(anonymous_5)","line":78,"loc":{"start":{"line":78,"column":26},"end":{"line":78,"column":45}},"skip":true},"6":{"name":"(anonymous_6)","line":123,"loc":{"start":{"line":123,"column":33},"end":{"line":123,"column":48}},"skip":true},"7":{"name":"(anonymous_7)","line":125,"loc":{"start":{"line":125,"column":27},"end":{"line":125,"column":39}},"skip":true},"8":{"name":"(anonymous_8)","line":133,"loc":{"start":{"line":133,"column":59},"end":{"line":133,"column":74}},"skip":true},"9":{"name":"(anonymous_9)","line":143,"loc":{"start":{"line":143,"column":45},"end":{"line":143,"column":62}},"skip":true},"10":{"name":"(anonymous_10)","line":144,"loc":{"start":{"line":144,"column":73},"end":{"line":144,"column":92}},"skip":true},"11":{"name":"(anonymous_11)","line":272,"loc":{"start":{"line":272,"column":51},"end":{"line":272,"column":77}},"skip":true},"12":{"name":"(anonymous_12)","line":315,"loc":{"start":{"line":315,"column":32},"end":{"line":315,"column":61}},"skip":true}},"statementMap":{"1":{"start":{"line":26,"column":0},"end":{"line":326,"column":5}},"2":{"start":{"line":28,"column":4},"end":{"line":28,"column":14}},"3":{"start":{"line":33,"column":4},"end":{"line":60,"column":9}},"4":{"start":{"line":35,"column":8},"end":{"line":35,"column":19}},"5":{"start":{"line":37,"column":8},"end":{"line":49,"column":13}},"6":{"start":{"line":38,"column":12},"end":{"line":48,"column":13}},"7":{"start":{"line":39,"column":16},"end":{"line":42,"column":30}},"8":{"start":{"line":44,"column":16},"end":{"line":47,"column":27}},"9":{"start":{"line":51,"column":8},"end":{"line":53,"column":21}},"10":{"start":{"line":55,"column":8},"end":{"line":57,"column":45}},"11":{"start":{"line":59,"column":8},"end":{"line":59,"column":35}},"12":{"start":{"line":61,"column":4},"end":{"line":325,"column":5}},"13":{"start":{"line":69,"column":8},"end":{"line":121,"column":10},"skip":true},"14":{"start":{"line":70,"column":12},"end":{"line":88,"column":13},"skip":true},"15":{"start":{"line":76,"column":16},"end":{"line":87,"column":19},"skip":true},"16":{"start":{"line":79,"column":20},"end":{"line":86,"column":21},"skip":true},"17":{"start":{"line":82,"column":24},"end":{"line":82,"column":43},"skip":true},"18":{"start":{"line":83,"column":24},"end":{"line":83,"column":30},"skip":true},"19":{"start":{"line":85,"column":24},"end":{"line":85,"column":49},"skip":true},"20":{"start":{"line":89,"column":12},"end":{"line":107,"column":13},"skip":true},"21":{"start":{"line":92,"column":16},"end":{"line":102,"column":17},"skip":true},"22":{"start":{"line":93,"column":20},"end":{"line":93,"column":86},"skip":true},"23":{"start":{"line":94,"column":20},"end":{"line":95,"column":45},"skip":true},"24":{"start":{"line":96,"column":20},"end":{"line":96,"column":42},"skip":true},"25":{"start":{"line":97,"column":20},"end":{"line":97,"column":48},"skip":true},"26":{"start":{"line":100,"column":20},"end":{"line":100,"column":85},"skip":true},"27":{"start":{"line":101,"column":20},"end":{"line":101,"column":96},"skip":true},"28":{"start":{"line":103,"column":16},"end":{"line":103,"column":22},"skip":true},"29":{"start":{"line":106,"column":16},"end":{"line":106,"column":22},"skip":true},"30":{"start":{"line":108,"column":12},"end":{"line":120,"column":13},"skip":true},"31":{"start":{"line":114,"column":16},"end":{"line":119,"column":17},"skip":true},"32":{"start":{"line":116,"column":20},"end":{"line":116,"column":78},"skip":true},"33":{"start":{"line":118,"column":20},"end":{"line":118,"column":47},"skip":true},"34":{"start":{"line":123,"column":8},"end":{"line":141,"column":11},"skip":true},"35":{"start":{"line":124,"column":12},"end":{"line":124,"column":54},"skip":true},"36":{"start":{"line":125,"column":12},"end":{"line":140,"column":14},"skip":true},"37":{"start":{"line":126,"column":16},"end":{"line":126,"column":28},"skip":true},"38":{"start":{"line":127,"column":16},"end":{"line":127,"column":69},"skip":true},"39":{"start":{"line":128,"column":16},"end":{"line":128,"column":75},"skip":true},"40":{"start":{"line":129,"column":16},"end":{"line":131,"column":17},"skip":true},"41":{"start":{"line":130,"column":20},"end":{"line":130,"column":27},"skip":true},"42":{"start":{"line":133,"column":16},"end":{"line":137,"column":36},"skip":true},"43":{"start":{"line":134,"column":20},"end":{"line":136,"column":55},"skip":true},"44":{"start":{"line":139,"column":16},"end":{"line":139,"column":57},"skip":true},"45":{"start":{"line":143,"column":8},"end":{"line":147,"column":11},"skip":true},"46":{"start":{"line":144,"column":12},"end":{"line":146,"column":15},"skip":true},"47":{"start":{"line":145,"column":16},"end":{"line":145,"column":70},"skip":true},"48":{"start":{"line":149,"column":8},"end":{"line":149,"column":31},"skip":true},"49":{"start":{"line":150,"column":8},"end":{"line":150,"column":14},"skip":true},"50":{"start":{"line":158,"column":8},"end":{"line":158,"column":31},"skip":true},"51":{"start":{"line":160,"column":8},"end":{"line":160,"column":33},"skip":true},"52":{"start":{"line":161,"column":8},"end":{"line":161,"column":37},"skip":true},"53":{"start":{"line":162,"column":8},"end":{"line":162,"column":35},"skip":true},"54":{"start":{"line":164,"column":8},"end":{"line":164,"column":50},"skip":true},"55":{"start":{"line":166,"column":8},"end":{"line":256,"column":2},"skip":true},"56":{"start":{"line":258,"column":8},"end":{"line":286,"column":9},"skip":true},"57":{"start":{"line":259,"column":12},"end":{"line":269,"column":14},"skip":true},"58":{"start":{"line":271,"column":12},"end":{"line":285,"column":19},"skip":true},"59":{"start":{"line":274,"column":20},"end":{"line":274,"column":35},"skip":true},"60":{"start":{"line":275,"column":20},"end":{"line":284,"column":21},"skip":true},"61":{"start":{"line":277,"column":24},"end":{"line":277,"column":64},"skip":true},"62":{"start":{"line":279,"column":24},"end":{"line":279,"column":40},"skip":true},"63":{"start":{"line":281,"column":24},"end":{"line":281,"column":40},"skip":true},"64":{"start":{"line":283,"column":24},"end":{"line":283,"column":39},"skip":true},"65":{"start":{"line":288,"column":8},"end":{"line":290,"column":9},"skip":true},"66":{"start":{"line":289,"column":12},"end":{"line":289,"column":18},"skip":true},"67":{"start":{"line":291,"column":8},"end":{"line":293,"column":54},"skip":true},"68":{"start":{"line":296,"column":8},"end":{"line":301,"column":37},"skip":true},"69":{"start":{"line":303,"column":8},"end":{"line":303,"column":82},"skip":true},"70":{"start":{"line":306,"column":8},"end":{"line":308,"column":9},"skip":true},"71":{"start":{"line":307,"column":12},"end":{"line":307,"column":82},"skip":true},"72":{"start":{"line":310,"column":8},"end":{"line":312,"column":9},"skip":true},"73":{"start":{"line":311,"column":12},"end":{"line":311,"column":18},"skip":true},"74":{"start":{"line":313,"column":8},"end":{"line":313,"column":54},"skip":true},"75":{"start":{"line":314,"column":8},"end":{"line":314,"column":69},"skip":true},"76":{"start":{"line":315,"column":8},"end":{"line":323,"column":36},"skip":true},"77":{"start":{"line":316,"column":12},"end":{"line":316,"column":61},"skip":true},"78":{"start":{"line":317,"column":12},"end":{"line":320,"column":13},"skip":true},"79":{"start":{"line":318,"column":16},"end":{"line":318,"column":75},"skip":true},"80":{"start":{"line":319,"column":16},"end":{"line":319,"column":23},"skip":true},"81":{"start":{"line":321,"column":12},"end":{"line":321,"column":38},"skip":true},"82":{"start":{"line":322,"column":12},"end":{"line":322,"column":27},"skip":true},"83":{"start":{"line":324,"column":8},"end":{"line":324,"column":14},"skip":true}},"branchMap":{"1":{"line":39,"type":"binary-expr","locations":[{"start":{"line":39,"column":23},"end":{"line":39,"column":62}},{"start":{"line":40,"column":20},"end":{"line":40,"column":70}},{"start":{"line":41,"column":20},"end":{"line":41,"column":71}},{"start":{"line":42,"column":20},"end":{"line":42,"column":29}}]},"2":{"line":44,"type":"binary-expr","locations":[{"start":{"line":44,"column":23},"end":{"line":44,"column":37}},{"start":{"line":45,"column":20},"end":{"line":45,"column":61}},{"start":{"line":46,"column":20},"end":{"line":46,"column":70}},{"start":{"line":47,"column":20},"end":{"line":47,"column":26}}]},"3":{"line":51,"type":"cond-expr","locations":[{"start":{"line":52,"column":14},"end":{"line":52,"column":20}},{"start":{"line":53,"column":14},"end":{"line":53,"column":20}}]},"4":{"line":55,"type":"binary-expr","locations":[{"start":{"line":55,"column":16},"end":{"line":55,"column":44}},{"start":{"line":55,"column":49},"end":{"line":57,"column":43}}]},"5":{"line":55,"type":"cond-expr","locations":[{"start":{"line":56,"column":14},"end":{"line":56,"column":54}},{"start":{"line":57,"column":14},"end":{"line":57,"column":43}}]},"6":{"line":61,"type":"switch","locations":[{"start":{"line":68,"column":4},"end":{"line":150,"column":14},"skip":true},{"start":{"line":156,"column":4},"end":{"line":324,"column":14},"skip":true}]},"7":{"line":70,"type":"if","locations":[{"start":{"line":70,"column":12},"end":{"line":70,"column":12},"skip":true},{"start":{"line":70,"column":12},"end":{"line":70,"column":12},"skip":true}]},"8":{"line":70,"type":"binary-expr","locations":[{"start":{"line":70,"column":16},"end":{"line":70,"column":22},"skip":true},{"start":{"line":70,"column":27},"end":{"line":70,"column":32},"skip":true},{"start":{"line":71,"column":20},"end":{"line":71,"column":39},"skip":true},{"start":{"line":72,"column":20},"end":{"line":72,"column":49},"skip":true},{"start":{"line":73,"column":20},"end":{"line":73,"column":58},"skip":true},{"start":{"line":74,"column":20},"end":{"line":74,"column":69},"skip":true}]},"9":{"line":79,"type":"switch","locations":[{"start":{"line":80,"column":20},"end":{"line":80,"column":33},"skip":true},{"start":{"line":81,"column":20},"end":{"line":83,"column":30},"skip":true},{"start":{"line":84,"column":20},"end":{"line":85,"column":49},"skip":true}]},"10":{"line":89,"type":"switch","locations":[{"start":{"line":90,"column":12},"end":{"line":103,"column":22},"skip":true},{"start":{"line":105,"column":12},"end":{"line":106,"column":22},"skip":true}]},"11":{"line":89,"type":"binary-expr","locations":[{"start":{"line":89,"column":20},"end":{"line":89,"column":25},"skip":true},{"start":{"line":89,"column":29},"end":{"line":89,"column":48},"skip":true},{"start":{"line":89,"column":52},"end":{"line":89,"column":74},"skip":true}]},"12":{"line":92,"type":"if","locations":[{"start":{"line":92,"column":16},"end":{"line":92,"column":16},"skip":true},{"start":{"line":92,"column":16},"end":{"line":92,"column":16},"skip":true}]},"13":{"line":108,"type":"if","locations":[{"start":{"line":108,"column":12},"end":{"line":108,"column":12},"skip":true},{"start":{"line":108,"column":12},"end":{"line":108,"column":12},"skip":true}]},"14":{"line":108,"type":"binary-expr","locations":[{"start":{"line":108,"column":16},"end":{"line":108,"column":61},"skip":true},{"start":{"line":108,"column":66},"end":{"line":108,"column":72},"skip":true},{"start":{"line":108,"column":77},"end":{"line":108,"column":82},"skip":true},{"start":{"line":109,"column":20},"end":{"line":109,"column":39},"skip":true},{"start":{"line":110,"column":20},"end":{"line":110,"column":49},"skip":true},{"start":{"line":111,"column":20},"end":{"line":111,"column":58},"skip":true},{"start":{"line":112,"column":20},"end":{"line":112,"column":68},"skip":true}]},"15":{"line":129,"type":"if","locations":[{"start":{"line":129,"column":16},"end":{"line":129,"column":16},"skip":true},{"start":{"line":129,"column":16},"end":{"line":129,"column":16},"skip":true}]},"16":{"line":134,"type":"cond-expr","locations":[{"start":{"line":135,"column":26},"end":{"line":135,"column":29},"skip":true},{"start":{"line":136,"column":26},"end":{"line":136,"column":54},"skip":true}]},"17":{"line":164,"type":"binary-expr","locations":[{"start":{"line":164,"column":27},"end":{"line":164,"column":43},"skip":true},{"start":{"line":164,"column":47},"end":{"line":164,"column":49},"skip":true}]},"18":{"line":258,"type":"if","locations":[{"start":{"line":258,"column":8},"end":{"line":258,"column":8},"skip":true},{"start":{"line":258,"column":8},"end":{"line":258,"column":8},"skip":true}]},"19":{"line":275,"type":"switch","locations":[{"start":{"line":276,"column":20},"end":{"line":277,"column":64},"skip":true},{"start":{"line":278,"column":20},"end":{"line":279,"column":40},"skip":true},{"start":{"line":280,"column":20},"end":{"line":281,"column":40},"skip":true},{"start":{"line":282,"column":20},"end":{"line":283,"column":39},"skip":true}]},"20":{"line":288,"type":"if","locations":[{"start":{"line":288,"column":8},"end":{"line":288,"column":8},"skip":true},{"start":{"line":288,"column":8},"end":{"line":288,"column":8},"skip":true}]},"21":{"line":288,"type":"binary-expr","locations":[{"start":{"line":288,"column":12},"end":{"line":288,"column":40},"skip":true},{"start":{"line":288,"column":44},"end":{"line":288,"column":67},"skip":true}]},"22":{"line":292,"type":"binary-expr","locations":[{"start":{"line":292,"column":12},"end":{"line":292,"column":50},"skip":true},{"start":{"line":293,"column":12},"end":{"line":293,"column":53},"skip":true}]},"23":{"line":297,"type":"binary-expr","locations":[{"start":{"line":297,"column":12},"end":{"line":297,"column":68},"skip":true},{"start":{"line":298,"column":12},"end":{"line":301,"column":36},"skip":true}]},"24":{"line":303,"type":"binary-expr","locations":[{"start":{"line":303,"column":43},"end":{"line":303,"column":75},"skip":true},{"start":{"line":303,"column":79},"end":{"line":303,"column":81},"skip":true}]},"25":{"line":306,"type":"if","locations":[{"start":{"line":306,"column":8},"end":{"line":306,"column":8},"skip":true},{"start":{"line":306,"column":8},"end":{"line":306,"column":8},"skip":true}]},"26":{"line":310,"type":"if","locations":[{"start":{"line":310,"column":8},"end":{"line":310,"column":8},"skip":true},{"start":{"line":310,"column":8},"end":{"line":310,"column":8},"skip":true}]},"27":{"line":313,"type":"binary-expr","locations":[{"start":{"line":313,"column":27},"end":{"line":313,"column":43},"skip":true},{"start":{"line":313,"column":47},"end":{"line":313,"column":53},"skip":true}]},"28":{"line":317,"type":"if","locations":[{"start":{"line":317,"column":12},"end":{"line":317,"column":12},"skip":true},{"start":{"line":317,"column":12},"end":{"line":317,"column":12},"skip":true}]}},"code":["/*","example.js","","quickstart example","","instruction","    1. save this script as example.js","    2. run the shell command:","        $ npm install npmtest-actionhero && PORT=8081 node example.js","    3. play with the browser-demo on http://127.0.0.1:8081","*/","","","","/* istanbul instrument in package npmtest_actionhero */","/*jslint","    bitwise: true,","    browser: true,","    maxerr: 8,","    maxlen: 96,","    node: true,","    nomen: true,","    regexp: true,","    stupid: true","*/","(function () {","    'use strict';","    var local;","","","","    // run shared js-env code - pre-init","    (function () {","        // init local","        local = {};","        // init modeJs","        local.modeJs = (function () {","            try {","                return typeof navigator.userAgent === 'string' &&","                    typeof document.querySelector('body') === 'object' &&","                    typeof XMLHttpRequest.prototype.open === 'function' &&","                    'browser';","            } catch (errorCaughtBrowser) {","                return module.exports &&","                    typeof process.versions.node === 'string' &&","                    typeof require('http').createServer === 'function' &&","                    'node';","            }","        }());","        // init global","        local.global = local.modeJs === 'browser'","            ? window","            : global;","        // init utility2_rollup","        local = local.global.utility2_rollup || (local.modeJs === 'browser'","            ? local.global.utility2_npmtest_actionhero","            : global.utility2_moduleExports);","        // export local","        local.global.local = local;","    }());","    switch (local.modeJs) {","","","","    // post-init","    // run browser js-env code - post-init","    /* istanbul ignore next */","    case 'browser':","        local.testRunBrowser = function (event) {","            if (!event || (event &&","                    event.currentTarget &&","                    event.currentTarget.className &&","                    event.currentTarget.className.includes &&","                    event.currentTarget.className.includes('onreset'))) {","                // reset output","                Array.from(","                    document.querySelectorAll('body > .resettable')","                ).forEach(function (element) {","                    switch (element.tagName) {","                    case 'INPUT':","                    case 'TEXTAREA':","                        element.value = '';","                        break;","                    default:","                        element.textContent = '';","                    }","                });","            }","            switch (event && event.currentTarget && event.currentTarget.id) {","            case 'testRunButton1':","                // show tests","                if (document.querySelector('#testReportDiv1').style.display === 'none') {","                    document.querySelector('#testReportDiv1').style.display = 'block';","                    document.querySelector('#testRunButton1').textContent =","                        'hide internal test';","                    local.modeTest = true;","                    local.testRunDefault(local);","                // hide tests","                } else {","                    document.querySelector('#testReportDiv1').style.display = 'none';","                    document.querySelector('#testRunButton1').textContent = 'run internal test';","                }","                break;","            // custom-case","            default:","                break;","            }","            if (document.querySelector('#inputTextareaEval1') && (!event || (event &&","                    event.currentTarget &&","                    event.currentTarget.className &&","                    event.currentTarget.className.includes &&","                    event.currentTarget.className.includes('oneval')))) {","                // try to eval input-code","                try {","                    /*jslint evil: true*/","                    eval(document.querySelector('#inputTextareaEval1').value);","                } catch (errorCaught) {","                    console.error(errorCaught);","                }","            }","        };","        // log stderr and stdout to #outputTextareaStdout1","        ['error', 'log'].forEach(function (key) {","            console[key + '_original'] = console[key];","            console[key] = function () {","                var element;","                console[key + '_original'].apply(console, arguments);","                element = document.querySelector('#outputTextareaStdout1');","                if (!element) {","                    return;","                }","                // append text to #outputTextareaStdout1","                element.value += Array.from(arguments).map(function (arg) {","                    return typeof arg === 'string'","                        ? arg","                        : JSON.stringify(arg, null, 4);","                }).join(' ') + '\\n';","                // scroll textarea to bottom","                element.scrollTop = element.scrollHeight;","            };","        });","        // init event-handling","        ['change', 'click', 'keyup'].forEach(function (event) {","            Array.from(document.querySelectorAll('.on' + event)).forEach(function (element) {","                element.addEventListener(event, local.testRunBrowser);","            });","        });","        // run tests","        local.testRunBrowser();","        break;","","","","    // run node js-env code - post-init","    /* istanbul ignore next */","    case 'node':","        // export local","        module.exports = local;","        // require modules","        local.fs = require('fs');","        local.http = require('http');","        local.url = require('url');","        // init assets","        local.assetsDict = local.assetsDict || {};","        /* jslint-ignore-begin */","        local.assetsDict['/assets.index.template.html'] = '\\","<!doctype html>\\n\\","<html lang=\"en\">\\n\\","<head>\\n\\","<meta charset=\"UTF-8\">\\n\\","<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\\n\\","<title>{{env.npm_package_name}} (v{{env.npm_package_version}})</title>\\n\\","<style>\\n\\","/*csslint\\n\\","    box-sizing: false,\\n\\","    universal-selector: false\\n\\","*/\\n\\","* {\\n\\","    box-sizing: border-box;\\n\\","}\\n\\","body {\\n\\","    background: #dde;\\n\\","    font-family: Arial, Helvetica, sans-serif;\\n\\","    margin: 2rem;\\n\\","}\\n\\","body > * {\\n\\","    margin-bottom: 1rem;\\n\\","}\\n\\",".utility2FooterDiv {\\n\\","    margin-top: 20px;\\n\\","    text-align: center;\\n\\","}\\n\\","</style>\\n\\","<style>\\n\\","/*csslint\\n\\","*/\\n\\","textarea {\\n\\","    font-family: monospace;\\n\\","    height: 10rem;\\n\\","    width: 100%;\\n\\","}\\n\\","textarea[readonly] {\\n\\","    background: #ddd;\\n\\","}\\n\\","</style>\\n\\","</head>\\n\\","<body>\\n\\","<!-- utility2-comment\\n\\","<div id=\"ajaxProgressDiv1\" style=\"background: #d00; height: 2px; left: 0; margin: 0; padding: 0; position: fixed; top: 0; transition: background 0.5s, width 1.5s; width: 25%;\"></div>\\n\\","utility2-comment -->\\n\\","<h1>\\n\\","<!-- utility2-comment\\n\\","    <a\\n\\","        {{#if env.npm_package_homepage}}\\n\\","        href=\"{{env.npm_package_homepage}}\"\\n\\","        {{/if env.npm_package_homepage}}\\n\\","        target=\"_blank\"\\n\\","    >\\n\\","utility2-comment -->\\n\\","        {{env.npm_package_name}} (v{{env.npm_package_version}})\\n\\","<!-- utility2-comment\\n\\","    </a>\\n\\","utility2-comment -->\\n\\","</h1>\\n\\","<h3>{{env.npm_package_description}}</h3>\\n\\","<!-- utility2-comment\\n\\","<h4><a download href=\"assets.app.js\">download standalone app</a></h4>\\n\\","<button class=\"onclick onreset\" id=\"testRunButton1\">run internal test</button><br>\\n\\","<div id=\"testReportDiv1\" style=\"display: none;\"></div>\\n\\","utility2-comment -->\\n\\","\\n\\","\\n\\","\\n\\","<label>stderr and stdout</label>\\n\\","<textarea class=\"resettable\" id=\"outputTextareaStdout1\" readonly></textarea>\\n\\","<!-- utility2-comment\\n\\","{{#if isRollup}}\\n\\","<script src=\"assets.app.js\"></script>\\n\\","{{#unless isRollup}}\\n\\","utility2-comment -->\\n\\","<script src=\"assets.utility2.rollup.js\"></script>\\n\\","<script src=\"jsonp.utility2._stateInit?callback=window.utility2._stateInit\"></script>\\n\\","<script src=\"assets.npmtest_actionhero.rollup.js\"></script>\\n\\","<script src=\"assets.example.js\"></script>\\n\\","<script src=\"assets.test.js\"></script>\\n\\","<!-- utility2-comment\\n\\","{{/if isRollup}}\\n\\","utility2-comment -->\\n\\","<div class=\"utility2FooterDiv\">\\n\\","    [ this app was created with\\n\\","    <a href=\"https://github.com/kaizhu256/node-utility2\" target=\"_blank\">utility2</a>\\n\\","    ]\\n\\","</div>\\n\\","</body>\\n\\","</html>\\n\\","';","        /* jslint-ignore-end */","        if (local.templateRender) {","            local.assetsDict['/'] = local.templateRender(","                local.assetsDict['/assets.index.template.html'],","                {","                    env: local.objectSetDefault(local.env, {","                        npm_package_description: 'the greatest app in the world!',","                        npm_package_name: 'my-app',","                        npm_package_nameAlias: 'my_app',","                        npm_package_version: '0.0.1'","                    })","                }","            );","        } else {","            local.assetsDict['/'] = local.assetsDict['/assets.index.template.html']","                .replace((/\\{\\{env\\.(\\w+?)\\}\\}/g), function (match0, match1) {","                    // jslint-hack","                    String(match0);","                    switch (match1) {","                    case 'npm_package_description':","                        return 'the greatest app in the world!';","                    case 'npm_package_name':","                        return 'my-app';","                    case 'npm_package_nameAlias':","                        return 'my_app';","                    case 'npm_package_version':","                        return '0.0.1';","                    }","                });","        }","        // run the cli","        if (local.global.utility2_rollup || module !== require.main) {","            break;","        }","        local.assetsDict['/assets.example.js'] =","            local.assetsDict['/assets.example.js'] ||","            local.fs.readFileSync(__filename, 'utf8');","        // bug-workaround - long $npm_package_buildCustomOrg","        /* jslint-ignore-begin */","        local.assetsDict['/assets.npmtest_actionhero.rollup.js'] =","            local.assetsDict['/assets.npmtest_actionhero.rollup.js'] ||","            local.fs.readFileSync(","                local.npmtest_actionhero.__dirname + '/lib.npmtest_actionhero.js',","                'utf8'","            ).replace((/^#!/), '//');","        /* jslint-ignore-end */","        local.assetsDict['/favicon.ico'] = local.assetsDict['/favicon.ico'] || '';","        // if $npm_config_timeout_exit exists,","        // then exit this process after $npm_config_timeout_exit ms","        if (Number(process.env.npm_config_timeout_exit)) {","            setTimeout(process.exit, Number(process.env.npm_config_timeout_exit));","        }","        // start server","        if (local.global.utility2_serverHttp1) {","            break;","        }","        process.env.PORT = process.env.PORT || '8081';","        console.error('server starting on port ' + process.env.PORT);","        local.http.createServer(function (request, response) {","            request.urlParsed = local.url.parse(request.url);","            if (local.assetsDict[request.urlParsed.pathname] !== undefined) {","                response.end(local.assetsDict[request.urlParsed.pathname]);","                return;","            }","            response.statusCode = 404;","            response.end();","        }).listen(process.env.PORT);","        break;","    }","}());",""],"l":{"26":2,"28":2,"33":2,"35":2,"37":2,"38":2,"39":2,"44":1,"51":2,"55":2,"59":2,"61":2,"69":1,"70":2,"76":2,"79":2,"82":2,"83":2,"85":1,"89":2,"92":1,"93":1,"94":1,"96":1,"97":1,"100":1,"101":1,"103":1,"106":1,"108":2,"114":1,"116":1,"118":1,"123":1,"124":2,"125":2,"126":3,"127":3,"128":3,"129":3,"130":1,"133":3,"134":3,"139":3,"143":1,"144":3,"145":1,"149":1,"150":1,"158":1,"160":1,"161":1,"162":1,"164":1,"166":1,"258":1,"259":1,"271":1,"274":6,"275":6,"277":1,"279":2,"281":1,"283":2,"288":1,"289":1,"291":1,"296":1,"303":1,"306":1,"307":1,"310":1,"311":1,"313":1,"314":1,"315":1,"316":1,"317":1,"318":1,"319":1,"321":1,"322":1,"324":1}},"/home/travis/build/npmtest/node-npmtest-actionhero/node_modules/actionhero/actionhero.js":{"path":"/home/travis/build/npmtest/node-npmtest-actionhero/node_modules/actionhero/actionhero.js","s":{"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":1,"17":0,"18":1,"19":1,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":1,"30":0,"31":0,"32":1,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":0,"138":0,"139":0,"140":0,"141":0,"142":0,"143":0,"144":1,"145":0,"146":0,"147":0,"148":0,"149":0,"150":0,"151":0,"152":0,"153":0,"154":0,"155":0,"156":0,"157":0,"158":0,"159":0,"160":0,"161":0,"162":0,"163":1,"164":0,"165":0,"166":0,"167":0,"168":0,"169":0,"170":0,"171":0,"172":0,"173":0,"174":0,"175":0,"176":0,"177":0,"178":0,"179":0,"180":0,"181":0,"182":0,"183":0,"184":0,"185":0,"186":1,"187":0,"188":0,"189":0,"190":0,"191":0,"192":0,"193":0,"194":0,"195":0,"196":0,"197":0,"198":0,"199":0,"200":0,"201":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0],"34":[0,0],"35":[0,0],"36":[0,0],"37":[0,0],"38":[0,0],"39":[0,0],"40":[0,0],"41":[0,0],"42":[0,0],"43":[0,0],"44":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0},"fnMap":{"1":{"name":"(anonymous_1)","line":13,"loc":{"start":{"line":13,"column":19},"end":{"line":13,"column":48}}},"2":{"name":"(anonymous_2)","line":29,"loc":{"start":{"line":29,"column":19},"end":{"line":29,"column":35}}},"3":{"name":"(anonymous_3)","line":35,"loc":{"start":{"line":35,"column":33},"end":{"line":35,"column":55}}},"4":{"name":"(anonymous_4)","line":53,"loc":{"start":{"line":53,"column":19},"end":{"line":53,"column":31}}},"5":{"name":"(anonymous_5)","line":62,"loc":{"start":{"line":62,"column":34},"end":{"line":62,"column":62}}},"6":{"name":"(anonymous_6)","line":246,"loc":{"start":{"line":246,"column":29},"end":{"line":246,"column":57}}},"7":{"name":"(anonymous_7)","line":278,"loc":{"start":{"line":278,"column":28},"end":{"line":278,"column":48}}},"8":{"name":"(anonymous_8)","line":308,"loc":{"start":{"line":308,"column":31},"end":{"line":308,"column":51}}}},"statementMap":{"1":{"start":{"line":8,"column":0},"end":{"line":8,"column":28}},"2":{"start":{"line":9,"column":0},"end":{"line":9,"column":30}},"3":{"start":{"line":13,"column":0},"end":{"line":27,"column":1}},"4":{"start":{"line":14,"column":2},"end":{"line":14,"column":65}},"5":{"start":{"line":14,"column":46},"end":{"line":14,"column":64}},"6":{"start":{"line":15,"column":2},"end":{"line":26,"column":3}},"7":{"start":{"line":16,"column":4},"end":{"line":22,"column":5}},"8":{"start":{"line":17,"column":6},"end":{"line":17,"column":65}},"9":{"start":{"line":18,"column":6},"end":{"line":18,"column":66}},"10":{"start":{"line":18,"column":34},"end":{"line":18,"column":64}},"11":{"start":{"line":20,"column":6},"end":{"line":20,"column":59}},"12":{"start":{"line":21,"column":6},"end":{"line":21,"column":63}},"13":{"start":{"line":21,"column":34},"end":{"line":21,"column":61}},"14":{"start":{"line":23,"column":4},"end":{"line":25,"column":6}},"15":{"start":{"line":24,"column":6},"end":{"line":24,"column":21}},"16":{"start":{"line":29,"column":0},"end":{"line":31,"column":1}},"17":{"start":{"line":30,"column":2},"end":{"line":30,"column":14}},"18":{"start":{"line":33,"column":0},"end":{"line":33,"column":18}},"19":{"start":{"line":35,"column":0},"end":{"line":49,"column":1}},"20":{"start":{"line":36,"column":2},"end":{"line":36,"column":17}},"21":{"start":{"line":37,"column":2},"end":{"line":37,"column":15}},"22":{"start":{"line":38,"column":2},"end":{"line":40,"column":3}},"23":{"start":{"line":39,"column":4},"end":{"line":39,"column":28}},"24":{"start":{"line":41,"column":2},"end":{"line":41,"column":23}},"25":{"start":{"line":42,"column":2},"end":{"line":46,"column":4}},"26":{"start":{"line":43,"column":4},"end":{"line":45,"column":6}},"27":{"start":{"line":44,"column":6},"end":{"line":44,"column":20}},"28":{"start":{"line":48,"column":2},"end":{"line":48,"column":15}},"29":{"start":{"line":53,"column":0},"end":{"line":60,"column":1}},"30":{"start":{"line":54,"column":2},"end":{"line":54,"column":24}},"31":{"start":{"line":55,"column":2},"end":{"line":59,"column":3}},"32":{"start":{"line":62,"column":0},"end":{"line":244,"column":1}},"33":{"start":{"line":63,"column":2},"end":{"line":68,"column":3}},"34":{"start":{"line":64,"column":40},"end":{"line":64,"column":74}},"35":{"start":{"line":65,"column":35},"end":{"line":65,"column":64}},"36":{"start":{"line":66,"column":26},"end":{"line":66,"column":46}},"37":{"start":{"line":67,"column":29},"end":{"line":67,"column":52}},"38":{"start":{"line":70,"column":2},"end":{"line":70,"column":38}},"39":{"start":{"line":72,"column":2},"end":{"line":78,"column":3}},"40":{"start":{"line":73,"column":4},"end":{"line":73,"column":51}},"41":{"start":{"line":74,"column":9},"end":{"line":78,"column":3}},"42":{"start":{"line":75,"column":4},"end":{"line":75,"column":50}},"43":{"start":{"line":76,"column":9},"end":{"line":78,"column":3}},"44":{"start":{"line":77,"column":4},"end":{"line":77,"column":51}},"45":{"start":{"line":80,"column":2},"end":{"line":82,"column":3}},"46":{"start":{"line":81,"column":4},"end":{"line":81,"column":22}},"47":{"start":{"line":81,"column":23},"end":{"line":81,"column":34}},"48":{"start":{"line":83,"column":2},"end":{"line":83,"column":38}},"49":{"start":{"line":83,"column":25},"end":{"line":83,"column":37}},"50":{"start":{"line":84,"column":2},"end":{"line":84,"column":30}},"51":{"start":{"line":85,"column":2},"end":{"line":85,"column":48}},"52":{"start":{"line":87,"column":2},"end":{"line":91,"column":3}},"53":{"start":{"line":93,"column":2},"end":{"line":93,"column":34}},"54":{"start":{"line":94,"column":2},"end":{"line":94,"column":35}},"55":{"start":{"line":95,"column":2},"end":{"line":95,"column":34}},"56":{"start":{"line":97,"column":2},"end":{"line":97,"column":30}},"57":{"start":{"line":98,"column":2},"end":{"line":98,"column":28}},"58":{"start":{"line":99,"column":2},"end":{"line":99,"column":29}},"59":{"start":{"line":100,"column":2},"end":{"line":100,"column":29}},"60":{"start":{"line":103,"column":2},"end":{"line":114,"column":4}},"61":{"start":{"line":107,"column":4},"end":{"line":107,"column":47}},"62":{"start":{"line":108,"column":4},"end":{"line":108,"column":44}},"63":{"start":{"line":109,"column":4},"end":{"line":109,"column":47}},"64":{"start":{"line":110,"column":4},"end":{"line":110,"column":50}},"65":{"start":{"line":111,"column":4},"end":{"line":113,"column":6}},"66":{"start":{"line":112,"column":6},"end":{"line":112,"column":63}},"67":{"start":{"line":116,"column":2},"end":{"line":241,"column":4}},"68":{"start":{"line":117,"column":4},"end":{"line":117,"column":31}},"69":{"start":{"line":118,"column":4},"end":{"line":118,"column":35}},"70":{"start":{"line":119,"column":4},"end":{"line":121,"column":6}},"71":{"start":{"line":120,"column":6},"end":{"line":120,"column":102}},"72":{"start":{"line":123,"column":4},"end":{"line":219,"column":6}},"73":{"start":{"line":131,"column":6},"end":{"line":131,"column":34}},"74":{"start":{"line":132,"column":6},"end":{"line":132,"column":54}},"75":{"start":{"line":133,"column":6},"end":{"line":133,"column":37}},"76":{"start":{"line":134,"column":6},"end":{"line":134,"column":49}},"77":{"start":{"line":135,"column":6},"end":{"line":218,"column":7}},"78":{"start":{"line":137,"column":8},"end":{"line":144,"column":9}},"79":{"start":{"line":140,"column":10},"end":{"line":140,"column":43}},"80":{"start":{"line":142,"column":10},"end":{"line":142,"column":53}},"81":{"start":{"line":143,"column":10},"end":{"line":143,"column":56}},"82":{"start":{"line":146,"column":8},"end":{"line":161,"column":9}},"83":{"start":{"line":147,"column":10},"end":{"line":150,"column":12}},"84":{"start":{"line":148,"column":12},"end":{"line":148,"column":92}},"85":{"start":{"line":149,"column":12},"end":{"line":149,"column":39}},"86":{"start":{"line":152,"column":10},"end":{"line":160,"column":11}},"87":{"start":{"line":153,"column":12},"end":{"line":153,"column":125}},"88":{"start":{"line":153,"column":54},"end":{"line":153,"column":124}},"89":{"start":{"line":154,"column":12},"end":{"line":157,"column":14}},"90":{"start":{"line":155,"column":14},"end":{"line":155,"column":104}},"91":{"start":{"line":155,"column":20},"end":{"line":155,"column":89}},"92":{"start":{"line":156,"column":14},"end":{"line":156,"column":25}},"93":{"start":{"line":159,"column":12},"end":{"line":159,"column":18}},"94":{"start":{"line":163,"column":8},"end":{"line":173,"column":9}},"95":{"start":{"line":164,"column":10},"end":{"line":172,"column":11}},"96":{"start":{"line":165,"column":12},"end":{"line":165,"column":126}},"97":{"start":{"line":165,"column":54},"end":{"line":165,"column":125}},"98":{"start":{"line":166,"column":12},"end":{"line":169,"column":14}},"99":{"start":{"line":167,"column":14},"end":{"line":167,"column":83}},"100":{"start":{"line":168,"column":14},"end":{"line":168,"column":25}},"101":{"start":{"line":171,"column":12},"end":{"line":171,"column":18}},"102":{"start":{"line":175,"column":8},"end":{"line":185,"column":9}},"103":{"start":{"line":176,"column":10},"end":{"line":184,"column":11}},"104":{"start":{"line":177,"column":12},"end":{"line":177,"column":126}},"105":{"start":{"line":177,"column":54},"end":{"line":177,"column":125}},"106":{"start":{"line":178,"column":12},"end":{"line":181,"column":14}},"107":{"start":{"line":179,"column":14},"end":{"line":179,"column":83}},"108":{"start":{"line":180,"column":14},"end":{"line":180,"column":25}},"109":{"start":{"line":183,"column":12},"end":{"line":183,"column":18}},"110":{"start":{"line":187,"column":8},"end":{"line":189,"column":9}},"111":{"start":{"line":188,"column":10},"end":{"line":188,"column":89}},"112":{"start":{"line":190,"column":8},"end":{"line":192,"column":9}},"113":{"start":{"line":191,"column":10},"end":{"line":191,"column":91}},"114":{"start":{"line":193,"column":8},"end":{"line":195,"column":9}},"115":{"start":{"line":194,"column":10},"end":{"line":194,"column":89}},"116":{"start":{"line":197,"column":8},"end":{"line":199,"column":9}},"117":{"start":{"line":198,"column":10},"end":{"line":198,"column":83}},"118":{"start":{"line":200,"column":8},"end":{"line":202,"column":9}},"119":{"start":{"line":201,"column":10},"end":{"line":201,"column":85}},"120":{"start":{"line":203,"column":8},"end":{"line":205,"column":9}},"121":{"start":{"line":204,"column":10},"end":{"line":204,"column":83}},"122":{"start":{"line":207,"column":8},"end":{"line":209,"column":9}},"123":{"start":{"line":208,"column":10},"end":{"line":208,"column":97}},"124":{"start":{"line":211,"column":8},"end":{"line":213,"column":9}},"125":{"start":{"line":212,"column":10},"end":{"line":212,"column":100}},"126":{"start":{"line":215,"column":8},"end":{"line":217,"column":9}},"127":{"start":{"line":216,"column":10},"end":{"line":216,"column":97}},"128":{"start":{"line":222,"column":4},"end":{"line":222,"column":77}},"129":{"start":{"line":223,"column":4},"end":{"line":223,"column":79}},"130":{"start":{"line":224,"column":4},"end":{"line":224,"column":77}},"131":{"start":{"line":226,"column":4},"end":{"line":238,"column":6}},"132":{"start":{"line":227,"column":6},"end":{"line":237,"column":8}},"133":{"start":{"line":228,"column":8},"end":{"line":228,"column":35}},"134":{"start":{"line":230,"column":8},"end":{"line":235,"column":9}},"135":{"start":{"line":231,"column":10},"end":{"line":231,"column":127}},"136":{"start":{"line":231,"column":56},"end":{"line":231,"column":126}},"137":{"start":{"line":232,"column":10},"end":{"line":234,"column":12}},"138":{"start":{"line":233,"column":12},"end":{"line":233,"column":27}},"139":{"start":{"line":236,"column":8},"end":{"line":236,"column":32}},"140":{"start":{"line":240,"column":4},"end":{"line":240,"column":99}},"141":{"start":{"line":240,"column":54},"end":{"line":240,"column":97}},"142":{"start":{"line":243,"column":2},"end":{"line":243,"column":95}},"143":{"start":{"line":243,"column":54},"end":{"line":243,"column":93}},"144":{"start":{"line":246,"column":0},"end":{"line":276,"column":1}},"145":{"start":{"line":247,"column":2},"end":{"line":249,"column":3}},"146":{"start":{"line":248,"column":4},"end":{"line":248,"column":22}},"147":{"start":{"line":248,"column":23},"end":{"line":248,"column":34}},"148":{"start":{"line":251,"column":2},"end":{"line":267,"column":3}},"149":{"start":{"line":252,"column":4},"end":{"line":252,"column":27}},"150":{"start":{"line":254,"column":4},"end":{"line":264,"column":6}},"151":{"start":{"line":255,"column":6},"end":{"line":255,"column":46}},"152":{"start":{"line":256,"column":6},"end":{"line":260,"column":7}},"153":{"start":{"line":257,"column":8},"end":{"line":257,"column":61}},"154":{"start":{"line":259,"column":8},"end":{"line":259,"column":63}},"155":{"start":{"line":262,"column":6},"end":{"line":262,"column":18}},"156":{"start":{"line":263,"column":6},"end":{"line":263,"column":30}},"157":{"start":{"line":266,"column":4},"end":{"line":266,"column":95}},"158":{"start":{"line":266,"column":55},"end":{"line":266,"column":93}},"159":{"start":{"line":269,"column":2},"end":{"line":275,"column":3}},"160":{"start":{"line":270,"column":4},"end":{"line":270,"column":12}},"161":{"start":{"line":272,"column":4},"end":{"line":274,"column":6}},"162":{"start":{"line":273,"column":6},"end":{"line":273,"column":14}},"163":{"start":{"line":278,"column":0},"end":{"line":306,"column":1}},"164":{"start":{"line":279,"column":2},"end":{"line":305,"column":3}},"165":{"start":{"line":280,"column":4},"end":{"line":280,"column":32}},"166":{"start":{"line":281,"column":4},"end":{"line":281,"column":28}},"167":{"start":{"line":282,"column":4},"end":{"line":282,"column":32}},"168":{"start":{"line":284,"column":4},"end":{"line":284,"column":88}},"169":{"start":{"line":286,"column":4},"end":{"line":297,"column":6}},"170":{"start":{"line":287,"column":6},"end":{"line":287,"column":32}},"171":{"start":{"line":288,"column":6},"end":{"line":288,"column":34}},"172":{"start":{"line":289,"column":6},"end":{"line":289,"column":57}},"173":{"start":{"line":290,"column":6},"end":{"line":290,"column":34}},"174":{"start":{"line":291,"column":6},"end":{"line":291,"column":34}},"175":{"start":{"line":293,"column":6},"end":{"line":293,"column":28}},"176":{"start":{"line":294,"column":6},"end":{"line":296,"column":8}},"177":{"start":{"line":295,"column":8},"end":{"line":295,"column":72}},"178":{"start":{"line":295,"column":46},"end":{"line":295,"column":71}},"179":{"start":{"line":299,"column":4},"end":{"line":299,"column":93}},"180":{"start":{"line":299,"column":54},"end":{"line":299,"column":91}},"181":{"start":{"line":300,"column":9},"end":{"line":305,"column":3}},"182":{"start":{"line":303,"column":4},"end":{"line":303,"column":91}},"183":{"start":{"line":303,"column":24},"end":{"line":303,"column":90}},"184":{"start":{"line":304,"column":4},"end":{"line":304,"column":68}},"185":{"start":{"line":304,"column":42},"end":{"line":304,"column":67}},"186":{"start":{"line":308,"column":0},"end":{"line":323,"column":1}},"187":{"start":{"line":309,"column":2},"end":{"line":322,"column":3}},"188":{"start":{"line":310,"column":4},"end":{"line":316,"column":6}},"189":{"start":{"line":311,"column":6},"end":{"line":311,"column":49}},"190":{"start":{"line":311,"column":19},"end":{"line":311,"column":48}},"191":{"start":{"line":312,"column":6},"end":{"line":315,"column":8}},"192":{"start":{"line":313,"column":8},"end":{"line":313,"column":51}},"193":{"start":{"line":313,"column":21},"end":{"line":313,"column":50}},"194":{"start":{"line":314,"column":8},"end":{"line":314,"column":72}},"195":{"start":{"line":314,"column":46},"end":{"line":314,"column":71}},"196":{"start":{"line":318,"column":4},"end":{"line":321,"column":6}},"197":{"start":{"line":319,"column":6},"end":{"line":319,"column":49}},"198":{"start":{"line":319,"column":19},"end":{"line":319,"column":48}},"199":{"start":{"line":320,"column":6},"end":{"line":320,"column":70}},"200":{"start":{"line":320,"column":44},"end":{"line":320,"column":69}},"201":{"start":{"line":325,"column":0},"end":{"line":325,"column":27}}},"branchMap":{"1":{"line":14,"type":"if","locations":[{"start":{"line":14,"column":2},"end":{"line":14,"column":2}},{"start":{"line":14,"column":2},"end":{"line":14,"column":2}}]},"2":{"line":14,"type":"binary-expr","locations":[{"start":{"line":14,"column":6},"end":{"line":14,"column":12}},{"start":{"line":14,"column":16},"end":{"line":14,"column":42}}]},"3":{"line":15,"type":"if","locations":[{"start":{"line":15,"column":2},"end":{"line":15,"column":2}},{"start":{"line":15,"column":2},"end":{"line":15,"column":2}}]},"4":{"line":16,"type":"if","locations":[{"start":{"line":16,"column":4},"end":{"line":16,"column":4}},{"start":{"line":16,"column":4},"end":{"line":16,"column":4}}]},"5":{"line":72,"type":"if","locations":[{"start":{"line":72,"column":2},"end":{"line":72,"column":2}},{"start":{"line":72,"column":2},"end":{"line":72,"column":2}}]},"6":{"line":74,"type":"if","locations":[{"start":{"line":74,"column":9},"end":{"line":74,"column":9}},{"start":{"line":74,"column":9},"end":{"line":74,"column":9}}]},"7":{"line":76,"type":"if","locations":[{"start":{"line":76,"column":9},"end":{"line":76,"column":9}},{"start":{"line":76,"column":9},"end":{"line":76,"column":9}}]},"8":{"line":80,"type":"if","locations":[{"start":{"line":80,"column":2},"end":{"line":80,"column":2}},{"start":{"line":80,"column":2},"end":{"line":80,"column":2}}]},"9":{"line":80,"type":"binary-expr","locations":[{"start":{"line":80,"column":6},"end":{"line":80,"column":15}},{"start":{"line":80,"column":19},"end":{"line":80,"column":47}}]},"10":{"line":83,"type":"if","locations":[{"start":{"line":83,"column":2},"end":{"line":83,"column":2}},{"start":{"line":83,"column":2},"end":{"line":83,"column":2}}]},"11":{"line":135,"type":"if","locations":[{"start":{"line":135,"column":6},"end":{"line":135,"column":6}},{"start":{"line":135,"column":6},"end":{"line":135,"column":6}}]},"12":{"line":137,"type":"if","locations":[{"start":{"line":137,"column":8},"end":{"line":137,"column":8}},{"start":{"line":137,"column":8},"end":{"line":137,"column":8}}]},"13":{"line":137,"type":"binary-expr","locations":[{"start":{"line":137,"column":12},"end":{"line":137,"column":42}},{"start":{"line":138,"column":11},"end":{"line":138,"column":71}},{"start":{"line":139,"column":11},"end":{"line":139,"column":72}}]},"14":{"line":152,"type":"if","locations":[{"start":{"line":152,"column":10},"end":{"line":152,"column":10}},{"start":{"line":152,"column":10},"end":{"line":152,"column":10}}]},"15":{"line":153,"type":"if","locations":[{"start":{"line":153,"column":12},"end":{"line":153,"column":12}},{"start":{"line":153,"column":12},"end":{"line":153,"column":12}}]},"16":{"line":164,"type":"if","locations":[{"start":{"line":164,"column":10},"end":{"line":164,"column":10}},{"start":{"line":164,"column":10},"end":{"line":164,"column":10}}]},"17":{"line":165,"type":"if","locations":[{"start":{"line":165,"column":12},"end":{"line":165,"column":12}},{"start":{"line":165,"column":12},"end":{"line":165,"column":12}}]},"18":{"line":176,"type":"if","locations":[{"start":{"line":176,"column":10},"end":{"line":176,"column":10}},{"start":{"line":176,"column":10},"end":{"line":176,"column":10}}]},"19":{"line":177,"type":"if","locations":[{"start":{"line":177,"column":12},"end":{"line":177,"column":12}},{"start":{"line":177,"column":12},"end":{"line":177,"column":12}}]},"20":{"line":187,"type":"if","locations":[{"start":{"line":187,"column":8},"end":{"line":187,"column":8}},{"start":{"line":187,"column":8},"end":{"line":187,"column":8}}]},"21":{"line":190,"type":"if","locations":[{"start":{"line":190,"column":8},"end":{"line":190,"column":8}},{"start":{"line":190,"column":8},"end":{"line":190,"column":8}}]},"22":{"line":193,"type":"if","locations":[{"start":{"line":193,"column":8},"end":{"line":193,"column":8}},{"start":{"line":193,"column":8},"end":{"line":193,"column":8}}]},"23":{"line":197,"type":"if","locations":[{"start":{"line":197,"column":8},"end":{"line":197,"column":8}},{"start":{"line":197,"column":8},"end":{"line":197,"column":8}}]},"24":{"line":200,"type":"if","locations":[{"start":{"line":200,"column":8},"end":{"line":200,"column":8}},{"start":{"line":200,"column":8},"end":{"line":200,"column":8}}]},"25":{"line":203,"type":"if","locations":[{"start":{"line":203,"column":8},"end":{"line":203,"column":8}},{"start":{"line":203,"column":8},"end":{"line":203,"column":8}}]},"26":{"line":207,"type":"if","locations":[{"start":{"line":207,"column":8},"end":{"line":207,"column":8}},{"start":{"line":207,"column":8},"end":{"line":207,"column":8}}]},"27":{"line":211,"type":"if","locations":[{"start":{"line":211,"column":8},"end":{"line":211,"column":8}},{"start":{"line":211,"column":8},"end":{"line":211,"column":8}}]},"28":{"line":215,"type":"if","locations":[{"start":{"line":215,"column":8},"end":{"line":215,"column":8}},{"start":{"line":215,"column":8},"end":{"line":215,"column":8}}]},"29":{"line":230,"type":"if","locations":[{"start":{"line":230,"column":8},"end":{"line":230,"column":8}},{"start":{"line":230,"column":8},"end":{"line":230,"column":8}}]},"30":{"line":247,"type":"if","locations":[{"start":{"line":247,"column":2},"end":{"line":247,"column":2}},{"start":{"line":247,"column":2},"end":{"line":247,"column":2}}]},"31":{"line":247,"type":"binary-expr","locations":[{"start":{"line":247,"column":6},"end":{"line":247,"column":15}},{"start":{"line":247,"column":19},"end":{"line":247,"column":47}}]},"32":{"line":256,"type":"if","locations":[{"start":{"line":256,"column":6},"end":{"line":256,"column":6}},{"start":{"line":256,"column":6},"end":{"line":256,"column":6}}]},"33":{"line":269,"type":"if","locations":[{"start":{"line":269,"column":2},"end":{"line":269,"column":2}},{"start":{"line":269,"column":2},"end":{"line":269,"column":2}}]},"34":{"line":279,"type":"if","locations":[{"start":{"line":279,"column":2},"end":{"line":279,"column":2}},{"start":{"line":279,"column":2},"end":{"line":279,"column":2}}]},"35":{"line":295,"type":"if","locations":[{"start":{"line":295,"column":8},"end":{"line":295,"column":8}},{"start":{"line":295,"column":8},"end":{"line":295,"column":8}}]},"36":{"line":300,"type":"if","locations":[{"start":{"line":300,"column":9},"end":{"line":300,"column":9}},{"start":{"line":300,"column":9},"end":{"line":300,"column":9}}]},"37":{"line":303,"type":"if","locations":[{"start":{"line":303,"column":4},"end":{"line":303,"column":4}},{"start":{"line":303,"column":4},"end":{"line":303,"column":4}}]},"38":{"line":304,"type":"if","locations":[{"start":{"line":304,"column":4},"end":{"line":304,"column":4}},{"start":{"line":304,"column":4},"end":{"line":304,"column":4}}]},"39":{"line":309,"type":"if","locations":[{"start":{"line":309,"column":2},"end":{"line":309,"column":2}},{"start":{"line":309,"column":2},"end":{"line":309,"column":2}}]},"40":{"line":311,"type":"if","locations":[{"start":{"line":311,"column":6},"end":{"line":311,"column":6}},{"start":{"line":311,"column":6},"end":{"line":311,"column":6}}]},"41":{"line":313,"type":"if","locations":[{"start":{"line":313,"column":8},"end":{"line":313,"column":8}},{"start":{"line":313,"column":8},"end":{"line":313,"column":8}}]},"42":{"line":314,"type":"if","locations":[{"start":{"line":314,"column":8},"end":{"line":314,"column":8}},{"start":{"line":314,"column":8},"end":{"line":314,"column":8}}]},"43":{"line":319,"type":"if","locations":[{"start":{"line":319,"column":6},"end":{"line":319,"column":6}},{"start":{"line":319,"column":6},"end":{"line":319,"column":6}}]},"44":{"line":320,"type":"if","locations":[{"start":{"line":320,"column":6},"end":{"line":320,"column":6}},{"start":{"line":320,"column":6},"end":{"line":320,"column":6}}]}},"code":["'use strict'","","// //////////////////////////////////////////////////////////////////////////","// actionhero framework in node.js","// http://www.actionherojs.com","// https://github.com/actionhero/actionhero","","const path = require('path')","const async = require('async')","","// HELPERS ///","","const fatalError = function (api, errors, type) {","  if (errors && !(errors instanceof Array)) { errors = [errors] }","  if (errors) {","    if (api.log) {","      api.log(['Error with initializer step: %s', type], 'emerg')","      errors.forEach((error) => { api.log(error.stack, 'emerg') })","    } else {","      console.error('Error with initializer step: ' + type)","      errors.forEach((error) => { console.error(error.stack) })","    }","    api.commands.stop.call(api, () => {","      process.exit(1)","    })","  }","}","","const sortNumber = function (a, b) {","  return a - b","}","","let startCount = 0","","const flattenOrderedInitialzer = function (collection) {","  let output = []","  let keys = []","  for (let key in collection) {","    keys.push(parseInt(key))","  }","  keys.sort(sortNumber)","  keys.forEach((key) => {","    collection[key].forEach((d) => {","      output.push(d)","    })","  })","","  return output","}","","// ACTIONHERO //","","const actionhero = function () {","  this.initializers = {}","  this.api = {","    running: false,","    initialized: false,","    shuttingDown: false","  }","}","","actionhero.prototype.initialize = function (params, callback) {","  this.api.commands = {","    initialize: (params, callback) => { this.initialize(params, callback) },","    start: (params, callback) => { this.start(params, callback) },","    stop: (callback) => { this.stop(callback) },","    restart: (callback) => { this.restart(callback) }","  }","","  this.api.projectRoot = process.cwd()","","  if (process.env.project_root) {","    this.api.projectRoot = process.env.project_root","  } else if (process.env.projectRoot) {","    this.api.projectRoot = process.env.projectRoot","  } else if (process.env.PROJECT_ROOT) {","    this.api.projectRoot = process.env.PROJECT_ROOT","  }","","  if (!callback && typeof params === 'function') {","    callback = params; params = {}","  }","  if (params === null) { params = {} }","  this.startingParams = params","  this.api._startingParams = this.startingParams","","  this.api.initializerDefaults = {","    load: 1000,","    start: 1000,","    stop: 1000","  }","","  let loadInitializerRankings = {}","  let startInitializerRankings = {}","  let stopInitializerRankings = {}","","  this.configInitializers = []","  this.loadInitializers = []","  this.startInitializers = []","  this.stopInitializers = [];","","  // we need to load the config first","  [","    path.resolve(__dirname, 'initializers', 'utils.js'),","    path.resolve(__dirname, 'initializers', 'config.js')","  ].forEach((file) => {","    let filename = file.replace(/^.*[\\\\/]/, '')","    let initializer = filename.split('.')[0]","    delete require.cache[require.resolve(file)]","    this.initializers[initializer] = require(file)","    this.configInitializers.push((next) => {","      this.initializers[initializer].initialize(this.api, next)","    })","  })","","  this.configInitializers.push(() => {","    let customInitializers = []","    let duplicatedInitializers = []","    this.api.config.general.paths.initializer.forEach((startPath) => {","      customInitializers = customInitializers.concat(this.api.utils.recursiveDirectoryGlob(startPath))","    })","    // load all other initializers","    this.api.utils.arrayUniqueify(","      this.api.utils.recursiveDirectoryGlob(path.join(__dirname, 'initializers'))","      .sort()","      .concat(","        customInitializers","        .sort()","      )","    ).forEach((f) => {","      let file = path.normalize(f)","      let initializer = path.basename(f).split('.')[0]","      let fileParts = file.split('.')","      let ext = fileParts[(fileParts.length - 1)]","      if (ext === 'js') {","        // check if initializer already exists (exclude utils and config)","        if (this.initializers[initializer] &&","           file !== path.resolve(__dirname, 'initializers', 'utils.js') &&","           file !== path.resolve(__dirname, 'initializers', 'config.js')) {","          duplicatedInitializers.push(file)","        } else {","          delete require.cache[require.resolve(file)]","          this.initializers[initializer] = require(file)","        }","","        const loadFunction = (next) => {","          this.api.watchFileAndAct(file, () => {","            this.api.log(['*** Rebooting due to initializer change (%s) ***', file], 'info')","            this.api.commands.restart()","          })","","          if (typeof this.initializers[initializer].initialize === 'function') {","            if (typeof this.api.log === 'function') { this.api.log(['Loading initializer: %s', initializer], 'debug', file) }","            this.initializers[initializer].initialize(this.api, (error) => {","              try { this.api.log(['Loaded initializer: %s', initializer], 'debug', file) } catch (e) { }","              next(error)","            })","          } else {","            next()","          }","        }","","        const startFunction = (next) => {","          if (typeof this.initializers[initializer].start === 'function') {","            if (typeof this.api.log === 'function') { this.api.log(['Starting initializer: %s', initializer], 'debug', file) }","            this.initializers[initializer].start(this.api, (error) => {","              this.api.log(['Started initializer: %s', initializer], 'debug', file)","              next(error)","            })","          } else {","            next()","          }","        }","","        const stopFunction = (next) => {","          if (typeof this.initializers[initializer].stop === 'function') {","            if (typeof this.api.log === 'function') { this.api.log(['Stopping initializer: %s', initializer], 'debug', file) }","            this.initializers[initializer].stop(this.api, (error) => {","              this.api.log(['Stopped initializer: %s', initializer], 'debug', file)","              next(error)","            })","          } else {","            next()","          }","        }","","        if (this.initializers[initializer].loadPriority === undefined) {","          this.initializers[initializer].loadPriority = this.api.initializerDefaults.load","        }","        if (this.initializers[initializer].startPriority === undefined) {","          this.initializers[initializer].startPriority = this.api.initializerDefaults.start","        }","        if (this.initializers[initializer].stopPriority === undefined) {","          this.initializers[initializer].stopPriority = this.api.initializerDefaults.stop","        }","","        if (loadInitializerRankings[this.initializers[initializer].loadPriority] === undefined) {","          loadInitializerRankings[this.initializers[initializer].loadPriority] = []","        }","        if (startInitializerRankings[this.initializers[initializer].startPriority] === undefined) {","          startInitializerRankings[this.initializers[initializer].startPriority] = []","        }","        if (stopInitializerRankings[this.initializers[initializer].stopPriority] === undefined) {","          stopInitializerRankings[this.initializers[initializer].stopPriority] = []","        }","","        if (this.initializers[initializer].loadPriority > 0) {","          loadInitializerRankings[this.initializers[initializer].loadPriority].push(loadFunction)","        }","","        if (this.initializers[initializer].startPriority > 0) {","          startInitializerRankings[this.initializers[initializer].startPriority].push(startFunction)","        }","","        if (this.initializers[initializer].stopPriority > 0) {","          stopInitializerRankings[this.initializers[initializer].stopPriority].push(stopFunction)","        }","      }","    })","","    // flatten all the ordered initializer methods","    this.loadInitializers = flattenOrderedInitialzer(loadInitializerRankings)","    this.startInitializers = flattenOrderedInitialzer(startInitializerRankings)","    this.stopInitializers = flattenOrderedInitialzer(stopInitializerRankings)","","    this.loadInitializers.push(() => {","      process.nextTick(() => {","        this.api.initialized = true","","        if (duplicatedInitializers.length > 0) {","          duplicatedInitializers.forEach(initializer => this.api.log(['Initializer %s already exists!', initializer], 'error'))","          this.api.commands.stop.call(this.api, () => {","            process.exit(1)","          })","        }","        callback(null, this.api)","      })","    })","","    async.series(this.loadInitializers, (errors) => { fatalError(this.api, errors, 'initialize') })","  })","","  async.series(this.configInitializers, (errors) => { fatalError(this.api, errors, 'config') })","}","","actionhero.prototype.start = function (params, callback) {","  if (!callback && typeof params === 'function') {","    callback = params; params = {}","  }","","  const _start = () => {","    this.api.running = true","","    this.startInitializers.push(() => {","      this.api.bootTime = new Date().getTime()","      if (startCount === 0) {","        this.api.log(['*** ActionHero Started ***'], 'alert')","      } else {","        this.api.log(['*** ActionHero Restarted ***'], 'alert')","      }","","      startCount++","      callback(null, this.api)","    })","","    async.series(this.startInitializers, (errors) => { fatalError(this.api, errors, 'start') })","  }","","  if (this.api.initialized === true) {","    _start()","  } else {","    this.initialize(params, () => {","      _start()","    })","  }","}","","actionhero.prototype.stop = function (callback) {","  if (this.api.running === true) {","    this.api.shuttingDown = true","    this.api.running = false","    this.api.initialized = false","","    this.api.log('Shutting down open servers and stopping task processing...', 'notice')","","    this.stopInitializers.push(() => {","      this.api.unWatchAllFiles()","      this.api.pids.clearPidFile()","      this.api.log('*** ActionHero Stopped ***', 'alert')","      this.api.log('***', 'debug')","      delete this.api.shuttingDown","      // reset initializers to prevent duplicate check on restart","      this.initializers = {}","      process.nextTick(() => {","        if (typeof callback === 'function') { callback(null, this.api) }","      })","    })","","    async.series(this.stopInitializers, (errors) => { fatalError(this.api, errors, 'stop') })","  } else if (this.api.shuttingDown === true) {","    // double sigterm; ignore it","  } else {","    if (this.api.log) { this.api.log('Cannot shut down actionhero, not running', 'error') }","    if (typeof callback === 'function') { callback(null, this.api) }","  }","}","","actionhero.prototype.restart = function (callback) {","  if (this.api.running === true) {","    this.stop((error) => {","      if (error) { this.api.log(error, 'error') }","      this.start(this.startingParams, (error) => {","        if (error) { this.api.log(error, 'error') }","        if (typeof callback === 'function') { callback(null, this.api) }","      })","    })","  } else {","    this.start(this.startingParams, (error) => {","      if (error) { this.api.log(error, 'error') }","      if (typeof callback === 'function') { callback(null, this.api) }","    })","  }","}","","module.exports = actionhero",""],"l":{"8":1,"9":1,"13":1,"14":0,"15":0,"16":0,"17":0,"18":0,"20":0,"21":0,"23":0,"24":0,"29":1,"30":0,"33":1,"35":1,"36":0,"37":0,"38":0,"39":0,"41":0,"42":0,"43":0,"44":0,"48":0,"53":1,"54":0,"55":0,"62":1,"63":0,"64":0,"65":0,"66":0,"67":0,"70":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"80":0,"81":0,"83":0,"84":0,"85":0,"87":0,"93":0,"94":0,"95":0,"97":0,"98":0,"99":0,"100":0,"103":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"116":0,"117":0,"118":0,"119":0,"120":0,"123":0,"131":0,"132":0,"133":0,"134":0,"135":0,"137":0,"140":0,"142":0,"143":0,"146":0,"147":0,"148":0,"149":0,"152":0,"153":0,"154":0,"155":0,"156":0,"159":0,"163":0,"164":0,"165":0,"166":0,"167":0,"168":0,"171":0,"175":0,"176":0,"177":0,"178":0,"179":0,"180":0,"183":0,"187":0,"188":0,"190":0,"191":0,"193":0,"194":0,"197":0,"198":0,"200":0,"201":0,"203":0,"204":0,"207":0,"208":0,"211":0,"212":0,"215":0,"216":0,"222":0,"223":0,"224":0,"226":0,"227":0,"228":0,"230":0,"231":0,"232":0,"233":0,"236":0,"240":0,"243":0,"246":1,"247":0,"248":0,"251":0,"252":0,"254":0,"255":0,"256":0,"257":0,"259":0,"262":0,"263":0,"266":0,"269":0,"270":0,"272":0,"273":0,"278":1,"279":0,"280":0,"281":0,"282":0,"284":0,"286":0,"287":0,"288":0,"289":0,"290":0,"291":0,"293":0,"294":0,"295":0,"299":0,"300":0,"303":0,"304":0,"308":1,"309":0,"310":0,"311":0,"312":0,"313":0,"314":0,"318":0,"319":0,"320":0,"325":1}},"/home/travis/build/npmtest/node-npmtest-actionhero/node_modules/actionhero/actions/cacheTest.js":{"path":"/home/travis/build/npmtest/node-npmtest-actionhero/node_modules/actionhero/actions/cacheTest.js","s":{"1":1,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0},"fnMap":{"1":{"name":"(anonymous_1)","line":25,"loc":{"start":{"line":25,"column":17},"end":{"line":25,"column":30}}},"2":{"name":"(anonymous_2)","line":29,"loc":{"start":{"line":29,"column":17},"end":{"line":29,"column":30}}},"3":{"name":"(anonymous_3)","line":30,"loc":{"start":{"line":30,"column":17},"end":{"line":30,"column":30}}},"4":{"name":"(anonymous_4)","line":38,"loc":{"start":{"line":38,"column":7},"end":{"line":38,"column":34}}},"5":{"name":"(anonymous_5)","line":44,"loc":{"start":{"line":44,"column":37},"end":{"line":44,"column":60}}},"6":{"name":"(anonymous_6)","line":47,"loc":{"start":{"line":47,"column":21},"end":{"line":47,"column":60}}},"7":{"name":"(anonymous_7)","line":50,"loc":{"start":{"line":50,"column":28},"end":{"line":50,"column":87}}},"8":{"name":"(anonymous_8)","line":59,"loc":{"start":{"line":59,"column":33},"end":{"line":59,"column":56}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":68,"column":1}},"2":{"start":{"line":25,"column":32},"end":{"line":25,"column":49}},"3":{"start":{"line":29,"column":32},"end":{"line":29,"column":49}},"4":{"start":{"line":31,"column":8},"end":{"line":33,"column":30}},"5":{"start":{"line":32,"column":10},"end":{"line":32,"column":60}},"6":{"start":{"line":33,"column":17},"end":{"line":33,"column":29}},"7":{"start":{"line":39,"column":4},"end":{"line":39,"column":46}},"8":{"start":{"line":40,"column":4},"end":{"line":40,"column":35}},"9":{"start":{"line":42,"column":4},"end":{"line":42,"column":39}},"10":{"start":{"line":44,"column":4},"end":{"line":65,"column":6}},"11":{"start":{"line":45,"column":6},"end":{"line":45,"column":39}},"12":{"start":{"line":45,"column":19},"end":{"line":45,"column":38}},"13":{"start":{"line":46,"column":6},"end":{"line":46,"column":52}},"14":{"start":{"line":47,"column":6},"end":{"line":64,"column":8}},"15":{"start":{"line":48,"column":8},"end":{"line":48,"column":41}},"16":{"start":{"line":48,"column":21},"end":{"line":48,"column":40}},"17":{"start":{"line":49,"column":8},"end":{"line":49,"column":70}},"18":{"start":{"line":50,"column":8},"end":{"line":63,"column":10}},"19":{"start":{"line":51,"column":10},"end":{"line":51,"column":43}},"20":{"start":{"line":51,"column":23},"end":{"line":51,"column":42}},"21":{"start":{"line":52,"column":10},"end":{"line":58,"column":11}},"22":{"start":{"line":59,"column":10},"end":{"line":62,"column":12}},"23":{"start":{"line":60,"column":12},"end":{"line":60,"column":60}},"24":{"start":{"line":61,"column":12},"end":{"line":61,"column":23}}},"branchMap":{"1":{"line":31,"type":"if","locations":[{"start":{"line":31,"column":8},"end":{"line":31,"column":8}},{"start":{"line":31,"column":8},"end":{"line":31,"column":8}}]},"2":{"line":45,"type":"if","locations":[{"start":{"line":45,"column":6},"end":{"line":45,"column":6}},{"start":{"line":45,"column":6},"end":{"line":45,"column":6}}]},"3":{"line":48,"type":"if","locations":[{"start":{"line":48,"column":8},"end":{"line":48,"column":8}},{"start":{"line":48,"column":8},"end":{"line":48,"column":8}}]},"4":{"line":51,"type":"if","locations":[{"start":{"line":51,"column":10},"end":{"line":51,"column":10}},{"start":{"line":51,"column":10},"end":{"line":51,"column":10}}]}},"code":["'use strict'","","exports.cacheTest = {","  name: 'cacheTest',","  description: 'I will test the internal cache functions of the API',","","  outputExample: {","    cacheTestResults: {","      saveResp: true,","      sizeResp: 1,","      loadResp: {","        key: 'cacheTest_key',","        value: 'value',","        expireTimestamp: 1420953274716,","        createdAt: 1420953269716,","        readAt: null","      },","      deleteResp: true","    }","  },","","  inputs: {","    key: {","      required: true,","      formatter: function (s) { return String(s) }","    },","    value: {","      required: true,","      formatter: function (s) { return String(s) },","      validator: function (s) {","        if (s.length < 3) {","          return '`value` should be at least 3 letters long'","        } else { return true }","      }","    }","  },","","  run: function (api, data, next) {","    const key = 'cacheTest_' + data.params.key","    const value = data.params.value","","    data.response.cacheTestResults = {}","","    api.cache.save(key, value, 5000, function (error, resp) {","      if (error) { return next(error) }","      data.response.cacheTestResults.saveResp = resp","      api.cache.size(function (error, numberOfCacheObjects) {","        if (error) { return next(error) }","        data.response.cacheTestResults.sizeResp = numberOfCacheObjects","        api.cache.load(key, function (error, resp, expireTimestamp, createdAt, readAt) {","          if (error) { return next(error) }","          data.response.cacheTestResults.loadResp = {","            key: key,","            value: resp,","            expireTimestamp: expireTimestamp,","            createdAt: createdAt,","            readAt: readAt","          }","          api.cache.destroy(key, function (error, resp) {","            data.response.cacheTestResults.deleteResp = resp","            next(error)","          })","        })","      })","    })","  }","","}",""],"l":{"3":1,"25":0,"29":0,"31":0,"32":0,"33":0,"39":0,"40":0,"42":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"59":0,"60":0,"61":0}},"/home/travis/build/npmtest/node-npmtest-actionhero/node_modules/actionhero/actions/createChatRoom.js":{"path":"/home/travis/build/npmtest/node-npmtest-actionhero/node_modules/actionhero/actions/createChatRoom.js","s":{"1":1,"2":0},"b":{},"f":{"1":0},"fnMap":{"1":{"name":"(anonymous_1)","line":13,"loc":{"start":{"line":13,"column":7},"end":{"line":13,"column":34}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":17,"column":1}},"2":{"start":{"line":14,"column":4},"end":{"line":14,"column":44}}},"branchMap":{},"code":["'use strict'","","exports.createChatRoom = {","  name: 'createChatRoom',","  description: 'I will create a chatroom with the given name',","","  outputExample: {},","","  inputs: {","    name: { required: true }","  },","","  run: function (api, data, next) {","    api.chatRoom.add(data.params.name, next)","  }","","}",""],"l":{"3":1,"14":0}},"/home/travis/build/npmtest/node-npmtest-actionhero/node_modules/actionhero/actions/randomNumber.js":{"path":"/home/travis/build/npmtest/node-npmtest-actionhero/node_modules/actionhero/actions/randomNumber.js","s":{"1":1,"2":0,"3":0,"4":0},"b":{},"f":{"1":0},"fnMap":{"1":{"name":"(anonymous_1)","line":10,"loc":{"start":{"line":10,"column":7},"end":{"line":10,"column":34}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":16,"column":1}},"2":{"start":{"line":11,"column":4},"end":{"line":11,"column":46}},"3":{"start":{"line":12,"column":4},"end":{"line":12,"column":108}},"4":{"start":{"line":13,"column":4},"end":{"line":13,"column":14}}},"branchMap":{},"code":["'use strict'","","exports.randomNumber = {","  name: 'randomNumber',","  description: 'I am an API method which will generate a random number',","  outputExample: {","    randomNumber: 0.123","  },","","  run: function (api, data, next) {","    data.response.randomNumber = Math.random()","    data.response.stringRandomNumber = data.connection.localize(['Your random number is %s', Math.random()])","    next(null)","  }","","}",""],"l":{"3":1,"11":0,"12":0,"13":0}},"/home/travis/build/npmtest/node-npmtest-actionhero/node_modules/actionhero/actions/showDocumentation.js":{"path":"/home/travis/build/npmtest/node-npmtest-actionhero/node_modules/actionhero/actions/showDocumentation.js","s":{"1":1,"2":0,"3":0},"b":{},"f":{"1":0},"fnMap":{"1":{"name":"(anonymous_1)","line":86,"loc":{"start":{"line":86,"column":7},"end":{"line":86,"column":34}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":90,"column":1}},"2":{"start":{"line":87,"column":4},"end":{"line":87,"column":65}},"3":{"start":{"line":88,"column":4},"end":{"line":88,"column":10}}},"branchMap":{},"code":["'use strict'","","exports.showDocumentation = {","  name: 'showDocumentation',","  description: 'return API documentation',","","  outputExample: {","    'documentation': {","      'cacheTest': {","        '1': {","          'name': 'cacheTest',","          'version': 1,","          'description': 'I will test the internal cache functions of the API',","          'inputs': {","            'key': {","              'required': true","            },","            'value': {","              'required': true","            }","          },","          'outputExample': {","            'cacheTestResults': {","              'saveResp': true,","              'sizeResp': 1,","              'loadResp': {","                'key': '',","                'value': 'value',","                'expireTimestamp': 1420953274716,","                'createdAt': 1420953269716,","                'readAt': null","              },","              'deleteResp': true","            }","          }","        }","      },","      'randomNumber': {","        '1': {","          'name': 'randomNumber',","          'version': 1,","          'description': 'I am an API method which will generate a random number',","          'inputs': {","","          },","          'outputExample': {","            'randomNumber': 0.123","          }","        }","      },","      'showDocumentation': {","        '1': {","          'name': 'showDocumentation',","          'version': 1,","          'description': 'return API documentation',","          'inputs': {","","          }","        }","      },","      'sleepTest': {","        '1': {","          'name': 'sleepTest',","          'version': 1,","          'description': 'I will sleep and then return',","          'inputs': {","            'sleepDuration': {","              'required': true","            }","          }","        }","      },","      'status': {","        '1': {","          'name': 'status',","          'version': 1,","          'description': 'I will return some basic information about the API',","          'inputs': {","","          }","        }","      }","    }","  },","","  run: function (api, data, next) {","    data.response.documentation = api.documentation.documentation","    next()","  }","}",""],"l":{"3":1,"87":0,"88":0}},"/home/travis/build/npmtest/node-npmtest-actionhero/node_modules/actionhero/actions/sleepTest.js":{"path":"/home/travis/build/npmtest/node-npmtest-actionhero/node_modules/actionhero/actions/sleepTest.js","s":{"1":1,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0},"b":{},"f":{"1":0,"2":0,"3":0,"4":0},"fnMap":{"1":{"name":"(anonymous_1)","line":10,"loc":{"start":{"line":10,"column":17},"end":{"line":10,"column":30}}},"2":{"name":"(anonymous_2)","line":11,"loc":{"start":{"line":11,"column":15},"end":{"line":11,"column":27}}},"3":{"name":"(anonymous_3)","line":22,"loc":{"start":{"line":22,"column":7},"end":{"line":22,"column":34}}},"4":{"name":"(anonymous_4)","line":26,"loc":{"start":{"line":26,"column":15},"end":{"line":26,"column":27}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":38,"column":1}},"2":{"start":{"line":10,"column":32},"end":{"line":10,"column":51}},"3":{"start":{"line":11,"column":29},"end":{"line":11,"column":41}},"4":{"start":{"line":23,"column":4},"end":{"line":23,"column":51}},"5":{"start":{"line":24,"column":4},"end":{"line":24,"column":45}},"6":{"start":{"line":26,"column":4},"end":{"line":36,"column":21}},"7":{"start":{"line":27,"column":6},"end":{"line":27,"column":45}},"8":{"start":{"line":28,"column":6},"end":{"line":28,"column":50}},"9":{"start":{"line":30,"column":6},"end":{"line":30,"column":47}},"10":{"start":{"line":31,"column":6},"end":{"line":31,"column":43}},"11":{"start":{"line":32,"column":6},"end":{"line":32,"column":43}},"12":{"start":{"line":33,"column":6},"end":{"line":33,"column":49}},"13":{"start":{"line":35,"column":6},"end":{"line":35,"column":12}}},"branchMap":{},"code":["'use strict'","","exports.sleepTest = {","  name: 'sleepTest',","  description: 'I will sleep and then return',","","  inputs: {","    sleepDuration: {","      required: true,","      formatter: function (n) { return parseInt(n) },","      default: function () { return 1000 }","    }","  },","","  outputExample: {","    'sleepStarted': 1420953571322,","    'sleepEnded': 1420953572327,","    'sleepDelta': 1005,","    'sleepDuration': 1000","  },","","  run: function (api, data, next) {","    const sleepDuration = data.params.sleepDuration","    const sleepStarted = new Date().getTime()","","    setTimeout(function () {","      const sleepEnded = new Date().getTime()","      const sleepDelta = sleepEnded - sleepStarted","","      data.response.sleepStarted = sleepStarted","      data.response.sleepEnded = sleepEnded","      data.response.sleepDelta = sleepDelta","      data.response.sleepDuration = sleepDuration","","      next()","    }, sleepDuration)","  }","}",""],"l":{"3":1,"10":0,"11":0,"23":0,"24":0,"26":0,"27":0,"28":0,"30":0,"31":0,"32":0,"33":0,"35":0}},"/home/travis/build/npmtest/node-npmtest-actionhero/node_modules/actionhero/actions/status.js":{"path":"/home/travis/build/npmtest/node-npmtest-actionhero/node_modules/actionhero/actions/status.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0},"b":{"1":[1,1],"2":[1,1],"3":[1,1],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0},"fnMap":{"1":{"name":"(anonymous_1)","line":21,"loc":{"start":{"line":21,"column":7},"end":{"line":21,"column":34}}},"2":{"name":"(anonymous_2)","line":24,"loc":{"start":{"line":24,"column":21},"end":{"line":24,"column":41}}},"3":{"name":"(anonymous_3)","line":35,"loc":{"start":{"line":35,"column":27},"end":{"line":35,"column":47}}},"4":{"name":"(anonymous_4)","line":36,"loc":{"start":{"line":36,"column":38},"end":{"line":36,"column":71}}},"5":{"name":"(anonymous_5)","line":48,"loc":{"start":{"line":48,"column":30},"end":{"line":48,"column":50}}},"6":{"name":"(anonymous_6)","line":49,"loc":{"start":{"line":49,"column":24},"end":{"line":49,"column":50}}},"7":{"name":"(anonymous_7)","line":52,"loc":{"start":{"line":52,"column":44},"end":{"line":52,"column":57}}},"8":{"name":"(anonymous_8)","line":79,"loc":{"start":{"line":79,"column":13},"end":{"line":79,"column":30}}},"9":{"name":"(anonymous_9)","line":81,"loc":{"start":{"line":81,"column":21},"end":{"line":81,"column":38}}},"10":{"name":"(anonymous_10)","line":83,"loc":{"start":{"line":83,"column":26},"end":{"line":83,"column":43}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":28}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":87}},"3":{"start":{"line":7,"column":0},"end":{"line":7,"column":58}},"4":{"start":{"line":8,"column":0},"end":{"line":8,"column":60}},"5":{"start":{"line":9,"column":0},"end":{"line":9,"column":69}},"6":{"start":{"line":11,"column":0},"end":{"line":89,"column":1}},"7":{"start":{"line":24,"column":4},"end":{"line":33,"column":5}},"8":{"start":{"line":25,"column":6},"end":{"line":25,"column":99}},"9":{"start":{"line":26,"column":6},"end":{"line":26,"column":55}},"10":{"start":{"line":27,"column":6},"end":{"line":30,"column":7}},"11":{"start":{"line":28,"column":8},"end":{"line":28,"column":72}},"12":{"start":{"line":29,"column":8},"end":{"line":29,"column":119}},"13":{"start":{"line":32,"column":6},"end":{"line":32,"column":16}},"14":{"start":{"line":35,"column":4},"end":{"line":46,"column":5}},"15":{"start":{"line":36,"column":6},"end":{"line":45,"column":8}},"16":{"start":{"line":37,"column":8},"end":{"line":37,"column":45}},"17":{"start":{"line":37,"column":21},"end":{"line":37,"column":44}},"18":{"start":{"line":38,"column":8},"end":{"line":38,"column":53}},"19":{"start":{"line":39,"column":8},"end":{"line":42,"column":9}},"20":{"start":{"line":40,"column":10},"end":{"line":40,"column":79}},"21":{"start":{"line":41,"column":10},"end":{"line":41,"column":126}},"22":{"start":{"line":44,"column":8},"end":{"line":44,"column":18}},"23":{"start":{"line":48,"column":4},"end":{"line":65,"column":5}},"24":{"start":{"line":49,"column":6},"end":{"line":64,"column":8}},"25":{"start":{"line":50,"column":8},"end":{"line":50,"column":45}},"26":{"start":{"line":50,"column":21},"end":{"line":50,"column":44}},"27":{"start":{"line":51,"column":8},"end":{"line":51,"column":22}},"28":{"start":{"line":52,"column":8},"end":{"line":54,"column":10}},"29":{"start":{"line":53,"column":10},"end":{"line":53,"column":44}},"30":{"start":{"line":56,"column":8},"end":{"line":56,"column":53}},"31":{"start":{"line":58,"column":8},"end":{"line":61,"column":9}},"32":{"start":{"line":59,"column":10},"end":{"line":59,"column":79}},"33":{"start":{"line":60,"column":10},"end":{"line":60,"column":119}},"34":{"start":{"line":63,"column":8},"end":{"line":63,"column":18}},"35":{"start":{"line":69,"column":4},"end":{"line":69,"column":71}},"36":{"start":{"line":70,"column":4},"end":{"line":70,"column":31}},"37":{"start":{"line":72,"column":4},"end":{"line":72,"column":29}},"38":{"start":{"line":73,"column":4},"end":{"line":73,"column":59}},"39":{"start":{"line":74,"column":4},"end":{"line":74,"column":62}},"40":{"start":{"line":75,"column":4},"end":{"line":75,"column":41}},"41":{"start":{"line":76,"column":4},"end":{"line":76,"column":55}},"42":{"start":{"line":77,"column":4},"end":{"line":77,"column":47}},"43":{"start":{"line":79,"column":4},"end":{"line":87,"column":6}},"44":{"start":{"line":80,"column":6},"end":{"line":80,"column":39}},"45":{"start":{"line":80,"column":19},"end":{"line":80,"column":38}},"46":{"start":{"line":81,"column":6},"end":{"line":86,"column":8}},"47":{"start":{"line":82,"column":8},"end":{"line":82,"column":41}},"48":{"start":{"line":82,"column":21},"end":{"line":82,"column":40}},"49":{"start":{"line":83,"column":8},"end":{"line":85,"column":10}},"50":{"start":{"line":84,"column":10},"end":{"line":84,"column":21}}},"branchMap":{"1":{"line":7,"type":"binary-expr","locations":[{"start":{"line":7,"column":26},"end":{"line":7,"column":52}},{"start":{"line":7,"column":56},"end":{"line":7,"column":58}}]},"2":{"line":8,"type":"binary-expr","locations":[{"start":{"line":8,"column":25},"end":{"line":8,"column":53}},{"start":{"line":8,"column":57},"end":{"line":8,"column":60}}]},"3":{"line":9,"type":"binary-expr","locations":[{"start":{"line":9,"column":29},"end":{"line":9,"column":61}},{"start":{"line":9,"column":65},"end":{"line":9,"column":69}}]},"4":{"line":27,"type":"if","locations":[{"start":{"line":27,"column":6},"end":{"line":27,"column":6}},{"start":{"line":27,"column":6},"end":{"line":27,"column":6}}]},"5":{"line":37,"type":"if","locations":[{"start":{"line":37,"column":8},"end":{"line":37,"column":8}},{"start":{"line":37,"column":8},"end":{"line":37,"column":8}}]},"6":{"line":39,"type":"if","locations":[{"start":{"line":39,"column":8},"end":{"line":39,"column":8}},{"start":{"line":39,"column":8},"end":{"line":39,"column":8}}]},"7":{"line":50,"type":"if","locations":[{"start":{"line":50,"column":8},"end":{"line":50,"column":8}},{"start":{"line":50,"column":8},"end":{"line":50,"column":8}}]},"8":{"line":58,"type":"if","locations":[{"start":{"line":58,"column":8},"end":{"line":58,"column":8}},{"start":{"line":58,"column":8},"end":{"line":58,"column":8}}]},"9":{"line":80,"type":"if","locations":[{"start":{"line":80,"column":6},"end":{"line":80,"column":6}},{"start":{"line":80,"column":6},"end":{"line":80,"column":6}}]},"10":{"line":82,"type":"if","locations":[{"start":{"line":82,"column":8},"end":{"line":82,"column":8}},{"start":{"line":82,"column":8},"end":{"line":82,"column":8}}]}},"code":["'use strict'","","const path = require('path')","const packageJSON = require(path.normalize(path.join(__dirname, '..', 'package.json')))","","// These values are probably good starting points, but you should expect to tweak them for your application","const maxEventLoopDelay = process.env.eventLoopDelay || 10","const maxMemoryAlloted = process.env.maxMemoryAlloted || 200","const maxResqueQueueLength = process.env.maxResqueQueueLength || 1000","","exports.status = {","  name: 'status',","  description: 'I will return some basic information about the API',","","  outputExample: {","    'id': '192.168.2.11',","    'actionheroVersion': '9.4.1',","    'uptime': 10469","  },","","  run: function (api, data, next) {","    /* --- Define Helpers --- */","","    const checkRam = function (callback) {","      const consumedMemoryMB = Math.round(process.memoryUsage().heapUsed / 1024 / 1024 * 100) / 100","      data.response.consumedMemoryMB = consumedMemoryMB","      if (consumedMemoryMB > maxMemoryAlloted) {","        data.response.nodeStatus = data.connection.localize('Unhealthy')","        data.response.problems.push(data.connection.localize('Using more than ' + maxMemoryAlloted + 'MB of RAM/HEAP'))","      }","","      callback()","    }","","    const checkEventLoop = function (callback) {","      api.utils.eventLoopDelay(10000, function (error, eventLoopDelay) {","        if (error) { return callback(error) }","        data.response.eventLoopDelay = eventLoopDelay","        if (eventLoopDelay > maxEventLoopDelay) {","          data.response.nodeStatus = data.connection.localize('Node Unhealthy')","          data.response.problems.push(data.connection.localize('EventLoop Blocked for more than ' + maxEventLoopDelay + 'ms'))","        }","","        callback()","      })","    }","","    const checkResqueQueues = function (callback) {","      api.tasks.details(function (error, details) {","        if (error) { return callback(error) }","        let length = 0","        Object.keys(details.queues).forEach(function (q) {","          length += details.queues[q].length","        })","","        data.response.resqueTotalQueueLength = length","","        if (length > maxResqueQueueLength) {","          data.response.nodeStatus = data.connection.localize('Node Unhealthy')","          data.response.problems.push(data.connection.localize('Resque Queues over ' + maxResqueQueueLength + ' jobs'))","        }","","        callback()","      })","    }","","    /* --- Run --- */","","    data.response.nodeStatus = data.connection.localize('Node Healthy')","    data.response.problems = []","","    data.response.id = api.id","    data.response.actionheroVersion = api.actionheroVersion","    data.response.uptime = new Date().getTime() - api.bootTime","    data.response.name = packageJSON.name","    data.response.description = packageJSON.description","    data.response.version = packageJSON.version","","    checkRam(function (error) {","      if (error) { return next(error) }","      checkEventLoop(function (error) {","        if (error) { return next(error) }","        checkResqueQueues(function (error) {","          next(error)","        })","      })","    })","  }","}",""],"l":{"3":1,"4":1,"7":1,"8":1,"9":1,"11":1,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"32":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"44":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"56":0,"58":0,"59":0,"60":0,"63":0,"69":0,"70":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0}},"/home/travis/build/npmtest/node-npmtest-actionhero/node_modules/actionhero/config/api.js":{"path":"/home/travis/build/npmtest/node-npmtest-actionhero/node_modules/actionhero/config/api.js","s":{"1":1,"2":1,"3":0,"4":0,"5":1,"6":0,"7":1,"8":0},"b":{},"f":{"1":0,"2":0,"3":0},"fnMap":{"1":{"name":"(anonymous_1)","line":6,"loc":{"start":{"line":6,"column":11},"end":{"line":6,"column":26}}},"2":{"name":"(anonymous_2)","line":69,"loc":{"start":{"line":69,"column":11},"end":{"line":69,"column":26}}},"3":{"name":"(anonymous_3)","line":87,"loc":{"start":{"line":87,"column":11},"end":{"line":87,"column":26}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":28}},"2":{"start":{"line":5,"column":0},"end":{"line":66,"column":1}},"3":{"start":{"line":7,"column":4},"end":{"line":7,"column":76}},"4":{"start":{"line":9,"column":4},"end":{"line":64,"column":5}},"5":{"start":{"line":68,"column":0},"end":{"line":84,"column":1}},"6":{"start":{"line":70,"column":4},"end":{"line":82,"column":5}},"7":{"start":{"line":86,"column":0},"end":{"line":93,"column":1}},"8":{"start":{"line":88,"column":4},"end":{"line":91,"column":5}}},"branchMap":{},"code":["'use strict'","","const path = require('path')","","exports['default'] = {","  general: function (api) {","    const packageJSON = require(api.projectRoot + path.sep + 'package.json')","","    return {","      apiVersion: packageJSON.version,","      serverName: packageJSON.name,","      // id can be set here, or it will be generated dynamically.","      //  Be sure that every server you run has a unique ID (which will happen when generated dynamically)","      //  id: 'myActionHeroServer',","      // A unique token to your application that servers will use to authenticate to each other","      serverToken: 'change-me',","      // The welcome message seen by TCP and webSocket clients upon connection","      welcomeMessage: 'Hello! Welcome to the actionhero api',","      // the redis prefix for actionhero's cache objects","      cachePrefix: 'actionhero:cache:',","      // the redis prefix for actionhero's cache/lock objects","      lockPrefix: 'actionhero:lock:',","      // how long will a lock last before it exipres (ms)?","      lockDuration: 1000 * 10, // 10 seconds","      // Watch for changes in actions and tasks, and reload/restart them on the fly","      developmentMode: true,","      // How many pending actions can a single connection be working on","      simultaneousActions: 5,","      // allow connections to be created without remoteIp and remotePort (they will be set to 0)","      enforceConnectionProperties: true,","      // disables the whitelisting of client params","      disableParamScrubbing: false,","      // params you would like hidden from any logs","      filteredParams: [],","      // values that signify missing params","      missingParamChecks: [null, '', undefined],","      // The default filetype to server when a user requests a directory","      directoryFileType: 'index.html',","      // What log-level should we use for file requests?","      fileRequestLogLevel: 'info',","      // The default priority level given to middleware of all types (action, connection, say, and task)","      defaultMiddlewarePriority: 100,","      // Which channel to use on redis pub/sub for RPC communication","      channel: 'actionhero',","      // How long to wait for an RPC call before considering it a failure","      rpcTimeout: 5000,","      // configuration for your actionhero project structure","      paths: {","        'action': [path.join(__dirname, '/../actions')],","        'task': [path.join(__dirname, '/../tasks')],","        'public': [path.join(__dirname, '/../public')],","        'pid': [path.join(__dirname, '/../pids')],","        'log': [path.join(__dirname, '/../log')],","        'server': [path.join(__dirname, '/../servers')],","        'initializer': [path.join(__dirname, '/../initializers')],","        'plugin': [path.join(__dirname, '/../node_modules')],","        'locale': [path.join(__dirname, '/../locales')]","      },","      // hash containing chat rooms you wish to be created at server boot","      startingChatRooms: {","        // format is {roomName: {authKey, authValue}}","        // 'secureRoom': {authorized: true},","      }","    }","  }","}","","exports.test = {","  general: function (api) {","    return {","      id: 'test-server-' + process.pid,","      serverToken: 'serverToken-' + process.pid,","      developmentMode: true,","      startingChatRooms: {","        'defaultRoom': {},","        'otherRoom': {}","      },","      paths: {","        'locale': [require('os').tmpdir() + require('path').sep + 'locales']","      },","      rpcTimeout: 3000","    }","  }","}","","exports.production = {","  general: function (api) {","    return {","      fileRequestLogLevel: 'debug',","      developmentMode: false","    }","  }","}",""],"l":{"3":1,"5":1,"7":0,"9":0,"68":1,"70":0,"86":1,"88":0}},"/home/travis/build/npmtest/node-npmtest-actionhero/node_modules/actionhero/config/errors.js":{"path":"/home/travis/build/npmtest/node-npmtest-actionhero/node_modules/actionhero/config/errors.js","s":{"1":1,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0},"fnMap":{"1":{"name":"(anonymous_1)","line":5,"loc":{"start":{"line":5,"column":10},"end":{"line":5,"column":25}}},"2":{"name":"(anonymous_2)","line":15,"loc":{"start":{"line":15,"column":15},"end":{"line":15,"column":32}}},"3":{"name":"(anonymous_3)","line":22,"loc":{"start":{"line":22,"column":21},"end":{"line":22,"column":38}}},"4":{"name":"(anonymous_4)","line":29,"loc":{"start":{"line":29,"column":18},"end":{"line":29,"column":35}}},"5":{"name":"(anonymous_5)","line":36,"loc":{"start":{"line":36,"column":22},"end":{"line":36,"column":39}}},"6":{"name":"(anonymous_6)","line":51,"loc":{"start":{"line":51,"column":21},"end":{"line":51,"column":55}}},"7":{"name":"(anonymous_7)","line":57,"loc":{"start":{"line":57,"column":21},"end":{"line":57,"column":52}}},"8":{"name":"(anonymous_8)","line":62,"loc":{"start":{"line":62,"column":21},"end":{"line":62,"column":37}}},"9":{"name":"(anonymous_9)","line":67,"loc":{"start":{"line":67,"column":29},"end":{"line":67,"column":45}}},"10":{"name":"(anonymous_10)","line":72,"loc":{"start":{"line":72,"column":26},"end":{"line":72,"column":42}}},"11":{"name":"(anonymous_11)","line":78,"loc":{"start":{"line":78,"column":29},"end":{"line":78,"column":45}}},"12":{"name":"(anonymous_12)","line":82,"loc":{"start":{"line":82,"column":26},"end":{"line":82,"column":63}}},"13":{"name":"(anonymous_13)","line":92,"loc":{"start":{"line":92,"column":20},"end":{"line":92,"column":42}}},"14":{"name":"(anonymous_14)","line":97,"loc":{"start":{"line":97,"column":23},"end":{"line":97,"column":45}}},"15":{"name":"(anonymous_15)","line":102,"loc":{"start":{"line":102,"column":21},"end":{"line":102,"column":50}}},"16":{"name":"(anonymous_16)","line":110,"loc":{"start":{"line":110,"column":20},"end":{"line":110,"column":48}}},"17":{"name":"(anonymous_17)","line":114,"loc":{"start":{"line":114,"column":22},"end":{"line":114,"column":50}}},"18":{"name":"(anonymous_18)","line":118,"loc":{"start":{"line":118,"column":32},"end":{"line":118,"column":54}}},"19":{"name":"(anonymous_19)","line":122,"loc":{"start":{"line":122,"column":27},"end":{"line":122,"column":55}}},"20":{"name":"(anonymous_20)","line":126,"loc":{"start":{"line":126,"column":31},"end":{"line":126,"column":59}}},"21":{"name":"(anonymous_21)","line":130,"loc":{"start":{"line":130,"column":36},"end":{"line":130,"column":52}}},"22":{"name":"(anonymous_22)","line":134,"loc":{"start":{"line":134,"column":30},"end":{"line":134,"column":46}}},"23":{"name":"(anonymous_23)","line":138,"loc":{"start":{"line":138,"column":28},"end":{"line":138,"column":44}}},"24":{"name":"(anonymous_24)","line":142,"loc":{"start":{"line":142,"column":30},"end":{"line":142,"column":46}}}},"statementMap":{"1":{"start":{"line":4,"column":0},"end":{"line":148,"column":1}},"2":{"start":{"line":6,"column":4},"end":{"line":146,"column":5}},"3":{"start":{"line":16,"column":12},"end":{"line":20,"column":13}},"4":{"start":{"line":17,"column":14},"end":{"line":17,"column":42}},"5":{"start":{"line":19,"column":14},"end":{"line":19,"column":26}},"6":{"start":{"line":23,"column":12},"end":{"line":27,"column":13}},"7":{"start":{"line":24,"column":14},"end":{"line":24,"column":42}},"8":{"start":{"line":26,"column":14},"end":{"line":26,"column":26}},"9":{"start":{"line":30,"column":12},"end":{"line":34,"column":13}},"10":{"start":{"line":31,"column":14},"end":{"line":31,"column":42}},"11":{"start":{"line":33,"column":14},"end":{"line":33,"column":26}},"12":{"start":{"line":37,"column":12},"end":{"line":41,"column":13}},"13":{"start":{"line":38,"column":14},"end":{"line":38,"column":54}},"14":{"start":{"line":40,"column":14},"end":{"line":40,"column":26}},"15":{"start":{"line":52,"column":8},"end":{"line":52,"column":72}},"16":{"start":{"line":52,"column":44},"end":{"line":52,"column":71}},"17":{"start":{"line":53,"column":8},"end":{"line":53,"column":33}},"18":{"start":{"line":58,"column":8},"end":{"line":58,"column":105}},"19":{"start":{"line":63,"column":8},"end":{"line":63,"column":79}},"20":{"start":{"line":68,"column":8},"end":{"line":68,"column":118}},"21":{"start":{"line":73,"column":8},"end":{"line":73,"column":70}},"22":{"start":{"line":79,"column":8},"end":{"line":79,"column":77}},"23":{"start":{"line":83,"column":8},"end":{"line":83,"column":108}},"24":{"start":{"line":93,"column":8},"end":{"line":93,"column":62}},"25":{"start":{"line":98,"column":8},"end":{"line":98,"column":77}},"26":{"start":{"line":103,"column":8},"end":{"line":103,"column":77}},"27":{"start":{"line":111,"column":8},"end":{"line":111,"column":90}},"28":{"start":{"line":115,"column":8},"end":{"line":115,"column":80}},"29":{"start":{"line":119,"column":8},"end":{"line":119,"column":72}},"30":{"start":{"line":123,"column":8},"end":{"line":123,"column":78}},"31":{"start":{"line":127,"column":8},"end":{"line":127,"column":82}},"32":{"start":{"line":131,"column":8},"end":{"line":131,"column":62}},"33":{"start":{"line":135,"column":8},"end":{"line":135,"column":55}},"34":{"start":{"line":139,"column":8},"end":{"line":139,"column":47}},"35":{"start":{"line":143,"column":8},"end":{"line":143,"column":54}}},"branchMap":{"1":{"line":16,"type":"if","locations":[{"start":{"line":16,"column":12},"end":{"line":16,"column":12}},{"start":{"line":16,"column":12},"end":{"line":16,"column":12}}]},"2":{"line":23,"type":"if","locations":[{"start":{"line":23,"column":12},"end":{"line":23,"column":12}},{"start":{"line":23,"column":12},"end":{"line":23,"column":12}}]},"3":{"line":30,"type":"if","locations":[{"start":{"line":30,"column":12},"end":{"line":30,"column":12}},{"start":{"line":30,"column":12},"end":{"line":30,"column":12}}]},"4":{"line":37,"type":"if","locations":[{"start":{"line":37,"column":12},"end":{"line":37,"column":12}},{"start":{"line":37,"column":12},"end":{"line":37,"column":12}}]},"5":{"line":52,"type":"if","locations":[{"start":{"line":52,"column":8},"end":{"line":52,"column":8}},{"start":{"line":52,"column":8},"end":{"line":52,"column":8}}]}},"code":["'use strict'","","// error messages can be strings of objects","exports['default'] = {","  errors: function (api) {","    return {","      '_toExpand': false,","","      // ///////////////","      // SERIALIZERS //","      // ///////////////","","      serializers: {","        servers: {","          web: function (error) {","            if (error.message) {","              return String(error.message)","            } else {","              return error","            }","          },","          websocket: function (error) {","            if (error.message) {","              return String(error.message)","            } else {","              return error","            }","          },","          socket: function (error) {","            if (error.message) {","              return String(error.message)","            } else {","              return error","            }","          },","          specHelper: function (error) {","            if (error.message) {","              return 'Error: ' + String(error.message)","            } else {","              return error","            }","          }","        }","      },","","      // ///////////","      // ACTIONS //","      // ///////////","","      // When a params for an action is invalid","      invalidParams: function (data, validationErrors) {","        if (validationErrors.length >= 0) { return validationErrors[0] }","        return 'validation error'","      },","","      // When a required param for an action is not provided","      missingParams: function (data, missingParams) {","        return data.connection.localize(['%s is a required parameter for this action', missingParams[0]])","      },","","      // user requested an unknown action","      unknownAction: function (data) {","        return data.connection.localize('unknown action or invalid apiVersion')","      },","","      // action not useable by this client/server type","      unsupportedServerType: function (data) {","        return data.connection.localize(['this action does not support the %s connection type', data.connection.type])","      },","","      // action failed because server is mid-shutdown","      serverShuttingDown: function (data) {","        return data.connection.localize('the server is shutting down')","      },","","      // action failed because this client already has too many pending acitons","      // limit defined in api.config.general.simultaneousActions","      tooManyPendingActions: function (data) {","        return data.connection.localize('you have too many pending requests')","      },","","      dataLengthTooLarge: function (maxLength, receivedLength) {","        return api.i18n.localize(['data length is too big (%u received/%u max)', maxLength, receivedLength])","      },","","      // ///////////////","      // FILE SERVER //","      // ///////////////","","      // The body message to accompany 404 (file not found) errors regarding flat files","      // You may want to load in the contnet of 404.html or similar","      fileNotFound: function (connection) {","        return connection.localize(['That file is not found'])","      },","","      // user didn't request a file","      fileNotProvided: function (connection) {","        return connection.localize('file is a required param to send a file')","      },","","      // something went wrong trying to read the file","      fileReadError: function (connection, error) {","        return connection.localize(['error reading file: %s', String(error)])","      },","","      // ///////////////","      // CONNECTIONS //","      // ///////////////","","      verbNotFound: function (connection, verb) {","        return connection.localize(['I do not know know to perform this verb (%s)', verb])","      },","","      verbNotAllowed: function (connection, verb) {","        return connection.localize(['verb not found or not allowed (%s)', verb])","      },","","      connectionRoomAndMessage: function (connection) {","        return connection.localize('both room and message are required')","      },","","      connectionNotInRoom: function (connection, room) {","        return connection.localize(['connection not in this room (%s)', room])","      },","","      connectionAlreadyInRoom: function (connection, room) {","        return connection.localize(['connection already in this room (%s)', room])","      },","","      connectionRoomHasBeenDeleted: function (room) {","        return api.i18n.localize('this room has been deleted')","      },","","      connectionRoomNotExist: function (room) {","        return api.i18n.localize('room does not exist')","      },","","      connectionRoomExists: function (room) {","        return api.i18n.localize('room exists')","      },","","      connectionRoomRequired: function (room) {","        return api.i18n.localize('a room is required')","      }","","    }","  }","}",""],"l":{"4":1,"6":0,"16":0,"17":0,"19":0,"23":0,"24":0,"26":0,"30":0,"31":0,"33":0,"37":0,"38":0,"40":0,"52":0,"53":0,"58":0,"63":0,"68":0,"73":0,"79":0,"83":0,"93":0,"98":0,"103":0,"111":0,"115":0,"119":0,"123":0,"127":0,"131":0,"135":0,"139":0,"143":0}},"/home/travis/build/npmtest/node-npmtest-actionhero/node_modules/actionhero/config/i18n.js":{"path":"/home/travis/build/npmtest/node-npmtest-actionhero/node_modules/actionhero/config/i18n.js","s":{"1":1,"2":0,"3":1,"4":0},"b":{},"f":{"1":0,"2":0},"fnMap":{"1":{"name":"(anonymous_1)","line":2,"loc":{"start":{"line":2,"column":8},"end":{"line":2,"column":23}}},"2":{"name":"(anonymous_2)","line":27,"loc":{"start":{"line":27,"column":8},"end":{"line":27,"column":20}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":24,"column":1}},"2":{"start":{"line":3,"column":4},"end":{"line":22,"column":5}},"3":{"start":{"line":26,"column":0},"end":{"line":32,"column":1}},"4":{"start":{"line":28,"column":4},"end":{"line":30,"column":5}}},"branchMap":{},"code":["exports['default'] = {","  i18n: function (api) {","    return {","      // visit https://github.com/mashpie/i18n-node to see all configuration options","      // locale path can be configired from within ./config/api.js","      locales: ['en'],","","      // how would you like your lanaguages to fall back if a translation string is missing?","      fallbacks: {","        // 'es': 'en'","      },","","      updateFiles: true,","","      // this will configure logging and error messages in the log(s)","      defaultLocale: 'en',","","      // the name of the method by which to determine the connection's locale","      // by default, every request will be in the 'en' locale","      // this method will be called witin the localiazation middleware on all requests","      determineConnectionLocale: 'api.i18n.determineConnectionLocale'","    }","  }","}","","exports.staging = {","  i18n: function () {","    return {","      updateFiles: false","    }","  }","}",""],"l":{"1":1,"3":0,"26":1,"28":0}},"/home/travis/build/npmtest/node-npmtest-actionhero/node_modules/actionhero/config/logger.js":{"path":"/home/travis/build/npmtest/node-npmtest-actionhero/node_modules/actionhero/config/logger.js","s":{"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":1,"22":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0},"fnMap":{"1":{"name":"(anonymous_1)","line":7,"loc":{"start":{"line":7,"column":10},"end":{"line":7,"column":25}}},"2":{"name":"(anonymous_2)","line":12,"loc":{"start":{"line":12,"column":29},"end":{"line":12,"column":53}}},"3":{"name":"(anonymous_3)","line":16,"loc":{"start":{"line":16,"column":21},"end":{"line":16,"column":33}}},"4":{"name":"(anonymous_4)","line":22,"loc":{"start":{"line":22,"column":27},"end":{"line":22,"column":51}}},"5":{"name":"(anonymous_5)","line":37,"loc":{"start":{"line":37,"column":19},"end":{"line":37,"column":31}}},"6":{"name":"(anonymous_6)","line":58,"loc":{"start":{"line":58,"column":10},"end":{"line":58,"column":25}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":24}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":34}},"3":{"start":{"line":6,"column":0},"end":{"line":55,"column":1}},"4":{"start":{"line":8,"column":4},"end":{"line":8,"column":33}},"5":{"start":{"line":11,"column":4},"end":{"line":19,"column":5}},"6":{"start":{"line":12,"column":6},"end":{"line":18,"column":8}},"7":{"start":{"line":13,"column":8},"end":{"line":17,"column":10}},"8":{"start":{"line":16,"column":35},"end":{"line":16,"column":84}},"9":{"start":{"line":22,"column":4},"end":{"line":39,"column":6}},"10":{"start":{"line":23,"column":6},"end":{"line":32,"column":7}},"11":{"start":{"line":24,"column":8},"end":{"line":24,"column":60}},"12":{"start":{"line":25,"column":8},"end":{"line":31,"column":9}},"13":{"start":{"line":26,"column":10},"end":{"line":26,"column":36}},"14":{"start":{"line":28,"column":10},"end":{"line":30,"column":11}},"15":{"start":{"line":29,"column":12},"end":{"line":29,"column":78}},"16":{"start":{"line":34,"column":6},"end":{"line":38,"column":8}},"17":{"start":{"line":37,"column":33},"end":{"line":37,"column":82}},"18":{"start":{"line":42,"column":4},"end":{"line":42,"column":35}},"19":{"start":{"line":45,"column":4},"end":{"line":45,"column":38}},"20":{"start":{"line":53,"column":4},"end":{"line":53,"column":17}},"21":{"start":{"line":57,"column":0},"end":{"line":63,"column":1}},"22":{"start":{"line":59,"column":4},"end":{"line":61,"column":5}}},"branchMap":{"1":{"line":11,"type":"if","locations":[{"start":{"line":11,"column":4},"end":{"line":11,"column":4}},{"start":{"line":11,"column":4},"end":{"line":11,"column":4}}]},"2":{"line":23,"type":"if","locations":[{"start":{"line":23,"column":6},"end":{"line":23,"column":6}},{"start":{"line":23,"column":6},"end":{"line":23,"column":6}}]},"3":{"line":28,"type":"if","locations":[{"start":{"line":28,"column":10},"end":{"line":28,"column":10}},{"start":{"line":28,"column":10},"end":{"line":28,"column":10}}]}},"code":["'use strict'","","const fs = require('fs')","const cluster = require('cluster')","","exports['default'] = {","  logger: function (api) {","    let logger = {transports: []}","","    // console logger","    if (cluster.isMaster) {","      logger.transports.push(function (api, winston) {","        return new (winston.transports.Console)({","          colorize: true,","          level: 'info',","          timestamp: function () { return api.id + ' @ ' + new Date().toISOString() }","        })","      })","    }","","    // file logger","    logger.transports.push(function (api, winston) {","      if (api.config.general.paths.log.length === 1) {","        const logDirectory = api.config.general.paths.log[0]","        try {","          fs.mkdirSync(logDirectory)","        } catch (e) {","          if (e.code !== 'EEXIST') {","            throw (new Error('Cannot create log directory @ ' + logDirectory))","          }","        }","      }","","      return new (winston.transports.File)({","        filename: api.config.general.paths.log[0] + '/' + api.pids.title + '.log',","        level: 'info',","        timestamp: function () { return api.id + ' @ ' + new Date().toISOString() }","      })","    })","","    // the maximum length of param to log (we will truncate)","    logger.maxLogStringLength = 100","","    // should system logs (api.log) be localized?","    logger.localizeLogMessages = false","","    // you can optionally set custom log levels","    // logger.levels = {good: 0, bad: 1};","","    // you can optionally set custom log colors","    // logger.colors = {good: 'blue', bad: 'red'};","","    return logger","  }","}","","exports.test = {","  logger: function (api) {","    return {","      transports: null","    }","  }","}",""],"l":{"3":1,"4":1,"6":1,"8":0,"11":0,"12":0,"13":0,"16":0,"22":0,"23":0,"24":0,"25":0,"26":0,"28":0,"29":0,"34":0,"37":0,"42":0,"45":0,"53":0,"57":1,"59":0}},"/home/travis/build/npmtest/node-npmtest-actionhero/node_modules/actionhero/config/redis.js":{"path":"/home/travis/build/npmtest/node-npmtest-actionhero/node_modules/actionhero/config/redis.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0},"b":{"1":[1,1],"2":[1,1],"3":[1,1],"4":[1,1],"5":[0,0],"6":[0,0],"7":[0,0]},"f":{"1":0,"2":0},"fnMap":{"1":{"name":"(anonymous_1)","line":8,"loc":{"start":{"line":8,"column":9},"end":{"line":8,"column":24}}},"2":{"name":"retryStrategy","line":13,"loc":{"start":{"line":13,"column":4},"end":{"line":13,"column":35}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":50}},"2":{"start":{"line":2,"column":0},"end":{"line":2,"column":43}},"3":{"start":{"line":3,"column":0},"end":{"line":3,"column":36}},"4":{"start":{"line":4,"column":0},"end":{"line":4,"column":51}},"5":{"start":{"line":5,"column":0},"end":{"line":5,"column":23}},"6":{"start":{"line":7,"column":0},"end":{"line":61,"column":1}},"7":{"start":{"line":13,"column":4},"end":{"line":19,"column":5}},"8":{"start":{"line":14,"column":6},"end":{"line":17,"column":7}},"9":{"start":{"line":15,"column":8},"end":{"line":15,"column":88}},"10":{"start":{"line":16,"column":8},"end":{"line":16,"column":19}},"11":{"start":{"line":18,"column":6},"end":{"line":18,"column":45}},"12":{"start":{"line":21,"column":4},"end":{"line":59,"column":5}},"13":{"start":{"line":22,"column":6},"end":{"line":39,"column":7}},"14":{"start":{"line":41,"column":6},"end":{"line":58,"column":7}}},"branchMap":{"1":{"line":1,"type":"binary-expr","locations":[{"start":{"line":1,"column":13},"end":{"line":1,"column":35}},{"start":{"line":1,"column":39},"end":{"line":1,"column":50}}]},"2":{"line":2,"type":"binary-expr","locations":[{"start":{"line":2,"column":13},"end":{"line":2,"column":35}},{"start":{"line":2,"column":39},"end":{"line":2,"column":43}}]},"3":{"line":3,"type":"binary-expr","locations":[{"start":{"line":3,"column":11},"end":{"line":3,"column":31}},{"start":{"line":3,"column":35},"end":{"line":3,"column":36}}]},"4":{"line":4,"type":"binary-expr","locations":[{"start":{"line":4,"column":17},"end":{"line":4,"column":43}},{"start":{"line":4,"column":47},"end":{"line":4,"column":51}}]},"5":{"line":14,"type":"if","locations":[{"start":{"line":14,"column":6},"end":{"line":14,"column":6}},{"start":{"line":14,"column":6},"end":{"line":14,"column":6}}]},"6":{"line":21,"type":"if","locations":[{"start":{"line":21,"column":4},"end":{"line":21,"column":4}},{"start":{"line":21,"column":4},"end":{"line":21,"column":4}}]},"7":{"line":21,"type":"binary-expr","locations":[{"start":{"line":21,"column":8},"end":{"line":21,"column":41}},{"start":{"line":21,"column":45},"end":{"line":21,"column":81}}]}},"code":["const host = process.env.REDIS_HOST || '127.0.0.1'","const port = process.env.REDIS_PORT || 6379","const db = process.env.REDIS_DB || 0","const password = process.env.REDIS_PASSWORD || null","const maxBackoff = 1000","","exports['default'] = {","  redis: function (api) {","    // konstructor: The redis client constructor method","    // args: The arguments to pass to the constructor","    // buildNew: is it `new konstructor()` or just `konstructor()`?","","    function retryStrategy (times) {","      if (times === 1) {","        api.log('Unable to connect to Redis - please check your Redis config!', 'error')","        return 5000","      }","      return Math.min(times * 50, maxBackoff)","    }","","    if (process.env.FAKEREDIS === 'false' || process.env.REDIS_HOST !== undefined) {","      return {","        '_toExpand': false,","        client: {","          konstructor: require('ioredis'),","          args: [{ port: port, host: host, password: password, db: db, retryStrategy: retryStrategy }],","          buildNew: true","        },","        subscriber: {","          konstructor: require('ioredis'),","          args: [{ port: port, host: host, password: password, db: db, retryStrategy: retryStrategy }],","          buildNew: true","        },","        tasks: {","          konstructor: require('ioredis'),","          args: [{ port: port, host: host, password: password, db: db, retryStrategy: retryStrategy }],","          buildNew: true","        }","      }","    } else {","      return {","        '_toExpand': false,","        client: {","          konstructor: require('fakeredis').createClient,","          args: [port, host, {fast: true}],","          buildNew: false","        },","        subscriber: {","          konstructor: require('fakeredis').createClient,","          args: [port, host, {fast: true}],","          buildNew: false","        },","        tasks: {","          konstructor: require('fakeredis').createClient,","          args: [port, host, {fast: true}],","          buildNew: false","        }","      }","    }","  }","}",""],"l":{"1":1,"2":1,"3":1,"4":1,"5":1,"7":1,"13":1,"14":0,"15":0,"16":0,"18":0,"21":0,"22":0,"41":0}},"/home/travis/build/npmtest/node-npmtest-actionhero/node_modules/actionhero/config/routes.js":{"path":"/home/travis/build/npmtest/node-npmtest-actionhero/node_modules/actionhero/config/routes.js","s":{"1":1,"2":0},"b":{},"f":{"1":0},"fnMap":{"1":{"name":"(anonymous_1)","line":2,"loc":{"start":{"line":2,"column":10},"end":{"line":2,"column":25}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":32,"column":1}},"2":{"start":{"line":3,"column":4},"end":{"line":30,"column":5}}},"branchMap":{},"code":["exports['default'] = {","  routes: function (api) {","    return {","","      /* ---------------------","      routes.js","","      For web clients (http and https) you can define an optional RESTful mapping to help route requests to actions.","      If the client doesn't specify and action in a param, and the base route isn't a named action, the action will attempt to be discerned from this routes.js file.","","      Learn more here: http://www.actionherojs.com/docs/#routes","","      examples:","","      get: [","        { path: '/users', action: 'usersList' }, // (GET) /api/users","        { path: '/search/:term/limit/:limit/offset/:offset', action: 'search' }, // (GET) /api/search/car/limit/10/offset/100","      ],","","      post: [","        { path: '/login/:userID(^\\\\d{3}$)', action: 'login' } // (POST) /api/login/123","      ],","","      all: [","        { path: '/user/:userID', action: 'user', matchTrailingPathParts: true } // (*) /api/user/123, api/user/123/stuff","      ]","","      ---------------------- */","","    }","  }","}",""],"l":{"1":1,"3":0}},"/home/travis/build/npmtest/node-npmtest-actionhero/node_modules/actionhero/config/tasks.js":{"path":"/home/travis/build/npmtest/node-npmtest-actionhero/node_modules/actionhero/config/tasks.js","s":{"1":1,"2":0,"3":1,"4":0},"b":{},"f":{"1":0,"2":0},"fnMap":{"1":{"name":"(anonymous_1)","line":2,"loc":{"start":{"line":2,"column":9},"end":{"line":2,"column":24}}},"2":{"name":"(anonymous_2)","line":55,"loc":{"start":{"line":55,"column":9},"end":{"line":55,"column":24}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":52,"column":1}},"2":{"start":{"line":3,"column":4},"end":{"line":50,"column":5}},"3":{"start":{"line":54,"column":0},"end":{"line":61,"column":1}},"4":{"start":{"line":56,"column":4},"end":{"line":59,"column":5}}},"branchMap":{},"code":["exports['default'] = {","  tasks: function (api) {","    return {","      // Should this node run a scheduler to promote delayed tasks?","      scheduler: false,","      // what queues should the taskProcessors work?","      queues: ['*'],","      // Logging levels of task workers","      workerLogging: {","        failure: 'error', // task failure","        success: 'info',  // task success","        start: 'info',","        end: 'info',","        cleaning_worker: 'info',","        poll: 'debug',","        job: 'debug',","        pause: 'debug',","        internalError: 'error',","        multiWorkerAction: 'debug'","      },","      // Logging levels of the task scheduler","      schedulerLogging: {","        start: 'info',","        end: 'info',","        poll: 'debug',","        enqueue: 'debug',","        reEnqueue: 'debug',","        working_timestamp: 'debug',","        transferred_job: 'debug'","      },","      // how long to sleep between jobs / scheduler checks","      timeout: 5000,","      // at minimum, how many parallel taskProcessors should this node spawn?","      // (have number > 0 to enable, and < 1 to disable)","      minTaskProcessors: 0,","      // at maximum, how many parallel taskProcessors should this node spawn?","      maxTaskProcessors: 0,","      // how often should we check the event loop to spawn more taskProcessors?","      checkTimeout: 500,","      // how many ms would constitue an event loop delay to halt taskProcessors spawning?","      maxEventLoopDelay: 5,","      // When we kill off a taskProcessor, should we disconnect that local redis connection?","      toDisconnectProcessors: true,","      // Customize Resque primitives, replace null with required replacement.","      resque_overrides: {","        queue: null,","        multiWorker: null,","        scheduler: null","      }","    }","  }","}","","exports.test = {","  tasks: function (api) {","    return {","      timeout: 100,","      checkTimeout: 50","    }","  }","}",""],"l":{"1":1,"3":0,"54":1,"56":0}},"/home/travis/build/npmtest/node-npmtest-actionhero/node_modules/actionhero/initializers/actionProcessor.js":{"path":"/home/travis/build/npmtest/node-npmtest-actionhero/node_modules/actionhero/initializers/actionProcessor.js","s":{"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":0,"138":0,"139":0,"140":0,"141":0,"142":0,"143":0,"144":0,"145":0,"146":0,"147":0,"148":0,"149":0,"150":0,"151":0,"152":0,"153":0,"154":0,"155":0,"156":0,"157":0,"158":0,"159":0,"160":0,"161":0,"162":0,"163":0,"164":0,"165":0,"166":0,"167":0,"168":0,"169":0,"170":0,"171":0,"172":0,"173":0,"174":0,"175":0,"176":0,"177":0,"178":0,"179":0,"180":0,"181":0,"182":0,"183":0,"184":0,"185":0,"186":0,"187":0,"188":0,"189":0,"190":0,"191":0,"192":0,"193":0,"194":0,"195":0,"196":0,"197":0,"198":0,"199":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0],"34":[0,0],"35":[0,0],"36":[0,0],"37":[0,0],"38":[0,0],"39":[0,0],"40":[0,0],"41":[0,0],"42":[0,0],"43":[0,0],"44":[0,0],"45":[0,0],"46":[0,0],"47":[0,0],"48":[0,0],"49":[0,0],"50":[0,0],"51":[0,0],"52":[0,0],"53":[0,0],"54":[0,0],"55":[0,0],"56":[0,0],"57":[0,0],"58":[0,0],"59":[0,0],"60":[0,0],"61":[0,0],"62":[0,0],"63":[0,0],"64":[0,0],"65":[0,0],"66":[0,0],"67":[0,0],"68":[0,0],"69":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0},"fnMap":{"1":{"name":"(anonymous_1)","line":7,"loc":{"start":{"line":7,"column":14},"end":{"line":7,"column":35}}},"2":{"name":"(anonymous_2)","line":8,"loc":{"start":{"line":8,"column":32},"end":{"line":8,"column":50}}},"3":{"name":"(anonymous_3)","line":15,"loc":{"start":{"line":15,"column":26},"end":{"line":15,"column":58}}},"4":{"name":"(anonymous_4)","line":37,"loc":{"start":{"line":37,"column":58},"end":{"line":37,"column":75}}},"5":{"name":"(anonymous_5)","line":42,"loc":{"start":{"line":42,"column":60},"end":{"line":42,"column":77}}},"6":{"name":"(anonymous_6)","line":47,"loc":{"start":{"line":47,"column":58},"end":{"line":47,"column":70}}},"7":{"name":"(anonymous_7)","line":51,"loc":{"start":{"line":51,"column":51},"end":{"line":51,"column":69}}},"8":{"name":"(anonymous_8)","line":98,"loc":{"start":{"line":98,"column":46},"end":{"line":98,"column":63}}},"9":{"name":"(anonymous_9)","line":138,"loc":{"start":{"line":138,"column":53},"end":{"line":138,"column":73}}},"10":{"name":"(anonymous_10)","line":143,"loc":{"start":{"line":143,"column":47},"end":{"line":143,"column":60}}},"11":{"name":"(anonymous_11)","line":155,"loc":{"start":{"line":155,"column":54},"end":{"line":155,"column":74}}},"12":{"name":"(anonymous_12)","line":172,"loc":{"start":{"line":172,"column":49},"end":{"line":172,"column":70}}},"13":{"name":"(anonymous_13)","line":190,"loc":{"start":{"line":190,"column":50},"end":{"line":190,"column":91}}},"14":{"name":"(anonymous_14)","line":242,"loc":{"start":{"line":242,"column":51},"end":{"line":242,"column":72}}},"15":{"name":"(anonymous_15)","line":261,"loc":{"start":{"line":261,"column":50},"end":{"line":261,"column":62}}},"16":{"name":"(anonymous_16)","line":288,"loc":{"start":{"line":288,"column":46},"end":{"line":288,"column":58}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":30}},"2":{"start":{"line":5,"column":0},"end":{"line":317,"column":1}},"3":{"start":{"line":8,"column":4},"end":{"line":13,"column":5}},"4":{"start":{"line":9,"column":6},"end":{"line":9,"column":40}},"5":{"start":{"line":10,"column":6},"end":{"line":10,"column":34}},"6":{"start":{"line":11,"column":6},"end":{"line":11,"column":100}},"7":{"start":{"line":11,"column":27},"end":{"line":11,"column":99}},"8":{"start":{"line":12,"column":6},"end":{"line":12,"column":55}},"9":{"start":{"line":15,"column":4},"end":{"line":35,"column":5}},"10":{"start":{"line":16,"column":6},"end":{"line":18,"column":7}},"11":{"start":{"line":17,"column":8},"end":{"line":17,"column":54}},"12":{"start":{"line":20,"column":6},"end":{"line":20,"column":34}},"13":{"start":{"line":21,"column":6},"end":{"line":21,"column":24}},"14":{"start":{"line":22,"column":6},"end":{"line":22,"column":27}},"15":{"start":{"line":23,"column":6},"end":{"line":23,"column":26}},"16":{"start":{"line":24,"column":6},"end":{"line":24,"column":49}},"17":{"start":{"line":25,"column":6},"end":{"line":25,"column":37}},"18":{"start":{"line":26,"column":6},"end":{"line":26,"column":30}},"19":{"start":{"line":27,"column":6},"end":{"line":27,"column":29}},"20":{"start":{"line":28,"column":6},"end":{"line":28,"column":31}},"21":{"start":{"line":29,"column":6},"end":{"line":29,"column":33}},"22":{"start":{"line":30,"column":6},"end":{"line":30,"column":32}},"23":{"start":{"line":31,"column":6},"end":{"line":31,"column":26}},"24":{"start":{"line":32,"column":6},"end":{"line":32,"column":24}},"25":{"start":{"line":33,"column":6},"end":{"line":33,"column":26}},"26":{"start":{"line":34,"column":6},"end":{"line":34,"column":30}},"27":{"start":{"line":37,"column":4},"end":{"line":40,"column":5}},"28":{"start":{"line":38,"column":6},"end":{"line":38,"column":31}},"29":{"start":{"line":38,"column":20},"end":{"line":38,"column":30}},"30":{"start":{"line":39,"column":6},"end":{"line":39,"column":73}},"31":{"start":{"line":42,"column":4},"end":{"line":45,"column":5}},"32":{"start":{"line":43,"column":6},"end":{"line":43,"column":31}},"33":{"start":{"line":43,"column":20},"end":{"line":43,"column":30}},"34":{"start":{"line":44,"column":6},"end":{"line":44,"column":77}},"35":{"start":{"line":47,"column":4},"end":{"line":49,"column":5}},"36":{"start":{"line":48,"column":6},"end":{"line":48,"column":43}},"37":{"start":{"line":51,"column":4},"end":{"line":96,"column":5}},"38":{"start":{"line":52,"column":6},"end":{"line":52,"column":22}},"39":{"start":{"line":53,"column":6},"end":{"line":53,"column":40}},"40":{"start":{"line":55,"column":6},"end":{"line":71,"column":7}},"41":{"start":{"line":56,"column":8},"end":{"line":56,"column":22}},"42":{"start":{"line":57,"column":13},"end":{"line":71,"column":7}},"43":{"start":{"line":58,"column":8},"end":{"line":58,"column":58}},"44":{"start":{"line":59,"column":13},"end":{"line":71,"column":7}},"45":{"start":{"line":60,"column":8},"end":{"line":60,"column":61}},"46":{"start":{"line":61,"column":13},"end":{"line":71,"column":7}},"47":{"start":{"line":62,"column":8},"end":{"line":62,"column":53}},"48":{"start":{"line":63,"column":13},"end":{"line":71,"column":7}},"49":{"start":{"line":64,"column":8},"end":{"line":64,"column":61}},"50":{"start":{"line":65,"column":13},"end":{"line":71,"column":7}},"51":{"start":{"line":66,"column":8},"end":{"line":66,"column":73}},"52":{"start":{"line":67,"column":13},"end":{"line":71,"column":7}},"53":{"start":{"line":68,"column":8},"end":{"line":68,"column":75}},"54":{"start":{"line":69,"column":13},"end":{"line":71,"column":7}},"55":{"start":{"line":70,"column":8},"end":{"line":70,"column":22}},"56":{"start":{"line":73,"column":6},"end":{"line":75,"column":7}},"57":{"start":{"line":74,"column":8},"end":{"line":74,"column":32}},"58":{"start":{"line":77,"column":6},"end":{"line":83,"column":7}},"59":{"start":{"line":78,"column":8},"end":{"line":82,"column":9}},"60":{"start":{"line":79,"column":10},"end":{"line":79,"column":42}},"61":{"start":{"line":81,"column":10},"end":{"line":81,"column":37}},"62":{"start":{"line":85,"column":6},"end":{"line":85,"column":38}},"63":{"start":{"line":86,"column":6},"end":{"line":86,"column":65}},"64":{"start":{"line":88,"column":6},"end":{"line":92,"column":8}},"65":{"start":{"line":89,"column":8},"end":{"line":91,"column":9}},"66":{"start":{"line":90,"column":10},"end":{"line":90,"column":29}},"67":{"start":{"line":94,"column":6},"end":{"line":94,"column":26}},"68":{"start":{"line":95,"column":6},"end":{"line":95,"column":27}},"69":{"start":{"line":98,"column":4},"end":{"line":136,"column":5}},"70":{"start":{"line":100,"column":6},"end":{"line":100,"column":27}},"71":{"start":{"line":101,"column":6},"end":{"line":103,"column":7}},"72":{"start":{"line":102,"column":8},"end":{"line":102,"column":47}},"73":{"start":{"line":105,"column":6},"end":{"line":105,"column":29}},"74":{"start":{"line":106,"column":6},"end":{"line":114,"column":7}},"75":{"start":{"line":107,"column":8},"end":{"line":113,"column":9}},"76":{"start":{"line":108,"column":10},"end":{"line":108,"column":42}},"77":{"start":{"line":109,"column":15},"end":{"line":113,"column":9}},"78":{"start":{"line":110,"column":10},"end":{"line":110,"column":95}},"79":{"start":{"line":112,"column":10},"end":{"line":112,"column":44}},"80":{"start":{"line":116,"column":6},"end":{"line":121,"column":7}},"81":{"start":{"line":123,"column":6},"end":{"line":133,"column":7}},"82":{"start":{"line":124,"column":8},"end":{"line":132,"column":9}},"83":{"start":{"line":125,"column":10},"end":{"line":125,"column":39}},"84":{"start":{"line":127,"column":10},"end":{"line":131,"column":11}},"85":{"start":{"line":128,"column":12},"end":{"line":128,"column":49}},"86":{"start":{"line":130,"column":12},"end":{"line":130,"column":41}},"87":{"start":{"line":135,"column":6},"end":{"line":135,"column":75}},"88":{"start":{"line":138,"column":4},"end":{"line":153,"column":5}},"89":{"start":{"line":139,"column":6},"end":{"line":139,"column":25}},"90":{"start":{"line":140,"column":6},"end":{"line":140,"column":64}},"91":{"start":{"line":142,"column":6},"end":{"line":144,"column":7}},"92":{"start":{"line":143,"column":8},"end":{"line":143,"column":87}},"93":{"start":{"line":143,"column":62},"end":{"line":143,"column":85}},"94":{"start":{"line":146,"column":6},"end":{"line":150,"column":8}},"95":{"start":{"line":147,"column":8},"end":{"line":149,"column":9}},"96":{"start":{"line":148,"column":10},"end":{"line":148,"column":94}},"97":{"start":{"line":148,"column":38},"end":{"line":148,"column":92}},"98":{"start":{"line":152,"column":6},"end":{"line":152,"column":40}},"99":{"start":{"line":155,"column":4},"end":{"line":170,"column":5}},"100":{"start":{"line":156,"column":6},"end":{"line":156,"column":25}},"101":{"start":{"line":157,"column":6},"end":{"line":157,"column":64}},"102":{"start":{"line":159,"column":6},"end":{"line":161,"column":7}},"103":{"start":{"line":160,"column":8},"end":{"line":160,"column":81}},"104":{"start":{"line":160,"column":56},"end":{"line":160,"column":79}},"105":{"start":{"line":163,"column":6},"end":{"line":167,"column":8}},"106":{"start":{"line":164,"column":8},"end":{"line":166,"column":9}},"107":{"start":{"line":165,"column":10},"end":{"line":165,"column":95}},"108":{"start":{"line":165,"column":38},"end":{"line":165,"column":93}},"109":{"start":{"line":169,"column":6},"end":{"line":169,"column":40}},"110":{"start":{"line":172,"column":4},"end":{"line":188,"column":5}},"111":{"start":{"line":173,"column":6},"end":{"line":173,"column":51}},"112":{"start":{"line":174,"column":6},"end":{"line":174,"column":30}},"113":{"start":{"line":175,"column":6},"end":{"line":178,"column":7}},"114":{"start":{"line":176,"column":8},"end":{"line":176,"column":61}},"115":{"start":{"line":177,"column":8},"end":{"line":177,"column":39}},"116":{"start":{"line":180,"column":6},"end":{"line":180,"column":50}},"117":{"start":{"line":181,"column":6},"end":{"line":187,"column":7}},"118":{"start":{"line":182,"column":8},"end":{"line":186,"column":9}},"119":{"start":{"line":183,"column":10},"end":{"line":185,"column":11}},"120":{"start":{"line":184,"column":12},"end":{"line":184,"column":28}},"121":{"start":{"line":190,"column":4},"end":{"line":240,"column":5}},"122":{"start":{"line":192,"column":6},"end":{"line":198,"column":7}},"123":{"start":{"line":193,"column":8},"end":{"line":197,"column":9}},"124":{"start":{"line":194,"column":10},"end":{"line":194,"column":69}},"125":{"start":{"line":196,"column":10},"end":{"line":196,"column":40}},"126":{"start":{"line":201,"column":6},"end":{"line":212,"column":7}},"127":{"start":{"line":202,"column":8},"end":{"line":202,"column":84}},"128":{"start":{"line":202,"column":47},"end":{"line":202,"column":83}},"129":{"start":{"line":204,"column":8},"end":{"line":211,"column":10}},"130":{"start":{"line":205,"column":10},"end":{"line":210,"column":11}},"131":{"start":{"line":206,"column":12},"end":{"line":206,"column":64}},"132":{"start":{"line":208,"column":12},"end":{"line":208,"column":57}},"133":{"start":{"line":209,"column":12},"end":{"line":209,"column":61}},"134":{"start":{"line":215,"column":6},"end":{"line":228,"column":7}},"135":{"start":{"line":216,"column":8},"end":{"line":216,"column":84}},"136":{"start":{"line":216,"column":47},"end":{"line":216,"column":83}},"137":{"start":{"line":218,"column":8},"end":{"line":227,"column":10}},"138":{"start":{"line":219,"column":10},"end":{"line":219,"column":31}},"139":{"start":{"line":220,"column":10},"end":{"line":225,"column":11}},"140":{"start":{"line":221,"column":12},"end":{"line":221,"column":70}},"141":{"start":{"line":223,"column":12},"end":{"line":223,"column":57}},"142":{"start":{"line":224,"column":12},"end":{"line":224,"column":67}},"143":{"start":{"line":226,"column":10},"end":{"line":226,"column":90}},"144":{"start":{"line":226,"column":44},"end":{"line":226,"column":89}},"145":{"start":{"line":231,"column":6},"end":{"line":239,"column":7}},"146":{"start":{"line":232,"column":8},"end":{"line":238,"column":9}},"147":{"start":{"line":233,"column":10},"end":{"line":233,"column":30}},"148":{"start":{"line":234,"column":10},"end":{"line":236,"column":11}},"149":{"start":{"line":235,"column":12},"end":{"line":235,"column":53}},"150":{"start":{"line":237,"column":10},"end":{"line":237,"column":45}},"151":{"start":{"line":242,"column":4},"end":{"line":259,"column":5}},"152":{"start":{"line":243,"column":6},"end":{"line":243,"column":51}},"153":{"start":{"line":244,"column":6},"end":{"line":244,"column":30}},"154":{"start":{"line":245,"column":6},"end":{"line":248,"column":7}},"155":{"start":{"line":246,"column":8},"end":{"line":246,"column":61}},"156":{"start":{"line":247,"column":8},"end":{"line":247,"column":39}},"157":{"start":{"line":250,"column":6},"end":{"line":258,"column":8}},"158":{"start":{"line":251,"column":8},"end":{"line":251,"column":33}},"159":{"start":{"line":252,"column":8},"end":{"line":252,"column":57}},"160":{"start":{"line":254,"column":8},"end":{"line":257,"column":9}},"161":{"start":{"line":255,"column":10},"end":{"line":255,"column":32}},"162":{"start":{"line":256,"column":10},"end":{"line":256,"column":34}},"163":{"start":{"line":261,"column":4},"end":{"line":286,"column":5}},"164":{"start":{"line":262,"column":6},"end":{"line":262,"column":49}},"165":{"start":{"line":263,"column":6},"end":{"line":263,"column":25}},"166":{"start":{"line":264,"column":6},"end":{"line":264,"column":34}},"167":{"start":{"line":265,"column":6},"end":{"line":265,"column":36}},"168":{"start":{"line":266,"column":6},"end":{"line":266,"column":38}},"169":{"start":{"line":268,"column":6},"end":{"line":273,"column":7}},"170":{"start":{"line":269,"column":8},"end":{"line":271,"column":9}},"171":{"start":{"line":270,"column":10},"end":{"line":270,"column":114}},"172":{"start":{"line":272,"column":8},"end":{"line":272,"column":86}},"173":{"start":{"line":275,"column":6},"end":{"line":285,"column":7}},"174":{"start":{"line":276,"column":8},"end":{"line":276,"column":51}},"175":{"start":{"line":277,"column":13},"end":{"line":285,"column":7}},"176":{"start":{"line":278,"column":8},"end":{"line":278,"column":48}},"177":{"start":{"line":279,"column":13},"end":{"line":285,"column":7}},"178":{"start":{"line":280,"column":8},"end":{"line":280,"column":45}},"179":{"start":{"line":281,"column":13},"end":{"line":285,"column":7}},"180":{"start":{"line":282,"column":8},"end":{"line":282,"column":54}},"181":{"start":{"line":284,"column":8},"end":{"line":284,"column":24}},"182":{"start":{"line":288,"column":4},"end":{"line":313,"column":5}},"183":{"start":{"line":289,"column":6},"end":{"line":312,"column":8}},"184":{"start":{"line":290,"column":8},"end":{"line":290,"column":27}},"185":{"start":{"line":291,"column":8},"end":{"line":291,"column":29}},"186":{"start":{"line":293,"column":8},"end":{"line":311,"column":9}},"187":{"start":{"line":294,"column":10},"end":{"line":294,"column":36}},"188":{"start":{"line":295,"column":15},"end":{"line":311,"column":9}},"189":{"start":{"line":296,"column":10},"end":{"line":296,"column":47}},"190":{"start":{"line":297,"column":15},"end":{"line":311,"column":9}},"191":{"start":{"line":298,"column":10},"end":{"line":298,"column":49}},"192":{"start":{"line":299,"column":15},"end":{"line":311,"column":9}},"193":{"start":{"line":300,"column":10},"end":{"line":308,"column":12}},"194":{"start":{"line":301,"column":12},"end":{"line":307,"column":13}},"195":{"start":{"line":302,"column":14},"end":{"line":302,"column":40}},"196":{"start":{"line":304,"column":14},"end":{"line":306,"column":16}},"197":{"start":{"line":305,"column":16},"end":{"line":305,"column":42}},"198":{"start":{"line":310,"column":10},"end":{"line":310,"column":31}},"199":{"start":{"line":315,"column":4},"end":{"line":315,"column":10}}},"branchMap":{"1":{"line":11,"type":"if","locations":[{"start":{"line":11,"column":6},"end":{"line":11,"column":6}},{"start":{"line":11,"column":6},"end":{"line":11,"column":6}}]},"2":{"line":16,"type":"if","locations":[{"start":{"line":16,"column":6},"end":{"line":16,"column":6}},{"start":{"line":16,"column":6},"end":{"line":16,"column":6}}]},"3":{"line":38,"type":"if","locations":[{"start":{"line":38,"column":6},"end":{"line":38,"column":6}},{"start":{"line":38,"column":6},"end":{"line":38,"column":6}}]},"4":{"line":43,"type":"if","locations":[{"start":{"line":43,"column":6},"end":{"line":43,"column":6}},{"start":{"line":43,"column":6},"end":{"line":43,"column":6}}]},"5":{"line":55,"type":"if","locations":[{"start":{"line":55,"column":6},"end":{"line":55,"column":6}},{"start":{"line":55,"column":6},"end":{"line":55,"column":6}}]},"6":{"line":57,"type":"if","locations":[{"start":{"line":57,"column":13},"end":{"line":57,"column":13}},{"start":{"line":57,"column":13},"end":{"line":57,"column":13}}]},"7":{"line":59,"type":"if","locations":[{"start":{"line":59,"column":13},"end":{"line":59,"column":13}},{"start":{"line":59,"column":13},"end":{"line":59,"column":13}}]},"8":{"line":61,"type":"if","locations":[{"start":{"line":61,"column":13},"end":{"line":61,"column":13}},{"start":{"line":61,"column":13},"end":{"line":61,"column":13}}]},"9":{"line":63,"type":"if","locations":[{"start":{"line":63,"column":13},"end":{"line":63,"column":13}},{"start":{"line":63,"column":13},"end":{"line":63,"column":13}}]},"10":{"line":65,"type":"if","locations":[{"start":{"line":65,"column":13},"end":{"line":65,"column":13}},{"start":{"line":65,"column":13},"end":{"line":65,"column":13}}]},"11":{"line":67,"type":"if","locations":[{"start":{"line":67,"column":13},"end":{"line":67,"column":13}},{"start":{"line":67,"column":13},"end":{"line":67,"column":13}}]},"12":{"line":69,"type":"if","locations":[{"start":{"line":69,"column":13},"end":{"line":69,"column":13}},{"start":{"line":69,"column":13},"end":{"line":69,"column":13}}]},"13":{"line":73,"type":"if","locations":[{"start":{"line":73,"column":6},"end":{"line":73,"column":6}},{"start":{"line":73,"column":6},"end":{"line":73,"column":6}}]},"14":{"line":73,"type":"binary-expr","locations":[{"start":{"line":73,"column":10},"end":{"line":73,"column":15}},{"start":{"line":73,"column":19},"end":{"line":73,"column":44}}]},"15":{"line":77,"type":"if","locations":[{"start":{"line":77,"column":6},"end":{"line":77,"column":6}},{"start":{"line":77,"column":6},"end":{"line":77,"column":6}}]},"16":{"line":77,"type":"binary-expr","locations":[{"start":{"line":77,"column":10},"end":{"line":77,"column":15}},{"start":{"line":77,"column":19},"end":{"line":77,"column":39}}]},"17":{"line":78,"type":"if","locations":[{"start":{"line":78,"column":8},"end":{"line":78,"column":8}},{"start":{"line":78,"column":8},"end":{"line":78,"column":8}}]},"18":{"line":78,"type":"binary-expr","locations":[{"start":{"line":78,"column":12},"end":{"line":78,"column":45}},{"start":{"line":78,"column":49},"end":{"line":78,"column":77}}]},"19":{"line":89,"type":"if","locations":[{"start":{"line":89,"column":8},"end":{"line":89,"column":8}},{"start":{"line":89,"column":8},"end":{"line":89,"column":8}}]},"20":{"line":101,"type":"if","locations":[{"start":{"line":101,"column":6},"end":{"line":101,"column":6}},{"start":{"line":101,"column":6},"end":{"line":101,"column":6}}]},"21":{"line":101,"type":"binary-expr","locations":[{"start":{"line":101,"column":10},"end":{"line":101,"column":29}},{"start":{"line":101,"column":33},"end":{"line":101,"column":61}}]},"22":{"line":107,"type":"if","locations":[{"start":{"line":107,"column":8},"end":{"line":107,"column":8}},{"start":{"line":107,"column":8},"end":{"line":107,"column":8}}]},"23":{"line":107,"type":"binary-expr","locations":[{"start":{"line":107,"column":12},"end":{"line":107,"column":45}},{"start":{"line":107,"column":49},"end":{"line":107,"column":98}}]},"24":{"line":109,"type":"if","locations":[{"start":{"line":109,"column":15},"end":{"line":109,"column":15}},{"start":{"line":109,"column":15},"end":{"line":109,"column":15}}]},"25":{"line":123,"type":"if","locations":[{"start":{"line":123,"column":6},"end":{"line":123,"column":6}},{"start":{"line":123,"column":6},"end":{"line":123,"column":6}}]},"26":{"line":124,"type":"if","locations":[{"start":{"line":124,"column":8},"end":{"line":124,"column":8}},{"start":{"line":124,"column":8},"end":{"line":124,"column":8}}]},"27":{"line":142,"type":"if","locations":[{"start":{"line":142,"column":6},"end":{"line":142,"column":6}},{"start":{"line":142,"column":6},"end":{"line":142,"column":6}}]},"28":{"line":147,"type":"if","locations":[{"start":{"line":147,"column":8},"end":{"line":147,"column":8}},{"start":{"line":147,"column":8},"end":{"line":147,"column":8}}]},"29":{"line":159,"type":"if","locations":[{"start":{"line":159,"column":6},"end":{"line":159,"column":6}},{"start":{"line":159,"column":6},"end":{"line":159,"column":6}}]},"30":{"line":164,"type":"if","locations":[{"start":{"line":164,"column":8},"end":{"line":164,"column":8}},{"start":{"line":164,"column":8},"end":{"line":164,"column":8}}]},"31":{"line":173,"type":"binary-expr","locations":[{"start":{"line":173,"column":19},"end":{"line":173,"column":45}},{"start":{"line":173,"column":49},"end":{"line":173,"column":51}}]},"32":{"line":175,"type":"if","locations":[{"start":{"line":175,"column":6},"end":{"line":175,"column":6}},{"start":{"line":175,"column":6},"end":{"line":175,"column":6}}]},"33":{"line":180,"type":"binary-expr","locations":[{"start":{"line":180,"column":25},"end":{"line":180,"column":44}},{"start":{"line":180,"column":48},"end":{"line":180,"column":50}}]},"34":{"line":181,"type":"if","locations":[{"start":{"line":181,"column":6},"end":{"line":181,"column":6}},{"start":{"line":181,"column":6},"end":{"line":181,"column":6}}]},"35":{"line":183,"type":"if","locations":[{"start":{"line":183,"column":10},"end":{"line":183,"column":10}},{"start":{"line":183,"column":10},"end":{"line":183,"column":10}}]},"36":{"line":183,"type":"binary-expr","locations":[{"start":{"line":183,"column":14},"end":{"line":183,"column":56}},{"start":{"line":183,"column":60},"end":{"line":183,"column":85}}]},"37":{"line":192,"type":"if","locations":[{"start":{"line":192,"column":6},"end":{"line":192,"column":6}},{"start":{"line":192,"column":6},"end":{"line":192,"column":6}}]},"38":{"line":192,"type":"binary-expr","locations":[{"start":{"line":192,"column":10},"end":{"line":192,"column":35}},{"start":{"line":192,"column":39},"end":{"line":192,"column":69}}]},"39":{"line":193,"type":"if","locations":[{"start":{"line":193,"column":8},"end":{"line":193,"column":8}},{"start":{"line":193,"column":8},"end":{"line":193,"column":8}}]},"40":{"line":201,"type":"if","locations":[{"start":{"line":201,"column":6},"end":{"line":201,"column":6}},{"start":{"line":201,"column":6},"end":{"line":201,"column":6}}]},"41":{"line":201,"type":"binary-expr","locations":[{"start":{"line":201,"column":10},"end":{"line":201,"column":35}},{"start":{"line":201,"column":39},"end":{"line":201,"column":68}}]},"42":{"line":202,"type":"if","locations":[{"start":{"line":202,"column":8},"end":{"line":202,"column":8}},{"start":{"line":202,"column":8},"end":{"line":202,"column":8}}]},"43":{"line":205,"type":"if","locations":[{"start":{"line":205,"column":10},"end":{"line":205,"column":10}},{"start":{"line":205,"column":10},"end":{"line":205,"column":10}}]},"44":{"line":215,"type":"if","locations":[{"start":{"line":215,"column":6},"end":{"line":215,"column":6}},{"start":{"line":215,"column":6},"end":{"line":215,"column":6}}]},"45":{"line":215,"type":"binary-expr","locations":[{"start":{"line":215,"column":10},"end":{"line":215,"column":35}},{"start":{"line":215,"column":39},"end":{"line":215,"column":68}}]},"46":{"line":216,"type":"if","locations":[{"start":{"line":216,"column":8},"end":{"line":216,"column":8}},{"start":{"line":216,"column":8},"end":{"line":216,"column":8}}]},"47":{"line":220,"type":"if","locations":[{"start":{"line":220,"column":10},"end":{"line":220,"column":10}},{"start":{"line":220,"column":10},"end":{"line":220,"column":10}}]},"48":{"line":226,"type":"if","locations":[{"start":{"line":226,"column":10},"end":{"line":226,"column":10}},{"start":{"line":226,"column":10},"end":{"line":226,"column":10}}]},"49":{"line":231,"type":"if","locations":[{"start":{"line":231,"column":6},"end":{"line":231,"column":6}},{"start":{"line":231,"column":6},"end":{"line":231,"column":6}}]},"50":{"line":232,"type":"if","locations":[{"start":{"line":232,"column":8},"end":{"line":232,"column":8}},{"start":{"line":232,"column":8},"end":{"line":232,"column":8}}]},"51":{"line":234,"type":"if","locations":[{"start":{"line":234,"column":10},"end":{"line":234,"column":10}},{"start":{"line":234,"column":10},"end":{"line":234,"column":10}}]},"52":{"line":243,"type":"binary-expr","locations":[{"start":{"line":243,"column":19},"end":{"line":243,"column":45}},{"start":{"line":243,"column":49},"end":{"line":243,"column":51}}]},"53":{"line":245,"type":"if","locations":[{"start":{"line":245,"column":6},"end":{"line":245,"column":6}},{"start":{"line":245,"column":6},"end":{"line":245,"column":6}}]},"54":{"line":254,"type":"if","locations":[{"start":{"line":254,"column":8},"end":{"line":254,"column":8}},{"start":{"line":254,"column":8},"end":{"line":254,"column":8}}]},"55":{"line":254,"type":"binary-expr","locations":[{"start":{"line":254,"column":12},"end":{"line":254,"column":24}},{"start":{"line":254,"column":28},"end":{"line":254,"column":39}}]},"56":{"line":268,"type":"if","locations":[{"start":{"line":268,"column":6},"end":{"line":268,"column":6}},{"start":{"line":268,"column":6},"end":{"line":268,"column":6}}]},"57":{"line":269,"type":"if","locations":[{"start":{"line":269,"column":8},"end":{"line":269,"column":8}},{"start":{"line":269,"column":8},"end":{"line":269,"column":8}}]},"58":{"line":275,"type":"if","locations":[{"start":{"line":275,"column":6},"end":{"line":275,"column":6}},{"start":{"line":275,"column":6},"end":{"line":275,"column":6}}]},"59":{"line":277,"type":"if","locations":[{"start":{"line":277,"column":13},"end":{"line":277,"column":13}},{"start":{"line":277,"column":13},"end":{"line":277,"column":13}}]},"60":{"line":279,"type":"if","locations":[{"start":{"line":279,"column":13},"end":{"line":279,"column":13}},{"start":{"line":279,"column":13},"end":{"line":279,"column":13}}]},"61":{"line":279,"type":"binary-expr","locations":[{"start":{"line":279,"column":17},"end":{"line":279,"column":29}},{"start":{"line":279,"column":33},"end":{"line":279,"column":53}}]},"62":{"line":281,"type":"if","locations":[{"start":{"line":281,"column":13},"end":{"line":281,"column":13}},{"start":{"line":281,"column":13},"end":{"line":281,"column":13}}]},"63":{"line":281,"type":"binary-expr","locations":[{"start":{"line":281,"column":17},"end":{"line":281,"column":59}},{"start":{"line":281,"column":63},"end":{"line":281,"column":140}}]},"64":{"line":293,"type":"if","locations":[{"start":{"line":293,"column":8},"end":{"line":293,"column":8}},{"start":{"line":293,"column":8},"end":{"line":293,"column":8}}]},"65":{"line":295,"type":"if","locations":[{"start":{"line":295,"column":15},"end":{"line":295,"column":15}},{"start":{"line":295,"column":15},"end":{"line":295,"column":15}}]},"66":{"line":297,"type":"if","locations":[{"start":{"line":297,"column":15},"end":{"line":297,"column":15}},{"start":{"line":297,"column":15},"end":{"line":297,"column":15}}]},"67":{"line":299,"type":"if","locations":[{"start":{"line":299,"column":15},"end":{"line":299,"column":15}},{"start":{"line":299,"column":15},"end":{"line":299,"column":15}}]},"68":{"line":299,"type":"binary-expr","locations":[{"start":{"line":299,"column":19},"end":{"line":299,"column":42}},{"start":{"line":299,"column":46},"end":{"line":299,"column":52}}]},"69":{"line":301,"type":"if","locations":[{"start":{"line":301,"column":12},"end":{"line":301,"column":12}},{"start":{"line":301,"column":12},"end":{"line":301,"column":12}}]}},"code":["'use strict'","","const async = require('async')","","module.exports = {","  loadPriority: 430,","  initialize: function (api, next) {","    const prepareStringMethod = function (method) {","      const cmdParts = method.split('.')","      const cmd = cmdParts.shift()","      if (cmd !== 'api') { throw new Error('cannot operate on a method outside of the api object') }","      return api.utils.stringToHash(cmdParts.join('.'))","    }","","    api.ActionProcessor = function (connection, callback) {","      if (!connection) {","        throw new Error('data.connection is required')","      }","","      this.connection = connection","      this.action = null","      this.toProcess = true","      this.toRender = true","      this.messageCount = connection.messageCount","      this.params = connection.params","      this.callback = callback","      this.missingParams = []","      this.validatorErrors = []","      this.actionStartTime = null","      this.actionTemplate = null","      this.working = false","      this.response = {}","      this.duration = null","      this.actionStatus = null","    }","","    api.ActionProcessor.prototype.incrementTotalActions = function (count) {","      if (!count) { count = 1 }","      this.connection.totalActions = this.connection.totalActions + count","    }","","    api.ActionProcessor.prototype.incrementPendingActions = function (count) {","      if (!count) { count = 1 }","      this.connection.pendingActions = this.connection.pendingActions + count","    }","","    api.ActionProcessor.prototype.getPendingActionCount = function () {","      return this.connection.pendingActions","    }","","    api.ActionProcessor.prototype.completeAction = function (status) {","      let error = null","      this.actionStatus = String(status)","","      if (status instanceof Error) {","        error = status","      } else if (status === 'server_shutting_down') {","        error = api.config.errors.serverShuttingDown(this)","      } else if (status === 'too_many_requests') {","        error = api.config.errors.tooManyPendingActions(this)","      } else if (status === 'unknown_action') {","        error = api.config.errors.unknownAction(this)","      } else if (status === 'unsupported_server_type') {","        error = api.config.errors.unsupportedServerType(this)","      } else if (status === 'missing_params') {","        error = api.config.errors.missingParams(this, this.missingParams)","      } else if (status === 'validator_errors') {","        error = api.config.errors.invalidParams(this, this.validatorErrors)","      } else if (status) {","        error = status","      }","","      if (error && typeof error === 'string') {","        error = new Error(error)","      }","","      if (error && !this.response.error) {","        if (typeof this.response === 'string' || Array.isArray(this.response)) {","          this.response = error.toString()","        } else {","          this.response.error = error","        }","      }","","      this.incrementPendingActions(-1)","      this.duration = new Date().getTime() - this.actionStartTime","","      process.nextTick(() => {","        if (typeof this.callback === 'function') {","          this.callback(this)","        }","      })","","      this.working = false","      this.logAction(error)","    }","","    api.ActionProcessor.prototype.logAction = function (error) {","      // logging","      let logLevel = 'info'","      if (this.actionTemplate && this.actionTemplate.logLevel) {","        logLevel = this.actionTemplate.logLevel","      }","","      let filteredParams = {}","      for (let i in this.params) {","        if (api.config.general.filteredParams && api.config.general.filteredParams.indexOf(i) >= 0) {","          filteredParams[i] = '[FILTERED]'","        } else if (typeof this.params[i] === 'string') {","          filteredParams[i] = this.params[i].substring(0, api.config.logger.maxLogStringLength)","        } else {","          filteredParams[i] = this.params[i]","        }","      }","","      const logLine = {","        to: this.connection.remoteIP,","        action: this.action,","        params: JSON.stringify(filteredParams),","        duration: this.duration","      }","","      if (error) {","        if (error instanceof Error) {","          logLine.error = String(error)","        } else {","          try {","            logLine.error = JSON.stringify(error)","          } catch (e) {","            logLine.error = String(error)","          }","        }","      }","","      api.log(['[ action @ %s ]', this.connection.type], logLevel, logLine)","    }","","    api.ActionProcessor.prototype.preProcessAction = function (callback) {","      let processors = []","      let processorNames = api.actions.globalMiddleware.slice(0)","","      if (this.actionTemplate.middleware) {","        this.actionTemplate.middleware.forEach(function (m) { processorNames.push(m) })","      }","","      processorNames.forEach((name) => {","        if (typeof api.actions.middleware[name].preProcessor === 'function') {","          processors.push((next) => { api.actions.middleware[name].preProcessor(this, next) })","        }","      })","","      async.series(processors, callback)","    }","","    api.ActionProcessor.prototype.postProcessAction = function (callback) {","      let processors = []","      let processorNames = api.actions.globalMiddleware.slice(0)","","      if (this.actionTemplate.middleware) {","        this.actionTemplate.middleware.forEach((m) => { processorNames.push(m) })","      }","","      processorNames.forEach((name) => {","        if (typeof api.actions.middleware[name].postProcessor === 'function') {","          processors.push((next) => { api.actions.middleware[name].postProcessor(this, next) })","        }","      })","","      async.series(processors, callback)","    }","","    api.ActionProcessor.prototype.reduceParams = function (schemaKey) {","      let inputs = this.actionTemplate.inputs || {}","      let params = this.params","      if (schemaKey) {","        inputs = this.actionTemplate.inputs[schemaKey].schema","        params = this.params[schemaKey]","      }","","      const inputNames = Object.keys(inputs) || []","      if (api.config.general.disableParamScrubbing !== true) {","        for (let p in params) {","          if (api.params.globalSafeParams.indexOf(p) < 0 && inputNames.indexOf(p) < 0) {","            delete params[p]","          }","        }","      }","    }","","    api.ActionProcessor.prototype.validateParam = function (props, params, key, schemaKey) {","      // default","      if (params[key] === undefined && props['default'] !== undefined) {","        if (typeof props['default'] === 'function') {","          params[key] = props['default'].call(api, params[key], this)","        } else {","          params[key] = props['default']","        }","      }","","      // formatter","      if (params[key] !== undefined && props.formatter !== undefined) {","        if (!Array.isArray(props.formatter)) { props.formatter = [props.formatter] }","","        props.formatter.forEach((formatter) => {","          if (typeof formatter === 'function') {","            params[key] = formatter.call(api, params[key], this)","          } else {","            const method = prepareStringMethod(formatter)","            params[key] = method.call(api, params[key], this)","          }","        })","      }","","      // validator","      if (params[key] !== undefined && props.validator !== undefined) {","        if (!Array.isArray(props.validator)) { props.validator = [props.validator] }","","        props.validator.forEach((validator) => {","          let validatorResponse","          if (typeof validator === 'function') {","            validatorResponse = validator.call(api, params[key], this)","          } else {","            const method = prepareStringMethod(validator)","            validatorResponse = method.call(api, params[key], this)","          }","          if (validatorResponse !== true) { this.validatorErrors.push(validatorResponse) }","        })","      }","","      // required","      if (props.required === true) {","        if (api.config.general.missingParamChecks.indexOf(params[key]) >= 0) {","          let missingKey = key","          if (schemaKey) {","            missingKey = `${schemaKey}.${missingKey}`","          }","          this.missingParams.push(missingKey)","        }","      }","    }","","    api.ActionProcessor.prototype.validateParams = function (schemaKey) {","      let inputs = this.actionTemplate.inputs || {}","      let params = this.params","      if (schemaKey) {","        inputs = this.actionTemplate.inputs[schemaKey].schema","        params = this.params[schemaKey]","      }","","      Object.keys(inputs).forEach((key) => {","        const props = inputs[key]","        this.validateParam(props, params, key, schemaKey)","","        if (props.schema && params[key]) {","          this.reduceParams(key)","          this.validateParams(key)","        }","      })","    }","","    api.ActionProcessor.prototype.processAction = function () {","      this.actionStartTime = new Date().getTime()","      this.working = true","      this.incrementTotalActions()","      this.incrementPendingActions()","      this.action = this.params.action","","      if (api.actions.versions[this.action]) {","        if (!this.params.apiVersion) {","          this.params.apiVersion = api.actions.versions[this.action][api.actions.versions[this.action].length - 1]","        }","        this.actionTemplate = api.actions.actions[this.action][this.params.apiVersion]","      }","","      if (api.running !== true) {","        this.completeAction('server_shutting_down')","      } else if (this.getPendingActionCount(this.connection) > api.config.general.simultaneousActions) {","        this.completeAction('too_many_requests')","      } else if (!this.action || !this.actionTemplate) {","        this.completeAction('unknown_action')","      } else if (this.actionTemplate.blockedConnectionTypes && this.actionTemplate.blockedConnectionTypes.indexOf(this.connection.type) >= 0) {","        this.completeAction('unsupported_server_type')","      } else {","        this.runAction()","      }","    }","","    api.ActionProcessor.prototype.runAction = function () {","      this.preProcessAction((error) => {","        this.reduceParams()","        this.validateParams()","","        if (error) {","          this.completeAction(error)","        } else if (this.missingParams.length > 0) {","          this.completeAction('missing_params')","        } else if (this.validatorErrors.length > 0) {","          this.completeAction('validator_errors')","        } else if (this.toProcess === true && !error) {","          this.actionTemplate.run(api, this, (error) => {","            if (error) {","              this.completeAction(error)","            } else {","              this.postProcessAction((error) => {","                this.completeAction(error)","              })","            }","          })","        } else {","          this.completeAction()","        }","      })","    }","","    next()","  }","}",""],"l":{"3":1,"5":1,"8":0,"9":0,"10":0,"11":0,"12":0,"15":0,"16":0,"17":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"37":0,"38":0,"39":0,"42":0,"43":0,"44":0,"47":0,"48":0,"51":0,"52":0,"53":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"73":0,"74":0,"77":0,"78":0,"79":0,"81":0,"85":0,"86":0,"88":0,"89":0,"90":0,"94":0,"95":0,"98":0,"100":0,"101":0,"102":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"112":0,"116":0,"123":0,"124":0,"125":0,"127":0,"128":0,"130":0,"135":0,"138":0,"139":0,"140":0,"142":0,"143":0,"146":0,"147":0,"148":0,"152":0,"155":0,"156":0,"157":0,"159":0,"160":0,"163":0,"164":0,"165":0,"169":0,"172":0,"173":0,"174":0,"175":0,"176":0,"177":0,"180":0,"181":0,"182":0,"183":0,"184":0,"190":0,"192":0,"193":0,"194":0,"196":0,"201":0,"202":0,"204":0,"205":0,"206":0,"208":0,"209":0,"215":0,"216":0,"218":0,"219":0,"220":0,"221":0,"223":0,"224":0,"226":0,"231":0,"232":0,"233":0,"234":0,"235":0,"237":0,"242":0,"243":0,"244":0,"245":0,"246":0,"247":0,"250":0,"251":0,"252":0,"254":0,"255":0,"256":0,"261":0,"262":0,"263":0,"264":0,"265":0,"266":0,"268":0,"269":0,"270":0,"272":0,"275":0,"276":0,"277":0,"278":0,"279":0,"280":0,"281":0,"282":0,"284":0,"288":0,"289":0,"290":0,"291":0,"293":0,"294":0,"295":0,"296":0,"297":0,"298":0,"299":0,"300":0,"301":0,"302":0,"304":0,"305":0,"310":0,"315":0}},"/home/travis/build/npmtest/node-npmtest-actionhero/node_modules/actionhero/initializers/actions.js":{"path":"/home/travis/build/npmtest/node-npmtest-actionhero/node_modules/actionhero/initializers/actions.js","s":{"1":1,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0},"fnMap":{"1":{"name":"(anonymous_1)","line":5,"loc":{"start":{"line":5,"column":14},"end":{"line":5,"column":35}}},"2":{"name":"(anonymous_2)","line":13,"loc":{"start":{"line":13,"column":32},"end":{"line":13,"column":48}}},"3":{"name":"(anonymous_3)","line":24,"loc":{"start":{"line":24,"column":33},"end":{"line":24,"column":51}}},"4":{"name":"(anonymous_4)","line":50,"loc":{"start":{"line":50,"column":27},"end":{"line":50,"column":59}}},"5":{"name":"(anonymous_5)","line":61,"loc":{"start":{"line":61,"column":40},"end":{"line":61,"column":52}}},"6":{"name":"(anonymous_6)","line":96,"loc":{"start":{"line":96,"column":44},"end":{"line":96,"column":57}}},"7":{"name":"(anonymous_7)","line":97,"loc":{"start":{"line":97,"column":50},"end":{"line":97,"column":63}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":104,"column":1}},"2":{"start":{"line":6,"column":4},"end":{"line":6,"column":20}},"3":{"start":{"line":7,"column":4},"end":{"line":7,"column":28}},"4":{"start":{"line":8,"column":4},"end":{"line":8,"column":29}},"5":{"start":{"line":10,"column":4},"end":{"line":10,"column":31}},"6":{"start":{"line":11,"column":4},"end":{"line":11,"column":37}},"7":{"start":{"line":13,"column":4},"end":{"line":22,"column":5}},"8":{"start":{"line":14,"column":6},"end":{"line":14,"column":72}},"9":{"start":{"line":14,"column":24},"end":{"line":14,"column":71}},"10":{"start":{"line":15,"column":6},"end":{"line":15,"column":90}},"11":{"start":{"line":15,"column":28},"end":{"line":15,"column":89}},"12":{"start":{"line":16,"column":6},"end":{"line":16,"column":43}},"13":{"start":{"line":17,"column":6},"end":{"line":17,"column":46}},"14":{"start":{"line":18,"column":6},"end":{"line":21,"column":7}},"15":{"start":{"line":19,"column":8},"end":{"line":19,"column":52}},"16":{"start":{"line":20,"column":8},"end":{"line":20,"column":92}},"17":{"start":{"line":24,"column":4},"end":{"line":48,"column":5}},"18":{"start":{"line":25,"column":6},"end":{"line":27,"column":7}},"19":{"start":{"line":26,"column":8},"end":{"line":26,"column":35}},"20":{"start":{"line":29,"column":6},"end":{"line":31,"column":7}},"21":{"start":{"line":30,"column":8},"end":{"line":30,"column":26}},"22":{"start":{"line":33,"column":6},"end":{"line":47,"column":7}},"23":{"start":{"line":34,"column":8},"end":{"line":34,"column":52}},"24":{"start":{"line":35,"column":8},"end":{"line":35,"column":20}},"25":{"start":{"line":36,"column":13},"end":{"line":47,"column":7}},"26":{"start":{"line":37,"column":8},"end":{"line":37,"column":76}},"27":{"start":{"line":38,"column":8},"end":{"line":38,"column":20}},"28":{"start":{"line":39,"column":13},"end":{"line":47,"column":7}},"29":{"start":{"line":40,"column":8},"end":{"line":40,"column":60}},"30":{"start":{"line":41,"column":8},"end":{"line":41,"column":20}},"31":{"start":{"line":42,"column":13},"end":{"line":47,"column":7}},"32":{"start":{"line":43,"column":8},"end":{"line":43,"column":84}},"33":{"start":{"line":44,"column":8},"end":{"line":44,"column":20}},"34":{"start":{"line":46,"column":8},"end":{"line":46,"column":19}},"35":{"start":{"line":50,"column":4},"end":{"line":94,"column":5}},"36":{"start":{"line":51,"column":6},"end":{"line":51,"column":45}},"37":{"start":{"line":51,"column":29},"end":{"line":51,"column":44}},"38":{"start":{"line":53,"column":6},"end":{"line":59,"column":7}},"39":{"start":{"line":54,"column":8},"end":{"line":58,"column":9}},"40":{"start":{"line":55,"column":10},"end":{"line":55,"column":104}},"41":{"start":{"line":57,"column":10},"end":{"line":57,"column":102}},"42":{"start":{"line":61,"column":6},"end":{"line":65,"column":8}},"43":{"start":{"line":62,"column":8},"end":{"line":62,"column":48}},"44":{"start":{"line":63,"column":8},"end":{"line":63,"column":39}},"45":{"start":{"line":64,"column":8},"end":{"line":64,"column":31}},"46":{"start":{"line":67,"column":6},"end":{"line":67,"column":16}},"47":{"start":{"line":69,"column":6},"end":{"line":93,"column":7}},"48":{"start":{"line":70,"column":8},"end":{"line":70,"column":48}},"49":{"start":{"line":71,"column":8},"end":{"line":85,"column":9}},"50":{"start":{"line":72,"column":10},"end":{"line":72,"column":32}},"51":{"start":{"line":73,"column":10},"end":{"line":73,"column":95}},"52":{"start":{"line":73,"column":73},"end":{"line":73,"column":94}},"53":{"start":{"line":74,"column":10},"end":{"line":76,"column":11}},"54":{"start":{"line":75,"column":12},"end":{"line":75,"column":49}},"55":{"start":{"line":77,"column":10},"end":{"line":77,"column":67}},"56":{"start":{"line":78,"column":10},"end":{"line":80,"column":11}},"57":{"start":{"line":79,"column":12},"end":{"line":79,"column":50}},"58":{"start":{"line":81,"column":10},"end":{"line":81,"column":64}},"59":{"start":{"line":82,"column":10},"end":{"line":82,"column":50}},"60":{"start":{"line":83,"column":10},"end":{"line":83,"column":86}},"61":{"start":{"line":84,"column":10},"end":{"line":84,"column":29}},"62":{"start":{"line":87,"column":8},"end":{"line":92,"column":9}},"63":{"start":{"line":88,"column":10},"end":{"line":88,"column":59}},"64":{"start":{"line":89,"column":10},"end":{"line":89,"column":65}},"65":{"start":{"line":91,"column":10},"end":{"line":91,"column":21}},"66":{"start":{"line":96,"column":4},"end":{"line":100,"column":6}},"67":{"start":{"line":97,"column":6},"end":{"line":99,"column":8}},"68":{"start":{"line":98,"column":8},"end":{"line":98,"column":31}},"69":{"start":{"line":102,"column":4},"end":{"line":102,"column":10}}},"branchMap":{"1":{"line":14,"type":"if","locations":[{"start":{"line":14,"column":6},"end":{"line":14,"column":6}},{"start":{"line":14,"column":6},"end":{"line":14,"column":6}}]},"2":{"line":15,"type":"if","locations":[{"start":{"line":15,"column":6},"end":{"line":15,"column":6}},{"start":{"line":15,"column":6},"end":{"line":15,"column":6}}]},"3":{"line":18,"type":"if","locations":[{"start":{"line":18,"column":6},"end":{"line":18,"column":6}},{"start":{"line":18,"column":6},"end":{"line":18,"column":6}}]},"4":{"line":29,"type":"if","locations":[{"start":{"line":29,"column":6},"end":{"line":29,"column":6}},{"start":{"line":29,"column":6},"end":{"line":29,"column":6}}]},"5":{"line":33,"type":"if","locations":[{"start":{"line":33,"column":6},"end":{"line":33,"column":6}},{"start":{"line":33,"column":6},"end":{"line":33,"column":6}}]},"6":{"line":33,"type":"binary-expr","locations":[{"start":{"line":33,"column":10},"end":{"line":33,"column":41}},{"start":{"line":33,"column":45},"end":{"line":33,"column":67}}]},"7":{"line":36,"type":"if","locations":[{"start":{"line":36,"column":13},"end":{"line":36,"column":13}},{"start":{"line":36,"column":13},"end":{"line":36,"column":13}}]},"8":{"line":36,"type":"binary-expr","locations":[{"start":{"line":36,"column":17},"end":{"line":36,"column":55}},{"start":{"line":36,"column":59},"end":{"line":36,"column":88}}]},"9":{"line":39,"type":"if","locations":[{"start":{"line":39,"column":13},"end":{"line":39,"column":13}},{"start":{"line":39,"column":13},"end":{"line":39,"column":13}}]},"10":{"line":42,"type":"if","locations":[{"start":{"line":42,"column":13},"end":{"line":42,"column":13}},{"start":{"line":42,"column":13},"end":{"line":42,"column":13}}]},"11":{"line":42,"type":"binary-expr","locations":[{"start":{"line":42,"column":17},"end":{"line":42,"column":41}},{"start":{"line":42,"column":45},"end":{"line":42,"column":99}}]},"12":{"line":51,"type":"if","locations":[{"start":{"line":51,"column":6},"end":{"line":51,"column":6}},{"start":{"line":51,"column":6},"end":{"line":51,"column":6}}]},"13":{"line":54,"type":"if","locations":[{"start":{"line":54,"column":8},"end":{"line":54,"column":8}},{"start":{"line":54,"column":8},"end":{"line":54,"column":8}}]},"14":{"line":73,"type":"if","locations":[{"start":{"line":73,"column":10},"end":{"line":73,"column":10}},{"start":{"line":73,"column":10},"end":{"line":73,"column":10}}]},"15":{"line":73,"type":"binary-expr","locations":[{"start":{"line":73,"column":14},"end":{"line":73,"column":37}},{"start":{"line":73,"column":41},"end":{"line":73,"column":69}}]},"16":{"line":74,"type":"if","locations":[{"start":{"line":74,"column":10},"end":{"line":74,"column":10}},{"start":{"line":74,"column":10},"end":{"line":74,"column":10}}]},"17":{"line":74,"type":"binary-expr","locations":[{"start":{"line":74,"column":14},"end":{"line":74,"column":55}},{"start":{"line":74,"column":59},"end":{"line":74,"column":105}}]},"18":{"line":78,"type":"if","locations":[{"start":{"line":78,"column":10},"end":{"line":78,"column":10}},{"start":{"line":78,"column":10},"end":{"line":78,"column":10}}]},"19":{"line":78,"type":"binary-expr","locations":[{"start":{"line":78,"column":14},"end":{"line":78,"column":56}},{"start":{"line":78,"column":60},"end":{"line":78,"column":107}}]}},"code":["'use strict'","","module.exports = {","  loadPriority: 410,","  initialize: function (api, next) {","    api.actions = {}","    api.actions.actions = {}","    api.actions.versions = {}","","    api.actions.middleware = {}","    api.actions.globalMiddleware = []","","    api.actions.addMiddleware = function (data) {","      if (!data.name) { throw new Error('middleware.name is required') }","      if (!data.priority) { data.priority = api.config.general.defaultMiddlewarePriority }","      data.priority = Number(data.priority)","      api.actions.middleware[data.name] = data","      if (data.global === true) {","        api.actions.globalMiddleware.push(data.name)","        api.utils.sortGlobalMiddleware(api.actions.globalMiddleware, api.actions.middleware)","      }","    }","","    api.actions.validateAction = function (action) {","      const fail = (msg) => {","        return next(new Error(msg))","      }","","      if (action.inputs === undefined) {","        action.inputs = {}","      }","","      if (typeof action.name !== 'string' || action.name.length < 1) {","        fail('an action is missing \\'action.name\\'')","        return false","      } else if (typeof action.description !== 'string' || action.description.length < 1) {","        fail('Action ' + action.name + ' is missing \\'action.description\\'')","        return false","      } else if (typeof action.run !== 'function') {","        fail('Action ' + action.name + ' has no run method')","        return false","      } else if (api.connections !== null && api.connections.allowedVerbs.indexOf(action.name) >= 0) {","        fail(action.name + ' is a reserved verb for connections. choose a new name')","        return false","      } else {","        return true","      }","    }","","    api.actions.loadFile = function (fullFilePath, reload) {","      if (reload === null) { reload = false }","","      const loadMessage = (action) => {","        if (reload) {","          api.log(['action reloaded: %s @ v%s, %s', action.name, action.version, fullFilePath], 'debug')","        } else {","          api.log(['action loaded: %s @ v%s, %s', action.name, action.version, fullFilePath], 'debug')","        }","      }","","      api.watchFileAndAct(fullFilePath, function () {","        api.actions.loadFile(fullFilePath, true)","        api.params.buildPostVariables()","        api.routes.loadRoutes()","      })","","      let action","","      try {","        const collection = require(fullFilePath)","        for (let i in collection) {","          action = collection[i]","          if (action.version === null || action.version === undefined) { action.version = 1.0 }","          if (api.actions.actions[action.name] === null || api.actions.actions[action.name] === undefined) {","            api.actions.actions[action.name] = {}","          }","          api.actions.actions[action.name][action.version] = action","          if (api.actions.versions[action.name] === null || api.actions.versions[action.name] === undefined) {","            api.actions.versions[action.name] = []","          }","          api.actions.versions[action.name].push(action.version)","          api.actions.versions[action.name].sort()","          api.actions.validateAction(api.actions.actions[action.name][action.version])","          loadMessage(action)","        }","      } catch (error) {","        try {","          api.exceptionHandlers.loader(fullFilePath, error)","          delete api.actions.actions[action.name][action.version]","        } catch (err2) {","          throw error","        }","      }","    }","","    api.config.general.paths.action.forEach(function (p) {","      api.utils.recursiveDirectoryGlob(p).forEach(function (f) {","        api.actions.loadFile(f)","      })","    })","","    next()","  }","}",""],"l":{"3":1,"6":0,"7":0,"8":0,"10":0,"11":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"24":0,"25":0,"26":0,"29":0,"30":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"46":0,"50":0,"51":0,"53":0,"54":0,"55":0,"57":0,"61":0,"62":0,"63":0,"64":0,"67":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"77":0,"78":0,"79":0,"81":0,"82":0,"83":0,"84":0,"87":0,"88":0,"89":0,"91":0,"96":0,"97":0,"98":0,"102":0}},"/home/travis/build/npmtest/node-npmtest-actionhero/node_modules/actionhero/initializers/cache.js":{"path":"/home/travis/build/npmtest/node-npmtest-actionhero/node_modules/actionhero/initializers/cache.js","s":{"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":0,"138":0,"139":0,"140":0,"141":0,"142":0,"143":0,"144":0,"145":0,"146":0,"147":0,"148":0,"149":0,"150":0,"151":0,"152":0,"153":0,"154":0,"155":0,"156":0,"157":0,"158":0,"159":0,"160":0,"161":0,"162":0,"163":0,"164":0,"165":0,"166":0,"167":0,"168":0,"169":0,"170":0,"171":0,"172":0,"173":0,"174":0,"175":0,"176":0,"177":0,"178":0,"179":0,"180":0,"181":0,"182":0,"183":0,"184":0,"185":0,"186":0,"187":0,"188":0,"189":0,"190":0,"191":0,"192":0,"193":0,"194":0,"195":0,"196":0,"197":0,"198":0,"199":0,"200":0,"201":0,"202":0,"203":0,"204":0,"205":0,"206":0,"207":0,"208":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0],"34":[0,0],"35":[0,0],"36":[0,0],"37":[0,0],"38":[0,0],"39":[0,0],"40":[0,0],"41":[0,0],"42":[0,0],"43":[0,0],"44":[0,0],"45":[0,0],"46":[0,0],"47":[0,0],"48":[0,0],"49":[0,0],"50":[0,0],"51":[0,0],"52":[0,0],"53":[0,0],"54":[0,0],"55":[0,0],"56":[0,0],"57":[0,0],"58":[0,0],"59":[0,0],"60":[0,0],"61":[0,0],"62":[0,0],"63":[0,0],"64":[0,0],"65":[0,0],"66":[0,0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0},"fnMap":{"1":{"name":"(anonymous_1)","line":9,"loc":{"start":{"line":9,"column":14},"end":{"line":9,"column":35}}},"2":{"name":"(anonymous_2)","line":19,"loc":{"start":{"line":19,"column":21},"end":{"line":19,"column":41}}},"3":{"name":"(anonymous_3)","line":23,"loc":{"start":{"line":23,"column":22},"end":{"line":23,"column":42}}},"4":{"name":"(anonymous_4)","line":27,"loc":{"start":{"line":27,"column":21},"end":{"line":27,"column":41}}},"5":{"name":"(anonymous_5)","line":35,"loc":{"start":{"line":35,"column":22},"end":{"line":35,"column":42}}},"6":{"name":"(anonymous_6)","line":49,"loc":{"start":{"line":49,"column":26},"end":{"line":49,"column":52}}},"7":{"name":"(anonymous_7)","line":64,"loc":{"start":{"line":64,"column":29},"end":{"line":64,"column":46}}},"8":{"name":"(anonymous_8)","line":75,"loc":{"start":{"line":75,"column":25},"end":{"line":75,"column":51}}},"9":{"name":"(anonymous_9)","line":88,"loc":{"start":{"line":88,"column":22},"end":{"line":88,"column":38}}},"10":{"name":"(anonymous_10)","line":98,"loc":{"start":{"line":98,"column":34},"end":{"line":98,"column":68}}},"11":{"name":"(anonymous_11)","line":116,"loc":{"start":{"line":116,"column":21},"end":{"line":116,"column":55}}},"12":{"name":"(anonymous_12)","line":123,"loc":{"start":{"line":123,"column":45},"end":{"line":123,"column":72}}},"13":{"name":"(anonymous_13)","line":143,"loc":{"start":{"line":143,"column":50},"end":{"line":143,"column":75}}},"14":{"name":"(anonymous_14)","line":166,"loc":{"start":{"line":166,"column":24},"end":{"line":166,"column":49}}},"15":{"name":"(anonymous_15)","line":181,"loc":{"start":{"line":181,"column":21},"end":{"line":181,"column":67}}},"16":{"name":"(anonymous_16)","line":201,"loc":{"start":{"line":201,"column":37},"end":{"line":201,"column":62}}},"17":{"name":"(anonymous_17)","line":218,"loc":{"start":{"line":218,"column":21},"end":{"line":218,"column":52}}},"18":{"name":"(anonymous_18)","line":225,"loc":{"start":{"line":225,"column":20},"end":{"line":225,"column":45}}},"19":{"name":"(anonymous_19)","line":237,"loc":{"start":{"line":237,"column":27},"end":{"line":237,"column":52}}},"20":{"name":"(anonymous_20)","line":241,"loc":{"start":{"line":241,"column":21},"end":{"line":241,"column":60}}},"21":{"name":"(anonymous_21)","line":272,"loc":{"start":{"line":272,"column":23},"end":{"line":272,"column":48}}},"22":{"name":"(anonymous_22)","line":286,"loc":{"start":{"line":286,"column":26},"end":{"line":286,"column":69}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":24}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":30}},"3":{"start":{"line":6,"column":0},"end":{"line":309,"column":1}},"4":{"start":{"line":10,"column":4},"end":{"line":10,"column":18}},"5":{"start":{"line":11,"column":4},"end":{"line":11,"column":58}},"6":{"start":{"line":12,"column":4},"end":{"line":12,"column":56}},"7":{"start":{"line":13,"column":4},"end":{"line":13,"column":60}},"8":{"start":{"line":14,"column":4},"end":{"line":14,"column":31}},"9":{"start":{"line":15,"column":4},"end":{"line":15,"column":29}},"10":{"start":{"line":17,"column":4},"end":{"line":17,"column":42}},"11":{"start":{"line":19,"column":4},"end":{"line":21,"column":5}},"12":{"start":{"line":20,"column":6},"end":{"line":20,"column":55}},"13":{"start":{"line":23,"column":4},"end":{"line":25,"column":5}},"14":{"start":{"line":24,"column":6},"end":{"line":24,"column":54}},"15":{"start":{"line":27,"column":4},"end":{"line":33,"column":5}},"16":{"start":{"line":28,"column":6},"end":{"line":32,"column":8}},"17":{"start":{"line":29,"column":8},"end":{"line":29,"column":22}},"18":{"start":{"line":30,"column":8},"end":{"line":30,"column":42}},"19":{"start":{"line":30,"column":20},"end":{"line":30,"column":41}},"20":{"start":{"line":31,"column":8},"end":{"line":31,"column":31}},"21":{"start":{"line":35,"column":4},"end":{"line":47,"column":5}},"22":{"start":{"line":36,"column":6},"end":{"line":46,"column":8}},"23":{"start":{"line":37,"column":8},"end":{"line":37,"column":79}},"24":{"start":{"line":37,"column":55},"end":{"line":37,"column":78}},"25":{"start":{"line":38,"column":8},"end":{"line":38,"column":21}},"26":{"start":{"line":39,"column":8},"end":{"line":41,"column":10}},"27":{"start":{"line":40,"column":10},"end":{"line":40,"column":55}},"28":{"start":{"line":40,"column":32},"end":{"line":40,"column":53}},"29":{"start":{"line":43,"column":8},"end":{"line":45,"column":10}},"30":{"start":{"line":44,"column":10},"end":{"line":44,"column":72}},"31":{"start":{"line":44,"column":48},"end":{"line":44,"column":71}},"32":{"start":{"line":49,"column":4},"end":{"line":73,"column":5}},"33":{"start":{"line":50,"column":6},"end":{"line":50,"column":19}},"34":{"start":{"line":51,"column":6},"end":{"line":72,"column":8}},"35":{"start":{"line":52,"column":8},"end":{"line":52,"column":79}},"36":{"start":{"line":52,"column":55},"end":{"line":52,"column":78}},"37":{"start":{"line":53,"column":8},"end":{"line":53,"column":21}},"38":{"start":{"line":54,"column":8},"end":{"line":62,"column":10}},"39":{"start":{"line":55,"column":10},"end":{"line":61,"column":12}},"40":{"start":{"line":56,"column":12},"end":{"line":60,"column":14}},"41":{"start":{"line":57,"column":14},"end":{"line":57,"column":47}},"42":{"start":{"line":57,"column":27},"end":{"line":57,"column":46}},"43":{"start":{"line":58,"column":14},"end":{"line":58,"column":33}},"44":{"start":{"line":59,"column":14},"end":{"line":59,"column":27}},"45":{"start":{"line":64,"column":8},"end":{"line":71,"column":10}},"46":{"start":{"line":65,"column":10},"end":{"line":70,"column":11}},"47":{"start":{"line":66,"column":12},"end":{"line":66,"column":74}},"48":{"start":{"line":66,"column":50},"end":{"line":66,"column":73}},"49":{"start":{"line":68,"column":12},"end":{"line":68,"column":56}},"50":{"start":{"line":69,"column":12},"end":{"line":69,"column":86}},"51":{"start":{"line":69,"column":50},"end":{"line":69,"column":85}},"52":{"start":{"line":75,"column":4},"end":{"line":96,"column":5}},"53":{"start":{"line":76,"column":6},"end":{"line":95,"column":8}},"54":{"start":{"line":77,"column":8},"end":{"line":94,"column":9}},"55":{"start":{"line":78,"column":10},"end":{"line":78,"column":72}},"56":{"start":{"line":78,"column":48},"end":{"line":78,"column":71}},"57":{"start":{"line":80,"column":10},"end":{"line":80,"column":23}},"58":{"start":{"line":81,"column":10},"end":{"line":81,"column":18}},"59":{"start":{"line":82,"column":10},"end":{"line":84,"column":52}},"60":{"start":{"line":83,"column":12},"end":{"line":83,"column":52}},"61":{"start":{"line":84,"column":28},"end":{"line":84,"column":51}},"62":{"start":{"line":86,"column":10},"end":{"line":89,"column":12}},"63":{"start":{"line":87,"column":12},"end":{"line":87,"column":35}},"64":{"start":{"line":88,"column":12},"end":{"line":88,"column":90}},"65":{"start":{"line":88,"column":40},"end":{"line":88,"column":88}},"66":{"start":{"line":91,"column":10},"end":{"line":93,"column":12}},"67":{"start":{"line":92,"column":12},"end":{"line":92,"column":100}},"68":{"start":{"line":92,"column":50},"end":{"line":92,"column":99}},"69":{"start":{"line":98,"column":4},"end":{"line":114,"column":5}},"70":{"start":{"line":99,"column":6},"end":{"line":99,"column":23}},"71":{"start":{"line":100,"column":6},"end":{"line":102,"column":48}},"72":{"start":{"line":101,"column":8},"end":{"line":101,"column":43}},"73":{"start":{"line":102,"column":24},"end":{"line":102,"column":47}},"74":{"start":{"line":104,"column":6},"end":{"line":113,"column":8}},"75":{"start":{"line":105,"column":8},"end":{"line":112,"column":9}},"76":{"start":{"line":105,"column":21},"end":{"line":105,"column":44}},"77":{"start":{"line":105,"column":51},"end":{"line":112,"column":9}},"78":{"start":{"line":106,"column":10},"end":{"line":106,"column":108}},"79":{"start":{"line":107,"column":10},"end":{"line":109,"column":12}},"80":{"start":{"line":108,"column":12},"end":{"line":108,"column":34}},"81":{"start":{"line":111,"column":10},"end":{"line":111,"column":27}},"82":{"start":{"line":116,"column":4},"end":{"line":164,"column":5}},"83":{"start":{"line":118,"column":6},"end":{"line":121,"column":7}},"84":{"start":{"line":119,"column":8},"end":{"line":119,"column":26}},"85":{"start":{"line":120,"column":8},"end":{"line":120,"column":20}},"86":{"start":{"line":123,"column":6},"end":{"line":163,"column":8}},"87":{"start":{"line":124,"column":8},"end":{"line":124,"column":46}},"88":{"start":{"line":124,"column":21},"end":{"line":124,"column":45}},"89":{"start":{"line":125,"column":8},"end":{"line":125,"column":60}},"90":{"start":{"line":125,"column":14},"end":{"line":125,"column":46}},"91":{"start":{"line":126,"column":8},"end":{"line":162,"column":9}},"92":{"start":{"line":127,"column":10},"end":{"line":129,"column":11}},"93":{"start":{"line":128,"column":12},"end":{"line":128,"column":101}},"94":{"start":{"line":130,"column":15},"end":{"line":162,"column":9}},"95":{"start":{"line":131,"column":10},"end":{"line":131,"column":44}},"96":{"start":{"line":132,"column":10},"end":{"line":132,"column":31}},"97":{"start":{"line":133,"column":10},"end":{"line":133,"column":48}},"98":{"start":{"line":134,"column":10},"end":{"line":141,"column":11}},"99":{"start":{"line":135,"column":12},"end":{"line":140,"column":13}},"100":{"start":{"line":136,"column":14},"end":{"line":136,"column":84}},"101":{"start":{"line":137,"column":14},"end":{"line":137,"column":72}},"102":{"start":{"line":139,"column":14},"end":{"line":139,"column":102}},"103":{"start":{"line":143,"column":10},"end":{"line":157,"column":12}},"104":{"start":{"line":144,"column":12},"end":{"line":156,"column":13}},"105":{"start":{"line":145,"column":14},"end":{"line":145,"column":116}},"106":{"start":{"line":145,"column":52},"end":{"line":145,"column":115}},"107":{"start":{"line":147,"column":14},"end":{"line":155,"column":16}},"108":{"start":{"line":148,"column":16},"end":{"line":154,"column":17}},"109":{"start":{"line":149,"column":18},"end":{"line":149,"column":114}},"110":{"start":{"line":151,"column":18},"end":{"line":153,"column":20}},"111":{"start":{"line":152,"column":20},"end":{"line":152,"column":156}},"112":{"start":{"line":152,"column":58},"end":{"line":152,"column":155}},"113":{"start":{"line":159,"column":10},"end":{"line":161,"column":11}},"114":{"start":{"line":160,"column":12},"end":{"line":160,"column":75}},"115":{"start":{"line":166,"column":4},"end":{"line":179,"column":5}},"116":{"start":{"line":167,"column":6},"end":{"line":178,"column":8}},"117":{"start":{"line":168,"column":8},"end":{"line":177,"column":9}},"118":{"start":{"line":169,"column":10},"end":{"line":169,"column":105}},"119":{"start":{"line":169,"column":48},"end":{"line":169,"column":104}},"120":{"start":{"line":171,"column":10},"end":{"line":176,"column":12}},"121":{"start":{"line":172,"column":12},"end":{"line":172,"column":50}},"122":{"start":{"line":172,"column":25},"end":{"line":172,"column":49}},"123":{"start":{"line":173,"column":12},"end":{"line":173,"column":27}},"124":{"start":{"line":174,"column":12},"end":{"line":174,"column":45}},"125":{"start":{"line":174,"column":31},"end":{"line":174,"column":44}},"126":{"start":{"line":175,"column":12},"end":{"line":175,"column":73}},"127":{"start":{"line":175,"column":50},"end":{"line":175,"column":72}},"128":{"start":{"line":181,"column":4},"end":{"line":216,"column":5}},"129":{"start":{"line":182,"column":6},"end":{"line":185,"column":7}},"130":{"start":{"line":183,"column":8},"end":{"line":183,"column":31}},"131":{"start":{"line":184,"column":8},"end":{"line":184,"column":27}},"132":{"start":{"line":187,"column":6},"end":{"line":187,"column":34}},"133":{"start":{"line":188,"column":6},"end":{"line":188,"column":32}},"134":{"start":{"line":189,"column":6},"end":{"line":192,"column":7}},"135":{"start":{"line":190,"column":8},"end":{"line":190,"column":58}},"136":{"start":{"line":191,"column":8},"end":{"line":191,"column":61}},"137":{"start":{"line":194,"column":6},"end":{"line":199,"column":7}},"138":{"start":{"line":201,"column":6},"end":{"line":215,"column":8}},"139":{"start":{"line":202,"column":8},"end":{"line":214,"column":9}},"140":{"start":{"line":203,"column":10},"end":{"line":203,"column":112}},"141":{"start":{"line":203,"column":48},"end":{"line":203,"column":111}},"142":{"start":{"line":205,"column":10},"end":{"line":213,"column":12}},"143":{"start":{"line":206,"column":12},"end":{"line":212,"column":13}},"144":{"start":{"line":207,"column":14},"end":{"line":209,"column":16}},"145":{"start":{"line":208,"column":16},"end":{"line":208,"column":84}},"146":{"start":{"line":208,"column":54},"end":{"line":208,"column":83}},"147":{"start":{"line":211,"column":14},"end":{"line":211,"column":82}},"148":{"start":{"line":211,"column":52},"end":{"line":211,"column":81}},"149":{"start":{"line":218,"column":4},"end":{"line":223,"column":5}},"150":{"start":{"line":219,"column":6},"end":{"line":219,"column":47}},"151":{"start":{"line":220,"column":6},"end":{"line":222,"column":8}},"152":{"start":{"line":221,"column":8},"end":{"line":221,"column":63}},"153":{"start":{"line":221,"column":46},"end":{"line":221,"column":62}},"154":{"start":{"line":225,"column":4},"end":{"line":235,"column":5}},"155":{"start":{"line":226,"column":6},"end":{"line":234,"column":8}},"156":{"start":{"line":227,"column":8},"end":{"line":227,"column":45}},"157":{"start":{"line":227,"column":21},"end":{"line":227,"column":44}},"158":{"start":{"line":228,"column":8},"end":{"line":228,"column":42}},"159":{"start":{"line":228,"column":23},"end":{"line":228,"column":41}},"160":{"start":{"line":229,"column":8},"end":{"line":229,"column":16}},"161":{"start":{"line":230,"column":8},"end":{"line":232,"column":50}},"162":{"start":{"line":231,"column":10},"end":{"line":231,"column":35}},"163":{"start":{"line":232,"column":26},"end":{"line":232,"column":49}},"164":{"start":{"line":233,"column":8},"end":{"line":233,"column":40}},"165":{"start":{"line":237,"column":4},"end":{"line":239,"column":5}},"166":{"start":{"line":238,"column":6},"end":{"line":238,"column":55}},"167":{"start":{"line":241,"column":4},"end":{"line":270,"column":5}},"168":{"start":{"line":242,"column":6},"end":{"line":245,"column":7}},"169":{"start":{"line":243,"column":8},"end":{"line":243,"column":31}},"170":{"start":{"line":244,"column":8},"end":{"line":244,"column":27}},"171":{"start":{"line":246,"column":6},"end":{"line":248,"column":7}},"172":{"start":{"line":247,"column":8},"end":{"line":247,"column":45}},"173":{"start":{"line":250,"column":6},"end":{"line":269,"column":8}},"174":{"start":{"line":251,"column":8},"end":{"line":268,"column":9}},"175":{"start":{"line":252,"column":10},"end":{"line":252,"column":39}},"176":{"start":{"line":254,"column":10},"end":{"line":267,"column":12}},"177":{"start":{"line":255,"column":12},"end":{"line":266,"column":13}},"178":{"start":{"line":256,"column":14},"end":{"line":256,"column":36}},"179":{"start":{"line":258,"column":14},"end":{"line":260,"column":15}},"180":{"start":{"line":259,"column":16},"end":{"line":259,"column":44}},"181":{"start":{"line":261,"column":14},"end":{"line":265,"column":16}},"182":{"start":{"line":262,"column":16},"end":{"line":262,"column":29}},"183":{"start":{"line":263,"column":16},"end":{"line":263,"column":45}},"184":{"start":{"line":263,"column":29},"end":{"line":263,"column":44}},"185":{"start":{"line":264,"column":16},"end":{"line":264,"column":46}},"186":{"start":{"line":272,"column":4},"end":{"line":284,"column":5}},"187":{"start":{"line":273,"column":6},"end":{"line":283,"column":8}},"188":{"start":{"line":274,"column":8},"end":{"line":282,"column":9}},"189":{"start":{"line":275,"column":10},"end":{"line":275,"column":39}},"190":{"start":{"line":277,"column":10},"end":{"line":281,"column":12}},"191":{"start":{"line":278,"column":12},"end":{"line":278,"column":25}},"192":{"start":{"line":279,"column":12},"end":{"line":279,"column":41}},"193":{"start":{"line":279,"column":25},"end":{"line":279,"column":40}},"194":{"start":{"line":280,"column":12},"end":{"line":280,"column":42}},"195":{"start":{"line":286,"column":4},"end":{"line":305,"column":5}},"196":{"start":{"line":287,"column":6},"end":{"line":287,"column":66}},"197":{"start":{"line":287,"column":32},"end":{"line":287,"column":65}},"198":{"start":{"line":289,"column":6},"end":{"line":304,"column":8}},"199":{"start":{"line":290,"column":8},"end":{"line":303,"column":9}},"200":{"start":{"line":291,"column":10},"end":{"line":291,"column":39}},"201":{"start":{"line":292,"column":15},"end":{"line":303,"column":9}},"202":{"start":{"line":293,"column":10},"end":{"line":293,"column":37}},"203":{"start":{"line":295,"column":10},"end":{"line":295,"column":56}},"204":{"start":{"line":296,"column":10},"end":{"line":302,"column":11}},"205":{"start":{"line":297,"column":12},"end":{"line":297,"column":40}},"206":{"start":{"line":299,"column":12},"end":{"line":301,"column":35}},"207":{"start":{"line":300,"column":14},"end":{"line":300,"column":66}},"208":{"start":{"line":307,"column":4},"end":{"line":307,"column":10}}},"branchMap":{"1":{"line":30,"type":"if","locations":[{"start":{"line":30,"column":8},"end":{"line":30,"column":8}},{"start":{"line":30,"column":8},"end":{"line":30,"column":8}}]},"2":{"line":37,"type":"if","locations":[{"start":{"line":37,"column":8},"end":{"line":37,"column":8}},{"start":{"line":37,"column":8},"end":{"line":37,"column":8}}]},"3":{"line":37,"type":"binary-expr","locations":[{"start":{"line":37,"column":12},"end":{"line":37,"column":17}},{"start":{"line":37,"column":21},"end":{"line":37,"column":51}}]},"4":{"line":44,"type":"if","locations":[{"start":{"line":44,"column":10},"end":{"line":44,"column":10}},{"start":{"line":44,"column":10},"end":{"line":44,"column":10}}]},"5":{"line":52,"type":"if","locations":[{"start":{"line":52,"column":8},"end":{"line":52,"column":8}},{"start":{"line":52,"column":8},"end":{"line":52,"column":8}}]},"6":{"line":52,"type":"binary-expr","locations":[{"start":{"line":52,"column":12},"end":{"line":52,"column":17}},{"start":{"line":52,"column":21},"end":{"line":52,"column":51}}]},"7":{"line":57,"type":"if","locations":[{"start":{"line":57,"column":14},"end":{"line":57,"column":14}},{"start":{"line":57,"column":14},"end":{"line":57,"column":14}}]},"8":{"line":65,"type":"if","locations":[{"start":{"line":65,"column":10},"end":{"line":65,"column":10}},{"start":{"line":65,"column":10},"end":{"line":65,"column":10}}]},"9":{"line":66,"type":"if","locations":[{"start":{"line":66,"column":12},"end":{"line":66,"column":12}},{"start":{"line":66,"column":12},"end":{"line":66,"column":12}}]},"10":{"line":69,"type":"if","locations":[{"start":{"line":69,"column":12},"end":{"line":69,"column":12}},{"start":{"line":69,"column":12},"end":{"line":69,"column":12}}]},"11":{"line":77,"type":"if","locations":[{"start":{"line":77,"column":8},"end":{"line":77,"column":8}},{"start":{"line":77,"column":8},"end":{"line":77,"column":8}}]},"12":{"line":78,"type":"if","locations":[{"start":{"line":78,"column":10},"end":{"line":78,"column":10}},{"start":{"line":78,"column":10},"end":{"line":78,"column":10}}]},"13":{"line":92,"type":"if","locations":[{"start":{"line":92,"column":12},"end":{"line":92,"column":12}},{"start":{"line":92,"column":12},"end":{"line":92,"column":12}}]},"14":{"line":105,"type":"if","locations":[{"start":{"line":105,"column":8},"end":{"line":105,"column":8}},{"start":{"line":105,"column":8},"end":{"line":105,"column":8}}]},"15":{"line":105,"type":"if","locations":[{"start":{"line":105,"column":51},"end":{"line":105,"column":51}},{"start":{"line":105,"column":51},"end":{"line":105,"column":51}}]},"16":{"line":118,"type":"if","locations":[{"start":{"line":118,"column":6},"end":{"line":118,"column":6}},{"start":{"line":118,"column":6},"end":{"line":118,"column":6}}]},"17":{"line":124,"type":"if","locations":[{"start":{"line":124,"column":8},"end":{"line":124,"column":8}},{"start":{"line":124,"column":8},"end":{"line":124,"column":8}}]},"18":{"line":126,"type":"if","locations":[{"start":{"line":126,"column":8},"end":{"line":126,"column":8}},{"start":{"line":126,"column":8},"end":{"line":126,"column":8}}]},"19":{"line":127,"type":"if","locations":[{"start":{"line":127,"column":10},"end":{"line":127,"column":10}},{"start":{"line":127,"column":10},"end":{"line":127,"column":10}}]},"20":{"line":130,"type":"if","locations":[{"start":{"line":130,"column":15},"end":{"line":130,"column":15}},{"start":{"line":130,"column":15},"end":{"line":130,"column":15}}]},"21":{"line":130,"type":"binary-expr","locations":[{"start":{"line":130,"column":19},"end":{"line":130,"column":67}},{"start":{"line":130,"column":71},"end":{"line":130,"column":104}}]},"22":{"line":134,"type":"if","locations":[{"start":{"line":134,"column":10},"end":{"line":134,"column":10}},{"start":{"line":134,"column":10},"end":{"line":134,"column":10}}]},"23":{"line":135,"type":"if","locations":[{"start":{"line":135,"column":12},"end":{"line":135,"column":12}},{"start":{"line":135,"column":12},"end":{"line":135,"column":12}}]},"24":{"line":144,"type":"if","locations":[{"start":{"line":144,"column":12},"end":{"line":144,"column":12}},{"start":{"line":144,"column":12},"end":{"line":144,"column":12}}]},"25":{"line":144,"type":"binary-expr","locations":[{"start":{"line":144,"column":16},"end":{"line":144,"column":21}},{"start":{"line":144,"column":25},"end":{"line":144,"column":40}}]},"26":{"line":145,"type":"if","locations":[{"start":{"line":145,"column":14},"end":{"line":145,"column":14}},{"start":{"line":145,"column":14},"end":{"line":145,"column":14}}]},"27":{"line":148,"type":"if","locations":[{"start":{"line":148,"column":16},"end":{"line":148,"column":16}},{"start":{"line":148,"column":16},"end":{"line":148,"column":16}}]},"28":{"line":148,"type":"binary-expr","locations":[{"start":{"line":148,"column":20},"end":{"line":148,"column":50}},{"start":{"line":148,"column":54},"end":{"line":148,"column":91}}]},"29":{"line":152,"type":"if","locations":[{"start":{"line":152,"column":20},"end":{"line":152,"column":20}},{"start":{"line":152,"column":20},"end":{"line":152,"column":20}}]},"30":{"line":159,"type":"if","locations":[{"start":{"line":159,"column":10},"end":{"line":159,"column":10}},{"start":{"line":159,"column":10},"end":{"line":159,"column":10}}]},"31":{"line":168,"type":"if","locations":[{"start":{"line":168,"column":8},"end":{"line":168,"column":8}},{"start":{"line":168,"column":8},"end":{"line":168,"column":8}}]},"32":{"line":168,"type":"binary-expr","locations":[{"start":{"line":168,"column":12},"end":{"line":168,"column":17}},{"start":{"line":168,"column":21},"end":{"line":168,"column":36}}]},"33":{"line":169,"type":"if","locations":[{"start":{"line":169,"column":10},"end":{"line":169,"column":10}},{"start":{"line":169,"column":10},"end":{"line":169,"column":10}}]},"34":{"line":172,"type":"if","locations":[{"start":{"line":172,"column":12},"end":{"line":172,"column":12}},{"start":{"line":172,"column":12},"end":{"line":172,"column":12}}]},"35":{"line":174,"type":"if","locations":[{"start":{"line":174,"column":12},"end":{"line":174,"column":12}},{"start":{"line":174,"column":12},"end":{"line":174,"column":12}}]},"36":{"line":175,"type":"if","locations":[{"start":{"line":175,"column":12},"end":{"line":175,"column":12}},{"start":{"line":175,"column":12},"end":{"line":175,"column":12}}]},"37":{"line":182,"type":"if","locations":[{"start":{"line":182,"column":6},"end":{"line":182,"column":6}},{"start":{"line":182,"column":6},"end":{"line":182,"column":6}}]},"38":{"line":182,"type":"binary-expr","locations":[{"start":{"line":182,"column":10},"end":{"line":182,"column":44}},{"start":{"line":182,"column":48},"end":{"line":182,"column":79}}]},"39":{"line":189,"type":"if","locations":[{"start":{"line":189,"column":6},"end":{"line":189,"column":6}},{"start":{"line":189,"column":6},"end":{"line":189,"column":6}}]},"40":{"line":202,"type":"if","locations":[{"start":{"line":202,"column":8},"end":{"line":202,"column":8}},{"start":{"line":202,"column":8},"end":{"line":202,"column":8}}]},"41":{"line":202,"type":"binary-expr","locations":[{"start":{"line":202,"column":12},"end":{"line":202,"column":17}},{"start":{"line":202,"column":21},"end":{"line":202,"column":36}}]},"42":{"line":203,"type":"if","locations":[{"start":{"line":203,"column":10},"end":{"line":203,"column":10}},{"start":{"line":203,"column":10},"end":{"line":203,"column":10}}]},"43":{"line":206,"type":"if","locations":[{"start":{"line":206,"column":12},"end":{"line":206,"column":12}},{"start":{"line":206,"column":12},"end":{"line":206,"column":12}}]},"44":{"line":206,"type":"binary-expr","locations":[{"start":{"line":206,"column":16},"end":{"line":206,"column":22}},{"start":{"line":206,"column":26},"end":{"line":206,"column":43}}]},"45":{"line":208,"type":"if","locations":[{"start":{"line":208,"column":16},"end":{"line":208,"column":16}},{"start":{"line":208,"column":16},"end":{"line":208,"column":16}}]},"46":{"line":211,"type":"if","locations":[{"start":{"line":211,"column":14},"end":{"line":211,"column":14}},{"start":{"line":211,"column":14},"end":{"line":211,"column":14}}]},"47":{"line":221,"type":"if","locations":[{"start":{"line":221,"column":8},"end":{"line":221,"column":8}},{"start":{"line":221,"column":8},"end":{"line":221,"column":8}}]},"48":{"line":227,"type":"if","locations":[{"start":{"line":227,"column":8},"end":{"line":227,"column":8}},{"start":{"line":227,"column":8},"end":{"line":227,"column":8}}]},"49":{"line":228,"type":"if","locations":[{"start":{"line":228,"column":8},"end":{"line":228,"column":8}},{"start":{"line":228,"column":8},"end":{"line":228,"column":8}}]},"50":{"line":242,"type":"if","locations":[{"start":{"line":242,"column":6},"end":{"line":242,"column":6}},{"start":{"line":242,"column":6},"end":{"line":242,"column":6}}]},"51":{"line":242,"type":"binary-expr","locations":[{"start":{"line":242,"column":10},"end":{"line":242,"column":44}},{"start":{"line":242,"column":48},"end":{"line":242,"column":65}}]},"52":{"line":246,"type":"if","locations":[{"start":{"line":246,"column":6},"end":{"line":246,"column":6}},{"start":{"line":246,"column":6},"end":{"line":246,"column":6}}]},"53":{"line":251,"type":"if","locations":[{"start":{"line":251,"column":8},"end":{"line":251,"column":8}},{"start":{"line":251,"column":8},"end":{"line":251,"column":8}}]},"54":{"line":251,"type":"binary-expr","locations":[{"start":{"line":251,"column":12},"end":{"line":251,"column":17}},{"start":{"line":251,"column":21},"end":{"line":251,"column":36}}]},"55":{"line":255,"type":"if","locations":[{"start":{"line":255,"column":12},"end":{"line":255,"column":12}},{"start":{"line":255,"column":12},"end":{"line":255,"column":12}}]},"56":{"line":258,"type":"if","locations":[{"start":{"line":258,"column":14},"end":{"line":258,"column":14}},{"start":{"line":258,"column":14},"end":{"line":258,"column":14}}]},"57":{"line":263,"type":"if","locations":[{"start":{"line":263,"column":16},"end":{"line":263,"column":16}},{"start":{"line":263,"column":16},"end":{"line":263,"column":16}}]},"58":{"line":274,"type":"if","locations":[{"start":{"line":274,"column":8},"end":{"line":274,"column":8}},{"start":{"line":274,"column":8},"end":{"line":274,"column":8}}]},"59":{"line":274,"type":"binary-expr","locations":[{"start":{"line":274,"column":12},"end":{"line":274,"column":17}},{"start":{"line":274,"column":21},"end":{"line":274,"column":36}}]},"60":{"line":279,"type":"if","locations":[{"start":{"line":279,"column":12},"end":{"line":279,"column":12}},{"start":{"line":279,"column":12},"end":{"line":279,"column":12}}]},"61":{"line":287,"type":"if","locations":[{"start":{"line":287,"column":6},"end":{"line":287,"column":6}},{"start":{"line":287,"column":6},"end":{"line":287,"column":6}}]},"62":{"line":290,"type":"if","locations":[{"start":{"line":290,"column":8},"end":{"line":290,"column":8}},{"start":{"line":290,"column":8},"end":{"line":290,"column":8}}]},"63":{"line":292,"type":"if","locations":[{"start":{"line":292,"column":15},"end":{"line":292,"column":15}},{"start":{"line":292,"column":15},"end":{"line":292,"column":15}}]},"64":{"line":292,"type":"binary-expr","locations":[{"start":{"line":292,"column":19},"end":{"line":292,"column":50}},{"start":{"line":292,"column":54},"end":{"line":292,"column":71}}]},"65":{"line":296,"type":"if","locations":[{"start":{"line":296,"column":10},"end":{"line":296,"column":10}},{"start":{"line":296,"column":10},"end":{"line":296,"column":10}}]},"66":{"line":296,"type":"binary-expr","locations":[{"start":{"line":296,"column":14},"end":{"line":296,"column":28}},{"start":{"line":296,"column":32},"end":{"line":296,"column":47}},{"start":{"line":296,"column":51},"end":{"line":296,"column":64}}]}},"code":["'use strict'","","const fs = require('fs')","const async = require('async')","","module.exports = {","  startPriority: 300,","  loadPriority: 300,","  initialize: function (api, next) {","    api.cache = {}","    api.cache.redisPrefix = api.config.general.cachePrefix","    api.cache.lockPrefix = api.config.general.lockPrefix","    api.cache.lockDuration = api.config.general.lockDuration","    api.cache.lockName = api.id","    api.cache.lockRetry = 100","","    const redis = api.redis.clients.client","","    api.cache.keys = function (callback) {","      redis.keys(api.cache.redisPrefix + '*', callback)","    }","","    api.cache.locks = function (callback) {","      redis.keys(api.cache.lockPrefix + '*', callback)","    }","","    api.cache.size = function (callback) {","      api.cache.keys((error, keys) => {","        let length = 0","        if (keys) { length = keys.length }","        callback(error, length)","      })","    }","","    api.cache.clear = function (callback) {","      api.cache.keys((error, keys) => {","        if (error && typeof callback === 'function') { return callback(error) }","        let jobs = []","        keys.forEach((key) => {","          jobs.push((done) => { redis.del(key, done) })","        })","","        async.parallel(jobs, (error) => {","          if (typeof callback === 'function') { return callback(error) }","        })","      })","    }","","    api.cache.dumpWrite = function (file, callback) {","      let data = {}","      api.cache.keys((error, keys) => {","        if (error && typeof callback === 'function') { return callback(error) }","        let jobs = []","        keys.forEach((key) => {","          jobs.push((done) => {","            redis.get(key, (error, content) => {","              if (error) { return done(error) }","              data[key] = content","              return done()","            })","          })","        })","","        async.parallel(jobs, function (error) {","          if (error) {","            if (typeof callback === 'function') { return callback(error) }","          } else {","            fs.writeFileSync(file, JSON.stringify(data))","            if (typeof callback === 'function') { return callback(null, keys.length) }","          }","        })","      })","    }","","    api.cache.dumpRead = function (file, callback) {","      api.cache.clear((error) => {","        if (error) {","          if (typeof callback === 'function') { return callback(error) }","        } else {","          let jobs = []","          let data","          try {","            data = JSON.parse(fs.readFileSync(file))","          } catch (error) { return callback(error) }","","          Object.keys(data).forEach((key) => {","            let content = data[key]","            jobs.push(function (done) { api.cache.saveDumpedElement(key, content, done) })","          })","","          async.series(jobs, (error) => {","            if (typeof callback === 'function') { return callback(error, Object.keys(data).length) }","          })","        }","      })","    }","","    api.cache.saveDumpedElement = function (key, content, callback) {","      let parsedContent","      try {","        parsedContent = JSON.parse(content)","      } catch (error) { return callback(error) }","","      redis.set(key, content, (error) => {","        if (error) { return callback(error) } else if (parsedContent.expireTimestamp) {","          const expireTimeSeconds = Math.ceil((parsedContent.expireTimestamp - new Date().getTime()) / 1000)","          redis.expire(key, expireTimeSeconds, () => {","            return callback(error)","          })","        } else {","          return callback()","        }","      })","    }","","    api.cache.load = function (key, options, callback) {","      // optons: options.expireTimeMS, options.retry","      if (typeof options === 'function') {","        callback = options","        options = {}","      }","","      redis.get(api.cache.redisPrefix + key, function (error, cacheObj) {","        if (error) { api.log(error, 'error') }","        try { cacheObj = JSON.parse(cacheObj) } catch (e) {}","        if (!cacheObj) {","          if (typeof callback === 'function') {","            return callback(new Error(api.i18n.localize('Object not found')), null, null, null, null)","          }","        } else if (cacheObj.expireTimestamp >= new Date().getTime() || cacheObj.expireTimestamp === null) {","          const lastReadAt = cacheObj.readAt","          let expireTimeSeconds","          cacheObj.readAt = new Date().getTime()","          if (cacheObj.expireTimestamp) {","            if (options.expireTimeMS) {","              cacheObj.expireTimestamp = new Date().getTime() + options.expireTimeMS","              expireTimeSeconds = Math.ceil(options.expireTimeMS / 1000)","            } else {","              expireTimeSeconds = Math.floor((cacheObj.expireTimestamp - new Date().getTime()) / 1000)","            }","          }","","          api.cache.checkLock(key, options.retry, function (error, lockOk) {","            if (error || lockOk !== true) {","              if (typeof callback === 'function') { return callback(new Error(api.i18n.localize('Object Locked'))) }","            } else {","              redis.set(api.cache.redisPrefix + key, JSON.stringify(cacheObj), (error) => {","                if (typeof callback === 'function' && typeof expireTimeSeconds !== 'number') {","                  return callback(error, cacheObj.value, cacheObj.expireTimestamp, cacheObj.createdAt, lastReadAt)","                } else {","                  redis.expire(api.cache.redisPrefix + key, expireTimeSeconds, (error) => {","                    if (typeof callback === 'function') { return callback(error, cacheObj.value, cacheObj.expireTimestamp, cacheObj.createdAt, lastReadAt) }","                  })","                }","              })","            }","          })","        } else {","          if (typeof callback === 'function') {","            return callback(new Error(api.i18n.localize('Object Expired')))","          }","        }","      })","    }","","    api.cache.destroy = function (key, callback) {","      api.cache.checkLock(key, null, (error, lockOk) => {","        if (error || lockOk !== true) {","          if (typeof callback === 'function') { callback(new Error(api.i18n.localize('Object Locked'))) }","        } else {","          redis.del(api.cache.redisPrefix + key, (error, count) => {","            if (error) { api.log(error, 'error') }","            let resp = true","            if (count !== 1) { resp = false }","            if (typeof callback === 'function') { callback(error, resp) }","          })","        }","      })","    }","","    api.cache.save = function (key, value, expireTimeMS, callback) {","      if (typeof expireTimeMS === 'function' && typeof callback === 'undefined') {","        callback = expireTimeMS","        expireTimeMS = null","      }","","      let expireTimeSeconds = null","      let expireTimestamp = null","      if (expireTimeMS !== null) {","        expireTimeSeconds = Math.ceil(expireTimeMS / 1000)","        expireTimestamp = new Date().getTime() + expireTimeMS","      }","","      const cacheObj = {","        value: value,","        expireTimestamp: expireTimestamp,","        createdAt: new Date().getTime(),","        readAt: null","      }","","      api.cache.checkLock(key, null, function (error, lockOk) {","        if (error || lockOk !== true) {","          if (typeof callback === 'function') { return callback(new Error(api.i18n.localize('Object Locked'))) }","        } else {","          redis.set(api.cache.redisPrefix + key, JSON.stringify(cacheObj), (error) => {","            if (!error && expireTimeSeconds) {","              redis.expire(api.cache.redisPrefix + key, expireTimeSeconds, (error) => {","                if (typeof callback === 'function') { return callback(error, true) }","              })","            } else {","              if (typeof callback === 'function') { return callback(error, true) }","            }","          })","        }","      })","    }","","    api.cache.push = function (key, item, callback) {","      let object = JSON.stringify({data: item})","      redis.rpush(api.cache.redisPrefix + key, object, (error) => {","        if (typeof callback === 'function') { callback(error) }","      })","    }","","    api.cache.pop = function (key, callback) {","      redis.lpop(api.cache.redisPrefix + key, (error, object) => {","        if (error) { return callback(error) }","        if (!object) { return callback() }","        let item","        try {","          item = JSON.parse(object)","        } catch (error) { return callback(error) }","        return callback(null, item.data)","      })","    }","","    api.cache.listLength = function (key, callback) {","      redis.llen(api.cache.redisPrefix + key, callback)","    }","","    api.cache.lock = function (key, expireTimeMS, callback) {","      if (typeof expireTimeMS === 'function' && callback === null) {","        callback = expireTimeMS","        expireTimeMS = null","      }","      if (expireTimeMS === null) {","        expireTimeMS = api.cache.lockDuration","      }","","      api.cache.checkLock(key, null, (error, lockOk) => {","        if (error || lockOk !== true) {","          return callback(error, false)","        } else {","          redis.setnx(api.cache.lockPrefix + key, api.cache.lockName, (error, result) => {","            if (error) {","              return callback(error)","            } else {","              if (!result) { // value was already set, so we cannot obtain the lock","                return callback(null, false)","              }","              redis.expire(api.cache.lockPrefix + key, Math.ceil(expireTimeMS / 1000), (error) => {","                lockOk = true","                if (error) { lockOk = false }","                return callback(error, lockOk)","              })","            }","          })","        }","      })","    }","","    api.cache.unlock = function (key, callback) {","      api.cache.checkLock(key, null, (error, lockOk) => {","        if (error || lockOk !== true) {","          return callback(error, false)","        } else {","          redis.del(api.cache.lockPrefix + key, (error) => {","            lockOk = true","            if (error) { lockOk = false }","            return callback(error, lockOk)","          })","        }","      })","    }","","    api.cache.checkLock = function (key, retry, callback, startTime) {","      if (startTime === null) { startTime = new Date().getTime() }","","      redis.get(api.cache.lockPrefix + key, (error, lockedBy) => {","        if (error) {","          return callback(error, false)","        } else if (lockedBy === api.cache.lockName || lockedBy === null) {","          return callback(null, true)","        } else {","          const delta = new Date().getTime() - startTime","          if (retry === null || retry === false || delta > retry) {","            return callback(null, false)","          } else {","            return setTimeout(() => {","              api.cache.checkLock(key, retry, callback, startTime)","            }, api.cache.lockRetry)","          }","        }","      })","    }","","    next()","  }","}",""],"l":{"3":1,"4":1,"6":1,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"17":0,"19":0,"20":0,"23":0,"24":0,"27":0,"28":0,"29":0,"30":0,"31":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"43":0,"44":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"64":0,"65":0,"66":0,"68":0,"69":0,"75":0,"76":0,"77":0,"78":0,"80":0,"81":0,"82":0,"83":0,"84":0,"86":0,"87":0,"88":0,"91":0,"92":0,"98":0,"99":0,"100":0,"101":0,"102":0,"104":0,"105":0,"106":0,"107":0,"108":0,"111":0,"116":0,"118":0,"119":0,"120":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":0,"139":0,"143":0,"144":0,"145":0,"147":0,"148":0,"149":0,"151":0,"152":0,"159":0,"160":0,"166":0,"167":0,"168":0,"169":0,"171":0,"172":0,"173":0,"174":0,"175":0,"181":0,"182":0,"183":0,"184":0,"187":0,"188":0,"189":0,"190":0,"191":0,"194":0,"201":0,"202":0,"203":0,"205":0,"206":0,"207":0,"208":0,"211":0,"218":0,"219":0,"220":0,"221":0,"225":0,"226":0,"227":0,"228":0,"229":0,"230":0,"231":0,"232":0,"233":0,"237":0,"238":0,"241":0,"242":0,"243":0,"244":0,"246":0,"247":0,"250":0,"251":0,"252":0,"254":0,"255":0,"256":0,"258":0,"259":0,"261":0,"262":0,"263":0,"264":0,"272":0,"273":0,"274":0,"275":0,"277":0,"278":0,"279":0,"280":0,"286":0,"287":0,"289":0,"290":0,"291":0,"292":0,"293":0,"295":0,"296":0,"297":0,"299":0,"300":0,"307":0}},"/home/travis/build/npmtest/node-npmtest-actionhero/node_modules/actionhero/initializers/chatRoom.js":{"path":"/home/travis/build/npmtest/node-npmtest-actionhero/node_modules/actionhero/initializers/chatRoom.js","s":{"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":0,"138":0,"139":0,"140":0,"141":0,"142":0,"143":0,"144":0,"145":0,"146":0,"147":0,"148":0,"149":0,"150":0,"151":0,"152":0,"153":0,"154":0,"155":0,"156":0,"157":0,"158":0,"159":0,"160":0,"161":0,"162":0,"163":0,"164":0,"165":0,"166":0,"167":0,"168":0,"169":0,"170":0,"171":0,"172":0,"173":0,"174":0,"175":0,"176":0,"177":0,"178":0,"179":0,"180":0,"181":0,"182":0,"183":0,"184":0,"185":0,"186":0,"187":0,"188":0,"189":0,"190":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0,0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0],"34":[0,0],"35":[0,0],"36":[0,0],"37":[0,0],"38":[0,0],"39":[0,0],"40":[0,0],"41":[0,0],"42":[0,0],"43":[0,0],"44":[0,0],"45":[0,0],"46":[0,0],"47":[0,0],"48":[0,0],"49":[0,0],"50":[0,0],"51":[0,0],"52":[0,0],"53":[0,0],"54":[0,0],"55":[0,0],"56":[0,0],"57":[0,0],"58":[0,0],"59":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0},"fnMap":{"1":{"name":"(anonymous_1)","line":8,"loc":{"start":{"line":8,"column":14},"end":{"line":8,"column":35}}},"2":{"name":"(anonymous_2)","line":19,"loc":{"start":{"line":19,"column":33},"end":{"line":19,"column":49}}},"3":{"name":"(anonymous_3)","line":35,"loc":{"start":{"line":35,"column":29},"end":{"line":35,"column":76}}},"4":{"name":"(anonymous_4)","line":77,"loc":{"start":{"line":77,"column":42},"end":{"line":77,"column":61}}},"5":{"name":"(anonymous_5)","line":87,"loc":{"start":{"line":87,"column":35},"end":{"line":87,"column":54}}},"6":{"name":"(anonymous_6)","line":94,"loc":{"start":{"line":94,"column":48},"end":{"line":94,"column":86}}},"7":{"name":"(anonymous_7)","line":104,"loc":{"start":{"line":104,"column":24},"end":{"line":104,"column":44}}},"8":{"name":"(anonymous_8)","line":110,"loc":{"start":{"line":110,"column":23},"end":{"line":110,"column":49}}},"9":{"name":"(anonymous_9)","line":111,"loc":{"start":{"line":111,"column":32},"end":{"line":111,"column":56}}},"10":{"name":"(anonymous_10)","line":123,"loc":{"start":{"line":123,"column":27},"end":{"line":123,"column":53}}},"11":{"name":"(anonymous_11)","line":148,"loc":{"start":{"line":148,"column":26},"end":{"line":148,"column":52}}},"12":{"name":"(anonymous_12)","line":158,"loc":{"start":{"line":158,"column":41},"end":{"line":158,"column":63}}},"13":{"name":"(anonymous_13)","line":165,"loc":{"start":{"line":165,"column":30},"end":{"line":165,"column":56}}},"14":{"name":"(anonymous_14)","line":196,"loc":{"start":{"line":196,"column":41},"end":{"line":196,"column":63}}},"15":{"name":"(anonymous_15)","line":204,"loc":{"start":{"line":204,"column":29},"end":{"line":204,"column":69}}},"16":{"name":"(anonymous_16)","line":235,"loc":{"start":{"line":235,"column":32},"end":{"line":235,"column":72}}},"17":{"name":"(anonymous_17)","line":266,"loc":{"start":{"line":266,"column":35},"end":{"line":266,"column":100}}},"18":{"name":"(anonymous_18)","line":299,"loc":{"start":{"line":299,"column":9},"end":{"line":299,"column":30}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":30}},"2":{"start":{"line":5,"column":0},"end":{"line":316,"column":1}},"3":{"start":{"line":9,"column":4},"end":{"line":9,"column":21}},"4":{"start":{"line":10,"column":4},"end":{"line":13,"column":5}},"5":{"start":{"line":14,"column":4},"end":{"line":14,"column":57}},"6":{"start":{"line":16,"column":4},"end":{"line":16,"column":32}},"7":{"start":{"line":17,"column":4},"end":{"line":17,"column":38}},"8":{"start":{"line":19,"column":4},"end":{"line":33,"column":5}},"9":{"start":{"line":20,"column":6},"end":{"line":20,"column":72}},"10":{"start":{"line":20,"column":24},"end":{"line":20,"column":71}},"11":{"start":{"line":21,"column":6},"end":{"line":21,"column":90}},"12":{"start":{"line":21,"column":28},"end":{"line":21,"column":89}},"13":{"start":{"line":22,"column":6},"end":{"line":22,"column":43}},"14":{"start":{"line":23,"column":6},"end":{"line":23,"column":47}},"15":{"start":{"line":25,"column":6},"end":{"line":25,"column":51}},"16":{"start":{"line":26,"column":6},"end":{"line":32,"column":8}},"17":{"start":{"line":27,"column":8},"end":{"line":31,"column":9}},"18":{"start":{"line":28,"column":10},"end":{"line":28,"column":18}},"19":{"start":{"line":30,"column":10},"end":{"line":30,"column":19}},"20":{"start":{"line":35,"column":4},"end":{"line":75,"column":5}},"21":{"start":{"line":36,"column":6},"end":{"line":74,"column":7}},"22":{"start":{"line":37,"column":8},"end":{"line":37,"column":140}},"23":{"start":{"line":37,"column":46},"end":{"line":37,"column":139}},"24":{"start":{"line":37,"column":71},"end":{"line":37,"column":136}},"25":{"start":{"line":38,"column":13},"end":{"line":74,"column":7}},"26":{"start":{"line":39,"column":8},"end":{"line":39,"column":62}},"27":{"start":{"line":39,"column":43},"end":{"line":39,"column":61}},"28":{"start":{"line":40,"column":8},"end":{"line":50,"column":9}},"29":{"start":{"line":51,"column":8},"end":{"line":51,"column":75}},"30":{"start":{"line":53,"column":8},"end":{"line":71,"column":10}},"31":{"start":{"line":54,"column":10},"end":{"line":70,"column":11}},"32":{"start":{"line":55,"column":12},"end":{"line":55,"column":95}},"33":{"start":{"line":55,"column":50},"end":{"line":55,"column":94}},"34":{"start":{"line":55,"column":75},"end":{"line":55,"column":91}},"35":{"start":{"line":57,"column":12},"end":{"line":67,"column":13}},"36":{"start":{"line":68,"column":12},"end":{"line":68,"column":44}},"37":{"start":{"line":69,"column":12},"end":{"line":69,"column":94}},"38":{"start":{"line":69,"column":50},"end":{"line":69,"column":93}},"39":{"start":{"line":69,"column":75},"end":{"line":69,"column":90}},"40":{"start":{"line":73,"column":8},"end":{"line":73,"column":141}},"41":{"start":{"line":73,"column":46},"end":{"line":73,"column":140}},"42":{"start":{"line":73,"column":71},"end":{"line":73,"column":137}},"43":{"start":{"line":77,"column":4},"end":{"line":85,"column":5}},"44":{"start":{"line":78,"column":6},"end":{"line":84,"column":7}},"45":{"start":{"line":87,"column":4},"end":{"line":92,"column":5}},"46":{"start":{"line":88,"column":6},"end":{"line":88,"column":73}},"47":{"start":{"line":89,"column":6},"end":{"line":91,"column":7}},"48":{"start":{"line":90,"column":8},"end":{"line":90,"column":97}},"49":{"start":{"line":94,"column":4},"end":{"line":102,"column":5}},"50":{"start":{"line":95,"column":6},"end":{"line":101,"column":7}},"51":{"start":{"line":96,"column":8},"end":{"line":100,"column":9}},"52":{"start":{"line":97,"column":10},"end":{"line":99,"column":12}},"53":{"start":{"line":98,"column":12},"end":{"line":98,"column":76}},"54":{"start":{"line":98,"column":26},"end":{"line":98,"column":75}},"55":{"start":{"line":104,"column":4},"end":{"line":108,"column":5}},"56":{"start":{"line":105,"column":6},"end":{"line":107,"column":8}},"57":{"start":{"line":106,"column":8},"end":{"line":106,"column":70}},"58":{"start":{"line":106,"column":46},"end":{"line":106,"column":69}},"59":{"start":{"line":110,"column":4},"end":{"line":121,"column":5}},"60":{"start":{"line":111,"column":6},"end":{"line":120,"column":8}},"61":{"start":{"line":112,"column":8},"end":{"line":112,"column":45}},"62":{"start":{"line":112,"column":21},"end":{"line":112,"column":44}},"63":{"start":{"line":113,"column":8},"end":{"line":119,"column":9}},"64":{"start":{"line":114,"column":10},"end":{"line":116,"column":12}},"65":{"start":{"line":115,"column":12},"end":{"line":115,"column":74}},"66":{"start":{"line":115,"column":50},"end":{"line":115,"column":73}},"67":{"start":{"line":118,"column":10},"end":{"line":118,"column":110}},"68":{"start":{"line":118,"column":48},"end":{"line":118,"column":109}},"69":{"start":{"line":123,"column":4},"end":{"line":146,"column":5}},"70":{"start":{"line":124,"column":6},"end":{"line":145,"column":8}},"71":{"start":{"line":125,"column":8},"end":{"line":125,"column":45}},"72":{"start":{"line":125,"column":21},"end":{"line":125,"column":44}},"73":{"start":{"line":126,"column":8},"end":{"line":144,"column":9}},"74":{"start":{"line":127,"column":10},"end":{"line":141,"column":12}},"75":{"start":{"line":128,"column":12},"end":{"line":140,"column":14}},"76":{"start":{"line":129,"column":14},"end":{"line":129,"column":51}},"77":{"start":{"line":129,"column":27},"end":{"line":129,"column":50}},"78":{"start":{"line":131,"column":14},"end":{"line":133,"column":15}},"79":{"start":{"line":132,"column":16},"end":{"line":132,"column":51}},"80":{"start":{"line":135,"column":14},"end":{"line":139,"column":16}},"81":{"start":{"line":136,"column":16},"end":{"line":138,"column":18}},"82":{"start":{"line":137,"column":18},"end":{"line":137,"column":68}},"83":{"start":{"line":137,"column":56},"end":{"line":137,"column":67}},"84":{"start":{"line":143,"column":10},"end":{"line":143,"column":112}},"85":{"start":{"line":143,"column":48},"end":{"line":143,"column":111}},"86":{"start":{"line":148,"column":4},"end":{"line":156,"column":5}},"87":{"start":{"line":149,"column":6},"end":{"line":155,"column":8}},"88":{"start":{"line":150,"column":8},"end":{"line":150,"column":25}},"89":{"start":{"line":151,"column":8},"end":{"line":153,"column":9}},"90":{"start":{"line":152,"column":10},"end":{"line":152,"column":22}},"91":{"start":{"line":154,"column":8},"end":{"line":154,"column":70}},"92":{"start":{"line":154,"column":46},"end":{"line":154,"column":69}},"93":{"start":{"line":158,"column":4},"end":{"line":163,"column":5}},"94":{"start":{"line":159,"column":6},"end":{"line":162,"column":7}},"95":{"start":{"line":165,"column":4},"end":{"line":194,"column":5}},"96":{"start":{"line":166,"column":6},"end":{"line":193,"column":7}},"97":{"start":{"line":167,"column":8},"end":{"line":190,"column":10}},"98":{"start":{"line":168,"column":10},"end":{"line":168,"column":47}},"99":{"start":{"line":168,"column":23},"end":{"line":168,"column":46}},"100":{"start":{"line":169,"column":10},"end":{"line":189,"column":11}},"101":{"start":{"line":170,"column":12},"end":{"line":170,"column":56}},"102":{"start":{"line":171,"column":12},"end":{"line":186,"column":14}},"103":{"start":{"line":172,"column":14},"end":{"line":172,"column":51}},"104":{"start":{"line":172,"column":27},"end":{"line":172,"column":50}},"105":{"start":{"line":174,"column":14},"end":{"line":174,"column":37}},"106":{"start":{"line":175,"column":14},"end":{"line":175,"column":27}},"107":{"start":{"line":176,"column":14},"end":{"line":180,"column":15}},"108":{"start":{"line":177,"column":16},"end":{"line":177,"column":52}},"109":{"start":{"line":178,"column":16},"end":{"line":178,"column":77}},"110":{"start":{"line":179,"column":16},"end":{"line":179,"column":23}},"111":{"start":{"line":181,"column":14},"end":{"line":185,"column":16}},"112":{"start":{"line":188,"column":12},"end":{"line":188,"column":114}},"113":{"start":{"line":188,"column":50},"end":{"line":188,"column":113}},"114":{"start":{"line":192,"column":8},"end":{"line":192,"column":106}},"115":{"start":{"line":192,"column":46},"end":{"line":192,"column":105}},"116":{"start":{"line":196,"column":4},"end":{"line":202,"column":5}},"117":{"start":{"line":197,"column":6},"end":{"line":201,"column":7}},"118":{"start":{"line":204,"column":4},"end":{"line":233,"column":5}},"119":{"start":{"line":205,"column":6},"end":{"line":232,"column":7}},"120":{"start":{"line":206,"column":8},"end":{"line":206,"column":68}},"121":{"start":{"line":207,"column":8},"end":{"line":229,"column":9}},"122":{"start":{"line":208,"column":10},"end":{"line":226,"column":12}},"123":{"start":{"line":209,"column":12},"end":{"line":209,"column":49}},"124":{"start":{"line":209,"column":25},"end":{"line":209,"column":48}},"125":{"start":{"line":211,"column":12},"end":{"line":225,"column":13}},"126":{"start":{"line":212,"column":14},"end":{"line":222,"column":16}},"127":{"start":{"line":213,"column":16},"end":{"line":221,"column":17}},"128":{"start":{"line":214,"column":18},"end":{"line":214,"column":40}},"129":{"start":{"line":216,"column":18},"end":{"line":216,"column":86}},"130":{"start":{"line":217,"column":18},"end":{"line":220,"column":20}},"131":{"start":{"line":218,"column":20},"end":{"line":218,"column":47}},"132":{"start":{"line":219,"column":20},"end":{"line":219,"column":80}},"133":{"start":{"line":219,"column":58},"end":{"line":219,"column":79}},"134":{"start":{"line":224,"column":14},"end":{"line":224,"column":117}},"135":{"start":{"line":224,"column":52},"end":{"line":224,"column":116}},"136":{"start":{"line":228,"column":10},"end":{"line":228,"column":126}},"137":{"start":{"line":228,"column":48},"end":{"line":228,"column":125}},"138":{"start":{"line":231,"column":8},"end":{"line":231,"column":99}},"139":{"start":{"line":235,"column":4},"end":{"line":264,"column":5}},"140":{"start":{"line":236,"column":6},"end":{"line":263,"column":7}},"141":{"start":{"line":237,"column":8},"end":{"line":237,"column":68}},"142":{"start":{"line":238,"column":8},"end":{"line":260,"column":9}},"143":{"start":{"line":239,"column":10},"end":{"line":257,"column":12}},"144":{"start":{"line":240,"column":12},"end":{"line":240,"column":49}},"145":{"start":{"line":240,"column":25},"end":{"line":240,"column":48}},"146":{"start":{"line":242,"column":12},"end":{"line":256,"column":13}},"147":{"start":{"line":243,"column":14},"end":{"line":253,"column":16}},"148":{"start":{"line":244,"column":16},"end":{"line":252,"column":17}},"149":{"start":{"line":245,"column":18},"end":{"line":245,"column":40}},"150":{"start":{"line":247,"column":18},"end":{"line":251,"column":20}},"151":{"start":{"line":248,"column":20},"end":{"line":248,"column":64}},"152":{"start":{"line":249,"column":20},"end":{"line":249,"column":73}},"153":{"start":{"line":249,"column":38},"end":{"line":249,"column":72}},"154":{"start":{"line":250,"column":20},"end":{"line":250,"column":80}},"155":{"start":{"line":250,"column":58},"end":{"line":250,"column":79}},"156":{"start":{"line":255,"column":14},"end":{"line":255,"column":117}},"157":{"start":{"line":255,"column":52},"end":{"line":255,"column":116}},"158":{"start":{"line":259,"column":10},"end":{"line":259,"column":122}},"159":{"start":{"line":259,"column":48},"end":{"line":259,"column":121}},"160":{"start":{"line":262,"column":8},"end":{"line":262,"column":102}},"161":{"start":{"line":266,"column":4},"end":{"line":294,"column":5}},"162":{"start":{"line":267,"column":6},"end":{"line":267,"column":19}},"163":{"start":{"line":268,"column":6},"end":{"line":268,"column":27}},"164":{"start":{"line":269,"column":6},"end":{"line":269,"column":84}},"165":{"start":{"line":269,"column":28},"end":{"line":269,"column":83}},"166":{"start":{"line":271,"column":6},"end":{"line":285,"column":8}},"167":{"start":{"line":272,"column":8},"end":{"line":272,"column":47}},"168":{"start":{"line":273,"column":8},"end":{"line":284,"column":9}},"169":{"start":{"line":274,"column":10},"end":{"line":283,"column":12}},"170":{"start":{"line":275,"column":12},"end":{"line":282,"column":13}},"171":{"start":{"line":276,"column":14},"end":{"line":279,"column":16}},"172":{"start":{"line":277,"column":16},"end":{"line":277,"column":54}},"173":{"start":{"line":277,"column":28},"end":{"line":277,"column":53}},"174":{"start":{"line":278,"column":16},"end":{"line":278,"column":33}},"175":{"start":{"line":281,"column":14},"end":{"line":281,"column":50}},"176":{"start":{"line":287,"column":6},"end":{"line":293,"column":8}},"177":{"start":{"line":288,"column":8},"end":{"line":291,"column":9}},"178":{"start":{"line":289,"column":10},"end":{"line":289,"column":39}},"179":{"start":{"line":290,"column":10},"end":{"line":290,"column":56}},"180":{"start":{"line":290,"column":26},"end":{"line":290,"column":55}},"181":{"start":{"line":292,"column":8},"end":{"line":292,"column":42}},"182":{"start":{"line":296,"column":4},"end":{"line":296,"column":10}},"183":{"start":{"line":300,"column":4},"end":{"line":304,"column":5}},"184":{"start":{"line":301,"column":6},"end":{"line":303,"column":7}},"185":{"start":{"line":302,"column":8},"end":{"line":302,"column":45}},"186":{"start":{"line":306,"column":4},"end":{"line":311,"column":5}},"187":{"start":{"line":307,"column":6},"end":{"line":310,"column":7}},"188":{"start":{"line":308,"column":8},"end":{"line":308,"column":69}},"189":{"start":{"line":309,"column":8},"end":{"line":309,"column":30}},"190":{"start":{"line":313,"column":4},"end":{"line":313,"column":10}}},"branchMap":{"1":{"line":20,"type":"if","locations":[{"start":{"line":20,"column":6},"end":{"line":20,"column":6}},{"start":{"line":20,"column":6},"end":{"line":20,"column":6}}]},"2":{"line":21,"type":"if","locations":[{"start":{"line":21,"column":6},"end":{"line":21,"column":6}},{"start":{"line":21,"column":6},"end":{"line":21,"column":6}}]},"3":{"line":27,"type":"if","locations":[{"start":{"line":27,"column":8},"end":{"line":27,"column":8}},{"start":{"line":27,"column":8},"end":{"line":27,"column":8}}]},"4":{"line":36,"type":"if","locations":[{"start":{"line":36,"column":6},"end":{"line":36,"column":6}},{"start":{"line":36,"column":6},"end":{"line":36,"column":6}}]},"5":{"line":36,"type":"binary-expr","locations":[{"start":{"line":36,"column":10},"end":{"line":36,"column":15}},{"start":{"line":36,"column":19},"end":{"line":36,"column":36}},{"start":{"line":36,"column":40},"end":{"line":36,"column":56}},{"start":{"line":36,"column":60},"end":{"line":36,"column":80}}]},"6":{"line":37,"type":"if","locations":[{"start":{"line":37,"column":8},"end":{"line":37,"column":8}},{"start":{"line":37,"column":8},"end":{"line":37,"column":8}}]},"7":{"line":38,"type":"if","locations":[{"start":{"line":38,"column":13},"end":{"line":38,"column":13}},{"start":{"line":38,"column":13},"end":{"line":38,"column":13}}]},"8":{"line":38,"type":"binary-expr","locations":[{"start":{"line":38,"column":17},"end":{"line":38,"column":47}},{"start":{"line":38,"column":51},"end":{"line":38,"column":86}}]},"9":{"line":39,"type":"if","locations":[{"start":{"line":39,"column":8},"end":{"line":39,"column":8}},{"start":{"line":39,"column":8},"end":{"line":39,"column":8}}]},"10":{"line":54,"type":"if","locations":[{"start":{"line":54,"column":10},"end":{"line":54,"column":10}},{"start":{"line":54,"column":10},"end":{"line":54,"column":10}}]},"11":{"line":55,"type":"if","locations":[{"start":{"line":55,"column":12},"end":{"line":55,"column":12}},{"start":{"line":55,"column":12},"end":{"line":55,"column":12}}]},"12":{"line":69,"type":"if","locations":[{"start":{"line":69,"column":12},"end":{"line":69,"column":12}},{"start":{"line":69,"column":12},"end":{"line":69,"column":12}}]},"13":{"line":73,"type":"if","locations":[{"start":{"line":73,"column":8},"end":{"line":73,"column":8}},{"start":{"line":73,"column":8},"end":{"line":73,"column":8}}]},"14":{"line":95,"type":"if","locations":[{"start":{"line":95,"column":6},"end":{"line":95,"column":6}},{"start":{"line":95,"column":6},"end":{"line":95,"column":6}}]},"15":{"line":96,"type":"if","locations":[{"start":{"line":96,"column":8},"end":{"line":96,"column":8}},{"start":{"line":96,"column":8},"end":{"line":96,"column":8}}]},"16":{"line":98,"type":"if","locations":[{"start":{"line":98,"column":12},"end":{"line":98,"column":12}},{"start":{"line":98,"column":12},"end":{"line":98,"column":12}}]},"17":{"line":106,"type":"if","locations":[{"start":{"line":106,"column":8},"end":{"line":106,"column":8}},{"start":{"line":106,"column":8},"end":{"line":106,"column":8}}]},"18":{"line":112,"type":"if","locations":[{"start":{"line":112,"column":8},"end":{"line":112,"column":8}},{"start":{"line":112,"column":8},"end":{"line":112,"column":8}}]},"19":{"line":113,"type":"if","locations":[{"start":{"line":113,"column":8},"end":{"line":113,"column":8}},{"start":{"line":113,"column":8},"end":{"line":113,"column":8}}]},"20":{"line":115,"type":"if","locations":[{"start":{"line":115,"column":12},"end":{"line":115,"column":12}},{"start":{"line":115,"column":12},"end":{"line":115,"column":12}}]},"21":{"line":118,"type":"if","locations":[{"start":{"line":118,"column":10},"end":{"line":118,"column":10}},{"start":{"line":118,"column":10},"end":{"line":118,"column":10}}]},"22":{"line":125,"type":"if","locations":[{"start":{"line":125,"column":8},"end":{"line":125,"column":8}},{"start":{"line":125,"column":8},"end":{"line":125,"column":8}}]},"23":{"line":126,"type":"if","locations":[{"start":{"line":126,"column":8},"end":{"line":126,"column":8}},{"start":{"line":126,"column":8},"end":{"line":126,"column":8}}]},"24":{"line":129,"type":"if","locations":[{"start":{"line":129,"column":14},"end":{"line":129,"column":14}},{"start":{"line":129,"column":14},"end":{"line":129,"column":14}}]},"25":{"line":137,"type":"if","locations":[{"start":{"line":137,"column":18},"end":{"line":137,"column":18}},{"start":{"line":137,"column":18},"end":{"line":137,"column":18}}]},"26":{"line":143,"type":"if","locations":[{"start":{"line":143,"column":10},"end":{"line":143,"column":10}},{"start":{"line":143,"column":10},"end":{"line":143,"column":10}}]},"27":{"line":151,"type":"if","locations":[{"start":{"line":151,"column":8},"end":{"line":151,"column":8}},{"start":{"line":151,"column":8},"end":{"line":151,"column":8}}]},"28":{"line":151,"type":"binary-expr","locations":[{"start":{"line":151,"column":12},"end":{"line":151,"column":22}},{"start":{"line":151,"column":26},"end":{"line":151,"column":39}}]},"29":{"line":154,"type":"if","locations":[{"start":{"line":154,"column":8},"end":{"line":154,"column":8}},{"start":{"line":154,"column":8},"end":{"line":154,"column":8}}]},"30":{"line":166,"type":"if","locations":[{"start":{"line":166,"column":6},"end":{"line":166,"column":6}},{"start":{"line":166,"column":6},"end":{"line":166,"column":6}}]},"31":{"line":168,"type":"if","locations":[{"start":{"line":168,"column":10},"end":{"line":168,"column":10}},{"start":{"line":168,"column":10},"end":{"line":168,"column":10}}]},"32":{"line":169,"type":"if","locations":[{"start":{"line":169,"column":10},"end":{"line":169,"column":10}},{"start":{"line":169,"column":10},"end":{"line":169,"column":10}}]},"33":{"line":172,"type":"if","locations":[{"start":{"line":172,"column":14},"end":{"line":172,"column":14}},{"start":{"line":172,"column":14},"end":{"line":172,"column":14}}]},"34":{"line":188,"type":"if","locations":[{"start":{"line":188,"column":12},"end":{"line":188,"column":12}},{"start":{"line":188,"column":12},"end":{"line":188,"column":12}}]},"35":{"line":192,"type":"if","locations":[{"start":{"line":192,"column":8},"end":{"line":192,"column":8}},{"start":{"line":192,"column":8},"end":{"line":192,"column":8}}]},"36":{"line":205,"type":"if","locations":[{"start":{"line":205,"column":6},"end":{"line":205,"column":6}},{"start":{"line":205,"column":6},"end":{"line":205,"column":6}}]},"37":{"line":207,"type":"if","locations":[{"start":{"line":207,"column":8},"end":{"line":207,"column":8}},{"start":{"line":207,"column":8},"end":{"line":207,"column":8}}]},"38":{"line":209,"type":"if","locations":[{"start":{"line":209,"column":12},"end":{"line":209,"column":12}},{"start":{"line":209,"column":12},"end":{"line":209,"column":12}}]},"39":{"line":211,"type":"if","locations":[{"start":{"line":211,"column":12},"end":{"line":211,"column":12}},{"start":{"line":211,"column":12},"end":{"line":211,"column":12}}]},"40":{"line":213,"type":"if","locations":[{"start":{"line":213,"column":16},"end":{"line":213,"column":16}},{"start":{"line":213,"column":16},"end":{"line":213,"column":16}}]},"41":{"line":219,"type":"if","locations":[{"start":{"line":219,"column":20},"end":{"line":219,"column":20}},{"start":{"line":219,"column":20},"end":{"line":219,"column":20}}]},"42":{"line":224,"type":"if","locations":[{"start":{"line":224,"column":14},"end":{"line":224,"column":14}},{"start":{"line":224,"column":14},"end":{"line":224,"column":14}}]},"43":{"line":228,"type":"if","locations":[{"start":{"line":228,"column":10},"end":{"line":228,"column":10}},{"start":{"line":228,"column":10},"end":{"line":228,"column":10}}]},"44":{"line":236,"type":"if","locations":[{"start":{"line":236,"column":6},"end":{"line":236,"column":6}},{"start":{"line":236,"column":6},"end":{"line":236,"column":6}}]},"45":{"line":238,"type":"if","locations":[{"start":{"line":238,"column":8},"end":{"line":238,"column":8}},{"start":{"line":238,"column":8},"end":{"line":238,"column":8}}]},"46":{"line":240,"type":"if","locations":[{"start":{"line":240,"column":12},"end":{"line":240,"column":12}},{"start":{"line":240,"column":12},"end":{"line":240,"column":12}}]},"47":{"line":242,"type":"if","locations":[{"start":{"line":242,"column":12},"end":{"line":242,"column":12}},{"start":{"line":242,"column":12},"end":{"line":242,"column":12}}]},"48":{"line":244,"type":"if","locations":[{"start":{"line":244,"column":16},"end":{"line":244,"column":16}},{"start":{"line":244,"column":16},"end":{"line":244,"column":16}}]},"49":{"line":249,"type":"if","locations":[{"start":{"line":249,"column":20},"end":{"line":249,"column":20}},{"start":{"line":249,"column":20},"end":{"line":249,"column":20}}]},"50":{"line":250,"type":"if","locations":[{"start":{"line":250,"column":20},"end":{"line":250,"column":20}},{"start":{"line":250,"column":20},"end":{"line":250,"column":20}}]},"51":{"line":255,"type":"if","locations":[{"start":{"line":255,"column":14},"end":{"line":255,"column":14}},{"start":{"line":255,"column":14},"end":{"line":255,"column":14}}]},"52":{"line":259,"type":"if","locations":[{"start":{"line":259,"column":10},"end":{"line":259,"column":10}},{"start":{"line":259,"column":10},"end":{"line":259,"column":10}}]},"53":{"line":269,"type":"if","locations":[{"start":{"line":269,"column":6},"end":{"line":269,"column":6}},{"start":{"line":269,"column":6},"end":{"line":269,"column":6}}]},"54":{"line":273,"type":"if","locations":[{"start":{"line":273,"column":8},"end":{"line":273,"column":8}},{"start":{"line":273,"column":8},"end":{"line":273,"column":8}}]},"55":{"line":275,"type":"if","locations":[{"start":{"line":275,"column":12},"end":{"line":275,"column":12}},{"start":{"line":275,"column":12},"end":{"line":275,"column":12}}]},"56":{"line":277,"type":"if","locations":[{"start":{"line":277,"column":16},"end":{"line":277,"column":16}},{"start":{"line":277,"column":16},"end":{"line":277,"column":16}}]},"57":{"line":290,"type":"if","locations":[{"start":{"line":290,"column":10},"end":{"line":290,"column":10}},{"start":{"line":290,"column":10},"end":{"line":290,"column":10}}]},"58":{"line":301,"type":"if","locations":[{"start":{"line":301,"column":6},"end":{"line":301,"column":6}},{"start":{"line":301,"column":6},"end":{"line":301,"column":6}}]},"59":{"line":306,"type":"if","locations":[{"start":{"line":306,"column":4},"end":{"line":306,"column":4}},{"start":{"line":306,"column":4},"end":{"line":306,"column":4}}]}},"code":["'use strict'","","const async = require('async')","","module.exports = {","  startPriority: 200,","  loadPriority: 520,","  initialize: function (api, next) {","    api.chatRoom = {}","    api.chatRoom.keys = {","      rooms: 'actionhero:chatRoom:rooms',","      members: 'actionhero:chatRoom:members:'","    }","    api.chatRoom.messageChannel = '/actionhero/chat/chat'","","    api.chatRoom.middleware = {}","    api.chatRoom.globalMiddleware = []","","    api.chatRoom.addMiddleware = function (data) {","      if (!data.name) { throw new Error('middleware.name is required') }","      if (!data.priority) { data.priority = api.config.general.defaultMiddlewarePriority }","      data.priority = Number(data.priority)","      api.chatRoom.middleware[data.name] = data","","      api.chatRoom.globalMiddleware.push(data.name)","      api.chatRoom.globalMiddleware.sort((a, b) => {","        if (api.chatRoom.middleware[a].priority > api.chatRoom.middleware[b].priority) {","          return 1","        } else {","          return -1","        }","      })","    }","","    api.chatRoom.broadcast = function (connection, room, message, callback) {","      if (!room || room.length === 0 || message === null || message.length === 0) {","        if (typeof callback === 'function') { process.nextTick(() => { callback(api.config.errors.connectionRoomAndMessage(connection)) }) }","      } else if (connection.rooms === undefined || connection.rooms.indexOf(room) > -1) {","        if (connection.id === undefined) { connection.id = 0 }","        const payload = {","          messageType: 'chat',","          serverToken: api.config.general.serverToken,","          serverId: api.id,","          message: message,","          sentAt: new Date().getTime(),","          connection: {","            id: connection.id,","            room: room","          }","        }","        const messagePayload = api.chatRoom.generateMessagePayload(payload)","","        api.chatRoom.handleCallbacks(connection, messagePayload.room, 'onSayReceive', messagePayload, (error, newPayload) => {","          if (error) {","            if (typeof callback === 'function') { process.nextTick(() => { callback(error) }) }","          } else {","            const payloadToSend = {","              messageType: 'chat',","              serverToken: api.config.general.serverToken,","              serverId: api.id,","              message: newPayload.message,","              sentAt: newPayload.sentAt,","              connection: {","                id: newPayload.from,","                room: newPayload.room","              }","            }","            api.redis.publish(payloadToSend)","            if (typeof callback === 'function') { process.nextTick(() => { callback(null) }) }","          }","        })","      } else {","        if (typeof callback === 'function') { process.nextTick(() => { callback(api.config.errors.connectionNotInRoom(connection, room)) }) }","      }","    }","","    api.chatRoom.generateMessagePayload = function (message) {","      return {","        message: message.message,","        room: message.connection.room,","        from: message.connection.id,","        context: 'user',","        sentAt: message.sentAt","      }","    }","","    api.chatRoom.incomingMessage = function (message) {","      const messagePayload = api.chatRoom.generateMessagePayload(message)","      for (let i in api.connections.connections) {","        api.chatRoom.incomingMessagePerConnection(api.connections.connections[i], messagePayload)","      }","    }","","    api.chatRoom.incomingMessagePerConnection = function (connection, messagePayload) {","      if (connection.canChat === true) {","        if (connection.rooms.indexOf(messagePayload.room) > -1) {","          api.chatRoom.handleCallbacks(connection, messagePayload.room, 'say', messagePayload, (error, newMessagePayload) => {","            if (!error) { connection.sendMessage(newMessagePayload, 'say') }","          })","        }","      }","    }","","    api.chatRoom.list = function (callback) {","      api.redis.clients.client.smembers(api.chatRoom.keys.rooms, (error, rooms) => {","        if (typeof callback === 'function') { callback(error, rooms) }","      })","    }","","    api.chatRoom.add = function (room, callback) {","      api.chatRoom.exists(room, function (error, found) {","        if (error) { return callback(error) }","        if (found === false) {","          api.redis.clients.client.sadd(api.chatRoom.keys.rooms, room, (error, count) => {","            if (typeof callback === 'function') { callback(error, count) }","          })","        } else {","          if (typeof callback === 'function') { callback(api.config.errors.connectionRoomExists(room), null) }","        }","      })","    }","","    api.chatRoom.destroy = function (room, callback) {","      api.chatRoom.exists(room, (error, found) => {","        if (error) { return callback(error) }","        if (found === true) {","          api.chatRoom.broadcast({}, room, api.config.errors.connectionRoomHasBeenDeleted(room), () => {","            api.redis.clients.client.hgetall(api.chatRoom.keys.members + room, (error, membersHash) => {","              if (error) { return callback(error) }","","              for (let id in membersHash) {","                api.chatRoom.removeMember(id, room)","              }","","              api.redis.clients.client.srem(api.chatRoom.keys.rooms, room, () => {","                api.redis.clients.client.del(api.chatRoom.keys.members + room, () => {","                  if (typeof callback === 'function') { callback() }","                })","              })","            })","          })","        } else {","          if (typeof callback === 'function') { callback(api.config.errors.connectionRoomNotExist(room), null) }","        }","      })","    }","","    api.chatRoom.exists = function (room, callback) {","      api.redis.clients.client.sismember(api.chatRoom.keys.rooms, room, (error, bool) => {","        let found = false","        if (bool === 1 || bool === true) {","          found = true","        }","        if (typeof callback === 'function') { callback(error, found) }","      })","    }","","    api.chatRoom.sanitizeMemberDetails = function (memberData) {","      return {","        id: memberData.id,","        joinedAt: memberData.joinedAt","      }","    }","","    api.chatRoom.roomStatus = function (room, callback) {","      if (room) {","        api.chatRoom.exists(room, (error, found) => {","          if (error) { return callback(error) }","          if (found === true) {","            const key = api.chatRoom.keys.members + room","            api.redis.clients.client.hgetall(key, (error, members) => {","              if (error) { return callback(error) }","","              let cleanedMembers = {}","              let count = 0","              for (let id in members) {","                const data = JSON.parse(members[id])","                cleanedMembers[id] = api.chatRoom.sanitizeMemberDetails(data)","                count++","              }","              callback(null, {","                room: room,","                members: cleanedMembers,","                membersCount: count","              })","            })","          } else {","            if (typeof callback === 'function') { callback(api.config.errors.connectionRoomNotExist(room), null) }","          }","        })","      } else {","        if (typeof callback === 'function') { callback(api.config.errors.connectionRoomRequired(), null) }","      }","    }","","    api.chatRoom.generateMemberDetails = function (connection) {","      return {","        id: connection.id,","        joinedAt: new Date().getTime(),","        host: api.id","      }","    }","","    api.chatRoom.addMember = function (connectionId, room, callback) {","      if (api.connections.connections[connectionId]) {","        const connection = api.connections.connections[connectionId]","        if (connection.rooms.indexOf(room) < 0) {","          api.chatRoom.exists(room, (error, found) => {","            if (error) { return callback(error) }","","            if (found === true) {","              api.chatRoom.handleCallbacks(connection, room, 'join', null, (error) => {","                if (error) {","                  callback(error, false)","                } else {","                  const memberDetails = api.chatRoom.generateMemberDetails(connection)","                  api.redis.clients.client.hset(api.chatRoom.keys.members + room, connection.id, JSON.stringify(memberDetails), () => {","                    connection.rooms.push(room)","                    if (typeof callback === 'function') { callback(null, true) }","                  })","                }","              })","            } else {","              if (typeof callback === 'function') { callback(api.config.errors.connectionRoomNotExist(room), false) }","            }","          })","        } else {","          if (typeof callback === 'function') { callback(api.config.errors.connectionAlreadyInRoom(connection, room), false) }","        }","      } else {","        api.redis.doCluster('api.chatRoom.addMember', [connectionId, room], connectionId, callback)","      }","    }","","    api.chatRoom.removeMember = function (connectionId, room, callback) {","      if (api.connections.connections[connectionId]) {","        const connection = api.connections.connections[connectionId]","        if (connection.rooms.indexOf(room) > -1) {","          api.chatRoom.exists(room, (error, found) => {","            if (error) { return callback(error) }","","            if (found) {","              api.chatRoom.handleCallbacks(connection, room, 'leave', null, (error) => {","                if (error) {","                  callback(error, false)","                } else {","                  api.redis.clients.client.hdel(api.chatRoom.keys.members + room, connection.id, () => {","                    const index = connection.rooms.indexOf(room)","                    if (index > -1) { connection.rooms.splice(index, 1) }","                    if (typeof callback === 'function') { callback(null, true) }","                  })","                }","              })","            } else {","              if (typeof callback === 'function') { callback(api.config.errors.connectionRoomNotExist(room), false) }","            }","          })","        } else {","          if (typeof callback === 'function') { callback(api.config.errors.connectionNotInRoom(connection, room), false) }","        }","      } else {","        api.redis.doCluster('api.chatRoom.removeMember', [connectionId, room], connectionId, callback)","      }","    }","","    api.chatRoom.handleCallbacks = function (connection, room, direction, messagePayload, callback) {","      let jobs = []","      let newMessagePayload","      if (messagePayload) { newMessagePayload = api.utils.objClone(messagePayload) }","","      api.chatRoom.globalMiddleware.forEach((name) => {","        const m = api.chatRoom.middleware[name]","        if (typeof m[direction] === 'function') {","          jobs.push((done) => {","            if (messagePayload) {","              m[direction](connection, room, newMessagePayload, (error, data) => {","                if (data) { newMessagePayload = data }","                done(error, data)","              })","            } else {","              m[direction](connection, room, done)","            }","          })","        }","      })","","      async.series(jobs, (error, data) => {","        while (data.length > 0) {","          const thisData = data.shift()","          if (thisData) { newMessagePayload = thisData }","        }","        callback(error, newMessagePayload)","      })","    }","","    next()","  },","","  start: function (api, next) {","    api.redis.subscriptionHandlers.chat = (message) => {","      if (api.chatRoom) {","        api.chatRoom.incomingMessage(message)","      }","    }","","    if (api.config.general.startingChatRooms) {","      for (let room in api.config.general.startingChatRooms) {","        api.log(['ensuring the existence of the chatRoom: %s', room])","        api.chatRoom.add(room)","      }","    }","","    next()","  }","","}",""],"l":{"3":1,"5":1,"9":0,"10":0,"14":0,"16":0,"17":0,"19":0,"20":0,"21":0,"22":0,"23":0,"25":0,"26":0,"27":0,"28":0,"30":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"51":0,"53":0,"54":0,"55":0,"57":0,"68":0,"69":0,"73":0,"77":0,"78":0,"87":0,"88":0,"89":0,"90":0,"94":0,"95":0,"96":0,"97":0,"98":0,"104":0,"105":0,"106":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"118":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"131":0,"132":0,"135":0,"136":0,"137":0,"143":0,"148":0,"149":0,"150":0,"151":0,"152":0,"154":0,"158":0,"159":0,"165":0,"166":0,"167":0,"168":0,"169":0,"170":0,"171":0,"172":0,"174":0,"175":0,"176":0,"177":0,"178":0,"179":0,"181":0,"188":0,"192":0,"196":0,"197":0,"204":0,"205":0,"206":0,"207":0,"208":0,"209":0,"211":0,"212":0,"213":0,"214":0,"216":0,"217":0,"218":0,"219":0,"224":0,"228":0,"231":0,"235":0,"236":0,"237":0,"238":0,"239":0,"240":0,"242":0,"243":0,"244":0,"245":0,"247":0,"248":0,"249":0,"250":0,"255":0,"259":0,"262":0,"266":0,"267":0,"268":0,"269":0,"271":0,"272":0,"273":0,"274":0,"275":0,"276":0,"277":0,"278":0,"281":0,"287":0,"288":0,"289":0,"290":0,"292":0,"296":0,"300":0,"301":0,"302":0,"306":0,"307":0,"308":0,"309":0,"313":0}},"/home/travis/build/npmtest/node-npmtest-actionhero/node_modules/actionhero/initializers/config.js":{"path":"/home/travis/build/npmtest/node-npmtest-actionhero/node_modules/actionhero/initializers/config.js","s":{"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":1,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0},"fnMap":{"1":{"name":"(anonymous_1)","line":9,"loc":{"start":{"line":9,"column":14},"end":{"line":9,"column":35}}},"2":{"name":"(anonymous_2)","line":28,"loc":{"start":{"line":28,"column":26},"end":{"line":28,"column":52}}},"3":{"name":"(anonymous_3)","line":54,"loc":{"start":{"line":54,"column":26},"end":{"line":54,"column":38}}},"4":{"name":"addConfigPath","line":73,"loc":{"start":{"line":73,"column":4},"end":{"line":73,"column":55}}},"5":{"name":"(anonymous_5)","line":106,"loc":{"start":{"line":106,"column":30},"end":{"line":106,"column":59}}},"6":{"name":"(anonymous_6)","line":174,"loc":{"start":{"line":174,"column":9},"end":{"line":174,"column":34}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":24}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":28}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":37}},"4":{"start":{"line":7,"column":0},"end":{"line":179,"column":1}},"5":{"start":{"line":12,"column":4},"end":{"line":14,"column":5}},"6":{"start":{"line":13,"column":6},"end":{"line":13,"column":55}},"7":{"start":{"line":16,"column":4},"end":{"line":16,"column":27}},"8":{"start":{"line":18,"column":4},"end":{"line":22,"column":5}},"9":{"start":{"line":19,"column":6},"end":{"line":19,"column":29}},"10":{"start":{"line":20,"column":11},"end":{"line":22,"column":5}},"11":{"start":{"line":21,"column":6},"end":{"line":21,"column":36}},"12":{"start":{"line":26,"column":4},"end":{"line":26,"column":25}},"13":{"start":{"line":28,"column":4},"end":{"line":52,"column":5}},"14":{"start":{"line":29,"column":6},"end":{"line":29,"column":33}},"15":{"start":{"line":31,"column":6},"end":{"line":33,"column":7}},"16":{"start":{"line":32,"column":8},"end":{"line":32,"column":72}},"17":{"start":{"line":35,"column":6},"end":{"line":51,"column":7}},"18":{"start":{"line":36,"column":8},"end":{"line":36,"column":35}},"19":{"start":{"line":37,"column":8},"end":{"line":50,"column":10}},"20":{"start":{"line":38,"column":10},"end":{"line":49,"column":11}},"21":{"start":{"line":43,"column":12},"end":{"line":48,"column":14}},"22":{"start":{"line":44,"column":14},"end":{"line":44,"column":34}},"23":{"start":{"line":45,"column":14},"end":{"line":45,"column":89}},"24":{"start":{"line":45,"column":50},"end":{"line":45,"column":88}},"25":{"start":{"line":46,"column":14},"end":{"line":46,"column":62}},"26":{"start":{"line":47,"column":14},"end":{"line":47,"column":28}},"27":{"start":{"line":54,"column":4},"end":{"line":59,"column":5}},"28":{"start":{"line":55,"column":6},"end":{"line":57,"column":7}},"29":{"start":{"line":56,"column":8},"end":{"line":56,"column":43}},"30":{"start":{"line":58,"column":6},"end":{"line":58,"column":27}},"31":{"start":{"line":71,"column":4},"end":{"line":71,"column":24}},"32":{"start":{"line":73,"column":4},"end":{"line":88,"column":5}},"33":{"start":{"line":74,"column":6},"end":{"line":87,"column":7}},"34":{"start":{"line":75,"column":8},"end":{"line":84,"column":9}},"35":{"start":{"line":76,"column":10},"end":{"line":76,"column":53}},"36":{"start":{"line":78,"column":10},"end":{"line":80,"column":11}},"37":{"start":{"line":79,"column":12},"end":{"line":79,"column":68}},"38":{"start":{"line":81,"column":10},"end":{"line":83,"column":11}},"39":{"start":{"line":82,"column":12},"end":{"line":82,"column":41}},"40":{"start":{"line":85,"column":13},"end":{"line":87,"column":7}},"41":{"start":{"line":86,"column":8},"end":{"line":86,"column":74}},"42":{"start":{"line":86,"column":37},"end":{"line":86,"column":72}},"43":{"start":{"line":90,"column":4},"end":{"line":90,"column":96}},"44":{"start":{"line":90,"column":66},"end":{"line":90,"column":94}},"45":{"start":{"line":92,"column":4},"end":{"line":94,"column":5}},"46":{"start":{"line":93,"column":6},"end":{"line":93,"column":36}},"47":{"start":{"line":96,"column":4},"end":{"line":98,"column":5}},"48":{"start":{"line":97,"column":6},"end":{"line":97,"column":155}},"49":{"start":{"line":100,"column":4},"end":{"line":104,"column":5}},"50":{"start":{"line":101,"column":6},"end":{"line":101,"column":76}},"51":{"start":{"line":102,"column":6},"end":{"line":102,"column":49}},"52":{"start":{"line":103,"column":6},"end":{"line":103,"column":28}},"53":{"start":{"line":106,"column":4},"end":{"line":156,"column":5}},"54":{"start":{"line":107,"column":6},"end":{"line":107,"column":70}},"55":{"start":{"line":109,"column":6},"end":{"line":109,"column":25}},"56":{"start":{"line":110,"column":6},"end":{"line":110,"column":25}},"57":{"start":{"line":111,"column":6},"end":{"line":147,"column":7}},"58":{"start":{"line":112,"column":8},"end":{"line":112,"column":32}},"59":{"start":{"line":113,"column":8},"end":{"line":141,"column":9}},"60":{"start":{"line":115,"column":10},"end":{"line":115,"column":38}},"61":{"start":{"line":116,"column":10},"end":{"line":116,"column":115}},"62":{"start":{"line":116,"column":40},"end":{"line":116,"column":114}},"63":{"start":{"line":117,"column":10},"end":{"line":117,"column":111}},"64":{"start":{"line":117,"column":38},"end":{"line":117,"column":110}},"65":{"start":{"line":120,"column":10},"end":{"line":120,"column":25}},"66":{"start":{"line":121,"column":10},"end":{"line":121,"column":25}},"67":{"start":{"line":126,"column":10},"end":{"line":126,"column":63}},"68":{"start":{"line":127,"column":10},"end":{"line":135,"column":11}},"69":{"start":{"line":128,"column":12},"end":{"line":132,"column":14}},"70":{"start":{"line":129,"column":14},"end":{"line":129,"column":52}},"71":{"start":{"line":130,"column":14},"end":{"line":130,"column":29}},"72":{"start":{"line":131,"column":14},"end":{"line":131,"column":40}},"73":{"start":{"line":134,"column":12},"end":{"line":134,"column":106}},"74":{"start":{"line":139,"column":10},"end":{"line":139,"column":57}},"75":{"start":{"line":140,"column":10},"end":{"line":140,"column":18}},"76":{"start":{"line":143,"column":8},"end":{"line":146,"column":9}},"77":{"start":{"line":145,"column":10},"end":{"line":145,"column":48}},"78":{"start":{"line":151,"column":6},"end":{"line":155,"column":8}},"79":{"start":{"line":152,"column":8},"end":{"line":152,"column":38}},"80":{"start":{"line":153,"column":8},"end":{"line":153,"column":113}},"81":{"start":{"line":153,"column":38},"end":{"line":153,"column":112}},"82":{"start":{"line":154,"column":8},"end":{"line":154,"column":109}},"83":{"start":{"line":154,"column":36},"end":{"line":154,"column":108}},"84":{"start":{"line":158,"column":4},"end":{"line":158,"column":19}},"85":{"start":{"line":161,"column":4},"end":{"line":161,"column":70}},"86":{"start":{"line":164,"column":4},"end":{"line":164,"column":44}},"87":{"start":{"line":167,"column":4},"end":{"line":169,"column":5}},"88":{"start":{"line":168,"column":6},"end":{"line":168,"column":85}},"89":{"start":{"line":171,"column":4},"end":{"line":171,"column":26}},"90":{"start":{"line":175,"column":4},"end":{"line":175,"column":51}},"91":{"start":{"line":176,"column":4},"end":{"line":176,"column":14}}},"branchMap":{"1":{"line":12,"type":"if","locations":[{"start":{"line":12,"column":4},"end":{"line":12,"column":4}},{"start":{"line":12,"column":4},"end":{"line":12,"column":4}}]},"2":{"line":12,"type":"binary-expr","locations":[{"start":{"line":12,"column":8},"end":{"line":12,"column":27}},{"start":{"line":12,"column":31},"end":{"line":12,"column":54}}]},"3":{"line":18,"type":"if","locations":[{"start":{"line":18,"column":4},"end":{"line":18,"column":4}},{"start":{"line":18,"column":4},"end":{"line":18,"column":4}}]},"4":{"line":20,"type":"if","locations":[{"start":{"line":20,"column":11},"end":{"line":20,"column":11}},{"start":{"line":20,"column":11},"end":{"line":20,"column":11}}]},"5":{"line":31,"type":"if","locations":[{"start":{"line":31,"column":6},"end":{"line":31,"column":6}},{"start":{"line":31,"column":6},"end":{"line":31,"column":6}}]},"6":{"line":35,"type":"if","locations":[{"start":{"line":35,"column":6},"end":{"line":35,"column":6}},{"start":{"line":35,"column":6},"end":{"line":35,"column":6}}]},"7":{"line":35,"type":"binary-expr","locations":[{"start":{"line":35,"column":10},"end":{"line":35,"column":53}},{"start":{"line":35,"column":57},"end":{"line":35,"column":91}}]},"8":{"line":38,"type":"if","locations":[{"start":{"line":38,"column":10},"end":{"line":38,"column":10}},{"start":{"line":38,"column":10},"end":{"line":38,"column":10}}]},"9":{"line":39,"type":"binary-expr","locations":[{"start":{"line":39,"column":12},"end":{"line":39,"column":32}},{"start":{"line":40,"column":12},"end":{"line":40,"column":55}},{"start":{"line":41,"column":12},"end":{"line":41,"column":35}}]},"10":{"line":45,"type":"if","locations":[{"start":{"line":45,"column":14},"end":{"line":45,"column":14}},{"start":{"line":45,"column":14},"end":{"line":45,"column":14}}]},"11":{"line":74,"type":"if","locations":[{"start":{"line":74,"column":6},"end":{"line":74,"column":6}},{"start":{"line":74,"column":6},"end":{"line":74,"column":6}}]},"12":{"line":75,"type":"if","locations":[{"start":{"line":75,"column":8},"end":{"line":75,"column":8}},{"start":{"line":75,"column":8},"end":{"line":75,"column":8}}]},"13":{"line":78,"type":"if","locations":[{"start":{"line":78,"column":10},"end":{"line":78,"column":10}},{"start":{"line":78,"column":10},"end":{"line":78,"column":10}}]},"14":{"line":81,"type":"if","locations":[{"start":{"line":81,"column":10},"end":{"line":81,"column":10}},{"start":{"line":81,"column":10},"end":{"line":81,"column":10}}]},"15":{"line":85,"type":"if","locations":[{"start":{"line":85,"column":13},"end":{"line":85,"column":13}},{"start":{"line":85,"column":13},"end":{"line":85,"column":13}}]},"16":{"line":92,"type":"if","locations":[{"start":{"line":92,"column":4},"end":{"line":92,"column":4}},{"start":{"line":92,"column":4},"end":{"line":92,"column":4}}]},"17":{"line":96,"type":"if","locations":[{"start":{"line":96,"column":4},"end":{"line":96,"column":4}},{"start":{"line":96,"column":4},"end":{"line":96,"column":4}}]},"18":{"line":116,"type":"if","locations":[{"start":{"line":116,"column":10},"end":{"line":116,"column":10}},{"start":{"line":116,"column":10},"end":{"line":116,"column":10}}]},"19":{"line":117,"type":"if","locations":[{"start":{"line":117,"column":10},"end":{"line":117,"column":10}},{"start":{"line":117,"column":10},"end":{"line":117,"column":10}}]},"20":{"line":127,"type":"if","locations":[{"start":{"line":127,"column":10},"end":{"line":127,"column":10}},{"start":{"line":127,"column":10},"end":{"line":127,"column":10}}]},"21":{"line":143,"type":"if","locations":[{"start":{"line":143,"column":8},"end":{"line":143,"column":8}},{"start":{"line":143,"column":8},"end":{"line":143,"column":8}}]},"22":{"line":153,"type":"if","locations":[{"start":{"line":153,"column":8},"end":{"line":153,"column":8}},{"start":{"line":153,"column":8},"end":{"line":153,"column":8}}]},"23":{"line":154,"type":"if","locations":[{"start":{"line":154,"column":8},"end":{"line":154,"column":8}},{"start":{"line":154,"column":8},"end":{"line":154,"column":8}}]},"24":{"line":167,"type":"if","locations":[{"start":{"line":167,"column":4},"end":{"line":167,"column":4}},{"start":{"line":167,"column":4},"end":{"line":167,"column":4}}]},"25":{"line":167,"type":"binary-expr","locations":[{"start":{"line":167,"column":8},"end":{"line":167,"column":27}},{"start":{"line":167,"column":31},"end":{"line":167,"column":64}}]}},"code":["'use strict'","","const fs = require('fs')","const path = require('path')","const argv = require('optimist').argv","","module.exports = {","  loadPriority: 0,","  initialize: function (api, next) {","    // api.env","","    if (api._startingParams && api._startingParams.api) {","      api.utils.hashMerge(api, api._startingParams.api)","    }","","    api.env = 'development'","","    if (argv.NODE_ENV) {","      api.env = argv.NODE_ENV","    } else if (process.env.NODE_ENV) {","      api.env = process.env.NODE_ENV","    }","","    // reloading in development mode","","    api.watchedFiles = []","","    api.watchFileAndAct = function (file, callback) {","      file = path.normalize(file)","","      if (!fs.existsSync(file)) {","        throw new Error(file + ' does not exist, and cannot be watched')","      }","","      if (api.config.general.developmentMode === true && api.watchedFiles.indexOf(file) < 0) {","        api.watchedFiles.push(file)","        fs.watchFile(file, {interval: 1000}, (curr, prev) => {","          if (","            api.running === true &&","            api.config.general.developmentMode === true &&","            curr.mtime > prev.mtime","          ) {","            process.nextTick(() => {","              let cleanPath = file","              if (process.platform === 'win32') { cleanPath = file.replace(/\\//g, '\\\\') }","              delete require.cache[require.resolve(cleanPath)]","              callback(file)","            })","          }","        })","      }","    }","","    api.unWatchAllFiles = function () {","      for (let i in api.watchedFiles) {","        fs.unwatchFile(api.watchedFiles[i])","      }","      api.watchedFiles = []","    }","","    // We support multiple configuration paths as follows:","    //","    // 1. Use the project 'config' folder, if it exists.","    // 2. \"actionhero --config=PATH1 --config=PATH2 --config=PATH3,PATH4\"","    // 3. \"ACTIONHERO_CONFIG=PATH1,PATH2 npm start\"","    //","    // Note that if --config or ACTIONHERO_CONFIG are used, they _overwrite_ the use of the default \"config\" folder. If","    // you wish to use both, you need to re-specify \"config\", e.g. \"--config=config,local-config\". Also, note that","    // specifying multiple --config options on the command line does exactly the same thing as using one parameter with","    // comma separators, however the environment variable method only supports the comma-delimited syntax.","    let configPaths = []","","    function addConfigPath (pathToCheck, alreadySplit) {","      if (typeof pathToCheck === 'string') {","        if (!alreadySplit) {","          addConfigPath(pathToCheck.split(','), true)","        } else {","          if (pathToCheck.charAt(0) !== '/') {","            pathToCheck = path.resolve(api.projectRoot, pathToCheck)","          }","          if (fs.existsSync(pathToCheck)) {","            configPaths.push(pathToCheck)","          }","        }","      } else if (Array.isArray(pathToCheck)) {","        pathToCheck.map((entry) => { addConfigPath(entry, alreadySplit) })","      }","    }","","    [argv.config, process.env.ACTIONHERO_CONFIG].map((entry) => { addConfigPath(entry, false) })","","    if (configPaths.length < 1) {","      addConfigPath('config', false)","    }","","    if (configPaths.length < 1) {","      return next(new Error(configPaths + 'No config directory found in this project, specified with --config, or found in process.env.ACTIONHERO_CONFIG'))","    }","","    const rebootCallback = (file) => {","      api.log(['*** rebooting due to config change (%s) ***', file], 'info')","      delete require.cache[require.resolve(file)]","      api.commands.restart()","    }","","    api.loadConfigDirectory = function (configPath, watch) {","      const configFiles = api.utils.recursiveDirectoryGlob(configPath)","","      let loadRetries = 0","      let loadErrors = {}","      for (let i = 0, limit = configFiles.length; (i < limit); i++) {","        const f = configFiles[i]","        try {","          // attempt configuration file load","          let localConfig = require(f)","          if (localConfig['default']) { api.config = api.utils.hashMerge(api.config, localConfig['default'], api) }","          if (localConfig[api.env]) { api.config = api.utils.hashMerge(api.config, localConfig[api.env], api) }","          // configuration file load success: clear retries and","          // errors since progress has been made","          loadRetries = 0","          loadErrors = {}","        } catch (error) {","          // error loading configuration, abort if all remaining","          // configuration files have been tried and failed","          // indicating inability to progress","          loadErrors[f] = {error: error, msg: error.toString()}","          if (++loadRetries === limit - i) {","            Object.keys(loadErrors).forEach((e) => {","              console.log(loadErrors[e].error.stack)","              console.log('')","              delete loadErrors[e].error","            })","","            return next(new Error('Unable to load configurations, errors: ' + JSON.stringify(loadErrors)))","          }","          // adjust configuration files list: remove and push","          // failed configuration to the end of the list and","          // continue with next file at same index","          configFiles.push(configFiles.splice(i--, 1)[0])","          continue","        }","","        if (watch !== false) {","          // configuration file loaded: set watch","          api.watchFileAndAct(f, rebootCallback)","        }","      }","","      // We load the config twice. Utilize configuration files load order that succeeded on the first pass.","      // This is to allow 'literal' values to be loaded whenever possible, and then for refrences to be resolved","      configFiles.forEach((f) => {","        const localConfig = require(f)","        if (localConfig['default']) { api.config = api.utils.hashMerge(api.config, localConfig['default'], api) }","        if (localConfig[api.env]) { api.config = api.utils.hashMerge(api.config, localConfig[api.env], api) }","      })","    }","","    api.config = {}","","    // load the default config of actionhero","    api.loadConfigDirectory(path.join(__dirname, '/../config'), false)","","    // load the project specific config","    configPaths.map(api.loadConfigDirectory)","","    // apply any configChanges","    if (api._startingParams && api._startingParams.configChanges) {","      api.config = api.utils.hashMerge(api.config, api._startingParams.configChanges)","    }","","    process.nextTick(next)","  },","","  start: function (api, callback) {","    api.log(['environment: %s', api.env], 'notice')","    callback()","  }","","}",""],"l":{"3":1,"4":1,"5":1,"7":1,"12":0,"13":0,"16":0,"18":0,"19":0,"20":0,"21":0,"26":0,"28":0,"29":0,"31":0,"32":0,"35":0,"36":0,"37":0,"38":0,"43":0,"44":0,"45":0,"46":0,"47":0,"54":0,"55":0,"56":0,"58":0,"71":0,"73":1,"74":0,"75":0,"76":0,"78":0,"79":0,"81":0,"82":0,"85":0,"86":0,"90":0,"92":0,"93":0,"96":0,"97":0,"100":0,"101":0,"102":0,"103":0,"106":0,"107":0,"109":0,"110":0,"111":0,"112":0,"113":0,"115":0,"116":0,"117":0,"120":0,"121":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"134":0,"139":0,"140":0,"143":0,"145":0,"151":0,"152":0,"153":0,"154":0,"158":0,"161":0,"164":0,"167":0,"168":0,"171":0,"175":0,"176":0}},"/home/travis/build/npmtest/node-npmtest-actionhero/node_modules/actionhero/initializers/connections.js":{"path":"/home/travis/build/npmtest/node-npmtest-actionhero/node_modules/actionhero/initializers/connections.js","s":{"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":0,"138":0,"139":0,"140":0,"141":0,"142":0,"143":0,"144":0,"145":0,"146":0,"147":0,"148":0,"149":0,"150":0,"151":0,"152":0,"153":0,"154":0,"155":0,"156":0,"157":0,"158":0,"159":0,"160":0,"161":0,"162":0,"163":0,"164":0,"165":0,"166":0,"167":0,"168":0,"169":0,"170":0,"171":0},"b":{"1":[0,0],"2":[0,0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0],"34":[0,0],"35":[0,0],"36":[0,0],"37":[0,0],"38":[0,0],"39":[0,0],"40":[0,0],"41":[0,0],"42":[0,0],"43":[0,0],"44":[0,0],"45":[0,0],"46":[0,0],"47":[0,0],"48":[0,0],"49":[0,0],"50":[0,0],"51":[0,0],"52":[0,0],"53":[0,0],"54":[0,0],"55":[0,0],"56":[0,0],"57":[0,0],"58":[0,0],"59":[0,0],"60":[0,0],"61":[0,0],"62":[0,0],"63":[0,0],"64":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0},"fnMap":{"1":{"name":"(anonymous_1)","line":7,"loc":{"start":{"line":7,"column":14},"end":{"line":7,"column":35}}},"2":{"name":"(anonymous_2)","line":31,"loc":{"start":{"line":31,"column":13},"end":{"line":31,"column":61}}},"3":{"name":"(anonymous_3)","line":38,"loc":{"start":{"line":38,"column":18},"end":{"line":38,"column":66}}},"4":{"name":"(anonymous_4)","line":54,"loc":{"start":{"line":54,"column":21},"end":{"line":54,"column":37}}},"5":{"name":"(anonymous_5)","line":71,"loc":{"start":{"line":71,"column":28},"end":{"line":71,"column":50}}},"6":{"name":"(anonymous_6)","line":83,"loc":{"start":{"line":83,"column":21},"end":{"line":83,"column":37}}},"7":{"name":"(anonymous_7)","line":94,"loc":{"start":{"line":94,"column":37},"end":{"line":94,"column":53}}},"8":{"name":"(anonymous_8)","line":137,"loc":{"start":{"line":137,"column":40},"end":{"line":137,"column":59}}},"9":{"name":"(anonymous_9)","line":142,"loc":{"start":{"line":142,"column":42},"end":{"line":142,"column":54}}},"10":{"name":"(anonymous_10)","line":146,"loc":{"start":{"line":146,"column":39},"end":{"line":146,"column":59}}},"11":{"name":"(anonymous_11)","line":175,"loc":{"start":{"line":175,"column":35},"end":{"line":175,"column":57}}},"12":{"name":"(anonymous_12)","line":179,"loc":{"start":{"line":179,"column":37},"end":{"line":179,"column":70}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":28}},"2":{"start":{"line":5,"column":0},"end":{"line":270,"column":1}},"3":{"start":{"line":8,"column":4},"end":{"line":69,"column":5}},"4":{"start":{"line":32,"column":8},"end":{"line":34,"column":9}},"5":{"start":{"line":33,"column":10},"end":{"line":33,"column":28}},"6":{"start":{"line":33,"column":29},"end":{"line":33,"column":41}},"7":{"start":{"line":33,"column":42},"end":{"line":33,"column":55}},"8":{"start":{"line":35,"column":8},"end":{"line":35,"column":111}},"9":{"start":{"line":39,"column":8},"end":{"line":39,"column":68}},"10":{"start":{"line":40,"column":8},"end":{"line":46,"column":9}},"11":{"start":{"line":41,"column":10},"end":{"line":45,"column":11}},"12":{"start":{"line":42,"column":12},"end":{"line":42,"column":36}},"13":{"start":{"line":44,"column":12},"end":{"line":44,"column":54}},"14":{"start":{"line":47,"column":8},"end":{"line":51,"column":9}},"15":{"start":{"line":48,"column":10},"end":{"line":50,"column":12}},"16":{"start":{"line":49,"column":12},"end":{"line":49,"column":49}},"17":{"start":{"line":55,"column":8},"end":{"line":55,"column":74}},"18":{"start":{"line":55,"column":26},"end":{"line":55,"column":73}},"19":{"start":{"line":56,"column":8},"end":{"line":56,"column":92}},"20":{"start":{"line":56,"column":30},"end":{"line":56,"column":91}},"21":{"start":{"line":57,"column":8},"end":{"line":57,"column":45}},"22":{"start":{"line":58,"column":8},"end":{"line":58,"column":52}},"23":{"start":{"line":60,"column":8},"end":{"line":60,"column":45}},"24":{"start":{"line":61,"column":8},"end":{"line":67,"column":10}},"25":{"start":{"line":62,"column":10},"end":{"line":66,"column":11}},"26":{"start":{"line":63,"column":12},"end":{"line":63,"column":20}},"27":{"start":{"line":65,"column":12},"end":{"line":65,"column":21}},"28":{"start":{"line":71,"column":4},"end":{"line":79,"column":5}},"29":{"start":{"line":72,"column":6},"end":{"line":72,"column":20}},"30":{"start":{"line":73,"column":6},"end":{"line":77,"column":7}},"31":{"start":{"line":74,"column":8},"end":{"line":76,"column":9}},"32":{"start":{"line":75,"column":10},"end":{"line":75,"column":34}},"33":{"start":{"line":78,"column":6},"end":{"line":78,"column":18}},"34":{"start":{"line":83,"column":4},"end":{"line":92,"column":5}},"35":{"start":{"line":84,"column":6},"end":{"line":84,"column":22}},"36":{"start":{"line":85,"column":6},"end":{"line":85,"column":49}},"37":{"start":{"line":87,"column":6},"end":{"line":91,"column":8}},"38":{"start":{"line":88,"column":8},"end":{"line":90,"column":9}},"39":{"start":{"line":89,"column":10},"end":{"line":89,"column":65}},"40":{"start":{"line":94,"column":4},"end":{"line":135,"column":5}},"41":{"start":{"line":95,"column":6},"end":{"line":99,"column":7}},"42":{"start":{"line":96,"column":8},"end":{"line":96,"column":25}},"43":{"start":{"line":98,"column":8},"end":{"line":98,"column":35}},"44":{"start":{"line":100,"column":6},"end":{"line":100,"column":46}},"45":{"start":{"line":102,"column":6},"end":{"line":105,"column":9}},"46":{"start":{"line":103,"column":8},"end":{"line":103,"column":134}},"47":{"start":{"line":103,"column":61},"end":{"line":103,"column":133}},"48":{"start":{"line":104,"column":8},"end":{"line":104,"column":29}},"49":{"start":{"line":107,"column":6},"end":{"line":116,"column":8}},"50":{"start":{"line":108,"column":8},"end":{"line":114,"column":9}},"51":{"start":{"line":109,"column":10},"end":{"line":113,"column":11}},"52":{"start":{"line":110,"column":12},"end":{"line":110,"column":83}},"53":{"start":{"line":112,"column":12},"end":{"line":112,"column":25}},"54":{"start":{"line":115,"column":8},"end":{"line":115,"column":29}},"55":{"start":{"line":118,"column":6},"end":{"line":127,"column":7}},"56":{"start":{"line":129,"column":6},"end":{"line":132,"column":7}},"57":{"start":{"line":130,"column":8},"end":{"line":130,"column":81}},"58":{"start":{"line":130,"column":62},"end":{"line":130,"column":80}},"59":{"start":{"line":131,"column":8},"end":{"line":131,"column":70}},"60":{"start":{"line":131,"column":37},"end":{"line":131,"column":69}},"61":{"start":{"line":134,"column":6},"end":{"line":134,"column":43}},"62":{"start":{"line":137,"column":4},"end":{"line":140,"column":5}},"63":{"start":{"line":139,"column":6},"end":{"line":139,"column":45}},"64":{"start":{"line":142,"column":4},"end":{"line":144,"column":5}},"65":{"start":{"line":143,"column":6},"end":{"line":143,"column":22}},"66":{"start":{"line":146,"column":4},"end":{"line":173,"column":5}},"67":{"start":{"line":147,"column":6},"end":{"line":147,"column":27}},"68":{"start":{"line":149,"column":6},"end":{"line":153,"column":8}},"69":{"start":{"line":150,"column":8},"end":{"line":152,"column":9}},"70":{"start":{"line":151,"column":10},"end":{"line":151,"column":66}},"71":{"start":{"line":155,"column":6},"end":{"line":159,"column":7}},"72":{"start":{"line":156,"column":8},"end":{"line":158,"column":10}},"73":{"start":{"line":157,"column":10},"end":{"line":157,"column":50}},"74":{"start":{"line":161,"column":6},"end":{"line":161,"column":51}},"75":{"start":{"line":163,"column":6},"end":{"line":168,"column":7}},"76":{"start":{"line":164,"column":8},"end":{"line":166,"column":9}},"77":{"start":{"line":165,"column":10},"end":{"line":165,"column":70}},"78":{"start":{"line":167,"column":8},"end":{"line":167,"column":74}},"79":{"start":{"line":167,"column":52},"end":{"line":167,"column":73}},"80":{"start":{"line":170,"column":6},"end":{"line":170,"column":49}},"81":{"start":{"line":172,"column":6},"end":{"line":172,"column":56}},"82":{"start":{"line":172,"column":44},"end":{"line":172,"column":55}},"83":{"start":{"line":175,"column":4},"end":{"line":177,"column":5}},"84":{"start":{"line":176,"column":6},"end":{"line":176,"column":23}},"85":{"start":{"line":179,"column":4},"end":{"line":266,"column":5}},"86":{"start":{"line":180,"column":6},"end":{"line":180,"column":13}},"87":{"start":{"line":181,"column":6},"end":{"line":181,"column":15}},"88":{"start":{"line":182,"column":6},"end":{"line":182,"column":14}},"89":{"start":{"line":183,"column":6},"end":{"line":183,"column":51}},"90":{"start":{"line":184,"column":6},"end":{"line":184,"column":50}},"91":{"start":{"line":185,"column":6},"end":{"line":188,"column":7}},"92":{"start":{"line":186,"column":8},"end":{"line":186,"column":24}},"93":{"start":{"line":187,"column":8},"end":{"line":187,"column":18}},"94":{"start":{"line":189,"column":6},"end":{"line":191,"column":7}},"95":{"start":{"line":190,"column":8},"end":{"line":190,"column":23}},"96":{"start":{"line":192,"column":6},"end":{"line":265,"column":7}},"97":{"start":{"line":193,"column":8},"end":{"line":193,"column":99}},"98":{"start":{"line":194,"column":8},"end":{"line":262,"column":9}},"99":{"start":{"line":195,"column":10},"end":{"line":195,"column":30}},"100":{"start":{"line":196,"column":15},"end":{"line":262,"column":9}},"101":{"start":{"line":197,"column":10},"end":{"line":197,"column":24}},"102":{"start":{"line":198,"column":10},"end":{"line":198,"column":26}},"103":{"start":{"line":199,"column":10},"end":{"line":203,"column":11}},"104":{"start":{"line":200,"column":12},"end":{"line":200,"column":43}},"105":{"start":{"line":201,"column":12},"end":{"line":201,"column":26}},"106":{"start":{"line":202,"column":12},"end":{"line":202,"column":28}},"107":{"start":{"line":204,"column":10},"end":{"line":206,"column":11}},"108":{"start":{"line":205,"column":12},"end":{"line":205,"column":36}},"109":{"start":{"line":207,"column":10},"end":{"line":207,"column":70}},"110":{"start":{"line":207,"column":48},"end":{"line":207,"column":69}},"111":{"start":{"line":208,"column":15},"end":{"line":262,"column":9}},"112":{"start":{"line":209,"column":10},"end":{"line":209,"column":24}},"113":{"start":{"line":210,"column":10},"end":{"line":210,"column":33}},"114":{"start":{"line":211,"column":10},"end":{"line":211,"column":70}},"115":{"start":{"line":211,"column":48},"end":{"line":211,"column":69}},"116":{"start":{"line":212,"column":15},"end":{"line":262,"column":9}},"117":{"start":{"line":213,"column":10},"end":{"line":213,"column":24}},"118":{"start":{"line":214,"column":10},"end":{"line":214,"column":82}},"119":{"start":{"line":214,"column":48},"end":{"line":214,"column":81}},"120":{"start":{"line":215,"column":15},"end":{"line":262,"column":9}},"121":{"start":{"line":216,"column":10},"end":{"line":216,"column":77}},"122":{"start":{"line":216,"column":48},"end":{"line":216,"column":76}},"123":{"start":{"line":217,"column":15},"end":{"line":262,"column":9}},"124":{"start":{"line":218,"column":10},"end":{"line":220,"column":11}},"125":{"start":{"line":219,"column":12},"end":{"line":219,"column":33}},"126":{"start":{"line":221,"column":10},"end":{"line":221,"column":70}},"127":{"start":{"line":221,"column":48},"end":{"line":221,"column":69}},"128":{"start":{"line":222,"column":15},"end":{"line":262,"column":9}},"129":{"start":{"line":223,"column":10},"end":{"line":223,"column":25}},"130":{"start":{"line":224,"column":10},"end":{"line":226,"column":12}},"131":{"start":{"line":225,"column":12},"end":{"line":225,"column":78}},"132":{"start":{"line":225,"column":50},"end":{"line":225,"column":77}},"133":{"start":{"line":227,"column":15},"end":{"line":262,"column":9}},"134":{"start":{"line":228,"column":10},"end":{"line":228,"column":25}},"135":{"start":{"line":229,"column":10},"end":{"line":231,"column":12}},"136":{"start":{"line":230,"column":12},"end":{"line":230,"column":78}},"137":{"start":{"line":230,"column":50},"end":{"line":230,"column":77}},"138":{"start":{"line":232,"column":15},"end":{"line":262,"column":9}},"139":{"start":{"line":233,"column":10},"end":{"line":233,"column":25}},"140":{"start":{"line":234,"column":10},"end":{"line":240,"column":11}},"141":{"start":{"line":235,"column":12},"end":{"line":237,"column":14}},"142":{"start":{"line":236,"column":14},"end":{"line":236,"column":81}},"143":{"start":{"line":236,"column":52},"end":{"line":236,"column":80}},"144":{"start":{"line":239,"column":12},"end":{"line":239,"column":101}},"145":{"start":{"line":239,"column":50},"end":{"line":239,"column":100}},"146":{"start":{"line":241,"column":15},"end":{"line":262,"column":9}},"147":{"start":{"line":242,"column":10},"end":{"line":242,"column":26}},"148":{"start":{"line":243,"column":10},"end":{"line":243,"column":30}},"149":{"start":{"line":244,"column":10},"end":{"line":244,"column":48}},"150":{"start":{"line":245,"column":10},"end":{"line":245,"column":42}},"151":{"start":{"line":246,"column":10},"end":{"line":246,"column":46}},"152":{"start":{"line":247,"column":10},"end":{"line":247,"column":38}},"153":{"start":{"line":248,"column":10},"end":{"line":248,"column":48}},"154":{"start":{"line":249,"column":10},"end":{"line":249,"column":36}},"155":{"start":{"line":250,"column":10},"end":{"line":250,"column":50}},"156":{"start":{"line":251,"column":10},"end":{"line":251,"column":54}},"157":{"start":{"line":252,"column":10},"end":{"line":252,"column":73}},"158":{"start":{"line":252,"column":48},"end":{"line":252,"column":72}},"159":{"start":{"line":253,"column":15},"end":{"line":262,"column":9}},"160":{"start":{"line":254,"column":10},"end":{"line":254,"column":97}},"161":{"start":{"line":254,"column":48},"end":{"line":254,"column":96}},"162":{"start":{"line":255,"column":15},"end":{"line":262,"column":9}},"163":{"start":{"line":256,"column":10},"end":{"line":256,"column":30}},"164":{"start":{"line":257,"column":10},"end":{"line":259,"column":12}},"165":{"start":{"line":258,"column":12},"end":{"line":258,"column":67}},"166":{"start":{"line":258,"column":50},"end":{"line":258,"column":66}},"167":{"start":{"line":261,"column":10},"end":{"line":261,"column":119}},"168":{"start":{"line":261,"column":48},"end":{"line":261,"column":118}},"169":{"start":{"line":264,"column":8},"end":{"line":264,"column":119}},"170":{"start":{"line":264,"column":46},"end":{"line":264,"column":118}},"171":{"start":{"line":268,"column":4},"end":{"line":268,"column":10}}},"branchMap":{"1":{"line":32,"type":"if","locations":[{"start":{"line":32,"column":8},"end":{"line":32,"column":8}},{"start":{"line":32,"column":8},"end":{"line":32,"column":8}}]},"2":{"line":32,"type":"binary-expr","locations":[{"start":{"line":32,"column":12},"end":{"line":32,"column":30}},{"start":{"line":32,"column":34},"end":{"line":32,"column":56}},{"start":{"line":32,"column":60},"end":{"line":32,"column":88}}]},"3":{"line":40,"type":"if","locations":[{"start":{"line":40,"column":8},"end":{"line":40,"column":8}},{"start":{"line":40,"column":8},"end":{"line":40,"column":8}}]},"4":{"line":40,"type":"binary-expr","locations":[{"start":{"line":40,"column":12},"end":{"line":40,"column":18}},{"start":{"line":40,"column":22},"end":{"line":40,"column":26}}]},"5":{"line":41,"type":"if","locations":[{"start":{"line":41,"column":10},"end":{"line":41,"column":10}},{"start":{"line":41,"column":10},"end":{"line":41,"column":10}}]},"6":{"line":41,"type":"binary-expr","locations":[{"start":{"line":41,"column":14},"end":{"line":41,"column":38}},{"start":{"line":41,"column":42},"end":{"line":41,"column":63}}]},"7":{"line":47,"type":"if","locations":[{"start":{"line":47,"column":8},"end":{"line":47,"column":8}},{"start":{"line":47,"column":8},"end":{"line":47,"column":8}}]},"8":{"line":55,"type":"if","locations":[{"start":{"line":55,"column":8},"end":{"line":55,"column":8}},{"start":{"line":55,"column":8},"end":{"line":55,"column":8}}]},"9":{"line":56,"type":"if","locations":[{"start":{"line":56,"column":8},"end":{"line":56,"column":8}},{"start":{"line":56,"column":8},"end":{"line":56,"column":8}}]},"10":{"line":62,"type":"if","locations":[{"start":{"line":62,"column":10},"end":{"line":62,"column":10}},{"start":{"line":62,"column":10},"end":{"line":62,"column":10}}]},"11":{"line":74,"type":"if","locations":[{"start":{"line":74,"column":8},"end":{"line":74,"column":8}},{"start":{"line":74,"column":8},"end":{"line":74,"column":8}}]},"12":{"line":88,"type":"if","locations":[{"start":{"line":88,"column":8},"end":{"line":88,"column":8}},{"start":{"line":88,"column":8},"end":{"line":88,"column":8}}]},"13":{"line":95,"type":"if","locations":[{"start":{"line":95,"column":6},"end":{"line":95,"column":6}},{"start":{"line":95,"column":6},"end":{"line":95,"column":6}}]},"14":{"line":103,"type":"if","locations":[{"start":{"line":103,"column":8},"end":{"line":103,"column":8}},{"start":{"line":103,"column":8},"end":{"line":103,"column":8}}]},"15":{"line":103,"type":"binary-expr","locations":[{"start":{"line":103,"column":12},"end":{"line":103,"column":30}},{"start":{"line":103,"column":34},"end":{"line":103,"column":57}}]},"16":{"line":108,"type":"if","locations":[{"start":{"line":108,"column":8},"end":{"line":108,"column":8}},{"start":{"line":108,"column":8},"end":{"line":108,"column":8}}]},"17":{"line":108,"type":"binary-expr","locations":[{"start":{"line":108,"column":12},"end":{"line":108,"column":30}},{"start":{"line":108,"column":34},"end":{"line":108,"column":57}}]},"18":{"line":109,"type":"if","locations":[{"start":{"line":109,"column":10},"end":{"line":109,"column":10}},{"start":{"line":109,"column":10},"end":{"line":109,"column":10}}]},"19":{"line":130,"type":"if","locations":[{"start":{"line":130,"column":8},"end":{"line":130,"column":8}},{"start":{"line":130,"column":8},"end":{"line":130,"column":8}}]},"20":{"line":130,"type":"binary-expr","locations":[{"start":{"line":130,"column":12},"end":{"line":130,"column":33}},{"start":{"line":130,"column":37},"end":{"line":130,"column":58}}]},"21":{"line":131,"type":"if","locations":[{"start":{"line":131,"column":8},"end":{"line":131,"column":8}},{"start":{"line":131,"column":8},"end":{"line":131,"column":8}}]},"22":{"line":150,"type":"if","locations":[{"start":{"line":150,"column":8},"end":{"line":150,"column":8}},{"start":{"line":150,"column":8},"end":{"line":150,"column":8}}]},"23":{"line":155,"type":"if","locations":[{"start":{"line":155,"column":6},"end":{"line":155,"column":6}},{"start":{"line":155,"column":6},"end":{"line":155,"column":6}}]},"24":{"line":163,"type":"if","locations":[{"start":{"line":163,"column":6},"end":{"line":163,"column":6}},{"start":{"line":163,"column":6},"end":{"line":163,"column":6}}]},"25":{"line":164,"type":"if","locations":[{"start":{"line":164,"column":8},"end":{"line":164,"column":8}},{"start":{"line":164,"column":8},"end":{"line":164,"column":8}}]},"26":{"line":167,"type":"if","locations":[{"start":{"line":167,"column":8},"end":{"line":167,"column":8}},{"start":{"line":167,"column":8},"end":{"line":167,"column":8}}]},"27":{"line":172,"type":"if","locations":[{"start":{"line":172,"column":6},"end":{"line":172,"column":6}},{"start":{"line":172,"column":6},"end":{"line":172,"column":6}}]},"28":{"line":185,"type":"if","locations":[{"start":{"line":185,"column":6},"end":{"line":185,"column":6}},{"start":{"line":185,"column":6},"end":{"line":185,"column":6}}]},"29":{"line":185,"type":"binary-expr","locations":[{"start":{"line":185,"column":10},"end":{"line":185,"column":37}},{"start":{"line":185,"column":41},"end":{"line":185,"column":50}}]},"30":{"line":189,"type":"if","locations":[{"start":{"line":189,"column":6},"end":{"line":189,"column":6}},{"start":{"line":189,"column":6},"end":{"line":189,"column":6}}]},"31":{"line":192,"type":"if","locations":[{"start":{"line":192,"column":6},"end":{"line":192,"column":6}},{"start":{"line":192,"column":6},"end":{"line":192,"column":6}}]},"32":{"line":192,"type":"binary-expr","locations":[{"start":{"line":192,"column":10},"end":{"line":192,"column":16}},{"start":{"line":192,"column":20},"end":{"line":192,"column":51}}]},"33":{"line":194,"type":"if","locations":[{"start":{"line":194,"column":8},"end":{"line":194,"column":8}},{"start":{"line":194,"column":8},"end":{"line":194,"column":8}}]},"34":{"line":194,"type":"binary-expr","locations":[{"start":{"line":194,"column":12},"end":{"line":194,"column":27}},{"start":{"line":194,"column":31},"end":{"line":194,"column":46}}]},"35":{"line":196,"type":"if","locations":[{"start":{"line":196,"column":15},"end":{"line":196,"column":15}},{"start":{"line":196,"column":15},"end":{"line":196,"column":15}}]},"36":{"line":199,"type":"if","locations":[{"start":{"line":199,"column":10},"end":{"line":199,"column":10}},{"start":{"line":199,"column":10},"end":{"line":199,"column":10}}]},"37":{"line":199,"type":"binary-expr","locations":[{"start":{"line":199,"column":15},"end":{"line":199,"column":23}},{"start":{"line":199,"column":29},"end":{"line":199,"column":55}}]},"38":{"line":204,"type":"if","locations":[{"start":{"line":204,"column":10},"end":{"line":204,"column":10}},{"start":{"line":204,"column":10},"end":{"line":204,"column":10}}]},"39":{"line":204,"type":"binary-expr","locations":[{"start":{"line":204,"column":14},"end":{"line":204,"column":54}},{"start":{"line":204,"column":58},"end":{"line":204,"column":99}}]},"40":{"line":207,"type":"if","locations":[{"start":{"line":207,"column":10},"end":{"line":207,"column":10}},{"start":{"line":207,"column":10},"end":{"line":207,"column":10}}]},"41":{"line":208,"type":"if","locations":[{"start":{"line":208,"column":15},"end":{"line":208,"column":15}},{"start":{"line":208,"column":15},"end":{"line":208,"column":15}}]},"42":{"line":211,"type":"if","locations":[{"start":{"line":211,"column":10},"end":{"line":211,"column":10}},{"start":{"line":211,"column":10},"end":{"line":211,"column":10}}]},"43":{"line":212,"type":"if","locations":[{"start":{"line":212,"column":15},"end":{"line":212,"column":15}},{"start":{"line":212,"column":15},"end":{"line":212,"column":15}}]},"44":{"line":214,"type":"if","locations":[{"start":{"line":214,"column":10},"end":{"line":214,"column":10}},{"start":{"line":214,"column":10},"end":{"line":214,"column":10}}]},"45":{"line":215,"type":"if","locations":[{"start":{"line":215,"column":15},"end":{"line":215,"column":15}},{"start":{"line":215,"column":15},"end":{"line":215,"column":15}}]},"46":{"line":216,"type":"if","locations":[{"start":{"line":216,"column":10},"end":{"line":216,"column":10}},{"start":{"line":216,"column":10},"end":{"line":216,"column":10}}]},"47":{"line":217,"type":"if","locations":[{"start":{"line":217,"column":15},"end":{"line":217,"column":15}},{"start":{"line":217,"column":15},"end":{"line":217,"column":15}}]},"48":{"line":221,"type":"if","locations":[{"start":{"line":221,"column":10},"end":{"line":221,"column":10}},{"start":{"line":221,"column":10},"end":{"line":221,"column":10}}]},"49":{"line":222,"type":"if","locations":[{"start":{"line":222,"column":15},"end":{"line":222,"column":15}},{"start":{"line":222,"column":15},"end":{"line":222,"column":15}}]},"50":{"line":225,"type":"if","locations":[{"start":{"line":225,"column":12},"end":{"line":225,"column":12}},{"start":{"line":225,"column":12},"end":{"line":225,"column":12}}]},"51":{"line":227,"type":"if","locations":[{"start":{"line":227,"column":15},"end":{"line":227,"column":15}},{"start":{"line":227,"column":15},"end":{"line":227,"column":15}}]},"52":{"line":230,"type":"if","locations":[{"start":{"line":230,"column":12},"end":{"line":230,"column":12}},{"start":{"line":230,"column":12},"end":{"line":230,"column":12}}]},"53":{"line":232,"type":"if","locations":[{"start":{"line":232,"column":15},"end":{"line":232,"column":15}},{"start":{"line":232,"column":15},"end":{"line":232,"column":15}}]},"54":{"line":234,"type":"if","locations":[{"start":{"line":234,"column":10},"end":{"line":234,"column":10}},{"start":{"line":234,"column":10},"end":{"line":234,"column":10}}]},"55":{"line":236,"type":"if","locations":[{"start":{"line":236,"column":14},"end":{"line":236,"column":14}},{"start":{"line":236,"column":14},"end":{"line":236,"column":14}}]},"56":{"line":239,"type":"if","locations":[{"start":{"line":239,"column":12},"end":{"line":239,"column":12}},{"start":{"line":239,"column":12},"end":{"line":239,"column":12}}]},"57":{"line":241,"type":"if","locations":[{"start":{"line":241,"column":15},"end":{"line":241,"column":15}},{"start":{"line":241,"column":15},"end":{"line":241,"column":15}}]},"58":{"line":252,"type":"if","locations":[{"start":{"line":252,"column":10},"end":{"line":252,"column":10}},{"start":{"line":252,"column":10},"end":{"line":252,"column":10}}]},"59":{"line":253,"type":"if","locations":[{"start":{"line":253,"column":15},"end":{"line":253,"column":15}},{"start":{"line":253,"column":15},"end":{"line":253,"column":15}}]},"60":{"line":254,"type":"if","locations":[{"start":{"line":254,"column":10},"end":{"line":254,"column":10}},{"start":{"line":254,"column":10},"end":{"line":254,"column":10}}]},"61":{"line":255,"type":"if","locations":[{"start":{"line":255,"column":15},"end":{"line":255,"column":15}},{"start":{"line":255,"column":15},"end":{"line":255,"column":15}}]},"62":{"line":258,"type":"if","locations":[{"start":{"line":258,"column":12},"end":{"line":258,"column":12}},{"start":{"line":258,"column":12},"end":{"line":258,"column":12}}]},"63":{"line":261,"type":"if","locations":[{"start":{"line":261,"column":10},"end":{"line":261,"column":10}},{"start":{"line":261,"column":10},"end":{"line":261,"column":10}}]},"64":{"line":264,"type":"if","locations":[{"start":{"line":264,"column":8},"end":{"line":264,"column":8}},{"start":{"line":264,"column":8},"end":{"line":264,"column":8}}]}},"code":["'use strict'","","const uuid = require('uuid')","","module.exports = {","  loadPriority: 400,","  initialize: function (api, next) {","    api.connections = {","","      middleware: {},","      globalMiddleware: [],","","      allowedVerbs: [","        'quit',","        'exit',","        'documentation',","        'paramAdd',","        'paramDelete',","        'paramView',","        'paramsView',","        'paramsDelete',","        'roomAdd',","        'roomLeave',","        'roomView',","        'detailsView',","        'say'","      ],","","      connections: {},","","      apply: function (connectionId, method, args, callback) {","        if (args === undefined && callback === undefined && typeof method === 'function') {","          callback = method; args = null; method = null","        }","        api.redis.doCluster('api.connections.applyCatch', [connectionId, method, args], connectionId, callback)","      },","","      applyCatch: function (connectionId, method, args, callback) {","        const connection = api.connections.connections[connectionId]","        if (method && args) {","          if (method === 'sendMessage' || method === 'sendFile') {","            connection[method](args)","          } else {","            connection[method].apply(connection, args)","          }","        }","        if (typeof callback === 'function') {","          process.nextTick(() => {","            callback(cleanConnection(connection))","          })","        }","      },","","      addMiddleware: function (data) {","        if (!data.name) { throw new Error('middleware.name is required') }","        if (!data.priority) { data.priority = api.config.general.defaultMiddlewarePriority }","        data.priority = Number(data.priority)","        api.connections.middleware[data.name] = data","","        this.globalMiddleware.push(data.name)","        this.globalMiddleware.sort((a, b) => {","          if (api.connections.middleware[a].priority > api.connections.middleware[b].priority) {","            return 1","          } else {","            return -1","          }","        })","      }","    }","","    const cleanConnection = function (connection) {","      let clean = {}","      for (let i in connection) {","        if (i !== 'rawConnection') {","          clean[i] = connection[i]","        }","      }","      return clean","    }","","    // {type: type, remotePort: remotePort, remoteIP: remoteIP, rawConnection: rawConnection}","    // id is optional and will be generated if missing","    api.Connection = function (data) {","      this.setup(data)","      api.connections.connections[this.id] = this","","      api.connections.globalMiddleware.forEach((middlewareName) => {","        if (typeof api.connections.middleware[middlewareName].create === 'function') {","          api.connections.middleware[middlewareName].create(this)","        }","      })","    }","","    api.Connection.prototype.setup = function (data) {","      if (data.id) {","        this.id = data.id","      } else {","        this.id = this.generateID()","      }","      this.connectedAt = new Date().getTime();","","      ['type', 'rawConnection'].forEach((req) => {","        if (data[req] === null || data[req] === undefined) { throw new Error(req + ' is required to create a new connection object') }","        this[req] = data[req]","      });","","      ['remotePort', 'remoteIP'].forEach((req) => {","        if (data[req] === null || data[req] === undefined) {","          if (api.config.general.enforceConnectionProperties === true) {","            throw new Error(req + ' is required to create a new connection object')","          } else {","            data[req] = 0 // could be a random uuid as well?","          }","        }","        this[req] = data[req]","      })","","      const connectionDefaults = {","        error: null,","        fingerprint: this.id,","        rooms: [],","        params: {},","        pendingActions: 0,","        totalActions: 0,","        messageCount: 0,","        canChat: false","      }","","      for (let i in connectionDefaults) {","        if (this[i] === undefined && data[i] !== undefined) { this[i] = data[i] }","        if (this[i] === undefined) { this[i] = connectionDefaults[i] }","      }","","      api.i18n.invokeConnectionLocale(this)","    }","","    api.Connection.prototype.localize = function (message) {","      // this.locale will be sourced automatically","      return api.i18n.localize(message, this)","    }","","    api.Connection.prototype.generateID = function () {","      return uuid.v4()","    }","","    api.Connection.prototype.destroy = function (callback) {","      this.destroyed = true","","      api.connections.globalMiddleware.forEach((middlewareName) => {","        if (typeof api.connections.middleware[middlewareName].destroy === 'function') {","          api.connections.middleware[middlewareName].destroy(this)","        }","      })","","      if (this.canChat === true) {","        this.rooms.forEach((room) => {","          api.chatRoom.removeMember(this.id, room)","        })","      }","","      const server = api.servers.servers[this.type]","","      if (server) {","        if (server.attributes.logExits === true) {","          server.log('connection closed', 'info', {to: this.remoteIP})","        }","        if (typeof server.goodbye === 'function') { server.goodbye(this) }","      }","","      delete api.connections.connections[this.id]","","      if (typeof callback === 'function') { callback() }","    }","","    api.Connection.prototype.set = function (key, value) {","      this[key] = value","    }","","    api.Connection.prototype.verbs = function (verb, words, callback) {","      let key","      let value","      let room","      const server = api.servers.servers[this.type]","      const allowedVerbs = server.attributes.verbs","      if (typeof words === 'function' && !callback) {","        callback = words","        words = []","      }","      if (!(words instanceof Array)) {","        words = [words]","      }","      if (server && allowedVerbs.indexOf(verb) >= 0) {","        server.log('verb', 'debug', {verb: verb, to: this.remoteIP, params: JSON.stringify(words)})","        if (verb === 'quit' || verb === 'exit') {","          server.goodbye(this)","        } else if (verb === 'paramAdd') {","          key = words[0]","          value = words[1]","          if ((words[0]) && (words[0].indexOf('=') >= 0)) {","            let parts = words[0].split('=')","            key = parts[0]","            value = parts[1]","          }","          if (api.config.general.disableParamScrubbing || api.params.postVariables.indexOf(key) > 0) {","            this.params[key] = value","          }","          if (typeof callback === 'function') { callback(null, null) }","        } else if (verb === 'paramDelete') {","          key = words[0]","          delete this.params[key]","          if (typeof callback === 'function') { callback(null, null) }","        } else if (verb === 'paramView') {","          key = words[0]","          if (typeof callback === 'function') { callback(null, this.params[key]) }","        } else if (verb === 'paramsView') {","          if (typeof callback === 'function') { callback(null, this.params) }","        } else if (verb === 'paramsDelete') {","          for (let i in this.params) {","            delete this.params[i]","          }","          if (typeof callback === 'function') { callback(null, null) }","        } else if (verb === 'roomAdd') {","          room = words[0]","          api.chatRoom.addMember(this.id, room, (error, didHappen) => {","            if (typeof callback === 'function') { callback(error, didHappen) }","          })","        } else if (verb === 'roomLeave') {","          room = words[0]","          api.chatRoom.removeMember(this.id, room, (error, didHappen) => {","            if (typeof callback === 'function') { callback(error, didHappen) }","          })","        } else if (verb === 'roomView') {","          room = words[0]","          if (this.rooms.indexOf(room) > -1) {","            api.chatRoom.roomStatus(room, (error, roomStatus) => {","              if (typeof callback === 'function') { callback(error, roomStatus) }","            })","          } else {","            if (typeof callback === 'function') { callback(new Error('not member of room ' + room)) }","          }","        } else if (verb === 'detailsView') {","          let details = {}","          details.id = this.id","          details.fingerprint = this.fingerprint","          details.remoteIP = this.remoteIP","          details.remotePort = this.remotePort","          details.params = this.params","          details.connectedAt = this.connectedAt","          details.rooms = this.rooms","          details.totalActions = this.totalActions","          details.pendingActions = this.pendingActions","          if (typeof callback === 'function') { callback(null, details) }","        } else if (verb === 'documentation') {","          if (typeof callback === 'function') { callback(null, api.documentation.documentation) }","        } else if (verb === 'say') {","          room = words.shift()","          api.chatRoom.broadcast(this, room, words.join(' '), (error) => {","            if (typeof callback === 'function') { callback(error) }","          })","        } else {","          if (typeof callback === 'function') { callback(new Error(api.config.errors.verbNotFound(this, verb)), null) }","        }","      } else {","        if (typeof callback === 'function') { callback(new Error(api.config.errors.verbNotAllowed(this, verb)), null) }","      }","    }","","    next()","  }","}",""],"l":{"3":1,"5":1,"8":0,"32":0,"33":0,"35":0,"39":0,"40":0,"41":0,"42":0,"44":0,"47":0,"48":0,"49":0,"55":0,"56":0,"57":0,"58":0,"60":0,"61":0,"62":0,"63":0,"65":0,"71":0,"72":0,"73":0,"74":0,"75":0,"78":0,"83":0,"84":0,"85":0,"87":0,"88":0,"89":0,"94":0,"95":0,"96":0,"98":0,"100":0,"102":0,"103":0,"104":0,"107":0,"108":0,"109":0,"110":0,"112":0,"115":0,"118":0,"129":0,"130":0,"131":0,"134":0,"137":0,"139":0,"142":0,"143":0,"146":0,"147":0,"149":0,"150":0,"151":0,"155":0,"156":0,"157":0,"161":0,"163":0,"164":0,"165":0,"167":0,"170":0,"172":0,"175":0,"176":0,"179":0,"180":0,"181":0,"182":0,"183":0,"184":0,"185":0,"186":0,"187":0,"189":0,"190":0,"192":0,"193":0,"194":0,"195":0,"196":0,"197":0,"198":0,"199":0,"200":0,"201":0,"202":0,"204":0,"205":0,"207":0,"208":0,"209":0,"210":0,"211":0,"212":0,"213":0,"214":0,"215":0,"216":0,"217":0,"218":0,"219":0,"221":0,"222":0,"223":0,"224":0,"225":0,"227":0,"228":0,"229":0,"230":0,"232":0,"233":0,"234":0,"235":0,"236":0,"239":0,"241":0,"242":0,"243":0,"244":0,"245":0,"246":0,"247":0,"248":0,"249":0,"250":0,"251":0,"252":0,"253":0,"254":0,"255":0,"256":0,"257":0,"258":0,"261":0,"264":0,"268":0}},"/home/travis/build/npmtest/node-npmtest-actionhero/node_modules/actionhero/initializers/documentation.js":{"path":"/home/travis/build/npmtest/node-npmtest-actionhero/node_modules/actionhero/initializers/documentation.js","s":{"1":1,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0},"b":{"1":[0,0],"2":[0,0]},"f":{"1":0},"fnMap":{"1":{"name":"(anonymous_1)","line":5,"loc":{"start":{"line":5,"column":14},"end":{"line":5,"column":35}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":31,"column":1}},"2":{"start":{"line":6,"column":4},"end":{"line":26,"column":5}},"3":{"start":{"line":9,"column":8},"end":{"line":9,"column":18}},"4":{"start":{"line":10,"column":8},"end":{"line":24,"column":9}},"5":{"start":{"line":11,"column":10},"end":{"line":23,"column":11}},"6":{"start":{"line":12,"column":12},"end":{"line":12,"column":46}},"7":{"start":{"line":13,"column":12},"end":{"line":22,"column":13}},"8":{"start":{"line":14,"column":14},"end":{"line":14,"column":118}},"9":{"start":{"line":14,"column":67},"end":{"line":14,"column":117}},"10":{"start":{"line":15,"column":14},"end":{"line":21,"column":15}},"11":{"start":{"line":28,"column":4},"end":{"line":28,"column":29}},"12":{"start":{"line":29,"column":4},"end":{"line":29,"column":10}}},"branchMap":{"1":{"line":13,"type":"if","locations":[{"start":{"line":13,"column":12},"end":{"line":13,"column":12}},{"start":{"line":13,"column":12},"end":{"line":13,"column":12}}]},"2":{"line":14,"type":"if","locations":[{"start":{"line":14,"column":14},"end":{"line":14,"column":14}},{"start":{"line":14,"column":14},"end":{"line":14,"column":14}}]}},"code":["'use strict'","","module.exports = {","  loadPriority: 999,","  initialize: function (api, next) {","    api.documentation = {","      documentation: {},","      build: () => {","        let action","        for (let i in api.actions.actions) {","          for (let j in api.actions.actions[i]) {","            action = api.actions.actions[i][j]","            if (action.toDocument !== false) {","              if (!api.documentation.documentation[action.name]) { api.documentation.documentation[action.name] = {} }","              api.documentation.documentation[action.name][action.version] = {","                name: action.name,","                version: action.version,","                description: action.description,","                inputs: action.inputs,","                outputExample: action.outputExample","              }","            }","          }","        }","      }","    }","","    api.documentation.build()","    next()","  }","}",""],"l":{"3":1,"6":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"28":0,"29":0}},"/home/travis/build/npmtest/node-npmtest-actionhero/node_modules/actionhero/initializers/exceptions.js":{"path":"/home/travis/build/npmtest/node-npmtest-actionhero/node_modules/actionhero/initializers/exceptions.js","s":{"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0,0],"5":[0,0],"6":[0,0],"7":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0},"fnMap":{"1":{"name":"(anonymous_1)","line":7,"loc":{"start":{"line":7,"column":14},"end":{"line":7,"column":35}}},"2":{"name":"(anonymous_2)","line":11,"loc":{"start":{"line":11,"column":28},"end":{"line":11,"column":76}}},"3":{"name":"(anonymous_3)","line":59,"loc":{"start":{"line":59,"column":35},"end":{"line":59,"column":83}}},"4":{"name":"(anonymous_4)","line":70,"loc":{"start":{"line":70,"column":35},"end":{"line":70,"column":66}}},"5":{"name":"(anonymous_5)","line":75,"loc":{"start":{"line":75,"column":35},"end":{"line":75,"column":64}}},"6":{"name":"(anonymous_6)","line":88,"loc":{"start":{"line":88,"column":33},"end":{"line":88,"column":73}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":24}},"2":{"start":{"line":5,"column":0},"end":{"line":101,"column":1}},"3":{"start":{"line":8,"column":4},"end":{"line":8,"column":30}},"4":{"start":{"line":9,"column":4},"end":{"line":9,"column":40}},"5":{"start":{"line":11,"column":4},"end":{"line":55,"column":5}},"6":{"start":{"line":12,"column":6},"end":{"line":12,"column":28}},"7":{"start":{"line":14,"column":6},"end":{"line":39,"column":7}},"8":{"start":{"line":15,"column":8},"end":{"line":15,"column":70}},"9":{"start":{"line":16,"column":13},"end":{"line":39,"column":7}},"10":{"start":{"line":17,"column":8},"end":{"line":17,"column":67}},"11":{"start":{"line":18,"column":8},"end":{"line":18,"column":51}},"12":{"start":{"line":19,"column":8},"end":{"line":19,"column":80}},"13":{"start":{"line":20,"column":8},"end":{"line":28,"column":9}},"14":{"start":{"line":21,"column":10},"end":{"line":27,"column":11}},"15":{"start":{"line":26,"column":12},"end":{"line":26,"column":125}},"16":{"start":{"line":29,"column":13},"end":{"line":39,"column":7}},"17":{"start":{"line":30,"column":8},"end":{"line":30,"column":127}},"18":{"start":{"line":31,"column":8},"end":{"line":33,"column":22}},"19":{"start":{"line":32,"column":10},"end":{"line":32,"column":85}},"20":{"start":{"line":35,"column":8},"end":{"line":35,"column":55}},"21":{"start":{"line":36,"column":8},"end":{"line":36,"column":49}},"22":{"start":{"line":37,"column":8},"end":{"line":37,"column":49}},"23":{"start":{"line":38,"column":8},"end":{"line":38,"column":68}},"24":{"start":{"line":41,"column":6},"end":{"line":43,"column":7}},"25":{"start":{"line":42,"column":8},"end":{"line":42,"column":43}},"26":{"start":{"line":44,"column":6},"end":{"line":44,"column":15}},"27":{"start":{"line":45,"column":6},"end":{"line":49,"column":7}},"28":{"start":{"line":46,"column":8},"end":{"line":46,"column":41}},"29":{"start":{"line":48,"column":8},"end":{"line":48,"column":52}},"30":{"start":{"line":50,"column":6},"end":{"line":53,"column":7}},"31":{"start":{"line":51,"column":8},"end":{"line":51,"column":27}},"32":{"start":{"line":52,"column":8},"end":{"line":52,"column":38}},"33":{"start":{"line":54,"column":6},"end":{"line":54,"column":28}},"34":{"start":{"line":57,"column":4},"end":{"line":57,"column":57}},"35":{"start":{"line":59,"column":4},"end":{"line":64,"column":5}},"36":{"start":{"line":60,"column":6},"end":{"line":60,"column":43}},"37":{"start":{"line":60,"column":23},"end":{"line":60,"column":42}},"38":{"start":{"line":61,"column":6},"end":{"line":63,"column":7}},"39":{"start":{"line":62,"column":8},"end":{"line":62,"column":80}},"40":{"start":{"line":70,"column":4},"end":{"line":73,"column":5}},"41":{"start":{"line":71,"column":6},"end":{"line":71,"column":41}},"42":{"start":{"line":72,"column":6},"end":{"line":72,"column":96}},"43":{"start":{"line":75,"column":4},"end":{"line":86,"column":5}},"44":{"start":{"line":76,"column":6},"end":{"line":76,"column":20}},"45":{"start":{"line":77,"column":6},"end":{"line":81,"column":7}},"46":{"start":{"line":78,"column":8},"end":{"line":78,"column":32}},"47":{"start":{"line":80,"column":8},"end":{"line":80,"column":34}},"48":{"start":{"line":82,"column":6},"end":{"line":82,"column":39}},"49":{"start":{"line":83,"column":6},"end":{"line":83,"column":97}},"50":{"start":{"line":84,"column":6},"end":{"line":84,"column":35}},"51":{"start":{"line":85,"column":6},"end":{"line":85,"column":48}},"52":{"start":{"line":85,"column":40},"end":{"line":85,"column":47}},"53":{"start":{"line":88,"column":4},"end":{"line":97,"column":5}},"54":{"start":{"line":89,"column":6},"end":{"line":89,"column":20}},"55":{"start":{"line":90,"column":6},"end":{"line":94,"column":7}},"56":{"start":{"line":91,"column":8},"end":{"line":91,"column":34}},"57":{"start":{"line":93,"column":8},"end":{"line":93,"column":34}},"58":{"start":{"line":95,"column":6},"end":{"line":95,"column":37}},"59":{"start":{"line":96,"column":6},"end":{"line":96,"column":143}},"60":{"start":{"line":99,"column":4},"end":{"line":99,"column":10}}},"branchMap":{"1":{"line":14,"type":"if","locations":[{"start":{"line":14,"column":6},"end":{"line":14,"column":6}},{"start":{"line":14,"column":6},"end":{"line":14,"column":6}}]},"2":{"line":16,"type":"if","locations":[{"start":{"line":16,"column":13},"end":{"line":16,"column":13}},{"start":{"line":16,"column":13},"end":{"line":16,"column":13}}]},"3":{"line":21,"type":"if","locations":[{"start":{"line":21,"column":10},"end":{"line":21,"column":10}},{"start":{"line":21,"column":10},"end":{"line":21,"column":10}}]},"4":{"line":22,"type":"binary-expr","locations":[{"start":{"line":22,"column":12},"end":{"line":22,"column":59}},{"start":{"line":23,"column":12},"end":{"line":23,"column":64}},{"start":{"line":24,"column":12},"end":{"line":24,"column":72}}]},"5":{"line":29,"type":"if","locations":[{"start":{"line":29,"column":13},"end":{"line":29,"column":13}},{"start":{"line":29,"column":13},"end":{"line":29,"column":13}}]},"6":{"line":60,"type":"if","locations":[{"start":{"line":60,"column":6},"end":{"line":60,"column":6}},{"start":{"line":60,"column":6},"end":{"line":60,"column":6}}]},"7":{"line":85,"type":"if","locations":[{"start":{"line":85,"column":6},"end":{"line":85,"column":6}},{"start":{"line":85,"column":6},"end":{"line":85,"column":6}}]}},"code":["'use strict'","","const os = require('os')","","module.exports = {","  loadPriority: 130,","  initialize: function (api, next) {","    api.exceptionHandlers = {}","    api.exceptionHandlers.reporters = []","","    const consoleReporter = function (error, type, name, objects, severity) {","      let extraMessages = []","","      if (type === 'loader') {","        extraMessages.push('! Failed to load ' + objects.fullFilePath)","      } else if (type === 'action') {","        extraMessages.push('! uncaught error from action: ' + name)","        extraMessages.push('! connection details:')","        const relevantDetails = ['action', 'remoteIP', 'type', 'params', 'room']","        for (let i in relevantDetails) {","          if (","            objects.connection[relevantDetails[i]] !== null &&","            objects.connection[relevantDetails[i]] !== undefined &&","            typeof objects.connection[relevantDetails[i]] !== 'function'","          ) {","            extraMessages.push('!     ' + relevantDetails[i] + ': ' + JSON.stringify(objects.connection[relevantDetails[i]]))","          }","        }","      } else if (type === 'task') {","        extraMessages.push('! error from task: ' + name + ' on queue ' + objects.queue + ' (worker #' + objects.workerId + ')')","        try {","          extraMessages.push('!     arguments: ' + JSON.stringify(objects.task.args))","        } catch (e) {}","      } else {","        extraMessages.push('! Error: ' + error.message)","        extraMessages.push('!     Type: ' + type)","        extraMessages.push('!     Name: ' + name)","        extraMessages.push('!     Data: ' + JSON.stringify(objects))","      }","","      for (let m in extraMessages) {","        api.log(extraMessages[m], severity)","      }","      let lines","      try {","        lines = error.stack.split(os.EOL)","      } catch (e) {","        lines = new Error(error).stack.split(os.EOL)","      }","      for (let l in lines) {","        let line = lines[l]","        api.log('! ' + line, severity)","      }","      api.log('*', severity)","    }","","    api.exceptionHandlers.reporters.push(consoleReporter)","","    api.exceptionHandlers.report = function (error, type, name, objects, severity) {","      if (!severity) { severity = 'error' }","      for (let i in api.exceptionHandlers.reporters) {","        api.exceptionHandlers.reporters[i](error, type, name, objects, severity)","      }","    }","","    // /////////","    // TYPES //","    // /////////","","    api.exceptionHandlers.loader = function (fullFilePath, error) {","      let name = 'loader:' + fullFilePath","      api.exceptionHandlers.report(error, 'loader', name, {fullFilePath: fullFilePath}, 'alert')","    }","","    api.exceptionHandlers.action = function (error, data, next) {","      let simpleName","      try {","        simpleName = data.action","      } catch (e) {","        simpleName = error.message","      }","      let name = 'action:' + simpleName","      api.exceptionHandlers.report(error, 'action', name, {connection: data.connection}, 'error')","      data.connection.response = {} // no partial responses","      if (typeof next === 'function') { next() }","    }","","    api.exceptionHandlers.task = function (error, queue, task, workerId) {","      let simpleName","      try {","        simpleName = task['class']","      } catch (e) {","        simpleName = error.message","      }","      let name = 'task:' + simpleName","      api.exceptionHandlers.report(error, 'task', name, {task: task, queue: queue, workerId: workerId}, api.config.tasks.workerLogging.failure)","    }","","    next()","  }","}",""],"l":{"3":1,"5":1,"8":0,"9":0,"11":0,"12":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"26":0,"29":0,"30":0,"31":0,"32":0,"35":0,"36":0,"37":0,"38":0,"41":0,"42":0,"44":0,"45":0,"46":0,"48":0,"50":0,"51":0,"52":0,"54":0,"57":0,"59":0,"60":0,"61":0,"62":0,"70":0,"71":0,"72":0,"75":0,"76":0,"77":0,"78":0,"80":0,"82":0,"83":0,"84":0,"85":0,"88":0,"89":0,"90":0,"91":0,"93":0,"95":0,"96":0,"99":0}},"/home/travis/build/npmtest/node-npmtest-actionhero/node_modules/actionhero/initializers/genericServer.js":{"path":"/home/travis/build/npmtest/node-npmtest-actionhero/node_modules/actionhero/initializers/genericServer.js","s":{"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0},"fnMap":{"1":{"name":"(anonymous_1)","line":8,"loc":{"start":{"line":8,"column":14},"end":{"line":8,"column":35}}},"2":{"name":"(anonymous_2)","line":31,"loc":{"start":{"line":31,"column":24},"end":{"line":31,"column":61}}},"3":{"name":"(anonymous_3)","line":47,"loc":{"start":{"line":47,"column":50},"end":{"line":47,"column":66}}},"4":{"name":"(anonymous_4)","line":89,"loc":{"start":{"line":89,"column":48},"end":{"line":89,"column":70}}},"5":{"name":"(anonymous_5)","line":97,"loc":{"start":{"line":97,"column":46},"end":{"line":97,"column":68}}},"6":{"name":"(anonymous_6)","line":103,"loc":{"start":{"line":103,"column":46},"end":{"line":103,"column":58}}},"7":{"name":"(anonymous_7)","line":114,"loc":{"start":{"line":114,"column":38},"end":{"line":114,"column":73}}},"8":{"name":"(anonymous_8)","line":118,"loc":{"start":{"line":118,"column":29},"end":{"line":118,"column":41}}},"9":{"name":"(anonymous_9)","line":127,"loc":{"start":{"line":127,"column":40},"end":{"line":127,"column":56}}},"10":{"name":"(anonymous_10)","line":130,"loc":{"start":{"line":130,"column":39},"end":{"line":130,"column":55}}},"11":{"name":"(anonymous_11)","line":133,"loc":{"start":{"line":133,"column":46},"end":{"line":133,"column":77}}},"12":{"name":"(anonymous_12)","line":136,"loc":{"start":{"line":136,"column":42},"end":{"line":136,"column":72}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":51}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":28}},"3":{"start":{"line":6,"column":0},"end":{"line":140,"column":1}},"4":{"start":{"line":31,"column":4},"end":{"line":43,"column":5}},"5":{"start":{"line":32,"column":6},"end":{"line":32,"column":22}},"6":{"start":{"line":33,"column":6},"end":{"line":33,"column":28}},"7":{"start":{"line":34,"column":6},"end":{"line":34,"column":34}},"8":{"start":{"line":38,"column":6},"end":{"line":42,"column":7}},"9":{"start":{"line":39,"column":8},"end":{"line":41,"column":9}},"10":{"start":{"line":40,"column":10},"end":{"line":40,"column":50}},"11":{"start":{"line":45,"column":4},"end":{"line":45,"column":50}},"12":{"start":{"line":47,"column":4},"end":{"line":87,"column":5}},"13":{"start":{"line":48,"column":6},"end":{"line":54,"column":7}},"14":{"start":{"line":55,"column":6},"end":{"line":55,"column":70}},"15":{"start":{"line":55,"column":46},"end":{"line":55,"column":69}},"16":{"start":{"line":56,"column":6},"end":{"line":56,"column":70}},"17":{"start":{"line":56,"column":30},"end":{"line":56,"column":69}},"18":{"start":{"line":57,"column":6},"end":{"line":57,"column":50}},"19":{"start":{"line":59,"column":6},"end":{"line":61,"column":7}},"20":{"start":{"line":60,"column":8},"end":{"line":60,"column":45}},"21":{"start":{"line":63,"column":6},"end":{"line":66,"column":7}},"22":{"start":{"line":64,"column":8},"end":{"line":64,"column":37}},"23":{"start":{"line":65,"column":8},"end":{"line":65,"column":36}},"24":{"start":{"line":68,"column":6},"end":{"line":68,"column":41}},"25":{"start":{"line":70,"column":6},"end":{"line":72,"column":7}},"26":{"start":{"line":71,"column":8},"end":{"line":71,"column":69}},"27":{"start":{"line":74,"column":6},"end":{"line":76,"column":7}},"28":{"start":{"line":75,"column":8},"end":{"line":75,"column":92}},"29":{"start":{"line":78,"column":6},"end":{"line":86,"column":7}},"30":{"start":{"line":79,"column":8},"end":{"line":85,"column":46}},"31":{"start":{"line":80,"column":10},"end":{"line":84,"column":11}},"32":{"start":{"line":81,"column":12},"end":{"line":81,"column":96}},"33":{"start":{"line":83,"column":12},"end":{"line":83,"column":31}},"34":{"start":{"line":89,"column":4},"end":{"line":95,"column":5}},"35":{"start":{"line":90,"column":6},"end":{"line":92,"column":8}},"36":{"start":{"line":91,"column":8},"end":{"line":91,"column":41}},"37":{"start":{"line":94,"column":6},"end":{"line":94,"column":37}},"38":{"start":{"line":97,"column":4},"end":{"line":101,"column":5}},"39":{"start":{"line":98,"column":6},"end":{"line":100,"column":8}},"40":{"start":{"line":99,"column":8},"end":{"line":99,"column":80}},"41":{"start":{"line":103,"column":4},"end":{"line":112,"column":5}},"42":{"start":{"line":104,"column":6},"end":{"line":104,"column":26}},"43":{"start":{"line":106,"column":6},"end":{"line":109,"column":7}},"44":{"start":{"line":107,"column":8},"end":{"line":107,"column":55}},"45":{"start":{"line":108,"column":8},"end":{"line":108,"column":75}},"46":{"start":{"line":108,"column":45},"end":{"line":108,"column":74}},"47":{"start":{"line":111,"column":6},"end":{"line":111,"column":24}},"48":{"start":{"line":114,"column":4},"end":{"line":116,"column":5}},"49":{"start":{"line":115,"column":6},"end":{"line":115,"column":70}},"50":{"start":{"line":118,"column":4},"end":{"line":120,"column":5}},"51":{"start":{"line":119,"column":6},"end":{"line":119,"column":85}},"52":{"start":{"line":127,"column":4},"end":{"line":127,"column":78}},"53":{"start":{"line":127,"column":58},"end":{"line":127,"column":77}},"54":{"start":{"line":130,"column":4},"end":{"line":130,"column":77}},"55":{"start":{"line":130,"column":57},"end":{"line":130,"column":76}},"56":{"start":{"line":133,"column":4},"end":{"line":133,"column":99}},"57":{"start":{"line":133,"column":79},"end":{"line":133,"column":98}},"58":{"start":{"line":136,"column":4},"end":{"line":136,"column":94}},"59":{"start":{"line":136,"column":74},"end":{"line":136,"column":93}},"60":{"start":{"line":138,"column":4},"end":{"line":138,"column":10}}},"branchMap":{"1":{"line":39,"type":"if","locations":[{"start":{"line":39,"column":8},"end":{"line":39,"column":8}},{"start":{"line":39,"column":8},"end":{"line":39,"column":8}}]},"2":{"line":39,"type":"binary-expr","locations":[{"start":{"line":39,"column":12},"end":{"line":39,"column":41}},{"start":{"line":39,"column":45},"end":{"line":39,"column":79}}]},"3":{"line":55,"type":"if","locations":[{"start":{"line":55,"column":6},"end":{"line":55,"column":6}},{"start":{"line":55,"column":6},"end":{"line":55,"column":6}}]},"4":{"line":56,"type":"if","locations":[{"start":{"line":56,"column":6},"end":{"line":56,"column":6}},{"start":{"line":56,"column":6},"end":{"line":56,"column":6}}]},"5":{"line":70,"type":"if","locations":[{"start":{"line":70,"column":6},"end":{"line":70,"column":6}},{"start":{"line":70,"column":6},"end":{"line":70,"column":6}}]},"6":{"line":74,"type":"if","locations":[{"start":{"line":74,"column":6},"end":{"line":74,"column":6}},{"start":{"line":74,"column":6},"end":{"line":74,"column":6}}]},"7":{"line":78,"type":"if","locations":[{"start":{"line":78,"column":6},"end":{"line":78,"column":6}},{"start":{"line":78,"column":6},"end":{"line":78,"column":6}}]},"8":{"line":108,"type":"if","locations":[{"start":{"line":108,"column":8},"end":{"line":108,"column":8}},{"start":{"line":108,"column":8},"end":{"line":108,"column":8}}]}},"code":["'use strict'","","const EventEmitter = require('events').EventEmitter","const util = require('util')","","module.exports = {","  loadPriority: 450,","  initialize: function (api, next) {","    // I am the prototypical generic server that all other types of servers inherit from.","    // I shouldn't actually be used by a client","    // Note the methods in this template server, as they are all required for 'real' servers","","    // //////////////////","    // COMMON METHODS //","    // //////////////////","","    // options are meant to be configurable in 'config.js'","    // attributes are descriptions of the server:","    /*","","      attributes = {","        canChat: true,","        logConnections: true,","        logExits: true,","        sendWelcomeMessage: true,","        verbs: ['say', 'detailsView']","      }","","    */","","    api.GenericServer = function (name, options, attributes) {","      this.type = name","      this.options = options","      this.attributes = attributes","","      // you can overwrite attributes with options","      // this could cause some problems, be careful","      for (let key in this.options) {","        if (this.attributes[key] !== null && this.attributes[key] !== undefined) {","          this.attributes[key] = this.options[key]","        }","      }","    }","","    util.inherits(api.GenericServer, EventEmitter)","","    api.GenericServer.prototype.buildConnection = function (data) {","      const details = {","        type: this.type,","        id: data.id,","        remotePort: data.remotePort,","        remoteIP: data.remoteAddress,","        rawConnection: data.rawConnection","      }","      if (this.attributes.canChat === true) { details.canChat = true }","      if (data.fingerprint) { details.fingerprint = data.fingerprint }","      let connection = new api.Connection(details)","","      connection.sendMessage = (message) => {","        this.sendMessage(connection, message)","      }","","      connection.sendFile = (path) => {","        connection.params.file = path","        this.processFile(connection)","      }","","      this.emit('connection', connection)","","      if (this.attributes.logConnections === true) {","        this.log('new connection', 'info', {to: connection.remoteIP})","      }","","      if (this.attributes.sendWelcomeMessage === true) {","        connection.sendMessage({welcome: api.config.general.welcomeMessage, context: 'api'})","      }","","      if (typeof this.attributes.sendWelcomeMessage === 'number') {","        setTimeout(() => {","          try {","            connection.sendMessage({welcome: api.config.general.welcomeMessage, context: 'api'})","          } catch (e) {","            api.log(e, 'error')","          }","        }, this.attributes.sendWelcomeMessage)","      }","    }","","    api.GenericServer.prototype.processAction = function (connection) {","      const ActionProcessor = new api.ActionProcessor(connection, (data) => {","        this.emit('actionComplete', data)","      })","","      ActionProcessor.processAction()","    }","","    api.GenericServer.prototype.processFile = function (connection) {","      api.staticFile.get(connection, (connection, error, fileStream, mime, length, lastModified) => {","        this.sendFile(connection, error, fileStream, mime, length, lastModified)","      })","    }","","    api.GenericServer.prototype.connections = function () {","      let connections = []","","      for (let i in api.connections.connections) {","        let connection = api.connections.connections[i]","        if (connection.type === this.type) { connections.push(connection) }","      }","","      return connections","    }","","    api.GenericServer.prototype.log = function (message, severity, data) {","      api.log(['[server: %s] %s', this.type, message], severity, data)","    }","","    const methodNotDefined = function () {","      throw new Error('The containing method should be defined for this server type')","    }","","    // /////////////////////////////////////","    // METHODS WHICH MUST BE OVERWRITTEN //","    // /////////////////////////////////////","","    // I am invoked as part of boot","    api.GenericServer.prototype.start = function (next) { methodNotDefined() }","","    // I am invoked as part of shutdown","    api.GenericServer.prototype.stop = function (next) { methodNotDefined() }","","    // This method will be appended to the connection as 'connection.sendMessage'","    api.GenericServer.prototype.sendMessage = function (connection, message) { methodNotDefined() }","","    // This method will be used to gracefully disconnect the client","    api.GenericServer.prototype.goodbye = function (connection, reason) { methodNotDefined() }","","    next()","  }","}",""],"l":{"3":1,"4":1,"6":1,"31":0,"32":0,"33":0,"34":0,"38":0,"39":0,"40":0,"45":0,"47":0,"48":0,"55":0,"56":0,"57":0,"59":0,"60":0,"63":0,"64":0,"65":0,"68":0,"70":0,"71":0,"74":0,"75":0,"78":0,"79":0,"80":0,"81":0,"83":0,"89":0,"90":0,"91":0,"94":0,"97":0,"98":0,"99":0,"103":0,"104":0,"106":0,"107":0,"108":0,"111":0,"114":0,"115":0,"118":0,"119":0,"127":0,"130":0,"133":0,"136":0,"138":0}},"/home/travis/build/npmtest/node-npmtest-actionhero/node_modules/actionhero/initializers/id.js":{"path":"/home/travis/build/npmtest/node-npmtest-actionhero/node_modules/actionhero/initializers/id.js","s":{"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0]},"f":{"1":0,"2":0},"fnMap":{"1":{"name":"(anonymous_1)","line":10,"loc":{"start":{"line":10,"column":14},"end":{"line":10,"column":35}}},"2":{"name":"(anonymous_2)","line":38,"loc":{"start":{"line":38,"column":9},"end":{"line":38,"column":30}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":34}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":28}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":37}},"4":{"start":{"line":7,"column":0},"end":{"line":42,"column":1}},"5":{"start":{"line":11,"column":4},"end":{"line":31,"column":5}},"6":{"start":{"line":12,"column":6},"end":{"line":12,"column":25}},"7":{"start":{"line":13,"column":11},"end":{"line":31,"column":5}},"8":{"start":{"line":14,"column":6},"end":{"line":14,"column":43}},"9":{"start":{"line":15,"column":11},"end":{"line":31,"column":5}},"10":{"start":{"line":16,"column":6},"end":{"line":16,"column":55}},"11":{"start":{"line":17,"column":6},"end":{"line":25,"column":7}},"12":{"start":{"line":18,"column":8},"end":{"line":18,"column":107}},"13":{"start":{"line":19,"column":8},"end":{"line":23,"column":9}},"14":{"start":{"line":20,"column":10},"end":{"line":20,"column":34}},"15":{"start":{"line":22,"column":10},"end":{"line":22,"column":30}},"16":{"start":{"line":24,"column":8},"end":{"line":24,"column":33}},"17":{"start":{"line":27,"column":6},"end":{"line":27,"column":25}},"18":{"start":{"line":28,"column":6},"end":{"line":28,"column":59}},"19":{"start":{"line":28,"column":30},"end":{"line":28,"column":58}},"20":{"start":{"line":30,"column":6},"end":{"line":30,"column":36}},"21":{"start":{"line":33,"column":4},"end":{"line":33,"column":77}},"22":{"start":{"line":35,"column":4},"end":{"line":35,"column":10}},"23":{"start":{"line":39,"column":4},"end":{"line":39,"column":48}},"24":{"start":{"line":40,"column":4},"end":{"line":40,"column":10}}},"branchMap":{"1":{"line":11,"type":"if","locations":[{"start":{"line":11,"column":4},"end":{"line":11,"column":4}},{"start":{"line":11,"column":4},"end":{"line":11,"column":4}}]},"2":{"line":13,"type":"if","locations":[{"start":{"line":13,"column":11},"end":{"line":13,"column":11}},{"start":{"line":13,"column":11},"end":{"line":13,"column":11}}]},"3":{"line":15,"type":"if","locations":[{"start":{"line":15,"column":11},"end":{"line":15,"column":11}},{"start":{"line":15,"column":11},"end":{"line":15,"column":11}}]},"4":{"line":17,"type":"if","locations":[{"start":{"line":17,"column":6},"end":{"line":17,"column":6}},{"start":{"line":17,"column":6},"end":{"line":17,"column":6}}]},"5":{"line":28,"type":"if","locations":[{"start":{"line":28,"column":6},"end":{"line":28,"column":6}},{"start":{"line":28,"column":6},"end":{"line":28,"column":6}}]}},"code":["'use strict'","","const cluster = require('cluster')","const path = require('path')","const argv = require('optimist').argv","","module.exports = {","  loadPriority: 10,","  startPriority: 2,","  initialize: function (api, next) {","    if (argv.title) {","      api.id = argv.title","    } else if (process.env.ACTIONHERO_TITLE) {","      api.id = process.env.ACTIONHERO_TITLE","    } else if (!api.config.general.id) {","      let externalIP = api.utils.getExternalIPAddress()","      if (externalIP === false) {","        let message = ' * Error fetching this hosts external IP address; setting id base to \\'actionhero\\''","        try {","          api.log(message, 'crit')","        } catch (e) {","          console.log(message)","        }","        externalIP = 'actionhero'","      }","","      api.id = externalIP","      if (cluster.isWorker) { api.id += ':' + process.pid }","    } else {","      api.id = api.config.general.id","    }","","    api.actionheroVersion = require('..' + path.sep + 'package.json').version","","    next()","  },","","  start: function (api, next) {","    api.log(['server ID: %s', api.id], 'notice')","    next()","  }","}",""],"l":{"3":1,"4":1,"5":1,"7":1,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"22":0,"24":0,"27":0,"28":0,"30":0,"33":0,"35":0,"39":0,"40":0}},"/home/travis/build/npmtest/node-npmtest-actionhero/node_modules/actionhero/initializers/params.js":{"path":"/home/travis/build/npmtest/node-npmtest-actionhero/node_modules/actionhero/initializers/params.js","s":{"1":1,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0},"b":{},"f":{"1":0,"2":0,"3":0},"fnMap":{"1":{"name":"(anonymous_1)","line":5,"loc":{"start":{"line":5,"column":14},"end":{"line":5,"column":35}}},"2":{"name":"(anonymous_2)","line":16,"loc":{"start":{"line":16,"column":36},"end":{"line":16,"column":48}}},"3":{"name":"(anonymous_3)","line":21,"loc":{"start":{"line":21,"column":42},"end":{"line":21,"column":55}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":41,"column":1}},"2":{"start":{"line":6,"column":4},"end":{"line":6,"column":19}},"3":{"start":{"line":9,"column":4},"end":{"line":14,"column":5}},"4":{"start":{"line":16,"column":4},"end":{"line":36,"column":5}},"5":{"start":{"line":17,"column":6},"end":{"line":17,"column":28}},"6":{"start":{"line":18,"column":6},"end":{"line":18,"column":11}},"7":{"start":{"line":19,"column":6},"end":{"line":19,"column":11}},"8":{"start":{"line":21,"column":6},"end":{"line":23,"column":8}},"9":{"start":{"line":22,"column":8},"end":{"line":22,"column":29}},"10":{"start":{"line":25,"column":6},"end":{"line":32,"column":7}},"11":{"start":{"line":26,"column":8},"end":{"line":31,"column":9}},"12":{"start":{"line":27,"column":10},"end":{"line":27,"column":48}},"13":{"start":{"line":28,"column":10},"end":{"line":30,"column":11}},"14":{"start":{"line":29,"column":12},"end":{"line":29,"column":35}},"15":{"start":{"line":34,"column":6},"end":{"line":34,"column":72}},"16":{"start":{"line":35,"column":6},"end":{"line":35,"column":37}},"17":{"start":{"line":38,"column":4},"end":{"line":38,"column":35}},"18":{"start":{"line":39,"column":4},"end":{"line":39,"column":10}}},"branchMap":{},"code":["'use strict'","","module.exports = {","  loadPriority: 420,","  initialize: function (api, next) {","    api.params = {}","","    // special params we will always accept","    api.params.globalSafeParams = [","      'file',","      'apiVersion',","      'callback',","      'action'","    ]","","    api.params.buildPostVariables = function () {","      let postVariables = []","      let i","      let j","","      api.params.globalSafeParams.forEach(function (p) {","        postVariables.push(p)","      })","","      for (i in api.actions.actions) {","        for (j in api.actions.actions[i]) {","          let action = api.actions.actions[i][j]","          for (let key in action.inputs) {","            postVariables.push(key)","          }","        }","      }","","      api.params.postVariables = api.utils.arrayUniqueify(postVariables)","      return api.params.postVariables","    }","","    api.params.buildPostVariables()","    next()","  }","}",""],"l":{"3":1,"6":0,"9":0,"16":0,"17":0,"18":0,"19":0,"21":0,"22":0,"25":0,"26":0,"27":0,"28":0,"29":0,"34":0,"35":0,"38":0,"39":0}},"/home/travis/build/npmtest/node-npmtest-actionhero/node_modules/actionhero/initializers/pids.js":{"path":"/home/travis/build/npmtest/node-npmtest-actionhero/node_modules/actionhero/initializers/pids.js","s":{"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0},"b":{"1":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0},"fnMap":{"1":{"name":"(anonymous_1)","line":9,"loc":{"start":{"line":9,"column":14},"end":{"line":9,"column":35}}},"2":{"name":"(anonymous_2)","line":14,"loc":{"start":{"line":14,"column":26},"end":{"line":14,"column":38}}},"3":{"name":"(anonymous_3)","line":32,"loc":{"start":{"line":32,"column":28},"end":{"line":32,"column":40}}},"4":{"name":"(anonymous_4)","line":36,"loc":{"start":{"line":36,"column":28},"end":{"line":36,"column":40}}},"5":{"name":"(anonymous_5)","line":47,"loc":{"start":{"line":47,"column":9},"end":{"line":47,"column":30}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":24}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":34}},"3":{"start":{"line":6,"column":0},"end":{"line":52,"column":1}},"4":{"start":{"line":10,"column":4},"end":{"line":10,"column":17}},"5":{"start":{"line":11,"column":4},"end":{"line":11,"column":30}},"6":{"start":{"line":12,"column":4},"end":{"line":12,"column":51}},"7":{"start":{"line":14,"column":4},"end":{"line":22,"column":5}},"8":{"start":{"line":15,"column":6},"end":{"line":15,"column":26}},"9":{"start":{"line":16,"column":6},"end":{"line":16,"column":58}},"10":{"start":{"line":17,"column":6},"end":{"line":17,"column":58}},"11":{"start":{"line":18,"column":6},"end":{"line":18,"column":58}},"12":{"start":{"line":19,"column":6},"end":{"line":19,"column":58}},"13":{"start":{"line":21,"column":6},"end":{"line":21,"column":20}},"14":{"start":{"line":24,"column":4},"end":{"line":28,"column":5}},"15":{"start":{"line":25,"column":6},"end":{"line":25,"column":60}},"16":{"start":{"line":27,"column":6},"end":{"line":27,"column":44}},"17":{"start":{"line":30,"column":4},"end":{"line":30,"column":52}},"18":{"start":{"line":30,"column":10},"end":{"line":30,"column":38}},"19":{"start":{"line":32,"column":4},"end":{"line":34,"column":5}},"20":{"start":{"line":33,"column":6},"end":{"line":33,"column":94}},"21":{"start":{"line":36,"column":4},"end":{"line":42,"column":5}},"22":{"start":{"line":37,"column":6},"end":{"line":41,"column":7}},"23":{"start":{"line":38,"column":8},"end":{"line":38,"column":59}},"24":{"start":{"line":40,"column":8},"end":{"line":40,"column":55}},"25":{"start":{"line":44,"column":4},"end":{"line":44,"column":10}},"26":{"start":{"line":48,"column":4},"end":{"line":48,"column":27}},"27":{"start":{"line":49,"column":4},"end":{"line":49,"column":47}},"28":{"start":{"line":50,"column":4},"end":{"line":50,"column":10}}},"branchMap":{"1":{"line":24,"type":"if","locations":[{"start":{"line":24,"column":4},"end":{"line":24,"column":4}},{"start":{"line":24,"column":4},"end":{"line":24,"column":4}}]}},"code":["'use strict'","","const fs = require('fs')","const cluster = require('cluster')","","module.exports = {","  startPriority: 1,","  loadPriority: 50,","  initialize: function (api, next) {","    api.pids = {}","    api.pids.pid = process.pid","    api.pids.path = api.config.general.paths.pid[0] // it would be silly to have more than one pid","","    api.pids.sanitizeId = function () {","      let pidfile = api.id","      pidfile = pidfile.replace(new RegExp(':', 'g'), '-')","      pidfile = pidfile.replace(new RegExp(' ', 'g'), '_')","      pidfile = pidfile.replace(new RegExp('\\r', 'g'), '') // eslint-disable-line","      pidfile = pidfile.replace(new RegExp('\\n', 'g'), '') // eslint-disable-line ","","      return pidfile","    }","","    if (cluster.isMaster) {","      api.pids.title = 'actionhero-' + api.pids.sanitizeId()","    } else {","      api.pids.title = api.pids.sanitizeId()","    }","","    try { fs.mkdirSync(api.pids.path) } catch (e) {};","","    api.pids.writePidFile = function () {","      fs.writeFileSync(api.pids.path + '/' + api.pids.title, api.pids.pid.toString(), 'ascii')","    }","","    api.pids.clearPidFile = function () {","      try {","        fs.unlinkSync(api.pids.path + '/' + api.pids.title)","      } catch (e) {","        api.log('Unable to remove pidfile', 'error', e)","      }","    }","","    next()","  },","","  start: function (api, next) {","    api.pids.writePidFile()","    api.log(['pid: %s', process.pid], 'notice')","    next()","  }","}",""],"l":{"3":1,"4":1,"6":1,"10":0,"11":0,"12":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"21":0,"24":0,"25":0,"27":0,"30":0,"32":0,"33":0,"36":0,"37":0,"38":0,"40":0,"44":0,"48":0,"49":0,"50":0}},"/home/travis/build/npmtest/node-npmtest-actionhero/node_modules/actionhero/initializers/resque.js":{"path":"/home/travis/build/npmtest/node-npmtest-actionhero/node_modules/actionhero/initializers/resque.js","s":{"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0},"fnMap":{"1":{"name":"(anonymous_1)","line":9,"loc":{"start":{"line":9,"column":14},"end":{"line":9,"column":35}}},"2":{"name":"(anonymous_2)","line":19,"loc":{"start":{"line":19,"column":18},"end":{"line":19,"column":38}}},"3":{"name":"(anonymous_3)","line":31,"loc":{"start":{"line":31,"column":17},"end":{"line":31,"column":37}}},"4":{"name":"(anonymous_4)","line":35,"loc":{"start":{"line":35,"column":22},"end":{"line":35,"column":42}}},"5":{"name":"(anonymous_5)","line":62,"loc":{"start":{"line":62,"column":21},"end":{"line":62,"column":41}}},"6":{"name":"(anonymous_6)","line":73,"loc":{"start":{"line":73,"column":24},"end":{"line":73,"column":44}}},"7":{"name":"(anonymous_7)","line":116,"loc":{"start":{"line":116,"column":23},"end":{"line":116,"column":43}}},"8":{"name":"(anonymous_8)","line":131,"loc":{"start":{"line":131,"column":9},"end":{"line":131,"column":30}}},"9":{"name":"(anonymous_9)","line":136,"loc":{"start":{"line":136,"column":26},"end":{"line":136,"column":38}}},"10":{"name":"(anonymous_10)","line":137,"loc":{"start":{"line":137,"column":32},"end":{"line":137,"column":44}}},"11":{"name":"(anonymous_11)","line":138,"loc":{"start":{"line":138,"column":36},"end":{"line":138,"column":48}}},"12":{"name":"(anonymous_12)","line":145,"loc":{"start":{"line":145,"column":8},"end":{"line":145,"column":29}}},"13":{"name":"(anonymous_13)","line":146,"loc":{"start":{"line":146,"column":29},"end":{"line":146,"column":41}}},"14":{"name":"(anonymous_14)","line":147,"loc":{"start":{"line":147,"column":33},"end":{"line":147,"column":45}}},"15":{"name":"(anonymous_15)","line":148,"loc":{"start":{"line":148,"column":29},"end":{"line":148,"column":41}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":33}},"2":{"start":{"line":5,"column":0},"end":{"line":154,"column":1}},"3":{"start":{"line":10,"column":4},"end":{"line":10,"column":61}},"4":{"start":{"line":12,"column":4},"end":{"line":126,"column":5}},"5":{"start":{"line":20,"column":8},"end":{"line":20,"column":28}},"6":{"start":{"line":21,"column":8},"end":{"line":21,"column":87}},"7":{"start":{"line":21,"column":56},"end":{"line":21,"column":86}},"8":{"start":{"line":22,"column":8},"end":{"line":22,"column":84}},"9":{"start":{"line":24,"column":8},"end":{"line":26,"column":10}},"10":{"start":{"line":25,"column":10},"end":{"line":25,"column":55}},"11":{"start":{"line":28,"column":8},"end":{"line":28,"column":36}},"12":{"start":{"line":32,"column":8},"end":{"line":32,"column":84}},"13":{"start":{"line":32,"column":32},"end":{"line":32,"column":63}},"14":{"start":{"line":32,"column":72},"end":{"line":32,"column":83}},"15":{"start":{"line":36,"column":8},"end":{"line":36,"column":36}},"16":{"start":{"line":37,"column":8},"end":{"line":37,"column":99}},"17":{"start":{"line":37,"column":60},"end":{"line":37,"column":98}},"18":{"start":{"line":38,"column":8},"end":{"line":59,"column":9}},"19":{"start":{"line":39,"column":10},"end":{"line":39,"column":67}},"20":{"start":{"line":40,"column":10},"end":{"line":40,"column":113}},"21":{"start":{"line":42,"column":10},"end":{"line":44,"column":12}},"22":{"start":{"line":43,"column":12},"end":{"line":43,"column":61}},"23":{"start":{"line":46,"column":10},"end":{"line":56,"column":12}},"24":{"start":{"line":47,"column":12},"end":{"line":47,"column":114}},"25":{"start":{"line":47,"column":47},"end":{"line":47,"column":112}},"26":{"start":{"line":48,"column":12},"end":{"line":48,"column":108}},"27":{"start":{"line":48,"column":45},"end":{"line":48,"column":106}},"28":{"start":{"line":49,"column":12},"end":{"line":49,"column":112}},"29":{"start":{"line":49,"column":46},"end":{"line":49,"column":110}},"30":{"start":{"line":50,"column":12},"end":{"line":50,"column":173}},"31":{"start":{"line":50,"column":68},"end":{"line":50,"column":171}},"32":{"start":{"line":51,"column":12},"end":{"line":51,"column":175}},"33":{"start":{"line":51,"column":71},"end":{"line":51,"column":173}},"34":{"start":{"line":52,"column":12},"end":{"line":52,"column":113}},"35":{"start":{"line":52,"column":53},"end":{"line":52,"column":111}},"36":{"start":{"line":54,"column":12},"end":{"line":54,"column":34}},"37":{"start":{"line":55,"column":12},"end":{"line":55,"column":22}},"38":{"start":{"line":58,"column":10},"end":{"line":58,"column":20}},"39":{"start":{"line":63,"column":8},"end":{"line":70,"column":9}},"40":{"start":{"line":64,"column":10},"end":{"line":64,"column":20}},"41":{"start":{"line":66,"column":10},"end":{"line":69,"column":12}},"42":{"start":{"line":67,"column":12},"end":{"line":67,"column":33}},"43":{"start":{"line":68,"column":12},"end":{"line":68,"column":22}},"44":{"start":{"line":74,"column":8},"end":{"line":74,"column":40}},"45":{"start":{"line":75,"column":8},"end":{"line":75,"column":105}},"46":{"start":{"line":75,"column":62},"end":{"line":75,"column":104}},"47":{"start":{"line":76,"column":8},"end":{"line":76,"column":59}},"48":{"start":{"line":77,"column":8},"end":{"line":77,"column":65}},"49":{"start":{"line":79,"column":8},"end":{"line":88,"column":26}},"50":{"start":{"line":91,"column":8},"end":{"line":91,"column":130}},"51":{"start":{"line":91,"column":53},"end":{"line":91,"column":128}},"52":{"start":{"line":92,"column":8},"end":{"line":92,"column":124}},"53":{"start":{"line":92,"column":51},"end":{"line":92,"column":122}},"54":{"start":{"line":93,"column":8},"end":{"line":93,"column":177}},"55":{"start":{"line":93,"column":76},"end":{"line":93,"column":175}},"56":{"start":{"line":94,"column":8},"end":{"line":94,"column":147}},"57":{"start":{"line":94,"column":59},"end":{"line":94,"column":145}},"58":{"start":{"line":95,"column":8},"end":{"line":95,"column":200}},"59":{"start":{"line":95,"column":63},"end":{"line":95,"column":198}},"60":{"start":{"line":96,"column":8},"end":{"line":96,"column":226}},"61":{"start":{"line":96,"column":77},"end":{"line":96,"column":224}},"62":{"start":{"line":97,"column":8},"end":{"line":97,"column":232}},"63":{"start":{"line":97,"column":75},"end":{"line":97,"column":230}},"64":{"start":{"line":98,"column":8},"end":{"line":98,"column":129}},"65":{"start":{"line":98,"column":53},"end":{"line":98,"column":127}},"66":{"start":{"line":100,"column":8},"end":{"line":100,"column":136}},"67":{"start":{"line":100,"column":76},"end":{"line":100,"column":134}},"68":{"start":{"line":101,"column":8},"end":{"line":101,"column":130}},"69":{"start":{"line":101,"column":72},"end":{"line":101,"column":128}},"70":{"start":{"line":104,"column":8},"end":{"line":104,"column":109}},"71":{"start":{"line":104,"column":58},"end":{"line":104,"column":107}},"72":{"start":{"line":105,"column":8},"end":{"line":105,"column":193}},"73":{"start":{"line":105,"column":68},"end":{"line":105,"column":191}},"74":{"start":{"line":107,"column":8},"end":{"line":113,"column":9}},"75":{"start":{"line":108,"column":10},"end":{"line":110,"column":12}},"76":{"start":{"line":109,"column":12},"end":{"line":109,"column":62}},"77":{"start":{"line":109,"column":50},"end":{"line":109,"column":61}},"78":{"start":{"line":112,"column":10},"end":{"line":112,"column":60}},"79":{"start":{"line":112,"column":48},"end":{"line":112,"column":59}},"80":{"start":{"line":117,"column":8},"end":{"line":124,"column":9}},"81":{"start":{"line":118,"column":10},"end":{"line":121,"column":12}},"82":{"start":{"line":119,"column":12},"end":{"line":119,"column":43}},"83":{"start":{"line":120,"column":12},"end":{"line":120,"column":22}},"84":{"start":{"line":123,"column":10},"end":{"line":123,"column":20}},"85":{"start":{"line":128,"column":4},"end":{"line":128,"column":10}},"86":{"start":{"line":132,"column":4},"end":{"line":134,"column":5}},"87":{"start":{"line":133,"column":6},"end":{"line":133,"column":44}},"88":{"start":{"line":136,"column":4},"end":{"line":142,"column":6}},"89":{"start":{"line":137,"column":6},"end":{"line":141,"column":8}},"90":{"start":{"line":138,"column":8},"end":{"line":140,"column":10}},"91":{"start":{"line":139,"column":10},"end":{"line":139,"column":16}},"92":{"start":{"line":146,"column":4},"end":{"line":152,"column":6}},"93":{"start":{"line":147,"column":6},"end":{"line":151,"column":8}},"94":{"start":{"line":148,"column":8},"end":{"line":150,"column":10}},"95":{"start":{"line":149,"column":10},"end":{"line":149,"column":16}}},"branchMap":{"1":{"line":21,"type":"if","locations":[{"start":{"line":21,"column":8},"end":{"line":21,"column":8}},{"start":{"line":21,"column":8},"end":{"line":21,"column":8}}]},"2":{"line":21,"type":"binary-expr","locations":[{"start":{"line":21,"column":12},"end":{"line":21,"column":27}},{"start":{"line":21,"column":31},"end":{"line":21,"column":52}}]},"3":{"line":32,"type":"if","locations":[{"start":{"line":32,"column":8},"end":{"line":32,"column":8}},{"start":{"line":32,"column":8},"end":{"line":32,"column":8}}]},"4":{"line":37,"type":"if","locations":[{"start":{"line":37,"column":8},"end":{"line":37,"column":8}},{"start":{"line":37,"column":8},"end":{"line":37,"column":8}}]},"5":{"line":37,"type":"binary-expr","locations":[{"start":{"line":37,"column":12},"end":{"line":37,"column":27}},{"start":{"line":37,"column":31},"end":{"line":37,"column":56}}]},"6":{"line":38,"type":"if","locations":[{"start":{"line":38,"column":8},"end":{"line":38,"column":8}},{"start":{"line":38,"column":8},"end":{"line":38,"column":8}}]},"7":{"line":63,"type":"if","locations":[{"start":{"line":63,"column":8},"end":{"line":63,"column":8}},{"start":{"line":63,"column":8},"end":{"line":63,"column":8}}]},"8":{"line":75,"type":"if","locations":[{"start":{"line":75,"column":8},"end":{"line":75,"column":8}},{"start":{"line":75,"column":8},"end":{"line":75,"column":8}}]},"9":{"line":75,"type":"binary-expr","locations":[{"start":{"line":75,"column":12},"end":{"line":75,"column":27}},{"start":{"line":75,"column":31},"end":{"line":75,"column":58}}]},"10":{"line":107,"type":"if","locations":[{"start":{"line":107,"column":8},"end":{"line":107,"column":8}},{"start":{"line":107,"column":8},"end":{"line":107,"column":8}}]},"11":{"line":109,"type":"if","locations":[{"start":{"line":109,"column":12},"end":{"line":109,"column":12}},{"start":{"line":109,"column":12},"end":{"line":109,"column":12}}]},"12":{"line":112,"type":"if","locations":[{"start":{"line":112,"column":10},"end":{"line":112,"column":10}},{"start":{"line":112,"column":10},"end":{"line":112,"column":10}}]},"13":{"line":117,"type":"if","locations":[{"start":{"line":117,"column":8},"end":{"line":117,"column":8}},{"start":{"line":117,"column":8},"end":{"line":117,"column":8}}]},"14":{"line":117,"type":"binary-expr","locations":[{"start":{"line":117,"column":12},"end":{"line":117,"column":28}},{"start":{"line":117,"column":32},"end":{"line":117,"column":70}}]},"15":{"line":132,"type":"if","locations":[{"start":{"line":132,"column":4},"end":{"line":132,"column":4}},{"start":{"line":132,"column":4},"end":{"line":132,"column":4}}]},"16":{"line":132,"type":"binary-expr","locations":[{"start":{"line":132,"column":8},"end":{"line":132,"column":48}},{"start":{"line":132,"column":52},"end":{"line":132,"column":90}}]}},"code":["'use strict'","","const NR = require('node-resque')","","module.exports = {","  startPriority: 200,","  stopPriority: 100,","  loadPriority: 600,","  initialize: function (api, next) {","    const resqueOverrides = api.config.tasks.resque_overrides","","    api.resque = {","      verbose: false,","      queue: null,","      multiWorker: null,","      scheduler: null,","      connectionDetails: {redis: api.redis.clients.tasks},","","      startQueue: function (callback) {","        let Queue = NR.queue","        if (resqueOverrides && resqueOverrides.queue) { Queue = resqueOverrides.queue }","        this.queue = new Queue({connection: this.connectionDetails}, api.tasks.jobs)","","        this.queue.on('error', (error) => {","          api.log(error, 'error', '[api.resque.queue]')","        })","","        this.queue.connect(callback)","      },","","      stopQueue: function (callback) {","        if (api.resque.queue) { api.resque.queue.end(callback) } else { callback() }","      },","","      startScheduler: function (callback) {","        let Scheduler = NR.scheduler","        if (resqueOverrides && resqueOverrides.scheduler) { Scheduler = resqueOverrides.scheduler }","        if (api.config.tasks.scheduler === true) {","          this.schedulerLogging = api.config.tasks.schedulerLogging","          this.scheduler = new Scheduler({connection: this.connectionDetails, timeout: api.config.tasks.timeout})","","          this.scheduler.on('error', (error) => {","            api.log(error, 'error', '[api.resque.scheduler]')","          })","","          this.scheduler.connect(() => {","            this.scheduler.on('start', () => { api.log('resque scheduler started', this.schedulerLogging.start) })","            this.scheduler.on('end', () => { api.log('resque scheduler ended', this.schedulerLogging.end) })","            this.scheduler.on('poll', () => { api.log('resque scheduler polling', this.schedulerLogging.poll) })","            this.scheduler.on('working_timestamp', (timestamp) => { api.log(['resque scheduler working timestamp %s', timestamp], this.schedulerLogging.working_timestamp) })","            this.scheduler.on('transferred_job', (timestamp, job) => { api.log(['resque scheduler enqueuing job %s', timestamp], this.schedulerLogging.transferred_job, job) })","            this.scheduler.on('master', (state) => { api.log(['This node is now the Resque scheduler master']) })","","            this.scheduler.start()","            callback()","          })","        } else {","          callback()","        }","      },","","      stopScheduler: function (callback) {","        if (!this.scheduler) {","          callback()","        } else {","          this.scheduler.end(() => {","            delete this.scheduler","            callback()","          })","        }","      },","","      startMultiWorker: function (callback) {","        let MultiWorker = NR.multiWorker","        if (resqueOverrides && resqueOverrides.multiWorker) { MultiWorker = resqueOverrides.multiWorker }","        this.workerLogging = api.config.tasks.workerLogging","        this.schedulerLogging = api.config.tasks.schedulerLogging","","        this.multiWorker = new MultiWorker({","          connection: api.resque.connectionDetails,","          queues: api.config.tasks.queues,","          timeout: api.config.tasks.timeout,","          checkTimeout: api.config.tasks.checkTimeout,","          minTaskProcessors: api.config.tasks.minTaskProcessors,","          maxTaskProcessors: api.config.tasks.maxTaskProcessors,","          maxEventLoopDelay: api.config.tasks.maxEventLoopDelay,","          toDisconnectProcessors: api.config.tasks.toDisconnectProcessors","        }, api.tasks.jobs)","","        // normal worker emitters","        this.multiWorker.on('start', (workerId) => { api.log('worker: started', this.workerLogging.start, {workerId: workerId}) })","        this.multiWorker.on('end', (workerId) => { api.log('worker: ended', this.workerLogging.end, {workerId: workerId}) })","        this.multiWorker.on('cleaning_worker', (workerId, worker, pid) => { api.log(['worker: cleaning old worker %s, (%s)', worker, pid], this.workerLogging.cleaning_worker) })","        this.multiWorker.on('poll', (workerId, queue) => { api.log(['worker: polling %s', queue], this.workerLogging.poll, {workerId: workerId}) })","        this.multiWorker.on('job', (workerId, queue, job) => { api.log(['worker: working job %s', queue], this.workerLogging.job, {workerId: workerId, job: {class: job['class'], queue: job.queue}}) })","        this.multiWorker.on('reEnqueue', (workerId, queue, job, plugin) => { api.log('worker: reEnqueue job', this.workerLogging.reEnqueue, {workerId: workerId, plugin: plugin, job: {class: job['class'], queue: job.queue}}) })","        this.multiWorker.on('success', (workerId, queue, job, result) => { api.log(['worker: job success %s', queue], this.workerLogging.success, {workerId: workerId, job: {class: job['class'], queue: job.queue}, result: result}) })","        this.multiWorker.on('pause', (workerId) => { api.log('worker: paused', this.workerLogging.pause, {workerId: workerId}) })","","        this.multiWorker.on('failure', (workerId, queue, job, failure) => { api.exceptionHandlers.task(failure, queue, job, workerId) })","        this.multiWorker.on('error', (workerId, queue, job, error) => { api.exceptionHandlers.task(error, queue, job, workerId) })","","        // multiWorker emitters","        this.multiWorker.on('internalError', (error) => { api.log(error, this.workerLogging.internalError) })","        this.multiWorker.on('multiWorkerAction', (verb, delay) => { api.log(['*** checked for worker status: %s (event loop delay: %sms)', verb, delay], this.workerLogging.multiWorkerAction) })","","        if (api.config.tasks.minTaskProcessors > 0) {","          this.multiWorker.start(() => {","            if (typeof callback === 'function') { callback() }","          })","        } else {","          if (typeof callback === 'function') { callback() }","        }","      },","","      stopMultiWorker: function (callback) {","        if (this.multiWorker && api.config.tasks.minTaskProcessors > 0) {","          this.multiWorker.stop(() => {","            api.log('task workers stopped')","            callback()","          })","        } else {","          callback()","        }","      }","    }","","    next()","  },","","  start: function (api, next) {","    if (api.config.tasks.minTaskProcessors === 0 && api.config.tasks.maxTaskProcessors > 0) {","      api.config.tasks.minTaskProcessors = 1","    }","","    api.resque.startQueue(function () {","      api.resque.startScheduler(function () {","        api.resque.startMultiWorker(function () {","          next()","        })","      })","    })","  },","","  stop: function (api, next) {","    api.resque.stopScheduler(function () {","      api.resque.stopMultiWorker(function () {","        api.resque.stopQueue(function () {","          next()","        })","      })","    })","  }","}",""],"l":{"3":1,"5":1,"10":0,"12":0,"20":0,"21":0,"22":0,"24":0,"25":0,"28":0,"32":0,"36":0,"37":0,"38":0,"39":0,"40":0,"42":0,"43":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"54":0,"55":0,"58":0,"63":0,"64":0,"66":0,"67":0,"68":0,"74":0,"75":0,"76":0,"77":0,"79":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"100":0,"101":0,"104":0,"105":0,"107":0,"108":0,"109":0,"112":0,"117":0,"118":0,"119":0,"120":0,"123":0,"128":0,"132":0,"133":0,"136":0,"137":0,"138":0,"139":0,"146":0,"147":0,"148":0,"149":0}},"/home/travis/build/npmtest/node-npmtest-actionhero/node_modules/actionhero/initializers/servers.js":{"path":"/home/travis/build/npmtest/node-npmtest-actionhero/node_modules/actionhero/initializers/servers.js","s":{"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0,0],"11":[0,0]},"f":{"1":0,"2":0,"3":0},"fnMap":{"1":{"name":"(anonymous_1)","line":10,"loc":{"start":{"line":10,"column":14},"end":{"line":10,"column":35}}},"2":{"name":"(anonymous_2)","line":54,"loc":{"start":{"line":54,"column":9},"end":{"line":54,"column":30}}},"3":{"name":"(anonymous_3)","line":86,"loc":{"start":{"line":86,"column":8},"end":{"line":86,"column":29}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":28}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":30}},"3":{"start":{"line":6,"column":0},"end":{"line":104,"column":1}},"4":{"start":{"line":11,"column":4},"end":{"line":11,"column":20}},"5":{"start":{"line":12,"column":4},"end":{"line":12,"column":28}},"6":{"start":{"line":16,"column":4},"end":{"line":18,"column":5}},"7":{"start":{"line":20,"column":4},"end":{"line":25,"column":6}},"8":{"start":{"line":21,"column":6},"end":{"line":21,"column":25}},"9":{"start":{"line":22,"column":6},"end":{"line":24,"column":7}},"10":{"start":{"line":23,"column":8},"end":{"line":23,"column":29}},"11":{"start":{"line":27,"column":4},"end":{"line":27,"column":17}},"12":{"start":{"line":29,"column":4},"end":{"line":49,"column":6}},"13":{"start":{"line":30,"column":6},"end":{"line":48,"column":8}},"14":{"start":{"line":31,"column":8},"end":{"line":31,"column":37}},"15":{"start":{"line":32,"column":8},"end":{"line":32,"column":64}},"16":{"start":{"line":33,"column":8},"end":{"line":43,"column":9}},"17":{"start":{"line":34,"column":10},"end":{"line":34,"column":42}},"18":{"start":{"line":35,"column":10},"end":{"line":35,"column":54}},"19":{"start":{"line":36,"column":10},"end":{"line":42,"column":12}},"20":{"start":{"line":37,"column":12},"end":{"line":41,"column":14}},"21":{"start":{"line":38,"column":14},"end":{"line":38,"column":60}},"22":{"start":{"line":39,"column":14},"end":{"line":39,"column":70}},"23":{"start":{"line":40,"column":14},"end":{"line":40,"column":27}},"24":{"start":{"line":44,"column":8},"end":{"line":47,"column":10}},"25":{"start":{"line":45,"column":10},"end":{"line":45,"column":86}},"26":{"start":{"line":46,"column":10},"end":{"line":46,"column":32}},"27":{"start":{"line":51,"column":4},"end":{"line":51,"column":28}},"28":{"start":{"line":55,"column":4},"end":{"line":55,"column":17}},"29":{"start":{"line":56,"column":4},"end":{"line":81,"column":6}},"30":{"start":{"line":57,"column":6},"end":{"line":57,"column":50}},"31":{"start":{"line":58,"column":6},"end":{"line":80,"column":7}},"32":{"start":{"line":59,"column":8},"end":{"line":59,"column":24}},"33":{"start":{"line":60,"column":8},"end":{"line":60,"column":28}},"34":{"start":{"line":61,"column":8},"end":{"line":61,"column":42}},"35":{"start":{"line":62,"column":8},"end":{"line":62,"column":36}},"36":{"start":{"line":63,"column":8},"end":{"line":66,"column":9}},"37":{"start":{"line":64,"column":10},"end":{"line":64,"column":28}},"38":{"start":{"line":65,"column":10},"end":{"line":65,"column":65}},"39":{"start":{"line":67,"column":8},"end":{"line":70,"column":9}},"40":{"start":{"line":68,"column":10},"end":{"line":68,"column":26}},"41":{"start":{"line":69,"column":10},"end":{"line":69,"column":63}},"42":{"start":{"line":72,"column":8},"end":{"line":79,"column":10}},"43":{"start":{"line":73,"column":10},"end":{"line":73,"column":58}},"44":{"start":{"line":74,"column":10},"end":{"line":78,"column":12}},"45":{"start":{"line":75,"column":12},"end":{"line":75,"column":45}},"46":{"start":{"line":75,"column":25},"end":{"line":75,"column":44}},"47":{"start":{"line":76,"column":12},"end":{"line":76,"column":64}},"48":{"start":{"line":77,"column":12},"end":{"line":77,"column":25}},"49":{"start":{"line":83,"column":4},"end":{"line":83,"column":28}},"50":{"start":{"line":87,"column":4},"end":{"line":87,"column":17}},"51":{"start":{"line":88,"column":4},"end":{"line":100,"column":6}},"52":{"start":{"line":89,"column":6},"end":{"line":89,"column":50}},"53":{"start":{"line":90,"column":6},"end":{"line":99,"column":7}},"54":{"start":{"line":91,"column":8},"end":{"line":98,"column":10}},"55":{"start":{"line":92,"column":10},"end":{"line":92,"column":64}},"56":{"start":{"line":93,"column":10},"end":{"line":97,"column":12}},"57":{"start":{"line":94,"column":12},"end":{"line":94,"column":45}},"58":{"start":{"line":94,"column":25},"end":{"line":94,"column":44}},"59":{"start":{"line":95,"column":12},"end":{"line":95,"column":64}},"60":{"start":{"line":96,"column":12},"end":{"line":96,"column":25}},"61":{"start":{"line":102,"column":4},"end":{"line":102,"column":28}}},"branchMap":{"1":{"line":22,"type":"if","locations":[{"start":{"line":22,"column":6},"end":{"line":22,"column":6}},{"start":{"line":22,"column":6},"end":{"line":22,"column":6}}]},"2":{"line":33,"type":"if","locations":[{"start":{"line":33,"column":8},"end":{"line":33,"column":8}},{"start":{"line":33,"column":8},"end":{"line":33,"column":8}}]},"3":{"line":33,"type":"binary-expr","locations":[{"start":{"line":33,"column":12},"end":{"line":33,"column":42}},{"start":{"line":33,"column":46},"end":{"line":33,"column":93}}]},"4":{"line":58,"type":"if","locations":[{"start":{"line":58,"column":6},"end":{"line":58,"column":6}},{"start":{"line":58,"column":6},"end":{"line":58,"column":6}}]},"5":{"line":58,"type":"binary-expr","locations":[{"start":{"line":58,"column":10},"end":{"line":58,"column":16}},{"start":{"line":58,"column":20},"end":{"line":58,"column":51}}]},"6":{"line":63,"type":"if","locations":[{"start":{"line":63,"column":8},"end":{"line":63,"column":8}},{"start":{"line":63,"column":8},"end":{"line":63,"column":8}}]},"7":{"line":67,"type":"if","locations":[{"start":{"line":67,"column":8},"end":{"line":67,"column":8}},{"start":{"line":67,"column":8},"end":{"line":67,"column":8}}]},"8":{"line":75,"type":"if","locations":[{"start":{"line":75,"column":12},"end":{"line":75,"column":12}},{"start":{"line":75,"column":12},"end":{"line":75,"column":12}}]},"9":{"line":90,"type":"if","locations":[{"start":{"line":90,"column":6},"end":{"line":90,"column":6}},{"start":{"line":90,"column":6},"end":{"line":90,"column":6}}]},"10":{"line":90,"type":"binary-expr","locations":[{"start":{"line":90,"column":11},"end":{"line":90,"column":17}},{"start":{"line":90,"column":21},"end":{"line":90,"column":52}},{"start":{"line":90,"column":57},"end":{"line":90,"column":64}}]},"11":{"line":94,"type":"if","locations":[{"start":{"line":94,"column":12},"end":{"line":94,"column":12}},{"start":{"line":94,"column":12},"end":{"line":94,"column":12}}]}},"code":["'use strict'","","const path = require('path')","const async = require('async')","","module.exports = {","  startPriority: 900,","  stopPriority: 100,","  loadPriority: 599,","  initialize: function (api, next) {","    api.servers = {}","    api.servers.servers = {}","","    // Load the servers","","    let serverFolders = [","      path.resolve(path.join(__dirname, '/../servers'))","    ]","","    api.config.general.paths.server.forEach((p) => {","      p = path.resolve(p)","      if (serverFolders.indexOf(p) < 0) {","        serverFolders.push(p)","      }","    })","","    let jobs = []","","    serverFolders.forEach((p) => {","      api.utils.recursiveDirectoryGlob(p).forEach((f) => {","        let parts = f.split(/[/\\\\]+/)","        let serverName = parts[(parts.length - 1)].split('.')[0]","        if (api.config.servers[serverName] && api.config.servers[serverName].enabled === true) {","          let init = require(f).initialize","          let options = api.config.servers[serverName]","          jobs.push((done) => {","            init(api, options, (serverObject) => {","              api.servers.servers[serverName] = serverObject","              api.log(['Initialized server: %s', serverName], 'debug')","              return done()","            })","          })","        }","        api.watchFileAndAct(f, () => {","          api.log(['*** Rebooting due to server (%s) change ***', serverName], 'info')","          api.commands.restart()","        })","      })","    })","","    async.series(jobs, next)","  },","","  start: function (api, next) {","    let jobs = []","    Object.keys(api.servers.servers).forEach((serverName) => {","      let server = api.servers.servers[serverName]","      if (server && server.options.enabled === true) {","        let message = ''","        let messageArgs = []","        message += 'Starting server: `%s`'","        messageArgs.push(serverName)","        if (api.config.servers[serverName].bindIP) {","          message += ' @ %s'","          messageArgs.push(api.config.servers[serverName].bindIP)","        }","        if (api.config.servers[serverName].port) {","          message += ':%s'","          messageArgs.push(api.config.servers[serverName].port)","        }","","        jobs.push((done) => {","          api.log([message].concat(messageArgs), 'notice')","          server.start((error) => {","            if (error) { return done(error) }","            api.log(['Server started: %s', serverName], 'debug')","            return done()","          })","        })","      }","    })","","    async.series(jobs, next)","  },","","  stop: function (api, next) {","    let jobs = []","    Object.keys(api.servers.servers).forEach((serverName) => {","      let server = api.servers.servers[serverName]","      if ((server && server.options.enabled === true) || !server) {","        jobs.push((done) => {","          api.log(['Stopping server: %s', serverName], 'notice')","          server.stop((error) => {","            if (error) { return done(error) }","            api.log(['Server stopped: %s', serverName], 'debug')","            return done()","          })","        })","      }","    })","","    async.series(jobs, next)","  }","}",""],"l":{"3":1,"4":1,"6":1,"11":0,"12":0,"16":0,"20":0,"21":0,"22":0,"23":0,"27":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"44":0,"45":0,"46":0,"51":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"67":0,"68":0,"69":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"83":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"102":0}},"/home/travis/build/npmtest/node-npmtest-actionhero/node_modules/actionhero/initializers/specHelper.js":{"path":"/home/travis/build/npmtest/node-npmtest-actionhero/node_modules/actionhero/initializers/specHelper.js","s":{"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0},"b":{"1":[0,0],"2":[0,0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0},"fnMap":{"1":{"name":"(anonymous_1)","line":9,"loc":{"start":{"line":9,"column":14},"end":{"line":9,"column":35}}},"2":{"name":"(anonymous_2)","line":16,"loc":{"start":{"line":16,"column":34},"end":{"line":16,"column":64}}},"3":{"name":"(anonymous_3)","line":28,"loc":{"start":{"line":28,"column":23},"end":{"line":28,"column":39}}},"4":{"name":"(anonymous_4)","line":33,"loc":{"start":{"line":33,"column":22},"end":{"line":33,"column":38}}},"5":{"name":"(anonymous_5)","line":37,"loc":{"start":{"line":37,"column":29},"end":{"line":37,"column":74}}},"6":{"name":"(anonymous_6)","line":47,"loc":{"start":{"line":47,"column":26},"end":{"line":47,"column":81}}},"7":{"name":"(anonymous_7)","line":72,"loc":{"start":{"line":72,"column":25},"end":{"line":72,"column":37}}},"8":{"name":"(anonymous_8)","line":76,"loc":{"start":{"line":76,"column":32},"end":{"line":76,"column":54}}},"9":{"name":"(anonymous_9)","line":81,"loc":{"start":{"line":81,"column":36},"end":{"line":81,"column":52}}},"10":{"name":"(anonymous_10)","line":119,"loc":{"start":{"line":119,"column":34},"end":{"line":119,"column":46}}},"11":{"name":"(anonymous_11)","line":135,"loc":{"start":{"line":135,"column":33},"end":{"line":135,"column":68}}},"12":{"name":"(anonymous_12)","line":160,"loc":{"start":{"line":160,"column":37},"end":{"line":160,"column":59}}},"13":{"name":"(anonymous_13)","line":173,"loc":{"start":{"line":173,"column":31},"end":{"line":173,"column":65}}},"14":{"name":"(anonymous_14)","line":177,"loc":{"start":{"line":177,"column":35},"end":{"line":177,"column":69}}},"15":{"name":"(anonymous_15)","line":202,"loc":{"start":{"line":202,"column":9},"end":{"line":202,"column":30}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":28}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":33}},"3":{"start":{"line":6,"column":0},"end":{"line":214,"column":1}},"4":{"start":{"line":10,"column":4},"end":{"line":199,"column":5}},"5":{"start":{"line":11,"column":6},"end":{"line":13,"column":7}},"6":{"start":{"line":16,"column":6},"end":{"line":117,"column":7}},"7":{"start":{"line":17,"column":8},"end":{"line":17,"column":33}},"8":{"start":{"line":18,"column":8},"end":{"line":24,"column":9}},"9":{"start":{"line":26,"column":8},"end":{"line":26,"column":71}},"10":{"start":{"line":28,"column":8},"end":{"line":31,"column":9}},"11":{"start":{"line":29,"column":10},"end":{"line":29,"column":54}},"12":{"start":{"line":30,"column":10},"end":{"line":30,"column":16}},"13":{"start":{"line":33,"column":8},"end":{"line":35,"column":9}},"14":{"start":{"line":34,"column":10},"end":{"line":34,"column":16}},"15":{"start":{"line":37,"column":8},"end":{"line":45,"column":9}},"16":{"start":{"line":38,"column":10},"end":{"line":44,"column":12}},"17":{"start":{"line":39,"column":12},"end":{"line":39,"column":45}},"18":{"start":{"line":40,"column":12},"end":{"line":43,"column":13}},"19":{"start":{"line":41,"column":14},"end":{"line":41,"column":75}},"20":{"start":{"line":42,"column":14},"end":{"line":42,"column":61}},"21":{"start":{"line":47,"column":8},"end":{"line":70,"column":9}},"22":{"start":{"line":48,"column":10},"end":{"line":48,"column":26}},"23":{"start":{"line":49,"column":10},"end":{"line":54,"column":11}},"24":{"start":{"line":56,"column":10},"end":{"line":69,"column":11}},"25":{"start":{"line":57,"column":12},"end":{"line":65,"column":13}},"26":{"start":{"line":58,"column":14},"end":{"line":58,"column":60}},"27":{"start":{"line":58,"column":45},"end":{"line":58,"column":58}},"28":{"start":{"line":59,"column":14},"end":{"line":62,"column":16}},"29":{"start":{"line":60,"column":16},"end":{"line":60,"column":42}},"30":{"start":{"line":61,"column":16},"end":{"line":61,"column":81}},"31":{"start":{"line":64,"column":14},"end":{"line":64,"column":79}},"32":{"start":{"line":67,"column":12},"end":{"line":67,"column":33}},"33":{"start":{"line":68,"column":12},"end":{"line":68,"column":77}},"34":{"start":{"line":72,"column":8},"end":{"line":74,"column":9}},"35":{"start":{"line":76,"column":8},"end":{"line":79,"column":10}},"36":{"start":{"line":77,"column":10},"end":{"line":77,"column":34}},"37":{"start":{"line":78,"column":10},"end":{"line":78,"column":41}},"38":{"start":{"line":81,"column":8},"end":{"line":114,"column":10}},"39":{"start":{"line":82,"column":10},"end":{"line":109,"column":11}},"40":{"start":{"line":83,"column":12},"end":{"line":85,"column":13}},"41":{"start":{"line":84,"column":14},"end":{"line":84,"column":99}},"42":{"start":{"line":87,"column":12},"end":{"line":89,"column":13}},"43":{"start":{"line":88,"column":14},"end":{"line":88,"column":105}},"44":{"start":{"line":91,"column":12},"end":{"line":108,"column":13}},"45":{"start":{"line":92,"column":14},"end":{"line":92,"column":60}},"46":{"start":{"line":94,"column":14},"end":{"line":97,"column":15}},"47":{"start":{"line":99,"column":14},"end":{"line":103,"column":15}},"48":{"start":{"line":105,"column":14},"end":{"line":107,"column":15}},"49":{"start":{"line":106,"column":16},"end":{"line":106,"column":85}},"50":{"start":{"line":111,"column":10},"end":{"line":113,"column":11}},"51":{"start":{"line":112,"column":12},"end":{"line":112,"column":81}},"52":{"start":{"line":116,"column":8},"end":{"line":116,"column":20}},"53":{"start":{"line":119,"column":6},"end":{"line":129,"column":7}},"54":{"start":{"line":120,"column":8},"end":{"line":120,"column":26}},"55":{"start":{"line":121,"column":8},"end":{"line":126,"column":10}},"56":{"start":{"line":128,"column":8},"end":{"line":128,"column":46}},"57":{"start":{"line":131,"column":6},"end":{"line":131,"column":59}},"58":{"start":{"line":135,"column":6},"end":{"line":157,"column":7}},"59":{"start":{"line":136,"column":8},"end":{"line":136,"column":22}},"60":{"start":{"line":137,"column":8},"end":{"line":140,"column":9}},"61":{"start":{"line":138,"column":10},"end":{"line":138,"column":22}},"62":{"start":{"line":139,"column":10},"end":{"line":139,"column":20}},"63":{"start":{"line":141,"column":8},"end":{"line":146,"column":9}},"64":{"start":{"line":142,"column":10},"end":{"line":142,"column":28}},"65":{"start":{"line":144,"column":10},"end":{"line":144,"column":54}},"66":{"start":{"line":145,"column":10},"end":{"line":145,"column":35}},"67":{"start":{"line":147,"column":8},"end":{"line":147,"column":45}},"68":{"start":{"line":149,"column":8},"end":{"line":149,"column":33}},"69":{"start":{"line":150,"column":8},"end":{"line":152,"column":9}},"70":{"start":{"line":151,"column":10},"end":{"line":151,"column":70}},"71":{"start":{"line":154,"column":8},"end":{"line":156,"column":10}},"72":{"start":{"line":155,"column":10},"end":{"line":155,"column":66}},"73":{"start":{"line":160,"column":6},"end":{"line":170,"column":7}},"74":{"start":{"line":161,"column":8},"end":{"line":161,"column":56}},"75":{"start":{"line":162,"column":8},"end":{"line":162,"column":37}},"76":{"start":{"line":164,"column":8},"end":{"line":164,"column":33}},"77":{"start":{"line":165,"column":8},"end":{"line":167,"column":9}},"78":{"start":{"line":166,"column":10},"end":{"line":166,"column":70}},"79":{"start":{"line":169,"column":8},"end":{"line":169,"column":62}},"80":{"start":{"line":173,"column":6},"end":{"line":175,"column":7}},"81":{"start":{"line":174,"column":8},"end":{"line":174,"column":56}},"82":{"start":{"line":177,"column":6},"end":{"line":194,"column":7}},"83":{"start":{"line":178,"column":8},"end":{"line":181,"column":9}},"84":{"start":{"line":183,"column":8},"end":{"line":183,"column":59}},"85":{"start":{"line":184,"column":8},"end":{"line":193,"column":10}},"86":{"start":{"line":185,"column":10},"end":{"line":187,"column":11}},"87":{"start":{"line":186,"column":12},"end":{"line":186,"column":30}},"88":{"start":{"line":189,"column":10},"end":{"line":192,"column":12}},"89":{"start":{"line":190,"column":12},"end":{"line":190,"column":24}},"90":{"start":{"line":191,"column":12},"end":{"line":191,"column":31}},"91":{"start":{"line":196,"column":6},"end":{"line":196,"column":12}},"92":{"start":{"line":198,"column":6},"end":{"line":198,"column":12}},"93":{"start":{"line":203,"column":4},"end":{"line":212,"column":5}},"94":{"start":{"line":204,"column":6},"end":{"line":209,"column":8}},"95":{"start":{"line":205,"column":8},"end":{"line":205,"column":53}},"96":{"start":{"line":206,"column":8},"end":{"line":208,"column":10}},"97":{"start":{"line":207,"column":10},"end":{"line":207,"column":16}},"98":{"start":{"line":211,"column":6},"end":{"line":211,"column":12}}},"branchMap":{"1":{"line":10,"type":"if","locations":[{"start":{"line":10,"column":4},"end":{"line":10,"column":4}},{"start":{"line":10,"column":4},"end":{"line":10,"column":4}}]},"2":{"line":10,"type":"binary-expr","locations":[{"start":{"line":10,"column":8},"end":{"line":10,"column":26}},{"start":{"line":10,"column":30},"end":{"line":10,"column":63}},{"start":{"line":10,"column":67},"end":{"line":10,"column":98}}]},"3":{"line":40,"type":"if","locations":[{"start":{"line":40,"column":12},"end":{"line":40,"column":12}},{"start":{"line":40,"column":12},"end":{"line":40,"column":12}}]},"4":{"line":57,"type":"if","locations":[{"start":{"line":57,"column":12},"end":{"line":57,"column":12}},{"start":{"line":57,"column":12},"end":{"line":57,"column":12}}]},"5":{"line":82,"type":"if","locations":[{"start":{"line":82,"column":10},"end":{"line":82,"column":10}},{"start":{"line":82,"column":10},"end":{"line":82,"column":10}}]},"6":{"line":82,"type":"binary-expr","locations":[{"start":{"line":82,"column":14},"end":{"line":82,"column":47}},{"start":{"line":82,"column":51},"end":{"line":82,"column":79}}]},"7":{"line":83,"type":"if","locations":[{"start":{"line":83,"column":12},"end":{"line":83,"column":12}},{"start":{"line":83,"column":12},"end":{"line":83,"column":12}}]},"8":{"line":87,"type":"if","locations":[{"start":{"line":87,"column":12},"end":{"line":87,"column":12}},{"start":{"line":87,"column":12},"end":{"line":87,"column":12}}]},"9":{"line":91,"type":"if","locations":[{"start":{"line":91,"column":12},"end":{"line":91,"column":12}},{"start":{"line":91,"column":12},"end":{"line":91,"column":12}}]},"10":{"line":111,"type":"if","locations":[{"start":{"line":111,"column":10},"end":{"line":111,"column":10}},{"start":{"line":111,"column":10},"end":{"line":111,"column":10}}]},"11":{"line":137,"type":"if","locations":[{"start":{"line":137,"column":8},"end":{"line":137,"column":8}},{"start":{"line":137,"column":8},"end":{"line":137,"column":8}}]},"12":{"line":137,"type":"binary-expr","locations":[{"start":{"line":137,"column":12},"end":{"line":137,"column":39}},{"start":{"line":137,"column":43},"end":{"line":137,"column":48}}]},"13":{"line":141,"type":"if","locations":[{"start":{"line":141,"column":8},"end":{"line":141,"column":8}},{"start":{"line":141,"column":8},"end":{"line":141,"column":8}}]},"14":{"line":141,"type":"binary-expr","locations":[{"start":{"line":141,"column":12},"end":{"line":141,"column":20}},{"start":{"line":141,"column":24},"end":{"line":141,"column":51}}]},"15":{"line":150,"type":"if","locations":[{"start":{"line":150,"column":8},"end":{"line":150,"column":8}},{"start":{"line":150,"column":8},"end":{"line":150,"column":8}}]},"16":{"line":165,"type":"if","locations":[{"start":{"line":165,"column":8},"end":{"line":165,"column":8}},{"start":{"line":165,"column":8},"end":{"line":165,"column":8}}]},"17":{"line":180,"type":"binary-expr","locations":[{"start":{"line":180,"column":18},"end":{"line":180,"column":41}},{"start":{"line":180,"column":45},"end":{"line":180,"column":56}}]},"18":{"line":185,"type":"if","locations":[{"start":{"line":185,"column":10},"end":{"line":185,"column":10}},{"start":{"line":185,"column":10},"end":{"line":185,"column":10}}]},"19":{"line":203,"type":"if","locations":[{"start":{"line":203,"column":4},"end":{"line":203,"column":4}},{"start":{"line":203,"column":4},"end":{"line":203,"column":4}}]},"20":{"line":203,"type":"binary-expr","locations":[{"start":{"line":203,"column":8},"end":{"line":203,"column":26}},{"start":{"line":203,"column":30},"end":{"line":203,"column":63}},{"start":{"line":203,"column":67},"end":{"line":203,"column":98}}]}},"code":["'use strict'","","const uuid = require('uuid')","const NR = require('node-resque')","","module.exports = {","  startPriority: 901,","  loadPriority: 900,","  initialize: function (api, next) {","    if (api.env === 'test' || process.env.SPECHELPER === 'true' || process.env.SPECHELPER === true) {","      api.specHelper = {","        returnMetadata: true","      }","","      // create a test 'server' to run actions","      api.specHelper.initialize = function (api, options, next) {","        const type = 'testServer'","        const attributes = {","          canChat: true,","          logConnections: false,","          logExits: false,","          sendWelcomeMessage: true,","          verbs: api.connections.allowedVerbs","        }","","        const server = new api.GenericServer(type, options, attributes)","","        server.start = function (next) {","          api.log('loading the testServer', 'warning')","          next()","        }","","        server.stop = function (next) {","          next()","        }","","        server.sendMessage = function (connection, message, messageCount) {","          process.nextTick(() => {","            connection.messages.push(message)","            if (typeof connection.actionCallbacks[messageCount] === 'function') {","              connection.actionCallbacks[messageCount](message, connection)","              delete connection.actionCallbacks[messageCount]","            }","          })","        }","","        server.sendFile = function (connection, error, fileStream, mime, length) {","          let content = ''","          let response = {","            error: error,","            content: null,","            mime: mime,","            length: length","          }","","          try {","            if (!error) {","              fileStream.on('data', (d) => { content += d })","              fileStream.on('end', () => {","                response.content = content","                server.sendMessage(connection, response, connection.messageCount)","              })","            } else {","              server.sendMessage(connection, response, connection.messageCount)","            }","          } catch (e) {","            api.log(e, 'warning')","            server.sendMessage(connection, response, connection.messageCount)","          }","        }","","        server.goodbye = function () {","          //","        }","","        server.on('connection', function (connection) {","          connection.messages = []","          connection.actionCallbacks = {}","        })","","        server.on('actionComplete', function (data) {","          if (typeof data.response === 'string' || Array.isArray(data.response)) {","            if (data.response.error) {","              data.response = api.config.errors.serializers.servers.specHelper(data.response.error)","            }","          } else {","            if (data.response.error) {","              data.response.error = api.config.errors.serializers.servers.specHelper(data.response.error)","            }","","            if (api.specHelper.returnMetadata) {","              data.response.messageCount = data.messageCount","","              data.response.serverInformation = {","                serverName: api.config.general.serverName,","                apiVersion: api.config.general.apiVersion","              }","","              data.response.requesterInformation = {","                id: data.connection.id,","                remoteIP: data.connection.remoteIP,","                receivedParams: {}","              }","","              for (let k in data.params) {","                data.response.requesterInformation.receivedParams[k] = data.params[k]","              }","            }","          }","","          if (data.toRender === true) {","            server.sendMessage(data.connection, data.response, data.messageCount)","          }","        })","","        next(server)","      }","","      api.specHelper.connection = function () {","        let id = uuid.v4()","        api.servers.servers.testServer.buildConnection({","          id: id,","          rawConnection: {},","          remoteAddress: 'testServer',","          remotePort: 0","        })","","        return api.connections.connections[id]","      }","","      api.specHelper.Connection = api.specHelper.connection","","      // create helpers to run an action","      // data can be a params hash or a connection","      api.specHelper.runAction = function (actionName, input, next) {","        let connection","        if (typeof input === 'function' && !next) {","          next = input","          input = {}","        }","        if (input.id && input.type === 'testServer') {","          connection = input","        } else {","          connection = new api.specHelper.Connection()","          connection.params = input","        }","        connection.params.action = actionName","","        connection.messageCount++","        if (typeof next === 'function') {","          connection.actionCallbacks[(connection.messageCount)] = next","        }","","        process.nextTick(() => {","          api.servers.servers.testServer.processAction(connection)","        })","      }","","      // helpers to get files","      api.specHelper.getStaticFile = function (file, next) {","        let connection = new api.specHelper.Connection()","        connection.params.file = file","","        connection.messageCount++","        if (typeof next === 'function') {","          connection.actionCallbacks[(connection.messageCount)] = next","        }","","        api.servers.servers.testServer.processFile(connection)","      }","","      // create helpers to run a task","      api.specHelper.runTask = function (taskName, params, next) {","        api.tasks.tasks[taskName].run(api, params, next)","      }","","      api.specHelper.runFullTask = function (taskName, params, next) {","        let options = {","          connection: api.redis.clients.tasks,","          queues: api.config.tasks.queues || ['default']","        }","","        let worker = new NR.worker(options, api.tasks.jobs) // eslint-disable-line","        worker.connect((error) => {","          if (error) {","            return next(error)","          }","","          worker.performInline(taskName, params, (error, result) => {","            worker.end()","            next(error, result)","          })","        })","      }","","      next()","    } else {","      next()","    }","  },","","  start: function (api, next) {","    if (api.env === 'test' || process.env.SPECHELPER === 'true' || process.env.SPECHELPER === true) {","      api.specHelper.initialize(api, {}, (serverObject) => {","        api.servers.servers.testServer = serverObject","        api.servers.servers.testServer.start(() => {","          next()","        })","      })","    } else {","      next()","    }","  }","}",""],"l":{"3":1,"4":1,"6":1,"10":0,"11":0,"16":0,"17":0,"18":0,"26":0,"28":0,"29":0,"30":0,"33":0,"34":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"47":0,"48":0,"49":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"64":0,"67":0,"68":0,"72":0,"76":0,"77":0,"78":0,"81":0,"82":0,"83":0,"84":0,"87":0,"88":0,"91":0,"92":0,"94":0,"99":0,"105":0,"106":0,"111":0,"112":0,"116":0,"119":0,"120":0,"121":0,"128":0,"131":0,"135":0,"136":0,"137":0,"138":0,"139":0,"141":0,"142":0,"144":0,"145":0,"147":0,"149":0,"150":0,"151":0,"154":0,"155":0,"160":0,"161":0,"162":0,"164":0,"165":0,"166":0,"169":0,"173":0,"174":0,"177":0,"178":0,"183":0,"184":0,"185":0,"186":0,"189":0,"190":0,"191":0,"196":0,"198":0,"203":0,"204":0,"205":0,"206":0,"207":0,"211":0}},"/home/travis/build/npmtest/node-npmtest-actionhero/node_modules/actionhero/initializers/staticFile.js":{"path":"/home/travis/build/npmtest/node-npmtest-actionhero/node_modules/actionhero/initializers/staticFile.js","s":{"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0},"fnMap":{"1":{"name":"(anonymous_1)","line":9,"loc":{"start":{"line":9,"column":14},"end":{"line":9,"column":35}}},"2":{"name":"(anonymous_2)","line":14,"loc":{"start":{"line":14,"column":18},"end":{"line":14,"column":49}}},"3":{"name":"(anonymous_3)","line":25,"loc":{"start":{"line":25,"column":11},"end":{"line":25,"column":52}}},"4":{"name":"(anonymous_4)","line":52,"loc":{"start":{"line":52,"column":16},"end":{"line":52,"column":54}}},"5":{"name":"(anonymous_5)","line":77,"loc":{"start":{"line":77,"column":24},"end":{"line":77,"column":70}}},"6":{"name":"(anonymous_6)","line":83,"loc":{"start":{"line":83,"column":22},"end":{"line":83,"column":48}}},"7":{"name":"(anonymous_7)","line":92,"loc":{"start":{"line":92,"column":32},"end":{"line":92,"column":59}}},"8":{"name":"(anonymous_8)","line":109,"loc":{"start":{"line":109,"column":18},"end":{"line":109,"column":73}}},"9":{"name":"(anonymous_9)","line":124,"loc":{"start":{"line":124,"column":49},"end":{"line":124,"column":62}}},"10":{"name":"(anonymous_10)","line":134,"loc":{"start":{"line":134,"column":45},"end":{"line":134,"column":61}}},"11":{"name":"(anonymous_11)","line":138,"loc":{"start":{"line":138,"column":54},"end":{"line":138,"column":85}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":24}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":28}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":28}},"4":{"start":{"line":7,"column":0},"end":{"line":153,"column":1}},"5":{"start":{"line":10,"column":4},"end":{"line":120,"column":5}},"6":{"start":{"line":15,"column":8},"end":{"line":15,"column":37}},"7":{"start":{"line":15,"column":24},"end":{"line":15,"column":36}},"8":{"start":{"line":16,"column":8},"end":{"line":20,"column":9}},"9":{"start":{"line":17,"column":10},"end":{"line":17,"column":21}},"10":{"start":{"line":19,"column":10},"end":{"line":19,"column":56}},"11":{"start":{"line":26,"column":8},"end":{"line":26,"column":37}},"12":{"start":{"line":26,"column":24},"end":{"line":26,"column":36}},"13":{"start":{"line":27,"column":8},"end":{"line":49,"column":9}},"14":{"start":{"line":28,"column":10},"end":{"line":28,"column":100}},"15":{"start":{"line":30,"column":10},"end":{"line":30,"column":18}},"16":{"start":{"line":31,"column":10},"end":{"line":35,"column":11}},"17":{"start":{"line":32,"column":12},"end":{"line":32,"column":112}},"18":{"start":{"line":34,"column":12},"end":{"line":34,"column":41}},"19":{"start":{"line":37,"column":10},"end":{"line":48,"column":11}},"20":{"start":{"line":38,"column":12},"end":{"line":38,"column":65}},"21":{"start":{"line":40,"column":12},"end":{"line":47,"column":14}},"22":{"start":{"line":41,"column":14},"end":{"line":41,"column":40}},"23":{"start":{"line":41,"column":27},"end":{"line":41,"column":39}},"24":{"start":{"line":42,"column":14},"end":{"line":46,"column":15}},"25":{"start":{"line":43,"column":16},"end":{"line":43,"column":61}},"26":{"start":{"line":45,"column":16},"end":{"line":45,"column":69}},"27":{"start":{"line":53,"column":8},"end":{"line":53,"column":24}},"28":{"start":{"line":54,"column":8},"end":{"line":74,"column":10}},"29":{"start":{"line":55,"column":10},"end":{"line":73,"column":11}},"30":{"start":{"line":56,"column":12},"end":{"line":56,"column":115}},"31":{"start":{"line":58,"column":12},"end":{"line":58,"column":40}},"32":{"start":{"line":59,"column":12},"end":{"line":59,"column":35}},"33":{"start":{"line":60,"column":12},"end":{"line":60,"column":54}},"34":{"start":{"line":61,"column":12},"end":{"line":61,"column":44}},"35":{"start":{"line":62,"column":12},"end":{"line":62,"column":38}},"36":{"start":{"line":63,"column":12},"end":{"line":66,"column":14}},"37":{"start":{"line":64,"column":14},"end":{"line":64,"column":57}},"38":{"start":{"line":65,"column":14},"end":{"line":65,"column":71}},"39":{"start":{"line":67,"column":12},"end":{"line":69,"column":14}},"40":{"start":{"line":68,"column":14},"end":{"line":68,"column":28}},"41":{"start":{"line":70,"column":12},"end":{"line":72,"column":14}},"42":{"start":{"line":71,"column":14},"end":{"line":71,"column":80}},"43":{"start":{"line":78,"column":8},"end":{"line":78,"column":50}},"44":{"start":{"line":79,"column":8},"end":{"line":79,"column":69}},"45":{"start":{"line":80,"column":8},"end":{"line":80,"column":142}},"46":{"start":{"line":84,"column":8},"end":{"line":106,"column":10}},"47":{"start":{"line":85,"column":10},"end":{"line":105,"column":11}},"48":{"start":{"line":86,"column":12},"end":{"line":86,"column":39}},"49":{"start":{"line":88,"column":12},"end":{"line":104,"column":13}},"50":{"start":{"line":89,"column":14},"end":{"line":89,"column":79}},"51":{"start":{"line":90,"column":14},"end":{"line":90,"column":64}},"52":{"start":{"line":91,"column":19},"end":{"line":104,"column":13}},"53":{"start":{"line":92,"column":14},"end":{"line":99,"column":16}},"54":{"start":{"line":93,"column":16},"end":{"line":98,"column":17}},"55":{"start":{"line":94,"column":18},"end":{"line":94,"column":45}},"56":{"start":{"line":96,"column":18},"end":{"line":96,"column":53}},"57":{"start":{"line":97,"column":18},"end":{"line":97,"column":67}},"58":{"start":{"line":100,"column":19},"end":{"line":104,"column":13}},"59":{"start":{"line":101,"column":14},"end":{"line":101,"column":40}},"60":{"start":{"line":103,"column":14},"end":{"line":103,"column":41}},"61":{"start":{"line":110,"column":8},"end":{"line":117,"column":10}},"62":{"start":{"line":123,"column":4},"end":{"line":127,"column":5}},"63":{"start":{"line":124,"column":6},"end":{"line":126,"column":8}},"64":{"start":{"line":125,"column":8},"end":{"line":125,"column":62}},"65":{"start":{"line":130,"column":4},"end":{"line":148,"column":5}},"66":{"start":{"line":131,"column":6},"end":{"line":147,"column":8}},"67":{"start":{"line":132,"column":8},"end":{"line":132,"column":49}},"68":{"start":{"line":133,"column":8},"end":{"line":146,"column":9}},"69":{"start":{"line":134,"column":10},"end":{"line":145,"column":12}},"70":{"start":{"line":135,"column":12},"end":{"line":135,"column":39}},"71":{"start":{"line":136,"column":12},"end":{"line":136,"column":31}},"72":{"start":{"line":137,"column":12},"end":{"line":144,"column":13}},"73":{"start":{"line":138,"column":14},"end":{"line":143,"column":16}},"74":{"start":{"line":139,"column":16},"end":{"line":139,"column":113}},"75":{"start":{"line":140,"column":16},"end":{"line":142,"column":17}},"76":{"start":{"line":141,"column":18},"end":{"line":141,"column":74}},"77":{"start":{"line":150,"column":4},"end":{"line":150,"column":106}},"78":{"start":{"line":151,"column":4},"end":{"line":151,"column":10}}},"branchMap":{"1":{"line":15,"type":"if","locations":[{"start":{"line":15,"column":8},"end":{"line":15,"column":8}},{"start":{"line":15,"column":8},"end":{"line":15,"column":8}}]},"2":{"line":16,"type":"if","locations":[{"start":{"line":16,"column":8},"end":{"line":16,"column":8}},{"start":{"line":16,"column":8},"end":{"line":16,"column":8}}]},"3":{"line":16,"type":"binary-expr","locations":[{"start":{"line":16,"column":12},"end":{"line":16,"column":55}},{"start":{"line":16,"column":59},"end":{"line":16,"column":107}}]},"4":{"line":26,"type":"if","locations":[{"start":{"line":26,"column":8},"end":{"line":26,"column":8}},{"start":{"line":26,"column":8},"end":{"line":26,"column":8}}]},"5":{"line":27,"type":"if","locations":[{"start":{"line":27,"column":8},"end":{"line":27,"column":8}},{"start":{"line":27,"column":8},"end":{"line":27,"column":8}}]},"6":{"line":27,"type":"binary-expr","locations":[{"start":{"line":27,"column":12},"end":{"line":27,"column":35}},{"start":{"line":27,"column":39},"end":{"line":27,"column":86}}]},"7":{"line":31,"type":"if","locations":[{"start":{"line":31,"column":10},"end":{"line":31,"column":10}},{"start":{"line":31,"column":10},"end":{"line":31,"column":10}}]},"8":{"line":37,"type":"if","locations":[{"start":{"line":37,"column":10},"end":{"line":37,"column":10}},{"start":{"line":37,"column":10},"end":{"line":37,"column":10}}]},"9":{"line":41,"type":"if","locations":[{"start":{"line":41,"column":14},"end":{"line":41,"column":14}},{"start":{"line":41,"column":14},"end":{"line":41,"column":14}}]},"10":{"line":42,"type":"if","locations":[{"start":{"line":42,"column":14},"end":{"line":42,"column":14}},{"start":{"line":42,"column":14},"end":{"line":42,"column":14}}]},"11":{"line":55,"type":"if","locations":[{"start":{"line":55,"column":10},"end":{"line":55,"column":10}},{"start":{"line":55,"column":10},"end":{"line":55,"column":10}}]},"12":{"line":85,"type":"if","locations":[{"start":{"line":85,"column":10},"end":{"line":85,"column":10}},{"start":{"line":85,"column":10},"end":{"line":85,"column":10}}]},"13":{"line":88,"type":"if","locations":[{"start":{"line":88,"column":12},"end":{"line":88,"column":12}},{"start":{"line":88,"column":12},"end":{"line":88,"column":12}}]},"14":{"line":91,"type":"if","locations":[{"start":{"line":91,"column":19},"end":{"line":91,"column":19}},{"start":{"line":91,"column":19},"end":{"line":91,"column":19}}]},"15":{"line":93,"type":"if","locations":[{"start":{"line":93,"column":16},"end":{"line":93,"column":16}},{"start":{"line":93,"column":16},"end":{"line":93,"column":16}}]},"16":{"line":100,"type":"if","locations":[{"start":{"line":100,"column":19},"end":{"line":100,"column":19}},{"start":{"line":100,"column":19},"end":{"line":100,"column":19}}]},"17":{"line":123,"type":"if","locations":[{"start":{"line":123,"column":4},"end":{"line":123,"column":4}},{"start":{"line":123,"column":4},"end":{"line":123,"column":4}}]},"18":{"line":130,"type":"if","locations":[{"start":{"line":130,"column":4},"end":{"line":130,"column":4}},{"start":{"line":130,"column":4},"end":{"line":130,"column":4}}]},"19":{"line":133,"type":"if","locations":[{"start":{"line":133,"column":8},"end":{"line":133,"column":8}},{"start":{"line":133,"column":8},"end":{"line":133,"column":8}}]},"20":{"line":137,"type":"if","locations":[{"start":{"line":137,"column":12},"end":{"line":137,"column":12}},{"start":{"line":137,"column":12},"end":{"line":137,"column":12}}]},"21":{"line":137,"type":"binary-expr","locations":[{"start":{"line":137,"column":16},"end":{"line":137,"column":52}},{"start":{"line":137,"column":56},"end":{"line":137,"column":125}}]},"22":{"line":140,"type":"if","locations":[{"start":{"line":140,"column":16},"end":{"line":140,"column":16}},{"start":{"line":140,"column":16},"end":{"line":140,"column":16}}]},"23":{"line":140,"type":"binary-expr","locations":[{"start":{"line":140,"column":20},"end":{"line":140,"column":54}},{"start":{"line":140,"column":58},"end":{"line":140,"column":121}}]}},"code":["'use strict'","","const fs = require('fs')","const path = require('path')","const Mime = require('mime')","","module.exports = {","  loadPriority: 510,","  initialize: function (api, next) {","    api.staticFile = {","","      searchLoactions: [],","","      searchPath: function (connection, counter) {","        if (!counter) { counter = 0 }","        if (api.staticFile.searchLoactions.length === 0 || counter >= api.staticFile.searchLoactions.length) {","          return null","        } else {","          return api.staticFile.searchLoactions[counter]","        }","      },","","      // connection.params.file should be set","      // callback is of the form: callback(connection, error, fileStream, mime, length)","      get: function (connection, callback, counter) {","        if (!counter) { counter = 0 }","        if (!connection.params.file || !api.staticFile.searchPath(connection, counter)) {","          this.sendFileNotFound(connection, api.config.errors.fileNotProvided(connection), callback)","        } else {","          let file","          if (!path.isAbsolute(connection.params.file)) {","            file = path.normalize(api.staticFile.searchPath(connection, counter) + '/' + connection.params.file)","          } else {","            file = connection.params.file","          }","","          if (file.indexOf(path.normalize(api.staticFile.searchPath(connection, counter))) !== 0) {","            api.staticFile.get(connection, callback, counter + 1)","          } else {","            this.checkExistence(file, (error, exists, truePath) => {","              if (error) { throw error }","              if (exists) {","                this.sendFile(truePath, connection, callback)","              } else {","                api.staticFile.get(connection, callback, counter + 1)","              }","            })","          }","        }","      },","","      sendFile: function (file, connection, callback) {","        let lastModified","        fs.stat(file, (error, stats) => {","          if (error) {","            this.sendFileNotFound(connection, api.config.errors.fileReadError(connection, String(error)), callback)","          } else {","            let mime = Mime.lookup(file)","            let length = stats.size","            let fileStream = fs.createReadStream(file)","            let start = new Date().getTime()","            lastModified = stats.mtime","            fileStream.on('end', () => {","              let duration = new Date().getTime() - start","              this.logRequest(file, connection, length, duration, true)","            })","            fileStream.on('error', (error) => {","              api.log(error)","            })","            fileStream.on('open', () => {","              callback(connection, null, fileStream, mime, length, lastModified)","            })","          }","        })","      },","","      sendFileNotFound: function (connection, errorMessage, callback) {","        connection.error = new Error(errorMessage)","        this.logRequest('{not found}', connection, null, null, false)","        callback(connection, api.config.errors.fileNotFound(connection), null, 'text/html', api.config.errors.fileNotFound(connection).length)","      },","","      checkExistence: function (file, callback) {","        fs.stat(file, (error, stats) => {","          if (error) {","            callback(null, false, file)","          } else {","            if (stats.isDirectory()) {","              let indexPath = file + '/' + api.config.general.directoryFileType","              api.staticFile.checkExistence(indexPath, callback)","            } else if (stats.isSymbolicLink()) {","              fs.readLink(file, function (error, truePath) {","                if (error) {","                  callback(null, false, file)","                } else {","                  truePath = path.normalize(truePath)","                  api.staticFile.checkExistence(truePath, callback)","                }","              })","            } else if (stats.isFile()) {","              callback(null, true, file)","            } else {","              callback(null, false, file)","            }","          }","        })","      },","","      logRequest: function (file, connection, length, duration, success) {","        api.log(['[ file @ %s ]', connection.type], api.config.general.fileRequestLogLevel, {","          to: connection.remoteIP,","          file: file,","          requestedFile: connection.params.file,","          size: length,","          duration: duration,","          success: success","        })","      }","","    }","","    // load in the explicit public paths first","    if (api.config.general.paths !== undefined) {","      api.config.general.paths['public'].forEach(function (p) {","        api.staticFile.searchLoactions.push(path.normalize(p))","      })","    }","","    // source the .linked paths from plugins","    if (api.config.general.paths !== undefined) {","      api.config.general.paths['public'].forEach((p) => {","        let pluginPath = p + path.sep + 'plugins'","        if (fs.existsSync(pluginPath)) {","          fs.readdirSync(pluginPath).forEach(function (file) {","            let parts = file.split('.')","            let name = parts[0]","            if (parts[(parts.length - 1)] === 'link' && fs.readFileSync(pluginPath + path.sep + file).toString() === 'public') {","              api.config.general.paths.plugin.forEach(function (potentialPluginPath) {","                potentialPluginPath = path.normalize(potentialPluginPath + path.sep + name + path.sep + 'public')","                if (fs.existsSync(potentialPluginPath) && api.staticFile.searchLoactions.indexOf(potentialPluginPath) < 0) {","                  api.staticFile.searchLoactions.push(potentialPluginPath)","                }","              })","            }","          })","        }","      })","    }","","    api.log('Static files will be served from these directories', 'debug', api.staticFile.searchLoactions)","    next()","  }","}",""],"l":{"3":1,"4":1,"5":1,"7":1,"10":0,"15":0,"16":0,"17":0,"19":0,"26":0,"27":0,"28":0,"30":0,"31":0,"32":0,"34":0,"37":0,"38":0,"40":0,"41":0,"42":0,"43":0,"45":0,"53":0,"54":0,"55":0,"56":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"67":0,"68":0,"70":0,"71":0,"78":0,"79":0,"80":0,"84":0,"85":0,"86":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"96":0,"97":0,"100":0,"101":0,"103":0,"110":0,"123":0,"124":0,"125":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":0,"138":0,"139":0,"140":0,"141":0,"150":0,"151":0}},"/home/travis/build/npmtest/node-npmtest-actionhero/node_modules/actionhero/initializers/utils.js":{"path":"/home/travis/build/npmtest/node-npmtest-actionhero/node_modules/actionhero/initializers/utils.js","s":{"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":1,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":0,"138":0,"139":0,"140":0,"141":0,"142":0,"143":0,"144":0,"145":0,"146":0,"147":0,"148":0,"149":0,"150":0,"151":0,"152":0,"153":0,"154":0,"155":0,"156":0,"157":0,"158":0,"159":0,"160":0,"161":0,"162":0,"163":0,"164":0,"165":0,"166":0,"167":0,"168":0,"169":0,"170":0,"171":0,"172":0,"173":0,"174":0,"175":0,"176":0,"177":0,"178":0,"179":0,"180":0,"181":0,"182":0,"183":0,"184":0,"185":0,"186":0,"187":0,"188":0,"189":0,"190":0,"191":0,"192":0,"193":0,"194":0,"195":0,"196":0,"197":0,"198":0,"199":0,"200":0,"201":0,"202":0,"203":0,"204":0,"205":0,"206":0,"207":0,"208":0,"209":0,"210":0,"211":0,"212":0,"213":0,"214":0,"215":0,"216":0,"217":0,"218":0,"219":0,"220":0,"221":0,"222":0,"223":0,"224":0,"225":0,"226":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0],"34":[0,0],"35":[0,0],"36":[0,0],"37":[0,0],"38":[0,0],"39":[0,0],"40":[0,0],"41":[0,0],"42":[0,0],"43":[0,0],"44":[0,0],"45":[0,0],"46":[0,0],"47":[0,0],"48":[0,0],"49":[0,0],"50":[0,0],"51":[0,0],"52":[0,0],"53":[0,0],"54":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0},"fnMap":{"1":{"name":"(anonymous_1)","line":9,"loc":{"start":{"line":9,"column":14},"end":{"line":9,"column":35}}},"2":{"name":"(anonymous_2)","line":14,"loc":{"start":{"line":14,"column":26},"end":{"line":14,"column":47}}},"3":{"name":"(anonymous_3)","line":54,"loc":{"start":{"line":54,"column":30},"end":{"line":54,"column":43}}},"4":{"name":"(anonymous_4)","line":75,"loc":{"start":{"line":75,"column":29},"end":{"line":75,"column":53}}},"5":{"name":"_index","line":77,"loc":{"start":{"line":77,"column":6},"end":{"line":77,"column":31}}},"6":{"name":"(anonymous_6)","line":83,"loc":{"start":{"line":83,"column":31},"end":{"line":83,"column":46}}},"7":{"name":"(anonymous_7)","line":96,"loc":{"start":{"line":96,"column":39},"end":{"line":96,"column":82}}},"8":{"name":"(anonymous_8)","line":144,"loc":{"start":{"line":144,"column":39},"end":{"line":144,"column":72}}},"9":{"name":"(anonymous_9)","line":169,"loc":{"start":{"line":169,"column":25},"end":{"line":169,"column":40}}},"10":{"name":"(anonymous_10)","line":177,"loc":{"start":{"line":177,"column":38},"end":{"line":177,"column":53}}},"11":{"name":"(anonymous_11)","line":198,"loc":{"start":{"line":198,"column":37},"end":{"line":198,"column":49}}},"12":{"name":"(anonymous_12)","line":214,"loc":{"start":{"line":214,"column":29},"end":{"line":214,"column":44}}},"13":{"name":"(anonymous_13)","line":228,"loc":{"start":{"line":228,"column":29},"end":{"line":228,"column":45}}},"14":{"name":"(anonymous_14)","line":248,"loc":{"start":{"line":248,"column":31},"end":{"line":248,"column":64}}},"15":{"name":"(anonymous_15)","line":268,"loc":{"start":{"line":268,"column":33},"end":{"line":268,"column":45}}},"16":{"name":"(anonymous_16)","line":278,"loc":{"start":{"line":278,"column":37},"end":{"line":278,"column":81}}},"17":{"name":"(anonymous_17)","line":290,"loc":{"start":{"line":290,"column":26},"end":{"line":290,"column":41}}},"18":{"name":"(anonymous_18)","line":297,"loc":{"start":{"line":297,"column":27},"end":{"line":297,"column":43}}},"19":{"name":"(anonymous_19)","line":304,"loc":{"start":{"line":304,"column":32},"end":{"line":304,"column":47}}},"20":{"name":"(anonymous_20)","line":313,"loc":{"start":{"line":313,"column":33},"end":{"line":313,"column":66}}},"21":{"name":"(anonymous_21)","line":326,"loc":{"start":{"line":326,"column":37},"end":{"line":326,"column":73}}},"22":{"name":"(anonymous_22)","line":335,"loc":{"start":{"line":335,"column":37},"end":{"line":335,"column":73}}},"23":{"name":"(anonymous_23)","line":344,"loc":{"start":{"line":344,"column":36},"end":{"line":344,"column":67}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":24}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":28}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":30}},"4":{"start":{"line":7,"column":0},"end":{"line":355,"column":1}},"5":{"start":{"line":10,"column":4},"end":{"line":10,"column":38}},"6":{"start":{"line":10,"column":22},"end":{"line":10,"column":37}},"7":{"start":{"line":14,"column":4},"end":{"line":52,"column":5}},"8":{"start":{"line":15,"column":6},"end":{"line":15,"column":16}},"9":{"start":{"line":16,"column":6},"end":{"line":16,"column":11}},"10":{"start":{"line":17,"column":6},"end":{"line":17,"column":18}},"11":{"start":{"line":19,"column":6},"end":{"line":34,"column":7}},"12":{"start":{"line":20,"column":8},"end":{"line":33,"column":9}},"13":{"start":{"line":21,"column":10},"end":{"line":21,"column":53}},"14":{"start":{"line":23,"column":10},"end":{"line":32,"column":11}},"15":{"start":{"line":24,"column":12},"end":{"line":24,"column":32}},"16":{"start":{"line":25,"column":12},"end":{"line":29,"column":13}},"17":{"start":{"line":26,"column":14},"end":{"line":26,"column":61}},"18":{"start":{"line":28,"column":14},"end":{"line":28,"column":29}},"19":{"start":{"line":31,"column":12},"end":{"line":31,"column":23}},"20":{"start":{"line":35,"column":6},"end":{"line":50,"column":7}},"21":{"start":{"line":36,"column":8},"end":{"line":49,"column":9}},"22":{"start":{"line":37,"column":10},"end":{"line":37,"column":53}},"23":{"start":{"line":39,"column":10},"end":{"line":48,"column":11}},"24":{"start":{"line":40,"column":12},"end":{"line":40,"column":32}},"25":{"start":{"line":41,"column":12},"end":{"line":45,"column":13}},"26":{"start":{"line":42,"column":14},"end":{"line":42,"column":61}},"27":{"start":{"line":44,"column":14},"end":{"line":44,"column":29}},"28":{"start":{"line":47,"column":12},"end":{"line":47,"column":23}},"29":{"start":{"line":51,"column":6},"end":{"line":51,"column":14}},"30":{"start":{"line":54,"column":4},"end":{"line":70,"column":5}},"31":{"start":{"line":55,"column":6},"end":{"line":55,"column":88}},"32":{"start":{"line":56,"column":6},"end":{"line":56,"column":71}},"33":{"start":{"line":57,"column":6},"end":{"line":57,"column":47}},"34":{"start":{"line":58,"column":6},"end":{"line":58,"column":11}},"35":{"start":{"line":60,"column":6},"end":{"line":60,"column":30}},"36":{"start":{"line":60,"column":16},"end":{"line":60,"column":29}},"37":{"start":{"line":61,"column":6},"end":{"line":61,"column":59}},"38":{"start":{"line":61,"column":45},"end":{"line":61,"column":58}},"39":{"start":{"line":62,"column":6},"end":{"line":64,"column":7}},"40":{"start":{"line":63,"column":8},"end":{"line":63,"column":55}},"41":{"start":{"line":63,"column":41},"end":{"line":63,"column":54}},"42":{"start":{"line":65,"column":6},"end":{"line":67,"column":7}},"43":{"start":{"line":66,"column":8},"end":{"line":66,"column":59}},"44":{"start":{"line":66,"column":45},"end":{"line":66,"column":58}},"45":{"start":{"line":68,"column":6},"end":{"line":68,"column":62}},"46":{"start":{"line":68,"column":48},"end":{"line":68,"column":61}},"47":{"start":{"line":69,"column":6},"end":{"line":69,"column":49}},"48":{"start":{"line":75,"column":4},"end":{"line":79,"column":5}},"49":{"start":{"line":76,"column":6},"end":{"line":76,"column":35}},"50":{"start":{"line":76,"column":21},"end":{"line":76,"column":34}},"51":{"start":{"line":77,"column":6},"end":{"line":77,"column":48}},"52":{"start":{"line":77,"column":33},"end":{"line":77,"column":47}},"53":{"start":{"line":78,"column":6},"end":{"line":78,"column":51}},"54":{"start":{"line":83,"column":4},"end":{"line":92,"column":5}},"55":{"start":{"line":84,"column":6},"end":{"line":84,"column":16}},"56":{"start":{"line":85,"column":6},"end":{"line":90,"column":7}},"57":{"start":{"line":86,"column":8},"end":{"line":88,"column":9}},"58":{"start":{"line":87,"column":10},"end":{"line":87,"column":44}},"59":{"start":{"line":87,"column":35},"end":{"line":87,"column":43}},"60":{"start":{"line":89,"column":8},"end":{"line":89,"column":22}},"61":{"start":{"line":91,"column":6},"end":{"line":91,"column":14}},"62":{"start":{"line":96,"column":4},"end":{"line":142,"column":5}},"63":{"start":{"line":97,"column":6},"end":{"line":97,"column":22}},"64":{"start":{"line":99,"column":6},"end":{"line":99,"column":43}},"65":{"start":{"line":99,"column":24},"end":{"line":99,"column":42}},"66":{"start":{"line":100,"column":6},"end":{"line":100,"column":54}},"67":{"start":{"line":100,"column":30},"end":{"line":100,"column":53}},"68":{"start":{"line":102,"column":6},"end":{"line":102,"column":44}},"69":{"start":{"line":104,"column":6},"end":{"line":139,"column":7}},"70":{"start":{"line":105,"column":8},"end":{"line":138,"column":10}},"71":{"start":{"line":106,"column":10},"end":{"line":106,"column":49}},"72":{"start":{"line":107,"column":10},"end":{"line":137,"column":11}},"73":{"start":{"line":108,"column":12},"end":{"line":108,"column":49}},"74":{"start":{"line":109,"column":12},"end":{"line":109,"column":21}},"75":{"start":{"line":110,"column":12},"end":{"line":136,"column":13}},"76":{"start":{"line":111,"column":14},"end":{"line":111,"column":96}},"77":{"start":{"line":112,"column":14},"end":{"line":112,"column":55}},"78":{"start":{"line":112,"column":37},"end":{"line":112,"column":53}},"79":{"start":{"line":113,"column":19},"end":{"line":136,"column":13}},"80":{"start":{"line":114,"column":14},"end":{"line":114,"column":58}},"81":{"start":{"line":115,"column":14},"end":{"line":115,"column":92}},"82":{"start":{"line":116,"column":14},"end":{"line":116,"column":55}},"83":{"start":{"line":116,"column":37},"end":{"line":116,"column":53}},"84":{"start":{"line":117,"column":19},"end":{"line":136,"column":13}},"85":{"start":{"line":118,"column":14},"end":{"line":118,"column":45}},"86":{"start":{"line":119,"column":14},"end":{"line":119,"column":57}},"87":{"start":{"line":121,"column":14},"end":{"line":121,"column":67}},"88":{"start":{"line":121,"column":39},"end":{"line":121,"column":66}},"89":{"start":{"line":123,"column":14},"end":{"line":135,"column":15}},"90":{"start":{"line":124,"column":16},"end":{"line":124,"column":112}},"91":{"start":{"line":125,"column":16},"end":{"line":134,"column":17}},"92":{"start":{"line":126,"column":18},"end":{"line":126,"column":98}},"93":{"start":{"line":127,"column":18},"end":{"line":127,"column":59}},"94":{"start":{"line":127,"column":41},"end":{"line":127,"column":57}},"95":{"start":{"line":129,"column":18},"end":{"line":133,"column":19}},"96":{"start":{"line":130,"column":20},"end":{"line":130,"column":85}},"97":{"start":{"line":132,"column":20},"end":{"line":132,"column":77}},"98":{"start":{"line":141,"column":6},"end":{"line":141,"column":27}},"99":{"start":{"line":144,"column":4},"end":{"line":165,"column":5}},"100":{"start":{"line":145,"column":6},"end":{"line":145,"column":55}},"101":{"start":{"line":146,"column":6},"end":{"line":146,"column":48}},"102":{"start":{"line":147,"column":6},"end":{"line":147,"column":66}},"103":{"start":{"line":148,"column":6},"end":{"line":148,"column":45}},"104":{"start":{"line":149,"column":6},"end":{"line":149,"column":20}},"105":{"start":{"line":154,"column":6},"end":{"line":160,"column":8}},"106":{"start":{"line":155,"column":8},"end":{"line":155,"column":76}},"107":{"start":{"line":156,"column":8},"end":{"line":159,"column":23}},"108":{"start":{"line":157,"column":10},"end":{"line":157,"column":53}},"109":{"start":{"line":158,"column":10},"end":{"line":158,"column":112}},"110":{"start":{"line":158,"column":80},"end":{"line":158,"column":111}},"111":{"start":{"line":162,"column":6},"end":{"line":162,"column":39}},"112":{"start":{"line":162,"column":25},"end":{"line":162,"column":38}},"113":{"start":{"line":163,"column":6},"end":{"line":163,"column":70}},"114":{"start":{"line":164,"column":6},"end":{"line":164,"column":26}},"115":{"start":{"line":169,"column":4},"end":{"line":173,"column":5}},"116":{"start":{"line":170,"column":6},"end":{"line":172,"column":13}},"117":{"start":{"line":171,"column":8},"end":{"line":171,"column":80}},"118":{"start":{"line":177,"column":4},"end":{"line":194,"column":5}},"119":{"start":{"line":178,"column":6},"end":{"line":193,"column":7}},"120":{"start":{"line":179,"column":8},"end":{"line":179,"column":37}},"121":{"start":{"line":180,"column":8},"end":{"line":180,"column":45}},"122":{"start":{"line":180,"column":31},"end":{"line":180,"column":44}},"123":{"start":{"line":181,"column":8},"end":{"line":181,"column":45}},"124":{"start":{"line":181,"column":31},"end":{"line":181,"column":44}},"125":{"start":{"line":182,"column":8},"end":{"line":182,"column":81}},"126":{"start":{"line":182,"column":67},"end":{"line":182,"column":80}},"127":{"start":{"line":184,"column":8},"end":{"line":184,"column":20}},"128":{"start":{"line":185,"column":8},"end":{"line":188,"column":9}},"129":{"start":{"line":186,"column":10},"end":{"line":186,"column":27}},"130":{"start":{"line":187,"column":10},"end":{"line":187,"column":89}},"131":{"start":{"line":187,"column":47},"end":{"line":187,"column":60}},"132":{"start":{"line":187,"column":69},"end":{"line":187,"column":88}},"133":{"start":{"line":190,"column":8},"end":{"line":190,"column":18}},"134":{"start":{"line":192,"column":8},"end":{"line":192,"column":20}},"135":{"start":{"line":198,"column":4},"end":{"line":210,"column":5}},"136":{"start":{"line":199,"column":6},"end":{"line":199,"column":30}},"137":{"start":{"line":200,"column":6},"end":{"line":200,"column":43}},"138":{"start":{"line":201,"column":6},"end":{"line":201,"column":20}},"139":{"start":{"line":202,"column":6},"end":{"line":208,"column":7}},"140":{"start":{"line":203,"column":8},"end":{"line":207,"column":10}},"141":{"start":{"line":204,"column":10},"end":{"line":206,"column":11}},"142":{"start":{"line":205,"column":12},"end":{"line":205,"column":32}},"143":{"start":{"line":209,"column":6},"end":{"line":209,"column":15}},"144":{"start":{"line":214,"column":4},"end":{"line":223,"column":5}},"145":{"start":{"line":215,"column":6},"end":{"line":215,"column":22}},"146":{"start":{"line":216,"column":6},"end":{"line":221,"column":7}},"147":{"start":{"line":217,"column":8},"end":{"line":220,"column":10}},"148":{"start":{"line":218,"column":10},"end":{"line":218,"column":39}},"149":{"start":{"line":219,"column":10},"end":{"line":219,"column":60}},"150":{"start":{"line":222,"column":6},"end":{"line":222,"column":20}},"151":{"start":{"line":228,"column":4},"end":{"line":244,"column":5}},"152":{"start":{"line":229,"column":6},"end":{"line":229,"column":22}},"153":{"start":{"line":230,"column":6},"end":{"line":230,"column":21}},"154":{"start":{"line":231,"column":6},"end":{"line":231,"column":61}},"155":{"start":{"line":233,"column":6},"end":{"line":242,"column":7}},"156":{"start":{"line":234,"column":8},"end":{"line":234,"column":35}},"157":{"start":{"line":235,"column":8},"end":{"line":237,"column":9}},"158":{"start":{"line":236,"column":10},"end":{"line":236,"column":52}},"159":{"start":{"line":238,"column":8},"end":{"line":238,"column":21}},"160":{"start":{"line":239,"column":8},"end":{"line":239,"column":21}},"161":{"start":{"line":241,"column":8},"end":{"line":241,"column":19}},"162":{"start":{"line":243,"column":6},"end":{"line":243,"column":51}},"163":{"start":{"line":248,"column":4},"end":{"line":274,"column":5}},"164":{"start":{"line":249,"column":6},"end":{"line":249,"column":27}},"165":{"start":{"line":250,"column":6},"end":{"line":250,"column":28}},"166":{"start":{"line":252,"column":6},"end":{"line":252,"column":81}},"167":{"start":{"line":252,"column":26},"end":{"line":252,"column":80}},"168":{"start":{"line":254,"column":6},"end":{"line":254,"column":15}},"169":{"start":{"line":255,"column":6},"end":{"line":266,"column":7}},"170":{"start":{"line":256,"column":8},"end":{"line":264,"column":10}},"171":{"start":{"line":257,"column":10},"end":{"line":257,"column":38}},"172":{"start":{"line":258,"column":10},"end":{"line":263,"column":12}},"173":{"start":{"line":259,"column":12},"end":{"line":259,"column":45}},"174":{"start":{"line":260,"column":12},"end":{"line":260,"column":61}},"175":{"start":{"line":261,"column":12},"end":{"line":261,"column":34}},"176":{"start":{"line":262,"column":12},"end":{"line":262,"column":26}},"177":{"start":{"line":265,"column":8},"end":{"line":265,"column":11}},"178":{"start":{"line":268,"column":6},"end":{"line":273,"column":8}},"179":{"start":{"line":269,"column":8},"end":{"line":269,"column":19}},"180":{"start":{"line":270,"column":8},"end":{"line":270,"column":50}},"181":{"start":{"line":270,"column":39},"end":{"line":270,"column":48}},"182":{"start":{"line":271,"column":8},"end":{"line":271,"column":71}},"183":{"start":{"line":272,"column":8},"end":{"line":272,"column":34}},"184":{"start":{"line":278,"column":4},"end":{"line":286,"column":5}},"185":{"start":{"line":279,"column":6},"end":{"line":285,"column":8}},"186":{"start":{"line":280,"column":8},"end":{"line":284,"column":9}},"187":{"start":{"line":281,"column":10},"end":{"line":281,"column":18}},"188":{"start":{"line":283,"column":10},"end":{"line":283,"column":19}},"189":{"start":{"line":290,"column":4},"end":{"line":295,"column":5}},"190":{"start":{"line":291,"column":6},"end":{"line":294,"column":34}},"191":{"start":{"line":292,"column":8},"end":{"line":292,"column":37}},"192":{"start":{"line":293,"column":8},"end":{"line":293,"column":62}},"193":{"start":{"line":294,"column":20},"end":{"line":294,"column":33}},"194":{"start":{"line":297,"column":4},"end":{"line":302,"column":5}},"195":{"start":{"line":298,"column":6},"end":{"line":301,"column":34}},"196":{"start":{"line":299,"column":8},"end":{"line":299,"column":38}},"197":{"start":{"line":300,"column":8},"end":{"line":300,"column":57}},"198":{"start":{"line":301,"column":20},"end":{"line":301,"column":33}},"199":{"start":{"line":304,"column":4},"end":{"line":311,"column":5}},"200":{"start":{"line":305,"column":6},"end":{"line":310,"column":7}},"201":{"start":{"line":306,"column":8},"end":{"line":306,"column":95}},"202":{"start":{"line":308,"column":8},"end":{"line":308,"column":70}},"203":{"start":{"line":309,"column":8},"end":{"line":309,"column":49}},"204":{"start":{"line":313,"column":4},"end":{"line":324,"column":5}},"205":{"start":{"line":314,"column":6},"end":{"line":323,"column":7}},"206":{"start":{"line":315,"column":8},"end":{"line":315,"column":91}},"207":{"start":{"line":317,"column":8},"end":{"line":321,"column":9}},"208":{"start":{"line":318,"column":10},"end":{"line":318,"column":71}},"209":{"start":{"line":320,"column":10},"end":{"line":320,"column":65}},"210":{"start":{"line":322,"column":8},"end":{"line":322,"column":52}},"211":{"start":{"line":326,"column":4},"end":{"line":333,"column":5}},"212":{"start":{"line":327,"column":6},"end":{"line":332,"column":7}},"213":{"start":{"line":328,"column":8},"end":{"line":328,"column":84}},"214":{"start":{"line":330,"column":8},"end":{"line":330,"column":58}},"215":{"start":{"line":331,"column":8},"end":{"line":331,"column":40}},"216":{"start":{"line":335,"column":4},"end":{"line":342,"column":5}},"217":{"start":{"line":336,"column":6},"end":{"line":341,"column":7}},"218":{"start":{"line":337,"column":8},"end":{"line":337,"column":84}},"219":{"start":{"line":339,"column":8},"end":{"line":339,"column":58}},"220":{"start":{"line":340,"column":8},"end":{"line":340,"column":31}},"221":{"start":{"line":344,"column":4},"end":{"line":351,"column":5}},"222":{"start":{"line":345,"column":6},"end":{"line":350,"column":7}},"223":{"start":{"line":346,"column":8},"end":{"line":346,"column":91}},"224":{"start":{"line":348,"column":8},"end":{"line":348,"column":84}},"225":{"start":{"line":349,"column":8},"end":{"line":349,"column":50}},"226":{"start":{"line":353,"column":4},"end":{"line":353,"column":10}}},"branchMap":{"1":{"line":10,"type":"if","locations":[{"start":{"line":10,"column":4},"end":{"line":10,"column":4}},{"start":{"line":10,"column":4},"end":{"line":10,"column":4}}]},"2":{"line":20,"type":"if","locations":[{"start":{"line":20,"column":8},"end":{"line":20,"column":8}},{"start":{"line":20,"column":8},"end":{"line":20,"column":8}}]},"3":{"line":20,"type":"binary-expr","locations":[{"start":{"line":20,"column":12},"end":{"line":20,"column":41}},{"start":{"line":20,"column":45},"end":{"line":20,"column":73}}]},"4":{"line":23,"type":"if","locations":[{"start":{"line":23,"column":10},"end":{"line":23,"column":10}},{"start":{"line":23,"column":10},"end":{"line":23,"column":10}}]},"5":{"line":25,"type":"if","locations":[{"start":{"line":25,"column":12},"end":{"line":25,"column":12}},{"start":{"line":25,"column":12},"end":{"line":25,"column":12}}]},"6":{"line":36,"type":"if","locations":[{"start":{"line":36,"column":8},"end":{"line":36,"column":8}},{"start":{"line":36,"column":8},"end":{"line":36,"column":8}}]},"7":{"line":36,"type":"binary-expr","locations":[{"start":{"line":36,"column":12},"end":{"line":36,"column":41}},{"start":{"line":36,"column":45},"end":{"line":36,"column":73}}]},"8":{"line":39,"type":"if","locations":[{"start":{"line":39,"column":10},"end":{"line":39,"column":10}},{"start":{"line":39,"column":10},"end":{"line":39,"column":10}}]},"9":{"line":41,"type":"if","locations":[{"start":{"line":41,"column":12},"end":{"line":41,"column":12}},{"start":{"line":41,"column":12},"end":{"line":41,"column":12}}]},"10":{"line":60,"type":"if","locations":[{"start":{"line":60,"column":6},"end":{"line":60,"column":6}},{"start":{"line":60,"column":6},"end":{"line":60,"column":6}}]},"11":{"line":61,"type":"if","locations":[{"start":{"line":61,"column":6},"end":{"line":61,"column":6}},{"start":{"line":61,"column":6},"end":{"line":61,"column":6}}]},"12":{"line":63,"type":"if","locations":[{"start":{"line":63,"column":8},"end":{"line":63,"column":8}},{"start":{"line":63,"column":8},"end":{"line":63,"column":8}}]},"13":{"line":66,"type":"if","locations":[{"start":{"line":66,"column":8},"end":{"line":66,"column":8}},{"start":{"line":66,"column":8},"end":{"line":66,"column":8}}]},"14":{"line":68,"type":"if","locations":[{"start":{"line":68,"column":6},"end":{"line":68,"column":6}},{"start":{"line":68,"column":6},"end":{"line":68,"column":6}}]},"15":{"line":76,"type":"if","locations":[{"start":{"line":76,"column":6},"end":{"line":76,"column":6}},{"start":{"line":76,"column":6},"end":{"line":76,"column":6}}]},"16":{"line":87,"type":"if","locations":[{"start":{"line":87,"column":10},"end":{"line":87,"column":10}},{"start":{"line":87,"column":10},"end":{"line":87,"column":10}}]},"17":{"line":99,"type":"if","locations":[{"start":{"line":99,"column":6},"end":{"line":99,"column":6}},{"start":{"line":99,"column":6},"end":{"line":99,"column":6}}]},"18":{"line":100,"type":"if","locations":[{"start":{"line":100,"column":6},"end":{"line":100,"column":6}},{"start":{"line":100,"column":6},"end":{"line":100,"column":6}}]},"19":{"line":104,"type":"if","locations":[{"start":{"line":104,"column":6},"end":{"line":104,"column":6}},{"start":{"line":104,"column":6},"end":{"line":104,"column":6}}]},"20":{"line":107,"type":"if","locations":[{"start":{"line":107,"column":10},"end":{"line":107,"column":10}},{"start":{"line":107,"column":10},"end":{"line":107,"column":10}}]},"21":{"line":110,"type":"if","locations":[{"start":{"line":110,"column":12},"end":{"line":110,"column":12}},{"start":{"line":110,"column":12},"end":{"line":110,"column":12}}]},"22":{"line":113,"type":"if","locations":[{"start":{"line":113,"column":19},"end":{"line":113,"column":19}},{"start":{"line":113,"column":19},"end":{"line":113,"column":19}}]},"23":{"line":117,"type":"if","locations":[{"start":{"line":117,"column":19},"end":{"line":117,"column":19}},{"start":{"line":117,"column":19},"end":{"line":117,"column":19}}]},"24":{"line":121,"type":"if","locations":[{"start":{"line":121,"column":14},"end":{"line":121,"column":14}},{"start":{"line":121,"column":14},"end":{"line":121,"column":14}}]},"25":{"line":123,"type":"if","locations":[{"start":{"line":123,"column":14},"end":{"line":123,"column":14}},{"start":{"line":123,"column":14},"end":{"line":123,"column":14}}]},"26":{"line":123,"type":"binary-expr","locations":[{"start":{"line":123,"column":18},"end":{"line":123,"column":32}},{"start":{"line":123,"column":36},"end":{"line":123,"column":60}}]},"27":{"line":125,"type":"if","locations":[{"start":{"line":125,"column":16},"end":{"line":125,"column":16}},{"start":{"line":125,"column":16},"end":{"line":125,"column":16}}]},"28":{"line":158,"type":"if","locations":[{"start":{"line":158,"column":10},"end":{"line":158,"column":10}},{"start":{"line":158,"column":10},"end":{"line":158,"column":10}}]},"29":{"line":158,"type":"binary-expr","locations":[{"start":{"line":158,"column":14},"end":{"line":158,"column":25}},{"start":{"line":158,"column":30},"end":{"line":158,"column":49}},{"start":{"line":158,"column":53},"end":{"line":158,"column":75}}]},"30":{"line":162,"type":"if","locations":[{"start":{"line":162,"column":6},"end":{"line":162,"column":6}},{"start":{"line":162,"column":6},"end":{"line":162,"column":6}}]},"31":{"line":171,"type":"binary-expr","locations":[{"start":{"line":171,"column":16},"end":{"line":171,"column":71}},{"start":{"line":171,"column":76},"end":{"line":171,"column":80}}]},"32":{"line":180,"type":"if","locations":[{"start":{"line":180,"column":8},"end":{"line":180,"column":8}},{"start":{"line":180,"column":8},"end":{"line":180,"column":8}}]},"33":{"line":181,"type":"if","locations":[{"start":{"line":181,"column":8},"end":{"line":181,"column":8}},{"start":{"line":181,"column":8},"end":{"line":181,"column":8}}]},"34":{"line":182,"type":"if","locations":[{"start":{"line":182,"column":8},"end":{"line":182,"column":8}},{"start":{"line":182,"column":8},"end":{"line":182,"column":8}}]},"35":{"line":187,"type":"if","locations":[{"start":{"line":187,"column":10},"end":{"line":187,"column":10}},{"start":{"line":187,"column":10},"end":{"line":187,"column":10}}]},"36":{"line":204,"type":"if","locations":[{"start":{"line":204,"column":10},"end":{"line":204,"column":10}},{"start":{"line":204,"column":10},"end":{"line":204,"column":10}}]},"37":{"line":204,"type":"binary-expr","locations":[{"start":{"line":204,"column":14},"end":{"line":204,"column":39}},{"start":{"line":204,"column":43},"end":{"line":204,"column":74}}]},"38":{"line":216,"type":"if","locations":[{"start":{"line":216,"column":6},"end":{"line":216,"column":6}},{"start":{"line":216,"column":6},"end":{"line":216,"column":6}}]},"39":{"line":219,"type":"binary-expr","locations":[{"start":{"line":219,"column":38},"end":{"line":219,"column":46}},{"start":{"line":219,"column":50},"end":{"line":219,"column":52}}]},"40":{"line":233,"type":"if","locations":[{"start":{"line":233,"column":6},"end":{"line":233,"column":6}},{"start":{"line":233,"column":6},"end":{"line":233,"column":6}}]},"41":{"line":233,"type":"binary-expr","locations":[{"start":{"line":233,"column":10},"end":{"line":233,"column":32}},{"start":{"line":233,"column":36},"end":{"line":233,"column":58}}]},"42":{"line":235,"type":"if","locations":[{"start":{"line":235,"column":8},"end":{"line":235,"column":8}},{"start":{"line":235,"column":8},"end":{"line":235,"column":8}}]},"43":{"line":252,"type":"if","locations":[{"start":{"line":252,"column":6},"end":{"line":252,"column":6}},{"start":{"line":252,"column":6},"end":{"line":252,"column":6}}]},"44":{"line":280,"type":"if","locations":[{"start":{"line":280,"column":8},"end":{"line":280,"column":8}},{"start":{"line":280,"column":8},"end":{"line":280,"column":8}}]},"45":{"line":293,"type":"binary-expr","locations":[{"start":{"line":293,"column":16},"end":{"line":293,"column":35}},{"start":{"line":293,"column":39},"end":{"line":293,"column":61}}]},"46":{"line":300,"type":"binary-expr","locations":[{"start":{"line":300,"column":16},"end":{"line":300,"column":30}},{"start":{"line":300,"column":34},"end":{"line":300,"column":56}}]},"47":{"line":305,"type":"if","locations":[{"start":{"line":305,"column":6},"end":{"line":305,"column":6}},{"start":{"line":305,"column":6},"end":{"line":305,"column":6}}]},"48":{"line":314,"type":"if","locations":[{"start":{"line":314,"column":6},"end":{"line":314,"column":6}},{"start":{"line":314,"column":6},"end":{"line":314,"column":6}}]},"49":{"line":314,"type":"binary-expr","locations":[{"start":{"line":314,"column":10},"end":{"line":314,"column":36}},{"start":{"line":314,"column":40},"end":{"line":314,"column":50}}]},"50":{"line":317,"type":"if","locations":[{"start":{"line":317,"column":8},"end":{"line":317,"column":8}},{"start":{"line":317,"column":8},"end":{"line":317,"column":8}}]},"51":{"line":317,"type":"binary-expr","locations":[{"start":{"line":317,"column":12},"end":{"line":317,"column":21}},{"start":{"line":317,"column":25},"end":{"line":317,"column":51}}]},"52":{"line":327,"type":"if","locations":[{"start":{"line":327,"column":6},"end":{"line":327,"column":6}},{"start":{"line":327,"column":6},"end":{"line":327,"column":6}}]},"53":{"line":336,"type":"if","locations":[{"start":{"line":336,"column":6},"end":{"line":336,"column":6}},{"start":{"line":336,"column":6},"end":{"line":336,"column":6}}]},"54":{"line":345,"type":"if","locations":[{"start":{"line":345,"column":6},"end":{"line":345,"column":6}},{"start":{"line":345,"column":6},"end":{"line":345,"column":6}}]}},"code":["'use strict'","","const fs = require('fs')","const path = require('path')","const async = require('async')","","module.exports = {","  loadPriority: 0,","  initialize: function (api, next) {","    if (!api.utils) { api.utils = {} }","","    // //////////////////////////////////////////////////////////////////////////","    // merge two hashes recursively","    api.utils.hashMerge = function (a, b, arg) {","      let c = {}","      let i","      let response","","      for (i in a) {","        if (api.utils.isPlainObject(a[i]) && Object.keys(a[i]).length > 0) {","          c[i] = api.utils.hashMerge(c[i], a[i], arg)","        } else {","          if (typeof a[i] === 'function') {","            response = a[i](arg)","            if (api.utils.isPlainObject(response)) {","              c[i] = api.utils.hashMerge(c[i], response, arg)","            } else {","              c[i] = response","            }","          } else {","            c[i] = a[i]","          }","        }","      }","      for (i in b) {","        if (api.utils.isPlainObject(b[i]) && Object.keys(b[i]).length > 0) {","          c[i] = api.utils.hashMerge(c[i], b[i], arg)","        } else {","          if (typeof b[i] === 'function') {","            response = b[i](arg)","            if (api.utils.isPlainObject(response)) {","              c[i] = api.utils.hashMerge(c[i], response, arg)","            } else {","              c[i] = response","            }","          } else {","            c[i] = b[i]","          }","        }","      }","      return c","    }","","    api.utils.isPlainObject = function (o) {","      const safeTypes = [Boolean, Number, String, Function, Array, Date, RegExp, Buffer]","      const safeInstances = ['boolean', 'number', 'string', 'function']","      const expandPreventMatchKey = '_toExpand' // set `_toExpand = false` within an object if you don't want to expand it","      let i","","      if (!o) { return false }","      if ((o instanceof Object) === false) { return false }","      for (i in safeTypes) {","        if (o instanceof safeTypes[i]) { return false }","      }","      for (i in safeInstances) {","        if (typeof o === safeInstances[i]) { return false } //eslint-disable-line","      }","      if (o[expandPreventMatchKey] === false) { return false }","      return (o.toString() === '[object Object]')","    }","","    // //////////////////////////////////////////////////////////////////////////","    // string to hash","    // http://stackoverflow.com/questions/6393943/convert-javascript-string-in-dot-notation-into-an-object-reference","    api.utils.stringToHash = function (path, object) {","      if (!object) { object = api }","      function _index (obj, i) { return obj[i] }","      return path.split('.').reduce(_index, object)","    }","","    // //////////////////////////////////////////////////////////////////////////","    // unique-ify an array","    api.utils.arrayUniqueify = function (arr) {","      let a = []","      for (let i = 0; i < arr.length; i++) {","        for (let j = i + 1; j < arr.length; j++) {","          if (arr[i] === arr[j]) { j = ++i }","        }","        a.push(arr[i])","      }","      return a","    }","","    // //////////////////////////////////////////////////////////////////////////","    // get all .js files in a directory","    api.utils.recursiveDirectoryGlob = function (dir, extension, followLinkFiles) {","      let results = []","","      if (!extension) { extension = '.js' }","      if (!followLinkFiles) { followLinkFiles = true }","","      extension = extension.replace('.', '')","","      if (fs.existsSync(dir)) {","        fs.readdirSync(dir).forEach((file) => {","          let fullFilePath = path.join(dir, file)","          if (file[0] !== '.') { // ignore 'system' files","            let stats = fs.statSync(fullFilePath)","            let child","            if (stats.isDirectory()) {","              child = api.utils.recursiveDirectoryGlob(fullFilePath, extension, followLinkFiles)","              child.forEach((c) => { results.push(c) })","            } else if (stats.isSymbolicLink()) {","              let realPath = fs.readlinkSync(fullFilePath)","              child = api.utils.recursiveDirectoryGlob(realPath, extension, followLinkFiles)","              child.forEach((c) => { results.push(c) })","            } else if (stats.isFile()) {","              let fileParts = file.split('.')","              let ext = fileParts[(fileParts.length - 1)]","              // real file match","              if (ext === extension) { results.push(fullFilePath) }","              // linkfile traversal","              if (ext === 'link' && followLinkFiles === true) {","                let linkedPath = api.utils.sourceRelativeLinkPath(fullFilePath, api.config.general.paths.plugin)","                if (linkedPath) {","                  child = api.utils.recursiveDirectoryGlob(linkedPath, extension, followLinkFiles)","                  child.forEach((c) => { results.push(c) })","                } else {","                  try {","                    api.log(['cannot find linked refrence to `%s`', file], 'warning')","                  } catch (e) {","                    throw new Error('cannot find linked refrence to ' + file)","                  }","                }","              }","            }","          }","        })","      }","","      return results.sort()","    }","","    api.utils.sourceRelativeLinkPath = function (linkfile, pluginPaths) {","      const type = fs.readFileSync(linkfile).toString()","      const pathParts = linkfile.split(path.sep)","      const name = pathParts[(pathParts.length - 1)].split('.')[0]","      const pathsToTry = pluginPaths.slice(0)","      let pluginRoot","","      // TODO: always also try the local destination's `node_modules` to allow for nested plugins","      // This might be a security risk without requiring explicit sourcing","","      pathsToTry.forEach((pluginPath) => {","        let pluginPathAttempt = path.normalize(pluginPath + path.sep + name)","        try {","          let stats = fs.lstatSync(pluginPathAttempt)","          if (!pluginRoot && (stats.isDirectory() || stats.isSymbolicLink())) { pluginRoot = pluginPathAttempt }","        } catch (e) { }","      })","","      if (!pluginRoot) { return false }","      let pluginSection = path.normalize(pluginRoot + path.sep + type)","      return pluginSection","    }","","    // //////////////////////////////////////////////////////////////////////////","    // object Clone","    api.utils.objClone = function (obj) {","      return Object.create(Object.getPrototypeOf(obj), Object.getOwnPropertyNames(obj).reduce((memo, name) => {","        return (memo[name] = Object.getOwnPropertyDescriptor(obj, name)) && memo","      }, {}))","    }","","    // //////////////////////////////////////////////////////////////////////////","    // attempt to collapse this object to an array; ie: {\"0\": \"a\", \"1\": \"b\"}","    api.utils.collapseObjectToArray = function (obj) {","      try {","        const keys = Object.keys(obj)","        if (keys.length < 1) { return false }","        if (keys[0] !== '0') { return false }","        if (keys[(keys.length - 1)] !== String(keys.length - 1)) { return false }","","        let arr = []","        for (let i in keys) {","          let key = keys[i]","          if (String(parseInt(key)) !== key) { return false } else { arr.push(obj[key]) }","        }","","        return arr","      } catch (e) {","        return false","      }","    }","","    // //////////////////////////////////////////////////////////////////////////","    // get this servers external interface","    api.utils.getExternalIPAddress = function () {","      const os = require('os')","      const ifaces = os.networkInterfaces()","      let ip = false","      for (let dev in ifaces) {","        ifaces[dev].forEach((details) => {","          if (details.family === 'IPv4' && details.address !== '127.0.0.1') {","            ip = details.address","          }","        })","      }","      return ip","    }","","    // //////////////////////////////////////////////////////////////////////////","    // cookie parse from headers of http(s) requests","    api.utils.parseCookies = function (req) {","      let cookies = {}","      if (req.headers.cookie) {","        req.headers.cookie.split(';').forEach((cookie) => {","          let parts = cookie.split('=')","          cookies[parts[0].trim()] = (parts[1] || '').trim()","        })","      }","      return cookies","    }","","    // //////////////////////////////////////////////////////////////////////////","    // parse an IPv6 address","    // https://github.com/actionhero/actionhero/issues/275 && https://github.com/nullivex","    api.utils.parseIPv6URI = function (addr) {","      let host = '::1'","      let port = '80'","      let regexp = new RegExp(/\\[([0-9a-f:]+)]:([0-9]{1,5})/)","      // if we have brackets parse them and find a port","      if (addr.indexOf('[') > -1 && addr.indexOf(']') > -1) {","        let res = regexp.exec(addr)","        if (res === null) {","          throw new Error('failed to parse address')","        }","        host = res[1]","        port = res[2]","      } else {","        host = addr","      }","      return {host: host, port: parseInt(port, 10)}","    }","","    // //////////////////////////////////////////////////////////////////////////","    // Check on how long the event loop is blocked for","    api.utils.eventLoopDelay = function (itterations, callback) {","      let intervalJobs = []","      let intervalTimes = []","","      if (!itterations) { return callback(new Error('itterations is required')) }","","      let i = 0","      while (i < itterations) {","        intervalJobs.push((intervalDone) => {","          let start = process.hrtime()","          process.nextTick(() => {","            let delta = process.hrtime(start)","            let ms = (delta[0] * 1000) + (delta[1] / 1000000)","            intervalTimes.push(ms)","            intervalDone()","          })","        })","        i++","      }","","      async.series(intervalJobs, function () {","        let sum = 0","        intervalTimes.forEach((t) => { sum += t })","        let avg = Math.round(sum / intervalTimes.length * 10000) / 1000","        return callback(null, avg)","      })","    }","","    // //////////////////////////////////////////////////////////////////////////","    // Sort Global Middleware","    api.utils.sortGlobalMiddleware = function (globalMiddlewareList, middleware) {","      globalMiddlewareList.sort((a, b) => {","        if (middleware[a].priority > middleware[b].priority) {","          return 1","        } else {","          return -1","        }","      })","    }","","    // //////////////////////////////////////////////////////////////////////////","    // File utils","    api.utils.dirExists = function (dir) {","      try {","        let stats = fs.lstatSync(dir)","        return (stats.isDirectory() || stats.isSymbolicLink())","      } catch (e) { return false }","    }","","    api.utils.fileExists = function (file) {","      try {","        let stats = fs.lstatSync(file)","        return (stats.isFile() || stats.isSymbolicLink())","      } catch (e) { return false }","    }","","    api.utils.createDirSafely = function (dir) {","      if (api.utils.dirExists(dir)) {","        api.log([' - directory \\'%s\\' already exists, skipping', path.normalize(dir)], 'alert')","      } else {","        api.log([' - creating directory \\'%s\\'', path.normalize(dir)])","        fs.mkdirSync(path.normalize(dir), '0766')","      }","    }","","    api.utils.createFileSafely = function (file, data, overwrite) {","      if (api.utils.fileExists(file) && !overwrite) {","        api.log([' - file \\'%s\\' already exists, skipping', path.normalize(file)], 'alert')","      } else {","        if (overwrite && api.utils.fileExists(file)) {","          api.log([' - overwritten file \\'%s\\'', path.normalize(file)])","        } else {","          api.log([' - wrote file \\'%s\\'', path.normalize(file)])","        }","        fs.writeFileSync(path.normalize(file), data)","      }","    }","","    api.utils.createLinkfileSafely = function (filePath, type, refrence) {","      if (api.utils.fileExists(filePath)) {","        api.log([' - link file \\'%s\\' already exists, skipping', filePath], 'alert')","      } else {","        api.log([' - creating linkfile \\'%s\\'', filePath])","        fs.writeFileSync(filePath, type)","      }","    }","","    api.utils.removeLinkfileSafely = function (filePath, type, refrence) {","      if (!api.utils.fileExists(filePath)) {","        api.log([' - link file \\'%s\\' doesn\\'t exist, skipping', filePath], 'alert')","      } else {","        api.log([' - removing linkfile \\'%s\\'', filePath])","        fs.unlinkSync(filePath)","      }","    }","","    api.utils.createSymlinkSafely = function (destination, source) {","      if (api.utils.dirExists(destination)) {","        api.log([' - symbolic link \\'%s\\' already exists, skipping', destination], 'alert')","      } else {","        api.log([' - creating symbolic link \\'%s\\' => \\'%s\\'', destination, source])","        fs.symlinkSync(source, destination, 'dir')","      }","    }","","    next()","  }","}",""],"l":{"3":1,"4":1,"5":1,"7":1,"10":0,"14":0,"15":0,"16":0,"17":0,"19":0,"20":0,"21":0,"23":0,"24":0,"25":0,"26":0,"28":0,"31":0,"35":0,"36":0,"37":0,"39":0,"40":0,"41":0,"42":0,"44":0,"47":0,"51":0,"54":0,"55":0,"56":0,"57":0,"58":0,"60":0,"61":0,"62":0,"63":0,"65":0,"66":0,"68":0,"69":0,"75":0,"76":0,"77":1,"78":0,"83":0,"84":0,"85":0,"86":0,"87":0,"89":0,"91":0,"96":0,"97":0,"99":0,"100":0,"102":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"121":0,"123":0,"124":0,"125":0,"126":0,"127":0,"129":0,"130":0,"132":0,"141":0,"144":0,"145":0,"146":0,"147":0,"148":0,"149":0,"154":0,"155":0,"156":0,"157":0,"158":0,"162":0,"163":0,"164":0,"169":0,"170":0,"171":0,"177":0,"178":0,"179":0,"180":0,"181":0,"182":0,"184":0,"185":0,"186":0,"187":0,"190":0,"192":0,"198":0,"199":0,"200":0,"201":0,"202":0,"203":0,"204":0,"205":0,"209":0,"214":0,"215":0,"216":0,"217":0,"218":0,"219":0,"222":0,"228":0,"229":0,"230":0,"231":0,"233":0,"234":0,"235":0,"236":0,"238":0,"239":0,"241":0,"243":0,"248":0,"249":0,"250":0,"252":0,"254":0,"255":0,"256":0,"257":0,"258":0,"259":0,"260":0,"261":0,"262":0,"265":0,"268":0,"269":0,"270":0,"271":0,"272":0,"278":0,"279":0,"280":0,"281":0,"283":0,"290":0,"291":0,"292":0,"293":0,"294":0,"297":0,"298":0,"299":0,"300":0,"301":0,"304":0,"305":0,"306":0,"308":0,"309":0,"313":0,"314":0,"315":0,"317":0,"318":0,"320":0,"322":0,"326":0,"327":0,"328":0,"330":0,"331":0,"335":0,"336":0,"337":0,"339":0,"340":0,"344":0,"345":0,"346":0,"348":0,"349":0,"353":0}},"/home/travis/build/npmtest/node-npmtest-actionhero/node_modules/actionhero/servers/socket.js":{"path":"/home/travis/build/npmtest/node-npmtest-actionhero/node_modules/actionhero/servers/socket.js","s":{"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0},"fnMap":{"1":{"name":"(anonymous_1)","line":6,"loc":{"start":{"line":6,"column":19},"end":{"line":6,"column":49}}},"2":{"name":"(anonymous_2)","line":41,"loc":{"start":{"line":41,"column":17},"end":{"line":41,"column":33}}},"3":{"name":"(anonymous_3)","line":61,"loc":{"start":{"line":61,"column":16},"end":{"line":61,"column":32}}},"4":{"name":"(anonymous_4)","line":65,"loc":{"start":{"line":65,"column":23},"end":{"line":65,"column":68}}},"5":{"name":"(anonymous_5)","line":87,"loc":{"start":{"line":87,"column":19},"end":{"line":87,"column":41}}},"6":{"name":"(anonymous_6)","line":93,"loc":{"start":{"line":93,"column":20},"end":{"line":93,"column":61}}},"7":{"name":"(anonymous_7)","line":105,"loc":{"start":{"line":105,"column":26},"end":{"line":105,"column":48}}},"8":{"name":"(anonymous_8)","line":108,"loc":{"start":{"line":108,"column":22},"end":{"line":108,"column":38}}},"9":{"name":"(anonymous_9)","line":169,"loc":{"start":{"line":169,"column":23},"end":{"line":169,"column":51}}},"10":{"name":"(anonymous_10)","line":207,"loc":{"start":{"line":207,"column":27},"end":{"line":207,"column":52}}},"11":{"name":"(anonymous_11)","line":220,"loc":{"start":{"line":220,"column":26},"end":{"line":220,"column":43}}},"12":{"name":"(anonymous_12)","line":231,"loc":{"start":{"line":231,"column":27},"end":{"line":231,"column":60}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":26}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":26}},"3":{"start":{"line":6,"column":0},"end":{"line":257,"column":1}},"4":{"start":{"line":11,"column":2},"end":{"line":11,"column":23}},"5":{"start":{"line":12,"column":2},"end":{"line":33,"column":3}},"6":{"start":{"line":35,"column":2},"end":{"line":35,"column":65}},"7":{"start":{"line":41,"column":2},"end":{"line":59,"column":3}},"8":{"start":{"line":42,"column":4},"end":{"line":50,"column":5}},"9":{"start":{"line":43,"column":6},"end":{"line":45,"column":8}},"10":{"start":{"line":44,"column":8},"end":{"line":44,"column":39}},"11":{"start":{"line":47,"column":6},"end":{"line":49,"column":8}},"12":{"start":{"line":48,"column":8},"end":{"line":48,"column":39}},"13":{"start":{"line":52,"column":4},"end":{"line":54,"column":6}},"14":{"start":{"line":53,"column":6},"end":{"line":53,"column":120}},"15":{"start":{"line":56,"column":4},"end":{"line":58,"column":6}},"16":{"start":{"line":57,"column":6},"end":{"line":57,"column":28}},"17":{"start":{"line":61,"column":2},"end":{"line":63,"column":3}},"18":{"start":{"line":62,"column":4},"end":{"line":62,"column":26}},"19":{"start":{"line":65,"column":2},"end":{"line":85,"column":3}},"20":{"start":{"line":66,"column":4},"end":{"line":68,"column":5}},"21":{"start":{"line":67,"column":6},"end":{"line":67,"column":81}},"22":{"start":{"line":70,"column":4},"end":{"line":79,"column":5}},"23":{"start":{"line":71,"column":6},"end":{"line":71,"column":41}},"24":{"start":{"line":72,"column":6},"end":{"line":72,"column":36}},"25":{"start":{"line":73,"column":11},"end":{"line":79,"column":5}},"26":{"start":{"line":74,"column":6},"end":{"line":78,"column":7}},"27":{"start":{"line":75,"column":8},"end":{"line":75,"column":43}},"28":{"start":{"line":77,"column":8},"end":{"line":77,"column":54}},"29":{"start":{"line":80,"column":4},"end":{"line":84,"column":5}},"30":{"start":{"line":81,"column":6},"end":{"line":81,"column":70}},"31":{"start":{"line":83,"column":6},"end":{"line":83,"column":53}},"32":{"start":{"line":87,"column":2},"end":{"line":91,"column":3}},"33":{"start":{"line":88,"column":4},"end":{"line":90,"column":18}},"34":{"start":{"line":89,"column":6},"end":{"line":89,"column":148}},"35":{"start":{"line":93,"column":2},"end":{"line":99,"column":3}},"36":{"start":{"line":94,"column":4},"end":{"line":98,"column":5}},"37":{"start":{"line":95,"column":6},"end":{"line":95,"column":68}},"38":{"start":{"line":97,"column":6},"end":{"line":97,"column":61}},"39":{"start":{"line":105,"column":2},"end":{"line":156,"column":4}},"40":{"start":{"line":106,"column":4},"end":{"line":106,"column":26}},"41":{"start":{"line":108,"column":4},"end":{"line":123,"column":5}},"42":{"start":{"line":109,"column":6},"end":{"line":116,"column":7}},"43":{"start":{"line":110,"column":8},"end":{"line":110,"column":50}},"44":{"start":{"line":111,"column":8},"end":{"line":115,"column":9}},"45":{"start":{"line":112,"column":10},"end":{"line":112,"column":105}},"46":{"start":{"line":113,"column":10},"end":{"line":113,"column":36}},"47":{"start":{"line":114,"column":10},"end":{"line":114,"column":101}},"48":{"start":{"line":117,"column":6},"end":{"line":122,"column":7}},"49":{"start":{"line":120,"column":8},"end":{"line":120,"column":33}},"50":{"start":{"line":121,"column":8},"end":{"line":121,"column":38}},"51":{"start":{"line":125,"column":4},"end":{"line":140,"column":6}},"52":{"start":{"line":126,"column":6},"end":{"line":139,"column":7}},"53":{"start":{"line":127,"column":8},"end":{"line":127,"column":28}},"54":{"start":{"line":130,"column":8},"end":{"line":130,"column":97}},"55":{"start":{"line":131,"column":8},"end":{"line":131,"column":17}},"56":{"start":{"line":132,"column":8},"end":{"line":132,"column":59}},"57":{"start":{"line":134,"column":8},"end":{"line":138,"column":9}},"58":{"start":{"line":135,"column":10},"end":{"line":135,"column":78}},"59":{"start":{"line":136,"column":10},"end":{"line":136,"column":119}},"60":{"start":{"line":137,"column":10},"end":{"line":137,"column":42}},"61":{"start":{"line":142,"column":4},"end":{"line":147,"column":6}},"62":{"start":{"line":143,"column":6},"end":{"line":146,"column":7}},"63":{"start":{"line":144,"column":8},"end":{"line":144,"column":59}},"64":{"start":{"line":144,"column":14},"end":{"line":144,"column":45}},"65":{"start":{"line":145,"column":8},"end":{"line":145,"column":28}},"66":{"start":{"line":149,"column":4},"end":{"line":155,"column":6}},"67":{"start":{"line":150,"column":6},"end":{"line":154,"column":7}},"68":{"start":{"line":151,"column":8},"end":{"line":151,"column":49}},"69":{"start":{"line":152,"column":8},"end":{"line":152,"column":59}},"70":{"start":{"line":152,"column":14},"end":{"line":152,"column":45}},"71":{"start":{"line":153,"column":8},"end":{"line":153,"column":28}},"72":{"start":{"line":158,"column":2},"end":{"line":163,"column":4}},"73":{"start":{"line":159,"column":4},"end":{"line":162,"column":5}},"74":{"start":{"line":160,"column":6},"end":{"line":160,"column":40}},"75":{"start":{"line":161,"column":6},"end":{"line":161,"column":75}},"76":{"start":{"line":169,"column":2},"end":{"line":205,"column":3}},"77":{"start":{"line":170,"column":4},"end":{"line":170,"column":31}},"78":{"start":{"line":171,"column":4},"end":{"line":171,"column":28}},"79":{"start":{"line":172,"column":4},"end":{"line":204,"column":5}},"80":{"start":{"line":173,"column":6},"end":{"line":175,"column":7}},"81":{"start":{"line":174,"column":8},"end":{"line":174,"column":41}},"82":{"start":{"line":176,"column":6},"end":{"line":176,"column":36}},"83":{"start":{"line":178,"column":6},"end":{"line":203,"column":8}},"84":{"start":{"line":179,"column":8},"end":{"line":202,"column":9}},"85":{"start":{"line":180,"column":10},"end":{"line":180,"column":89}},"86":{"start":{"line":181,"column":15},"end":{"line":202,"column":9}},"87":{"start":{"line":183,"column":10},"end":{"line":196,"column":11}},"88":{"start":{"line":184,"column":12},"end":{"line":184,"column":46}},"89":{"start":{"line":185,"column":12},"end":{"line":190,"column":13}},"90":{"start":{"line":186,"column":14},"end":{"line":186,"column":36}},"91":{"start":{"line":187,"column":14},"end":{"line":189,"column":15}},"92":{"start":{"line":188,"column":16},"end":{"line":188,"column":60}},"93":{"start":{"line":191,"column":12},"end":{"line":193,"column":13}},"94":{"start":{"line":192,"column":14},"end":{"line":192,"column":59}},"95":{"start":{"line":195,"column":12},"end":{"line":195,"column":43}},"96":{"start":{"line":197,"column":10},"end":{"line":197,"column":33}},"97":{"start":{"line":198,"column":10},"end":{"line":198,"column":34}},"98":{"start":{"line":199,"column":10},"end":{"line":199,"column":42}},"99":{"start":{"line":201,"column":10},"end":{"line":201,"column":126}},"100":{"start":{"line":207,"column":2},"end":{"line":217,"column":3}},"101":{"start":{"line":208,"column":4},"end":{"line":210,"column":5}},"102":{"start":{"line":209,"column":6},"end":{"line":209,"column":38}},"103":{"start":{"line":211,"column":4},"end":{"line":211,"column":39}},"104":{"start":{"line":212,"column":4},"end":{"line":216,"column":6}},"105":{"start":{"line":220,"column":2},"end":{"line":229,"column":3}},"106":{"start":{"line":221,"column":4},"end":{"line":221,"column":21}},"107":{"start":{"line":222,"column":4},"end":{"line":222,"column":57}},"108":{"start":{"line":223,"column":4},"end":{"line":227,"column":5}},"109":{"start":{"line":224,"column":6},"end":{"line":224,"column":18}},"110":{"start":{"line":225,"column":11},"end":{"line":227,"column":5}},"111":{"start":{"line":226,"column":6},"end":{"line":226,"column":18}},"112":{"start":{"line":228,"column":4},"end":{"line":228,"column":16}},"113":{"start":{"line":231,"column":2},"end":{"line":254,"column":3}},"114":{"start":{"line":232,"column":4},"end":{"line":234,"column":5}},"115":{"start":{"line":233,"column":6},"end":{"line":233,"column":50}},"116":{"start":{"line":233,"column":27},"end":{"line":233,"column":49}},"117":{"start":{"line":235,"column":4},"end":{"line":235,"column":30}},"118":{"start":{"line":236,"column":4},"end":{"line":247,"column":6}},"119":{"start":{"line":237,"column":6},"end":{"line":246,"column":7}},"120":{"start":{"line":238,"column":8},"end":{"line":238,"column":28}},"121":{"start":{"line":240,"column":8},"end":{"line":240,"column":28}},"122":{"start":{"line":241,"column":8},"end":{"line":245,"column":9}},"123":{"start":{"line":242,"column":10},"end":{"line":244,"column":49}},"124":{"start":{"line":243,"column":12},"end":{"line":243,"column":32}},"125":{"start":{"line":248,"column":4},"end":{"line":253,"column":53}},"126":{"start":{"line":249,"column":6},"end":{"line":249,"column":133}},"127":{"start":{"line":250,"column":6},"end":{"line":252,"column":14}},"128":{"start":{"line":251,"column":8},"end":{"line":251,"column":36}},"129":{"start":{"line":253,"column":11},"end":{"line":253,"column":53}},"130":{"start":{"line":253,"column":45},"end":{"line":253,"column":52}},"131":{"start":{"line":256,"column":2},"end":{"line":256,"column":14}},"132":{"start":{"line":261,"column":0},"end":{"line":261,"column":31}}},"branchMap":{"1":{"line":42,"type":"if","locations":[{"start":{"line":42,"column":4},"end":{"line":42,"column":4}},{"start":{"line":42,"column":4},"end":{"line":42,"column":4}}]},"2":{"line":66,"type":"if","locations":[{"start":{"line":66,"column":4},"end":{"line":66,"column":4}},{"start":{"line":66,"column":4},"end":{"line":66,"column":4}}]},"3":{"line":70,"type":"if","locations":[{"start":{"line":70,"column":4},"end":{"line":70,"column":4}},{"start":{"line":70,"column":4},"end":{"line":70,"column":4}}]},"4":{"line":73,"type":"if","locations":[{"start":{"line":73,"column":11},"end":{"line":73,"column":11}},{"start":{"line":73,"column":11},"end":{"line":73,"column":11}}]},"5":{"line":74,"type":"if","locations":[{"start":{"line":74,"column":6},"end":{"line":74,"column":6}},{"start":{"line":74,"column":6},"end":{"line":74,"column":6}}]},"6":{"line":94,"type":"if","locations":[{"start":{"line":94,"column":4},"end":{"line":94,"column":4}},{"start":{"line":94,"column":4},"end":{"line":94,"column":4}}]},"7":{"line":109,"type":"if","locations":[{"start":{"line":109,"column":6},"end":{"line":109,"column":6}},{"start":{"line":109,"column":6},"end":{"line":109,"column":6}}]},"8":{"line":111,"type":"if","locations":[{"start":{"line":111,"column":8},"end":{"line":111,"column":8}},{"start":{"line":111,"column":8},"end":{"line":111,"column":8}}]},"9":{"line":117,"type":"if","locations":[{"start":{"line":117,"column":6},"end":{"line":117,"column":6}},{"start":{"line":117,"column":6},"end":{"line":117,"column":6}}]},"10":{"line":126,"type":"if","locations":[{"start":{"line":126,"column":6},"end":{"line":126,"column":6}},{"start":{"line":126,"column":6},"end":{"line":126,"column":6}}]},"11":{"line":143,"type":"if","locations":[{"start":{"line":143,"column":6},"end":{"line":143,"column":6}},{"start":{"line":143,"column":6},"end":{"line":143,"column":6}}]},"12":{"line":150,"type":"if","locations":[{"start":{"line":150,"column":6},"end":{"line":150,"column":6}},{"start":{"line":150,"column":6},"end":{"line":150,"column":6}}]},"13":{"line":159,"type":"if","locations":[{"start":{"line":159,"column":4},"end":{"line":159,"column":4}},{"start":{"line":159,"column":4},"end":{"line":159,"column":4}}]},"14":{"line":172,"type":"if","locations":[{"start":{"line":172,"column":4},"end":{"line":172,"column":4}},{"start":{"line":172,"column":4},"end":{"line":172,"column":4}}]},"15":{"line":173,"type":"if","locations":[{"start":{"line":173,"column":6},"end":{"line":173,"column":6}},{"start":{"line":173,"column":6},"end":{"line":173,"column":6}}]},"16":{"line":179,"type":"if","locations":[{"start":{"line":179,"column":8},"end":{"line":179,"column":8}},{"start":{"line":179,"column":8},"end":{"line":179,"column":8}}]},"17":{"line":181,"type":"if","locations":[{"start":{"line":181,"column":15},"end":{"line":181,"column":15}},{"start":{"line":181,"column":15},"end":{"line":181,"column":15}}]},"18":{"line":185,"type":"if","locations":[{"start":{"line":185,"column":12},"end":{"line":185,"column":12}},{"start":{"line":185,"column":12},"end":{"line":185,"column":12}}]},"19":{"line":191,"type":"if","locations":[{"start":{"line":191,"column":12},"end":{"line":191,"column":12}},{"start":{"line":191,"column":12},"end":{"line":191,"column":12}}]},"20":{"line":208,"type":"if","locations":[{"start":{"line":208,"column":4},"end":{"line":208,"column":4}},{"start":{"line":208,"column":4},"end":{"line":208,"column":4}}]},"21":{"line":223,"type":"if","locations":[{"start":{"line":223,"column":4},"end":{"line":223,"column":4}},{"start":{"line":223,"column":4},"end":{"line":223,"column":4}}]},"22":{"line":225,"type":"if","locations":[{"start":{"line":225,"column":11},"end":{"line":225,"column":11}},{"start":{"line":225,"column":11},"end":{"line":225,"column":11}}]},"23":{"line":232,"type":"if","locations":[{"start":{"line":232,"column":4},"end":{"line":232,"column":4}},{"start":{"line":232,"column":4},"end":{"line":232,"column":4}}]},"24":{"line":232,"type":"binary-expr","locations":[{"start":{"line":232,"column":8},"end":{"line":232,"column":24}},{"start":{"line":232,"column":28},"end":{"line":232,"column":53}}]},"25":{"line":233,"type":"if","locations":[{"start":{"line":233,"column":6},"end":{"line":233,"column":6}},{"start":{"line":233,"column":6},"end":{"line":233,"column":6}}]},"26":{"line":237,"type":"if","locations":[{"start":{"line":237,"column":6},"end":{"line":237,"column":6}},{"start":{"line":237,"column":6},"end":{"line":237,"column":6}}]},"27":{"line":241,"type":"if","locations":[{"start":{"line":241,"column":8},"end":{"line":241,"column":8}},{"start":{"line":241,"column":8},"end":{"line":241,"column":8}}]},"28":{"line":248,"type":"if","locations":[{"start":{"line":248,"column":4},"end":{"line":248,"column":4}},{"start":{"line":248,"column":4},"end":{"line":248,"column":4}}]},"29":{"line":253,"type":"if","locations":[{"start":{"line":253,"column":11},"end":{"line":253,"column":11}},{"start":{"line":253,"column":11},"end":{"line":253,"column":11}}]}},"code":["'use strict'","","const net = require('net')","const tls = require('tls')","","const initialize = function (api, options, next) {","  // ////////","  // INIT //","  // ////////","","  const type = 'socket'","  const attributes = {","    canChat: true,","    logConnections: true,","    logExits: true,","    pendingShutdownWaitLimit: 5000,","    sendWelcomeMessage: true,","    verbs: [","      'quit',","      'exit',","      'documentation',","      'paramAdd',","      'paramDelete',","      'paramView',","      'paramsView',","      'paramsDelete',","      'roomAdd',","      'roomLeave',","      'roomView',","      'detailsView',","      'say'","    ]","  }","","  const server = new api.GenericServer(type, options, attributes)","","  // ////////////////////","  // REQUIRED METHODS //","  // ////////////////////","","  server.start = function (next) {","    if (options.secure === false) {","      server.server = net.createServer(api.config.servers.socket.serverOptions, (rawConnection) => {","        handleConnection(rawConnection)","      })","    } else {","      server.server = tls.createServer(api.config.servers.socket.serverOptions, (rawConnection) => {","        handleConnection(rawConnection)","      })","    }","","    server.server.on('error', (e) => {","      return next(new Error('Cannot start socket server @ ' + options.bindIP + ':' + options.port + ' => ' + e.message))","    })","","    server.server.listen(options.port, options.bindIP, () => {","      process.nextTick(next)","    })","  }","","  server.stop = function (next) {","    gracefulShutdown(next)","  }","","  server.sendMessage = function (connection, message, messageCount) {","    if (message.error) {","      message.error = api.config.errors.serializers.servers.socket(message.error)","    }","","    if (connection.respondingTo) {","      message.messageCount = messageCount","      connection.respondingTo = null","    } else if (message.context === 'response') {","      if (messageCount) {","        message.messageCount = messageCount","      } else {","        message.messageCount = connection.messageCount","      }","    }","    try {","      connection.rawConnection.write(JSON.stringify(message) + '\\r\\n')","    } catch (e) {","      api.log(['socket write error: %s', e], 'error')","    }","  }","","  server.goodbye = function (connection) {","    try {","      connection.rawConnection.end(JSON.stringify({status: connection.localize(api.config.servers.socket.goodbyeMessage), context: 'api'}) + '\\r\\n')","    } catch (e) {}","  }","","  server.sendFile = function (connection, error, fileStream) {","    if (error) {","      server.sendMessage(connection, error, connection.messageCount)","    } else {","      fileStream.pipe(connection.rawConnection, {end: false})","    }","  }","","  // //////////","  // EVENTS //","  // //////////","","  server.on('connection', function (connection) {","    connection.params = {}","","    const parseLine = function (line) {","      if (api.config.servers.socket.maxDataLength > 0) {","        let blen = Buffer.byteLength(line, 'utf8')","        if (blen > api.config.servers.socket.maxDataLength) {","          let error = api.config.errors.dataLengthTooLarge(api.config.servers.socket.maxDataLength, blen)","          server.log(error, 'error')","          return server.sendMessage(connection, {status: 'error', error: error, context: 'response'})","        }","      }","      if (line.length > 0) {","        // increment at the start of the request so that responses can be caught in order on the client","        // this is not handled by the GenericServer","        connection.messageCount++","        parseRequest(connection, line)","      }","    }","","    connection.rawConnection.on('data', (chunk) => {","      if (checkBreakChars(chunk)) {","        connection.destroy()","      } else {","        // Replace all carriage returns with newlines.","        connection.rawConnection.socketDataString += chunk.toString('utf-8').replace(/\\r/g, '\\n')","        let index","        let d = String(api.config.servers.socket.delimiter)","","        while ((index = connection.rawConnection.socketDataString.indexOf(d)) > -1) {","          let data = connection.rawConnection.socketDataString.slice(0, index)","          connection.rawConnection.socketDataString = connection.rawConnection.socketDataString.slice(index + d.length)","          data.split(d).forEach(parseLine)","        }","      }","    })","","    connection.rawConnection.on('end', () => {","      if (connection.destroyed !== true) {","        try { connection.rawConnection.end() } catch (e) {}","        connection.destroy()","      }","    })","","    connection.rawConnection.on('error', (e) => {","      if (connection.destroyed !== true) {","        server.log('socket error: ' + e, 'error')","        try { connection.rawConnection.end() } catch (e) {}","        connection.destroy()","      }","    })","  })","","  server.on('actionComplete', (data) => {","    if (data.toRender === true) {","      data.response.context = 'response'","      server.sendMessage(data.connection, data.response, data.messageCount)","    }","  })","","  // ///////////","  // HELPERS //","  // ///////////","","  const parseRequest = function (connection, line) {","    let words = line.split(' ')","    let verb = words.shift()","    if (verb === 'file') {","      if (words.length > 0) {","        connection.params.file = words[0]","      }","      server.processFile(connection)","    } else {","      connection.verbs(verb, words, (error, data) => {","        if (!error) {","          server.sendMessage(connection, {status: 'OK', context: 'response', data: data})","        } else if (error.toString().match('verb not found or not allowed')) {","          // check for and attempt to check single-use params","          try {","            let requestHash = JSON.parse(line)","            if (requestHash.params !== undefined) {","              connection.params = {}","              for (let v in requestHash.params) {","                connection.params[v] = requestHash.params[v]","              }","            }","            if (requestHash.action) {","              connection.params.action = requestHash.action","            }","          } catch (e) {","            connection.params.action = verb","          }","          connection.error = null","          connection.response = {}","          server.processAction(connection)","        } else {","          server.sendMessage(connection, {status: error.toString().replace(/^Error:\\s/, ''), context: 'response', data: data})","        }","      })","    }","  }","","  const handleConnection = function (rawConnection) {","    if (api.config.servers.socket.setKeepAlive === true) {","      rawConnection.setKeepAlive(true)","    }","    rawConnection.socketDataString = ''","    server.buildConnection({","      rawConnection: rawConnection,","      remoteAddress: rawConnection.remoteAddress,","      remotePort: rawConnection.remotePort","    }) // will emit 'connection'","  }","","  // I check for ctrl+c in the stream","  const checkBreakChars = function (chunk) {","    let found = false","    let hexChunk = chunk.toString('hex', 0, chunk.length)","    if (hexChunk === 'fff4fffd06') {","      found = true // CTRL + C","    } else if (hexChunk === '04') {","      found = true // CTRL + D","    }","    return found","  }","","  const gracefulShutdown = function (next, alreadyShutdown) {","    if (!alreadyShutdown || alreadyShutdown === false) {","      if (server.server) { server.server.close() }","    }","    let pendingConnections = 0","    server.connections().forEach((connection) => {","      if (connection.pendingActions === 0) {","        connection.destroy()","      } else {","        pendingConnections++","        if (!connection.rawConnection.shutDownTimer) {","          connection.rawConnection.shutDownTimer = setTimeout(() => {","            connection.destroy()","          }, attributes.pendingShutdownWaitLimit)","        }","      }","    })","    if (pendingConnections > 0) {","      server.log('waiting on shutdown, there are still ' + pendingConnections + ' connected clients waiting on a response', 'notice')","      setTimeout(() => {","        gracefulShutdown(next, true)","      }, 1000)","    } else if (typeof next === 'function') { next() }","  }","","  next(server)","}","","// ///////////////////////////////////////////////////////////////////","// exports","exports.initialize = initialize",""],"l":{"3":1,"4":1,"6":1,"11":0,"12":0,"35":0,"41":0,"42":0,"43":0,"44":0,"47":0,"48":0,"52":0,"53":0,"56":0,"57":0,"61":0,"62":0,"65":0,"66":0,"67":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"77":0,"80":0,"81":0,"83":0,"87":0,"88":0,"89":0,"93":0,"94":0,"95":0,"97":0,"105":0,"106":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"117":0,"120":0,"121":0,"125":0,"126":0,"127":0,"130":0,"131":0,"132":0,"134":0,"135":0,"136":0,"137":0,"142":0,"143":0,"144":0,"145":0,"149":0,"150":0,"151":0,"152":0,"153":0,"158":0,"159":0,"160":0,"161":0,"169":0,"170":0,"171":0,"172":0,"173":0,"174":0,"176":0,"178":0,"179":0,"180":0,"181":0,"183":0,"184":0,"185":0,"186":0,"187":0,"188":0,"191":0,"192":0,"195":0,"197":0,"198":0,"199":0,"201":0,"207":0,"208":0,"209":0,"211":0,"212":0,"220":0,"221":0,"222":0,"223":0,"224":0,"225":0,"226":0,"228":0,"231":0,"232":0,"233":0,"235":0,"236":0,"237":0,"238":0,"240":0,"241":0,"242":0,"243":0,"248":0,"249":0,"250":0,"251":0,"253":0,"256":0,"261":1}},"/home/travis/build/npmtest/node-npmtest-actionhero/node_modules/actionhero/servers/web.js":{"path":"/home/travis/build/npmtest/node-npmtest-actionhero/node_modules/actionhero/servers/web.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":0,"138":0,"139":0,"140":0,"141":0,"142":0,"143":0,"144":0,"145":0,"146":0,"147":0,"148":0,"149":0,"150":0,"151":0,"152":0,"153":0,"154":0,"155":0,"156":0,"157":0,"158":0,"159":0,"160":0,"161":0,"162":0,"163":0,"164":0,"165":0,"166":0,"167":0,"168":0,"169":0,"170":0,"171":0,"172":0,"173":0,"174":0,"175":0,"176":0,"177":0,"178":0,"179":0,"180":0,"181":0,"182":0,"183":0,"184":0,"185":0,"186":0,"187":0,"188":0,"189":0,"190":0,"191":0,"192":0,"193":0,"194":0,"195":0,"196":0,"197":0,"198":0,"199":0,"200":0,"201":0,"202":0,"203":0,"204":0,"205":0,"206":0,"207":0,"208":0,"209":0,"210":0,"211":0,"212":0,"213":0,"214":0,"215":0,"216":0,"217":0,"218":0,"219":0,"220":0,"221":0,"222":0,"223":0,"224":0,"225":0,"226":0,"227":0,"228":0,"229":0,"230":0,"231":0,"232":0,"233":0,"234":0,"235":0,"236":0,"237":0,"238":0,"239":0,"240":0,"241":0,"242":0,"243":0,"244":0,"245":0,"246":0,"247":0,"248":0,"249":0,"250":0,"251":0,"252":0,"253":0,"254":0,"255":0,"256":0,"257":0,"258":0,"259":0,"260":0,"261":0,"262":0,"263":0,"264":0,"265":0,"266":0,"267":0,"268":0,"269":0,"270":0,"271":0,"272":0,"273":0,"274":0,"275":0,"276":0,"277":0,"278":0,"279":0,"280":0,"281":0,"282":0,"283":0,"284":0,"285":0,"286":0,"287":0,"288":0,"289":0,"290":0,"291":0,"292":0,"293":0,"294":0,"295":0,"296":0,"297":0,"298":0,"299":0,"300":0,"301":0,"302":0,"303":0,"304":0,"305":0,"306":0,"307":0,"308":0,"309":0,"310":0,"311":0,"312":0,"313":0,"314":0,"315":0,"316":0,"317":0,"318":0,"319":0,"320":0,"321":0,"322":0,"323":0,"324":0,"325":0,"326":0,"327":0,"328":0,"329":0,"330":0,"331":0,"332":0,"333":0,"334":0,"335":0,"336":0,"337":0,"338":0,"339":0,"340":0,"341":0,"342":0,"343":0,"344":0,"345":0,"346":0,"347":0,"348":0,"349":0,"350":0,"351":0,"352":0,"353":0,"354":0,"355":0,"356":0,"357":0,"358":0,"359":0,"360":0,"361":0,"362":0,"363":0,"364":0,"365":0,"366":0,"367":1,"368":0,"369":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0,0,0,0],"32":[0,0],"33":[0,0,0,0,0],"34":[0,0],"35":[0,0],"36":[0,0],"37":[0,0],"38":[0,0],"39":[0,0],"40":[0,0],"41":[0,0],"42":[0,0],"43":[0,0],"44":[0,0],"45":[0,0],"46":[0,0],"47":[0,0],"48":[0,0],"49":[0,0,0],"50":[0,0],"51":[0,0],"52":[0,0],"53":[0,0],"54":[0,0],"55":[0,0],"56":[0,0],"57":[0,0],"58":[0,0],"59":[0,0],"60":[0,0],"61":[0,0],"62":[0,0],"63":[0,0],"64":[0,0],"65":[0,0],"66":[0,0],"67":[0,0],"68":[0,0],"69":[0,0],"70":[0,0],"71":[0,0],"72":[0,0,0,0,0],"73":[0,0],"74":[0,0],"75":[0,0],"76":[0,0],"77":[0,0],"78":[0,0],"79":[0,0],"80":[0,0],"81":[0,0],"82":[0,0],"83":[0,0],"84":[0,0],"85":[0,0],"86":[0,0],"87":[0,0],"88":[0,0],"89":[0,0],"90":[0,0],"91":[0,0],"92":[0,0],"93":[0,0],"94":[0,0],"95":[0,0,0,0],"96":[0,0],"97":[0,0],"98":[0,0],"99":[0,0],"100":[0,0],"101":[0,0],"102":[0,0],"103":[0,0],"104":[0,0],"105":[0,0],"106":[0,0],"107":[0,0],"108":[0,0],"109":[0,0],"110":[0,0],"111":[0,0],"112":[0,0],"113":[0,0,0],"114":[0,0],"115":[0,0],"116":[0,0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0},"fnMap":{"1":{"name":"(anonymous_1)","line":14,"loc":{"start":{"line":14,"column":19},"end":{"line":14,"column":49}}},"2":{"name":"(anonymous_2)","line":40,"loc":{"start":{"line":40,"column":17},"end":{"line":40,"column":33}}},"3":{"name":"(anonymous_3)","line":74,"loc":{"start":{"line":74,"column":16},"end":{"line":74,"column":32}}},"4":{"name":"(anonymous_4)","line":79,"loc":{"start":{"line":79,"column":23},"end":{"line":79,"column":54}}},"5":{"name":"(anonymous_5)","line":92,"loc":{"start":{"line":92,"column":20},"end":{"line":92,"column":89}}},"6":{"name":"(anonymous_6)","line":114,"loc":{"start":{"line":114,"column":28},"end":{"line":114,"column":40}}},"7":{"name":"(anonymous_7)","line":173,"loc":{"start":{"line":173,"column":31},"end":{"line":173,"column":120}}},"8":{"name":"(anonymous_8)","line":235,"loc":{"start":{"line":235,"column":19},"end":{"line":235,"column":31}}},"9":{"name":"(anonymous_9)","line":265,"loc":{"start":{"line":265,"column":24},"end":{"line":265,"column":44}}},"10":{"name":"(anonymous_10)","line":350,"loc":{"start":{"line":350,"column":27},"end":{"line":350,"column":43}}},"11":{"name":"(anonymous_11)","line":410,"loc":{"start":{"line":410,"column":24},"end":{"line":410,"column":53}}},"12":{"name":"(anonymous_12)","line":421,"loc":{"start":{"line":421,"column":27},"end":{"line":421,"column":49}}},"13":{"name":"(anonymous_13)","line":433,"loc":{"start":{"line":433,"column":25},"end":{"line":433,"column":47}}},"14":{"name":"(anonymous_14)","line":439,"loc":{"start":{"line":439,"column":33},"end":{"line":439,"column":65}}},"15":{"name":"(anonymous_15)","line":531,"loc":{"start":{"line":531,"column":35},"end":{"line":531,"column":67}}},"16":{"name":"(anonymous_16)","line":543,"loc":{"start":{"line":543,"column":27},"end":{"line":543,"column":51}}},"17":{"name":"(anonymous_17)","line":561,"loc":{"start":{"line":561,"column":36},"end":{"line":561,"column":58}}},"18":{"name":"(anonymous_18)","line":578,"loc":{"start":{"line":578,"column":23},"end":{"line":578,"column":45}}},"19":{"name":"(anonymous_19)","line":597,"loc":{"start":{"line":597,"column":22},"end":{"line":597,"column":46}}},"20":{"name":"(anonymous_20)","line":609,"loc":{"start":{"line":609,"column":22},"end":{"line":609,"column":46}}},"21":{"name":"callbackHtmlEscape","line":618,"loc":{"start":{"line":618,"column":0},"end":{"line":618,"column":34}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":26}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":24}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":24}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":28}},"5":{"start":{"line":7,"column":0},"end":{"line":7,"column":28}},"6":{"start":{"line":8,"column":0},"end":{"line":8,"column":40}},"7":{"start":{"line":9,"column":0},"end":{"line":9,"column":57}},"8":{"start":{"line":10,"column":0},"end":{"line":10,"column":28}},"9":{"start":{"line":11,"column":0},"end":{"line":11,"column":28}},"10":{"start":{"line":12,"column":0},"end":{"line":12,"column":28}},"11":{"start":{"line":14,"column":0},"end":{"line":616,"column":1}},"12":{"start":{"line":19,"column":2},"end":{"line":19,"column":20}},"13":{"start":{"line":20,"column":2},"end":{"line":28,"column":3}},"14":{"start":{"line":30,"column":2},"end":{"line":30,"column":65}},"15":{"start":{"line":32,"column":2},"end":{"line":34,"column":3}},"16":{"start":{"line":33,"column":4},"end":{"line":33,"column":94}},"17":{"start":{"line":40,"column":2},"end":{"line":72,"column":3}},"18":{"start":{"line":41,"column":4},"end":{"line":51,"column":5}},"19":{"start":{"line":42,"column":6},"end":{"line":42,"column":34}},"20":{"start":{"line":43,"column":6},"end":{"line":45,"column":8}},"21":{"start":{"line":44,"column":8},"end":{"line":44,"column":31}},"22":{"start":{"line":47,"column":6},"end":{"line":47,"column":36}},"23":{"start":{"line":48,"column":6},"end":{"line":50,"column":8}},"24":{"start":{"line":49,"column":8},"end":{"line":49,"column":31}},"25":{"start":{"line":53,"column":4},"end":{"line":53,"column":24}},"26":{"start":{"line":54,"column":4},"end":{"line":66,"column":6}},"27":{"start":{"line":55,"column":6},"end":{"line":55,"column":20}},"28":{"start":{"line":56,"column":6},"end":{"line":65,"column":7}},"29":{"start":{"line":57,"column":8},"end":{"line":57,"column":87}},"30":{"start":{"line":58,"column":8},"end":{"line":58,"column":77}},"31":{"start":{"line":58,"column":34},"end":{"line":58,"column":76}},"32":{"start":{"line":59,"column":8},"end":{"line":62,"column":16}},"33":{"start":{"line":60,"column":10},"end":{"line":60,"column":50}},"34":{"start":{"line":61,"column":10},"end":{"line":61,"column":60}},"35":{"start":{"line":64,"column":8},"end":{"line":64,"column":119}},"36":{"start":{"line":68,"column":4},"end":{"line":71,"column":6}},"37":{"start":{"line":69,"column":6},"end":{"line":69,"column":47}},"38":{"start":{"line":70,"column":6},"end":{"line":70,"column":12}},"39":{"start":{"line":74,"column":2},"end":{"line":77,"column":3}},"40":{"start":{"line":75,"column":4},"end":{"line":75,"column":48}},"41":{"start":{"line":75,"column":25},"end":{"line":75,"column":47}},"42":{"start":{"line":76,"column":4},"end":{"line":76,"column":26}},"43":{"start":{"line":79,"column":2},"end":{"line":90,"column":3}},"44":{"start":{"line":80,"column":4},"end":{"line":80,"column":27}},"45":{"start":{"line":81,"column":4},"end":{"line":83,"column":5}},"46":{"start":{"line":82,"column":6},"end":{"line":82,"column":38}},"47":{"start":{"line":85,"column":4},"end":{"line":85,"column":28}},"48":{"start":{"line":86,"column":4},"end":{"line":86,"column":60}},"49":{"start":{"line":87,"column":4},"end":{"line":87,"column":80}},"50":{"start":{"line":89,"column":4},"end":{"line":89,"column":85}},"51":{"start":{"line":92,"column":2},"end":{"line":171,"column":3}},"52":{"start":{"line":93,"column":4},"end":{"line":93,"column":33}},"53":{"start":{"line":94,"column":4},"end":{"line":94,"column":23}},"54":{"start":{"line":95,"column":4},"end":{"line":95,"column":18}},"55":{"start":{"line":97,"column":4},"end":{"line":99,"column":6}},"56":{"start":{"line":98,"column":6},"end":{"line":98,"column":81}},"57":{"start":{"line":98,"column":55},"end":{"line":98,"column":80}},"58":{"start":{"line":101,"column":4},"end":{"line":101,"column":73}},"59":{"start":{"line":103,"column":4},"end":{"line":105,"column":5}},"60":{"start":{"line":104,"column":6},"end":{"line":104,"column":187}},"61":{"start":{"line":104,"column":32},"end":{"line":104,"column":186}},"62":{"start":{"line":106,"column":4},"end":{"line":108,"column":5}},"63":{"start":{"line":107,"column":6},"end":{"line":107,"column":130}},"64":{"start":{"line":107,"column":26},"end":{"line":107,"column":129}},"65":{"start":{"line":110,"column":4},"end":{"line":110,"column":28}},"66":{"start":{"line":111,"column":4},"end":{"line":111,"column":60}},"67":{"start":{"line":112,"column":4},"end":{"line":112,"column":53}},"68":{"start":{"line":114,"column":4},"end":{"line":125,"column":5}},"69":{"start":{"line":115,"column":6},"end":{"line":115,"column":84}},"70":{"start":{"line":116,"column":6},"end":{"line":124,"column":7}},"71":{"start":{"line":117,"column":8},"end":{"line":117,"column":88}},"72":{"start":{"line":118,"column":13},"end":{"line":124,"column":7}},"73":{"start":{"line":119,"column":8},"end":{"line":119,"column":99}},"74":{"start":{"line":121,"column":8},"end":{"line":121,"column":91}},"75":{"start":{"line":122,"column":8},"end":{"line":122,"column":42}},"76":{"start":{"line":123,"column":8},"end":{"line":123,"column":28}},"77":{"start":{"line":127,"column":4},"end":{"line":130,"column":5}},"78":{"start":{"line":128,"column":6},"end":{"line":128,"column":53}},"79":{"start":{"line":129,"column":6},"end":{"line":129,"column":32}},"80":{"start":{"line":132,"column":4},"end":{"line":137,"column":5}},"81":{"start":{"line":133,"column":6},"end":{"line":133,"column":65}},"82":{"start":{"line":134,"column":6},"end":{"line":134,"column":37}},"83":{"start":{"line":135,"column":6},"end":{"line":135,"column":94}},"84":{"start":{"line":135,"column":45},"end":{"line":135,"column":93}},"85":{"start":{"line":136,"column":6},"end":{"line":136,"column":32}},"86":{"start":{"line":139,"column":4},"end":{"line":170,"column":5}},"87":{"start":{"line":140,"column":6},"end":{"line":167,"column":8}},"88":{"start":{"line":141,"column":8},"end":{"line":144,"column":9}},"89":{"start":{"line":142,"column":10},"end":{"line":142,"column":81}},"90":{"start":{"line":143,"column":10},"end":{"line":143,"column":36}},"91":{"start":{"line":145,"column":8},"end":{"line":145,"column":54}},"92":{"start":{"line":146,"column":8},"end":{"line":146,"column":73}},"93":{"start":{"line":147,"column":8},"end":{"line":147,"column":57}},"94":{"start":{"line":148,"column":8},"end":{"line":148,"column":57}},"95":{"start":{"line":149,"column":8},"end":{"line":149,"column":27}},"96":{"start":{"line":150,"column":8},"end":{"line":150,"column":23}},"97":{"start":{"line":152,"column":8},"end":{"line":154,"column":9}},"98":{"start":{"line":153,"column":10},"end":{"line":153,"column":24}},"99":{"start":{"line":156,"column":8},"end":{"line":156,"column":81}},"100":{"start":{"line":156,"column":31},"end":{"line":156,"column":80}},"101":{"start":{"line":158,"column":8},"end":{"line":162,"column":9}},"102":{"start":{"line":159,"column":10},"end":{"line":161,"column":12}},"103":{"start":{"line":160,"column":12},"end":{"line":160,"column":83}},"104":{"start":{"line":163,"column":8},"end":{"line":165,"column":9}},"105":{"start":{"line":164,"column":10},"end":{"line":164,"column":57}},"106":{"start":{"line":166,"column":8},"end":{"line":166,"column":27}},"107":{"start":{"line":169,"column":6},"end":{"line":169,"column":25}},"108":{"start":{"line":173,"column":2},"end":{"line":233,"column":3}},"109":{"start":{"line":174,"column":4},"end":{"line":174,"column":80}},"110":{"start":{"line":175,"column":4},"end":{"line":175,"column":18}},"111":{"start":{"line":176,"column":4},"end":{"line":176,"column":21}},"112":{"start":{"line":177,"column":4},"end":{"line":177,"column":48}},"113":{"start":{"line":177,"column":27},"end":{"line":177,"column":47}},"114":{"start":{"line":182,"column":4},"end":{"line":194,"column":5}},"115":{"start":{"line":183,"column":6},"end":{"line":183,"column":54}},"116":{"start":{"line":184,"column":6},"end":{"line":184,"column":60}},"117":{"start":{"line":185,"column":6},"end":{"line":193,"column":7}},"118":{"start":{"line":186,"column":8},"end":{"line":186,"column":50}},"119":{"start":{"line":187,"column":8},"end":{"line":187,"column":38}},"120":{"start":{"line":188,"column":8},"end":{"line":188,"column":33}},"121":{"start":{"line":189,"column":13},"end":{"line":193,"column":7}},"122":{"start":{"line":190,"column":8},"end":{"line":190,"column":53}},"123":{"start":{"line":191,"column":8},"end":{"line":191,"column":41}},"124":{"start":{"line":192,"column":8},"end":{"line":192,"column":36}},"125":{"start":{"line":197,"column":4},"end":{"line":199,"column":6}},"126":{"start":{"line":198,"column":6},"end":{"line":198,"column":26}},"127":{"start":{"line":202,"column":4},"end":{"line":204,"column":6}},"128":{"start":{"line":203,"column":6},"end":{"line":203,"column":26}},"129":{"start":{"line":206,"column":4},"end":{"line":232,"column":5}},"130":{"start":{"line":207,"column":6},"end":{"line":218,"column":7}},"131":{"start":{"line":209,"column":8},"end":{"line":209,"column":91}},"132":{"start":{"line":210,"column":8},"end":{"line":210,"column":70}},"133":{"start":{"line":213,"column":8},"end":{"line":215,"column":9}},"134":{"start":{"line":214,"column":10},"end":{"line":214,"column":54}},"135":{"start":{"line":216,"column":8},"end":{"line":216,"column":91}},"136":{"start":{"line":217,"column":8},"end":{"line":217,"column":53}},"137":{"start":{"line":220,"column":6},"end":{"line":231,"column":7}},"138":{"start":{"line":221,"column":8},"end":{"line":226,"column":10}},"139":{"start":{"line":222,"column":10},"end":{"line":222,"column":45}},"140":{"start":{"line":222,"column":23},"end":{"line":222,"column":44}},"141":{"start":{"line":223,"column":10},"end":{"line":223,"column":63}},"142":{"start":{"line":224,"column":10},"end":{"line":224,"column":93}},"143":{"start":{"line":225,"column":10},"end":{"line":225,"column":56}},"144":{"start":{"line":228,"column":8},"end":{"line":228,"column":75}},"145":{"start":{"line":229,"column":8},"end":{"line":229,"column":91}},"146":{"start":{"line":230,"column":8},"end":{"line":230,"column":56}},"147":{"start":{"line":235,"column":2},"end":{"line":237,"column":3}},"148":{"start":{"line":243,"column":2},"end":{"line":255,"column":4}},"149":{"start":{"line":244,"column":4},"end":{"line":254,"column":6}},"150":{"start":{"line":245,"column":6},"end":{"line":253,"column":7}},"151":{"start":{"line":246,"column":8},"end":{"line":246,"column":40}},"152":{"start":{"line":247,"column":13},"end":{"line":253,"column":7}},"153":{"start":{"line":248,"column":8},"end":{"line":248,"column":38}},"154":{"start":{"line":249,"column":13},"end":{"line":253,"column":7}},"155":{"start":{"line":250,"column":8},"end":{"line":250,"column":36}},"156":{"start":{"line":251,"column":13},"end":{"line":253,"column":7}},"157":{"start":{"line":252,"column":8},"end":{"line":252,"column":34}},"158":{"start":{"line":257,"column":2},"end":{"line":259,"column":4}},"159":{"start":{"line":258,"column":4},"end":{"line":258,"column":26}},"160":{"start":{"line":265,"column":2},"end":{"line":348,"column":3}},"161":{"start":{"line":266,"column":4},"end":{"line":347,"column":6}},"162":{"start":{"line":267,"column":6},"end":{"line":267,"column":28}},"163":{"start":{"line":267,"column":17},"end":{"line":267,"column":28}},"164":{"start":{"line":269,"column":6},"end":{"line":269,"column":30}},"165":{"start":{"line":270,"column":6},"end":{"line":270,"column":47}},"166":{"start":{"line":271,"column":6},"end":{"line":271,"column":32}},"167":{"start":{"line":272,"column":6},"end":{"line":272,"column":43}},"168":{"start":{"line":273,"column":6},"end":{"line":273,"column":46}},"169":{"start":{"line":274,"column":6},"end":{"line":274,"column":11}},"170":{"start":{"line":275,"column":6},"end":{"line":277,"column":7}},"171":{"start":{"line":276,"column":8},"end":{"line":276,"column":48}},"172":{"start":{"line":280,"column":6},"end":{"line":280,"column":79}},"173":{"start":{"line":282,"column":6},"end":{"line":286,"column":7}},"174":{"start":{"line":283,"column":8},"end":{"line":285,"column":9}},"175":{"start":{"line":284,"column":10},"end":{"line":284,"column":74}},"176":{"start":{"line":288,"column":6},"end":{"line":288,"column":49}},"177":{"start":{"line":289,"column":6},"end":{"line":289,"column":48}},"178":{"start":{"line":292,"column":6},"end":{"line":295,"column":7}},"179":{"start":{"line":293,"column":8},"end":{"line":293,"column":28}},"180":{"start":{"line":294,"column":8},"end":{"line":294,"column":24}},"181":{"start":{"line":297,"column":6},"end":{"line":316,"column":7}},"182":{"start":{"line":298,"column":8},"end":{"line":298,"column":17}},"183":{"start":{"line":299,"column":8},"end":{"line":299,"column":70}},"184":{"start":{"line":300,"column":8},"end":{"line":311,"column":9}},"185":{"start":{"line":302,"column":10},"end":{"line":302,"column":58}},"186":{"start":{"line":303,"column":10},"end":{"line":303,"column":40}},"187":{"start":{"line":304,"column":10},"end":{"line":304,"column":47}},"188":{"start":{"line":304,"column":26},"end":{"line":304,"column":46}},"189":{"start":{"line":305,"column":10},"end":{"line":305,"column":49}},"190":{"start":{"line":305,"column":26},"end":{"line":305,"column":48}},"191":{"start":{"line":308,"column":10},"end":{"line":308,"column":53}},"192":{"start":{"line":309,"column":10},"end":{"line":309,"column":51}},"193":{"start":{"line":309,"column":28},"end":{"line":309,"column":50}},"194":{"start":{"line":310,"column":10},"end":{"line":310,"column":53}},"195":{"start":{"line":310,"column":28},"end":{"line":310,"column":52}},"196":{"start":{"line":313,"column":8},"end":{"line":315,"column":9}},"197":{"start":{"line":314,"column":10},"end":{"line":314,"column":54}},"198":{"start":{"line":318,"column":6},"end":{"line":328,"column":7}},"199":{"start":{"line":319,"column":8},"end":{"line":319,"column":29}},"200":{"start":{"line":320,"column":8},"end":{"line":320,"column":50}},"201":{"start":{"line":320,"column":30},"end":{"line":320,"column":49}},"202":{"start":{"line":321,"column":8},"end":{"line":321,"column":134}},"203":{"start":{"line":322,"column":8},"end":{"line":327,"column":9}},"204":{"start":{"line":323,"column":10},"end":{"line":323,"column":69}},"205":{"start":{"line":324,"column":10},"end":{"line":324,"column":30}},"206":{"start":{"line":325,"column":10},"end":{"line":325,"column":54}},"207":{"start":{"line":326,"column":10},"end":{"line":326,"column":80}},"208":{"start":{"line":330,"column":6},"end":{"line":346,"column":8}},"209":{"start":{"line":350,"column":2},"end":{"line":408,"column":3}},"210":{"start":{"line":351,"column":4},"end":{"line":407,"column":5}},"211":{"start":{"line":352,"column":6},"end":{"line":360,"column":7}},"212":{"start":{"line":353,"column":8},"end":{"line":353,"column":45}},"213":{"start":{"line":354,"column":8},"end":{"line":359,"column":9}},"214":{"start":{"line":362,"column":6},"end":{"line":364,"column":7}},"215":{"start":{"line":363,"column":8},"end":{"line":363,"column":87}},"216":{"start":{"line":366,"column":6},"end":{"line":378,"column":7}},"217":{"start":{"line":367,"column":8},"end":{"line":377,"column":9}},"218":{"start":{"line":368,"column":10},"end":{"line":376,"column":11}},"219":{"start":{"line":369,"column":12},"end":{"line":369,"column":64}},"220":{"start":{"line":370,"column":17},"end":{"line":376,"column":11}},"221":{"start":{"line":371,"column":12},"end":{"line":371,"column":64}},"222":{"start":{"line":372,"column":17},"end":{"line":376,"column":11}},"223":{"start":{"line":373,"column":12},"end":{"line":373,"column":64}},"224":{"start":{"line":375,"column":12},"end":{"line":375,"column":64}},"225":{"start":{"line":380,"column":6},"end":{"line":388,"column":7}},"226":{"start":{"line":387,"column":8},"end":{"line":387,"column":116}},"227":{"start":{"line":390,"column":6},"end":{"line":392,"column":7}},"228":{"start":{"line":391,"column":8},"end":{"line":391,"column":92}},"229":{"start":{"line":394,"column":6},"end":{"line":394,"column":29}},"230":{"start":{"line":396,"column":6},"end":{"line":404,"column":7}},"231":{"start":{"line":397,"column":8},"end":{"line":397,"column":92}},"232":{"start":{"line":398,"column":8},"end":{"line":401,"column":9}},"233":{"start":{"line":399,"column":10},"end":{"line":399,"column":104}},"234":{"start":{"line":400,"column":10},"end":{"line":400,"column":108}},"235":{"start":{"line":403,"column":8},"end":{"line":403,"column":38}},"236":{"start":{"line":406,"column":6},"end":{"line":406,"column":57}},"237":{"start":{"line":410,"column":2},"end":{"line":419,"column":3}},"238":{"start":{"line":411,"column":4},"end":{"line":411,"column":63}},"239":{"start":{"line":412,"column":4},"end":{"line":417,"column":5}},"240":{"start":{"line":413,"column":6},"end":{"line":415,"column":7}},"241":{"start":{"line":414,"column":8},"end":{"line":414,"column":61}},"242":{"start":{"line":416,"column":6},"end":{"line":416,"column":9}},"243":{"start":{"line":418,"column":4},"end":{"line":418,"column":15}},"244":{"start":{"line":421,"column":2},"end":{"line":431,"column":3}},"245":{"start":{"line":422,"column":4},"end":{"line":425,"column":5}},"246":{"start":{"line":423,"column":6},"end":{"line":423,"column":68}},"247":{"start":{"line":424,"column":6},"end":{"line":424,"column":94}},"248":{"start":{"line":426,"column":4},"end":{"line":429,"column":5}},"249":{"start":{"line":427,"column":6},"end":{"line":427,"column":24}},"250":{"start":{"line":428,"column":6},"end":{"line":428,"column":92}},"251":{"start":{"line":430,"column":4},"end":{"line":430,"column":38}},"252":{"start":{"line":433,"column":2},"end":{"line":437,"column":3}},"253":{"start":{"line":434,"column":4},"end":{"line":434,"column":54}},"254":{"start":{"line":435,"column":4},"end":{"line":435,"column":85}},"255":{"start":{"line":436,"column":4},"end":{"line":436,"column":50}},"256":{"start":{"line":439,"column":2},"end":{"line":529,"column":3}},"257":{"start":{"line":441,"column":4},"end":{"line":441,"column":61}},"258":{"start":{"line":442,"column":4},"end":{"line":442,"column":62}},"259":{"start":{"line":443,"column":4},"end":{"line":443,"column":39}},"260":{"start":{"line":444,"column":4},"end":{"line":444,"column":21}},"261":{"start":{"line":445,"column":4},"end":{"line":445,"column":9}},"262":{"start":{"line":446,"column":4},"end":{"line":446,"column":53}},"263":{"start":{"line":446,"column":34},"end":{"line":446,"column":52}},"264":{"start":{"line":447,"column":4},"end":{"line":447,"column":67}},"265":{"start":{"line":447,"column":50},"end":{"line":447,"column":66}},"266":{"start":{"line":449,"column":4},"end":{"line":463,"column":5}},"267":{"start":{"line":450,"column":6},"end":{"line":450,"column":25}},"268":{"start":{"line":451,"column":6},"end":{"line":451,"column":23}},"269":{"start":{"line":452,"column":11},"end":{"line":463,"column":5}},"270":{"start":{"line":453,"column":6},"end":{"line":453,"column":26}},"271":{"start":{"line":454,"column":6},"end":{"line":454,"column":23}},"272":{"start":{"line":455,"column":11},"end":{"line":463,"column":5}},"273":{"start":{"line":456,"column":6},"end":{"line":456,"column":25}},"274":{"start":{"line":457,"column":6},"end":{"line":457,"column":80}},"275":{"start":{"line":458,"column":6},"end":{"line":458,"column":69}},"276":{"start":{"line":458,"column":50},"end":{"line":458,"column":68}},"277":{"start":{"line":459,"column":11},"end":{"line":463,"column":5}},"278":{"start":{"line":460,"column":6},"end":{"line":460,"column":26}},"279":{"start":{"line":461,"column":6},"end":{"line":461,"column":78}},"280":{"start":{"line":462,"column":6},"end":{"line":462,"column":69}},"281":{"start":{"line":462,"column":50},"end":{"line":462,"column":68}},"282":{"start":{"line":465,"column":4},"end":{"line":465,"column":79}},"283":{"start":{"line":466,"column":4},"end":{"line":468,"column":5}},"284":{"start":{"line":467,"column":6},"end":{"line":467,"column":72}},"285":{"start":{"line":471,"column":4},"end":{"line":528,"column":5}},"286":{"start":{"line":472,"column":6},"end":{"line":472,"column":29}},"287":{"start":{"line":473,"column":6},"end":{"line":473,"column":27}},"288":{"start":{"line":476,"column":11},"end":{"line":528,"column":5}},"289":{"start":{"line":477,"column":6},"end":{"line":477,"column":80}},"290":{"start":{"line":477,"column":57},"end":{"line":477,"column":79}},"291":{"start":{"line":478,"column":6},"end":{"line":478,"column":69}},"292":{"start":{"line":479,"column":6},"end":{"line":479,"column":102}},"293":{"start":{"line":480,"column":6},"end":{"line":480,"column":86}},"294":{"start":{"line":481,"column":6},"end":{"line":511,"column":7}},"295":{"start":{"line":489,"column":8},"end":{"line":489,"column":69}},"296":{"start":{"line":490,"column":8},"end":{"line":492,"column":9}},"297":{"start":{"line":491,"column":10},"end":{"line":491,"column":82}},"298":{"start":{"line":493,"column":8},"end":{"line":506,"column":10}},"299":{"start":{"line":494,"column":10},"end":{"line":502,"column":11}},"300":{"start":{"line":495,"column":12},"end":{"line":495,"column":74}},"301":{"start":{"line":496,"column":12},"end":{"line":496,"column":84}},"302":{"start":{"line":498,"column":12},"end":{"line":498,"column":57}},"303":{"start":{"line":499,"column":12},"end":{"line":499,"column":57}},"304":{"start":{"line":500,"column":12},"end":{"line":500,"column":55}},"305":{"start":{"line":501,"column":12},"end":{"line":501,"column":56}},"306":{"start":{"line":503,"column":10},"end":{"line":503,"column":95}},"307":{"start":{"line":503,"column":62},"end":{"line":503,"column":94}},"308":{"start":{"line":504,"column":10},"end":{"line":504,"column":56}},"309":{"start":{"line":505,"column":10},"end":{"line":505,"column":31}},"310":{"start":{"line":508,"column":8},"end":{"line":508,"column":93}},"311":{"start":{"line":508,"column":60},"end":{"line":508,"column":92}},"312":{"start":{"line":509,"column":8},"end":{"line":509,"column":54}},"313":{"start":{"line":510,"column":8},"end":{"line":510,"column":29}},"314":{"start":{"line":514,"column":11},"end":{"line":528,"column":5}},"315":{"start":{"line":515,"column":6},"end":{"line":515,"column":52}},"316":{"start":{"line":516,"column":6},"end":{"line":518,"column":7}},"317":{"start":{"line":517,"column":8},"end":{"line":517,"column":57}},"318":{"start":{"line":519,"column":6},"end":{"line":521,"column":7}},"319":{"start":{"line":520,"column":8},"end":{"line":520,"column":94}},"320":{"start":{"line":522,"column":6},"end":{"line":526,"column":7}},"321":{"start":{"line":523,"column":8},"end":{"line":523,"column":75}},"322":{"start":{"line":525,"column":8},"end":{"line":525,"column":77}},"323":{"start":{"line":527,"column":6},"end":{"line":527,"column":27}},"324":{"start":{"line":531,"column":2},"end":{"line":541,"column":3}},"325":{"start":{"line":533,"column":4},"end":{"line":533,"column":69}},"326":{"start":{"line":534,"column":4},"end":{"line":536,"column":5}},"327":{"start":{"line":535,"column":6},"end":{"line":535,"column":45}},"328":{"start":{"line":538,"column":4},"end":{"line":540,"column":5}},"329":{"start":{"line":539,"column":6},"end":{"line":539,"column":40}},"330":{"start":{"line":543,"column":2},"end":{"line":559,"column":3}},"331":{"start":{"line":544,"column":4},"end":{"line":558,"column":10}},"332":{"start":{"line":545,"column":6},"end":{"line":545,"column":59}},"333":{"start":{"line":547,"column":6},"end":{"line":555,"column":7}},"334":{"start":{"line":548,"column":8},"end":{"line":552,"column":9}},"335":{"start":{"line":549,"column":10},"end":{"line":549,"column":58}},"336":{"start":{"line":551,"column":10},"end":{"line":551,"column":56}},"337":{"start":{"line":554,"column":8},"end":{"line":554,"column":52}},"338":{"start":{"line":557,"column":6},"end":{"line":557,"column":20}},"339":{"start":{"line":561,"column":2},"end":{"line":576,"column":3}},"340":{"start":{"line":562,"column":4},"end":{"line":567,"column":5}},"341":{"start":{"line":569,"column":4},"end":{"line":573,"column":5}},"342":{"start":{"line":570,"column":6},"end":{"line":572,"column":7}},"343":{"start":{"line":571,"column":8},"end":{"line":571,"column":69}},"344":{"start":{"line":575,"column":4},"end":{"line":575,"column":31}},"345":{"start":{"line":578,"column":2},"end":{"line":595,"column":3}},"346":{"start":{"line":579,"column":4},"end":{"line":579,"column":78}},"347":{"start":{"line":580,"column":4},"end":{"line":580,"column":25}},"348":{"start":{"line":581,"column":4},"end":{"line":581,"column":27}},"349":{"start":{"line":582,"column":4},"end":{"line":593,"column":5}},"350":{"start":{"line":583,"column":6},"end":{"line":583,"column":37}},"351":{"start":{"line":584,"column":6},"end":{"line":584,"column":39}},"352":{"start":{"line":585,"column":6},"end":{"line":592,"column":7}},"353":{"start":{"line":587,"column":13},"end":{"line":592,"column":7}},"354":{"start":{"line":590,"column":8},"end":{"line":590,"column":44}},"355":{"start":{"line":591,"column":8},"end":{"line":591,"column":41}},"356":{"start":{"line":594,"column":4},"end":{"line":594,"column":61}},"357":{"start":{"line":597,"column":2},"end":{"line":607,"column":3}},"358":{"start":{"line":598,"column":4},"end":{"line":606,"column":5}},"359":{"start":{"line":599,"column":6},"end":{"line":605,"column":8}},"360":{"start":{"line":600,"column":8},"end":{"line":604,"column":9}},"361":{"start":{"line":601,"column":10},"end":{"line":601,"column":75}},"362":{"start":{"line":603,"column":10},"end":{"line":603,"column":59}},"363":{"start":{"line":609,"column":2},"end":{"line":613,"column":3}},"364":{"start":{"line":610,"column":4},"end":{"line":612,"column":5}},"365":{"start":{"line":611,"column":6},"end":{"line":611,"column":32}},"366":{"start":{"line":615,"column":2},"end":{"line":615,"column":14}},"367":{"start":{"line":618,"column":0},"end":{"line":627,"column":1}},"368":{"start":{"line":619,"column":2},"end":{"line":626,"column":23}},"369":{"start":{"line":631,"column":0},"end":{"line":631,"column":31}}},"branchMap":{"1":{"line":32,"type":"if","locations":[{"start":{"line":32,"column":2},"end":{"line":32,"column":2}},{"start":{"line":32,"column":2},"end":{"line":32,"column":2}}]},"2":{"line":41,"type":"if","locations":[{"start":{"line":41,"column":4},"end":{"line":41,"column":4}},{"start":{"line":41,"column":4},"end":{"line":41,"column":4}}]},"3":{"line":56,"type":"if","locations":[{"start":{"line":56,"column":6},"end":{"line":56,"column":6}},{"start":{"line":56,"column":6},"end":{"line":56,"column":6}}]},"4":{"line":58,"type":"if","locations":[{"start":{"line":58,"column":8},"end":{"line":58,"column":8}},{"start":{"line":58,"column":8},"end":{"line":58,"column":8}}]},"5":{"line":75,"type":"if","locations":[{"start":{"line":75,"column":4},"end":{"line":75,"column":4}},{"start":{"line":75,"column":4},"end":{"line":75,"column":4}}]},"6":{"line":81,"type":"if","locations":[{"start":{"line":81,"column":4},"end":{"line":81,"column":4}},{"start":{"line":81,"column":4},"end":{"line":81,"column":4}}]},"7":{"line":98,"type":"if","locations":[{"start":{"line":98,"column":6},"end":{"line":98,"column":6}},{"start":{"line":98,"column":6},"end":{"line":98,"column":6}}]},"8":{"line":103,"type":"if","locations":[{"start":{"line":103,"column":4},"end":{"line":103,"column":4}},{"start":{"line":103,"column":4},"end":{"line":103,"column":4}}]},"9":{"line":104,"type":"if","locations":[{"start":{"line":104,"column":6},"end":{"line":104,"column":6}},{"start":{"line":104,"column":6},"end":{"line":104,"column":6}}]},"10":{"line":106,"type":"if","locations":[{"start":{"line":106,"column":4},"end":{"line":106,"column":4}},{"start":{"line":106,"column":4},"end":{"line":106,"column":4}}]},"11":{"line":106,"type":"binary-expr","locations":[{"start":{"line":106,"column":8},"end":{"line":106,"column":18}},{"start":{"line":106,"column":22},"end":{"line":106,"column":56}}]},"12":{"line":107,"type":"if","locations":[{"start":{"line":107,"column":6},"end":{"line":107,"column":6}},{"start":{"line":107,"column":6},"end":{"line":107,"column":6}}]},"13":{"line":116,"type":"if","locations":[{"start":{"line":116,"column":6},"end":{"line":116,"column":6}},{"start":{"line":116,"column":6},"end":{"line":116,"column":6}}]},"14":{"line":118,"type":"if","locations":[{"start":{"line":118,"column":13},"end":{"line":118,"column":13}},{"start":{"line":118,"column":13},"end":{"line":118,"column":13}}]},"15":{"line":127,"type":"if","locations":[{"start":{"line":127,"column":4},"end":{"line":127,"column":4}},{"start":{"line":127,"column":4},"end":{"line":127,"column":4}}]},"16":{"line":132,"type":"if","locations":[{"start":{"line":132,"column":4},"end":{"line":132,"column":4}},{"start":{"line":132,"column":4},"end":{"line":132,"column":4}}]},"17":{"line":135,"type":"if","locations":[{"start":{"line":135,"column":6},"end":{"line":135,"column":6}},{"start":{"line":135,"column":6},"end":{"line":135,"column":6}}]},"18":{"line":139,"type":"if","locations":[{"start":{"line":139,"column":4},"end":{"line":139,"column":4}},{"start":{"line":139,"column":4},"end":{"line":139,"column":4}}]},"19":{"line":139,"type":"binary-expr","locations":[{"start":{"line":139,"column":8},"end":{"line":139,"column":41}},{"start":{"line":139,"column":45},"end":{"line":139,"column":55}},{"start":{"line":139,"column":59},"end":{"line":139,"column":74}}]},"20":{"line":141,"type":"if","locations":[{"start":{"line":141,"column":8},"end":{"line":141,"column":8}},{"start":{"line":141,"column":8},"end":{"line":141,"column":8}}]},"21":{"line":152,"type":"if","locations":[{"start":{"line":152,"column":8},"end":{"line":152,"column":8}},{"start":{"line":152,"column":8},"end":{"line":152,"column":8}}]},"22":{"line":152,"type":"binary-expr","locations":[{"start":{"line":152,"column":12},"end":{"line":152,"column":27}},{"start":{"line":152,"column":31},"end":{"line":152,"column":73}}]},"23":{"line":156,"type":"if","locations":[{"start":{"line":156,"column":8},"end":{"line":156,"column":8}},{"start":{"line":156,"column":8},"end":{"line":156,"column":8}}]},"24":{"line":158,"type":"if","locations":[{"start":{"line":158,"column":8},"end":{"line":158,"column":8}},{"start":{"line":158,"column":8},"end":{"line":158,"column":8}}]},"25":{"line":160,"type":"binary-expr","locations":[{"start":{"line":160,"column":19},"end":{"line":160,"column":32}},{"start":{"line":160,"column":36},"end":{"line":160,"column":54}},{"start":{"line":160,"column":58},"end":{"line":160,"column":83}}]},"26":{"line":163,"type":"if","locations":[{"start":{"line":163,"column":8},"end":{"line":163,"column":8}},{"start":{"line":163,"column":8},"end":{"line":163,"column":8}}]},"27":{"line":163,"type":"binary-expr","locations":[{"start":{"line":163,"column":12},"end":{"line":163,"column":23}},{"start":{"line":163,"column":27},"end":{"line":163,"column":35}}]},"28":{"line":177,"type":"if","locations":[{"start":{"line":177,"column":4},"end":{"line":177,"column":4}},{"start":{"line":177,"column":4},"end":{"line":177,"column":4}}]},"29":{"line":182,"type":"if","locations":[{"start":{"line":182,"column":4},"end":{"line":182,"column":4}},{"start":{"line":182,"column":4},"end":{"line":182,"column":4}}]},"30":{"line":185,"type":"if","locations":[{"start":{"line":185,"column":6},"end":{"line":185,"column":6}},{"start":{"line":185,"column":6},"end":{"line":185,"column":6}}]},"31":{"line":185,"type":"binary-expr","locations":[{"start":{"line":185,"column":11},"end":{"line":185,"column":20}},{"start":{"line":185,"column":24},"end":{"line":185,"column":37}},{"start":{"line":185,"column":43},"end":{"line":185,"column":52}},{"start":{"line":185,"column":56},"end":{"line":185,"column":68}},{"start":{"line":185,"column":72},"end":{"line":185,"column":108}}]},"32":{"line":189,"type":"if","locations":[{"start":{"line":189,"column":13},"end":{"line":189,"column":13}},{"start":{"line":189,"column":13},"end":{"line":189,"column":13}}]},"33":{"line":189,"type":"binary-expr","locations":[{"start":{"line":189,"column":18},"end":{"line":189,"column":28}},{"start":{"line":189,"column":32},"end":{"line":189,"column":44}},{"start":{"line":189,"column":50},"end":{"line":189,"column":59}},{"start":{"line":189,"column":63},"end":{"line":189,"column":75}},{"start":{"line":189,"column":79},"end":{"line":189,"column":115}}]},"34":{"line":206,"type":"if","locations":[{"start":{"line":206,"column":4},"end":{"line":206,"column":4}},{"start":{"line":206,"column":4},"end":{"line":206,"column":4}}]},"35":{"line":207,"type":"if","locations":[{"start":{"line":207,"column":6},"end":{"line":207,"column":6}},{"start":{"line":207,"column":6},"end":{"line":207,"column":6}}]},"36":{"line":213,"type":"if","locations":[{"start":{"line":213,"column":8},"end":{"line":213,"column":8}},{"start":{"line":213,"column":8},"end":{"line":213,"column":8}}]},"37":{"line":220,"type":"if","locations":[{"start":{"line":220,"column":6},"end":{"line":220,"column":6}},{"start":{"line":220,"column":6},"end":{"line":220,"column":6}}]},"38":{"line":222,"type":"if","locations":[{"start":{"line":222,"column":10},"end":{"line":222,"column":10}},{"start":{"line":222,"column":10},"end":{"line":222,"column":10}}]},"39":{"line":245,"type":"if","locations":[{"start":{"line":245,"column":6},"end":{"line":245,"column":6}},{"start":{"line":245,"column":6},"end":{"line":245,"column":6}}]},"40":{"line":247,"type":"if","locations":[{"start":{"line":247,"column":13},"end":{"line":247,"column":13}},{"start":{"line":247,"column":13},"end":{"line":247,"column":13}}]},"41":{"line":249,"type":"if","locations":[{"start":{"line":249,"column":13},"end":{"line":249,"column":13}},{"start":{"line":249,"column":13},"end":{"line":249,"column":13}}]},"42":{"line":251,"type":"if","locations":[{"start":{"line":251,"column":13},"end":{"line":251,"column":13}},{"start":{"line":251,"column":13},"end":{"line":251,"column":13}}]},"43":{"line":267,"type":"if","locations":[{"start":{"line":267,"column":6},"end":{"line":267,"column":6}},{"start":{"line":267,"column":6},"end":{"line":267,"column":6}}]},"44":{"line":283,"type":"if","locations":[{"start":{"line":283,"column":8},"end":{"line":283,"column":8}},{"start":{"line":283,"column":8},"end":{"line":283,"column":8}}]},"45":{"line":292,"type":"if","locations":[{"start":{"line":292,"column":6},"end":{"line":292,"column":6}},{"start":{"line":292,"column":6},"end":{"line":292,"column":6}}]},"46":{"line":292,"type":"binary-expr","locations":[{"start":{"line":292,"column":10},"end":{"line":292,"column":19}},{"start":{"line":292,"column":23},"end":{"line":292,"column":34}}]},"47":{"line":297,"type":"if","locations":[{"start":{"line":297,"column":6},"end":{"line":297,"column":6}},{"start":{"line":297,"column":6},"end":{"line":297,"column":6}}]},"48":{"line":300,"type":"if","locations":[{"start":{"line":300,"column":8},"end":{"line":300,"column":8}},{"start":{"line":300,"column":8},"end":{"line":300,"column":8}}]},"49":{"line":300,"type":"binary-expr","locations":[{"start":{"line":300,"column":12},"end":{"line":300,"column":41}},{"start":{"line":300,"column":46},"end":{"line":300,"column":74}},{"start":{"line":300,"column":78},"end":{"line":300,"column":106}}]},"50":{"line":304,"type":"if","locations":[{"start":{"line":304,"column":10},"end":{"line":304,"column":10}},{"start":{"line":304,"column":10},"end":{"line":304,"column":10}}]},"51":{"line":305,"type":"if","locations":[{"start":{"line":305,"column":10},"end":{"line":305,"column":10}},{"start":{"line":305,"column":10},"end":{"line":305,"column":10}}]},"52":{"line":309,"type":"if","locations":[{"start":{"line":309,"column":10},"end":{"line":309,"column":10}},{"start":{"line":309,"column":10},"end":{"line":309,"column":10}}]},"53":{"line":310,"type":"if","locations":[{"start":{"line":310,"column":10},"end":{"line":310,"column":10}},{"start":{"line":310,"column":10},"end":{"line":310,"column":10}}]},"54":{"line":313,"type":"if","locations":[{"start":{"line":313,"column":8},"end":{"line":313,"column":8}},{"start":{"line":313,"column":8},"end":{"line":313,"column":8}}]},"55":{"line":318,"type":"if","locations":[{"start":{"line":318,"column":6},"end":{"line":318,"column":6}},{"start":{"line":318,"column":6},"end":{"line":318,"column":6}}]},"56":{"line":318,"type":"binary-expr","locations":[{"start":{"line":318,"column":10},"end":{"line":318,"column":52}},{"start":{"line":318,"column":56},"end":{"line":318,"column":109}}]},"57":{"line":320,"type":"if","locations":[{"start":{"line":320,"column":8},"end":{"line":320,"column":8}},{"start":{"line":320,"column":8},"end":{"line":320,"column":8}}]},"58":{"line":321,"type":"cond-expr","locations":[{"start":{"line":321,"column":66},"end":{"line":321,"column":106}},{"start":{"line":321,"column":109},"end":{"line":321,"column":114}}]},"59":{"line":322,"type":"if","locations":[{"start":{"line":322,"column":8},"end":{"line":322,"column":8}},{"start":{"line":322,"column":8},"end":{"line":322,"column":8}}]},"60":{"line":351,"type":"if","locations":[{"start":{"line":351,"column":4},"end":{"line":351,"column":4}},{"start":{"line":351,"column":4},"end":{"line":351,"column":4}}]},"61":{"line":352,"type":"if","locations":[{"start":{"line":352,"column":6},"end":{"line":352,"column":6}},{"start":{"line":352,"column":6},"end":{"line":352,"column":6}}]},"62":{"line":352,"type":"binary-expr","locations":[{"start":{"line":352,"column":10},"end":{"line":352,"column":66}},{"start":{"line":352,"column":70},"end":{"line":352,"column":103}}]},"63":{"line":362,"type":"if","locations":[{"start":{"line":362,"column":6},"end":{"line":362,"column":6}},{"start":{"line":362,"column":6},"end":{"line":362,"column":6}}]},"64":{"line":362,"type":"binary-expr","locations":[{"start":{"line":362,"column":10},"end":{"line":362,"column":69}},{"start":{"line":362,"column":73},"end":{"line":362,"column":106}}]},"65":{"line":366,"type":"if","locations":[{"start":{"line":366,"column":6},"end":{"line":366,"column":6}},{"start":{"line":366,"column":6},"end":{"line":366,"column":6}}]},"66":{"line":367,"type":"if","locations":[{"start":{"line":367,"column":8},"end":{"line":367,"column":8}},{"start":{"line":367,"column":8},"end":{"line":367,"column":8}}]},"67":{"line":367,"type":"binary-expr","locations":[{"start":{"line":367,"column":12},"end":{"line":367,"column":60}},{"start":{"line":367,"column":64},"end":{"line":367,"column":118}}]},"68":{"line":368,"type":"if","locations":[{"start":{"line":368,"column":10},"end":{"line":368,"column":10}},{"start":{"line":368,"column":10},"end":{"line":368,"column":10}}]},"69":{"line":370,"type":"if","locations":[{"start":{"line":370,"column":17},"end":{"line":370,"column":17}},{"start":{"line":370,"column":17},"end":{"line":370,"column":17}}]},"70":{"line":372,"type":"if","locations":[{"start":{"line":372,"column":17},"end":{"line":372,"column":17}},{"start":{"line":372,"column":17},"end":{"line":372,"column":17}}]},"71":{"line":380,"type":"if","locations":[{"start":{"line":380,"column":6},"end":{"line":380,"column":6}},{"start":{"line":380,"column":6},"end":{"line":380,"column":6}}]},"72":{"line":381,"type":"binary-expr","locations":[{"start":{"line":381,"column":10},"end":{"line":381,"column":30}},{"start":{"line":382,"column":10},"end":{"line":382,"column":21}},{"start":{"line":383,"column":10},"end":{"line":383,"column":32}},{"start":{"line":384,"column":10},"end":{"line":384,"column":105}},{"start":{"line":385,"column":10},"end":{"line":385,"column":35}}]},"73":{"line":390,"type":"if","locations":[{"start":{"line":390,"column":6},"end":{"line":390,"column":6}},{"start":{"line":390,"column":6},"end":{"line":390,"column":6}}]},"74":{"line":396,"type":"if","locations":[{"start":{"line":396,"column":6},"end":{"line":396,"column":6}},{"start":{"line":396,"column":6},"end":{"line":396,"column":6}}]},"75":{"line":398,"type":"if","locations":[{"start":{"line":398,"column":8},"end":{"line":398,"column":8}},{"start":{"line":398,"column":8},"end":{"line":398,"column":8}}]},"76":{"line":413,"type":"if","locations":[{"start":{"line":413,"column":6},"end":{"line":413,"column":6}},{"start":{"line":413,"column":6},"end":{"line":413,"column":6}}]},"77":{"line":422,"type":"if","locations":[{"start":{"line":422,"column":4},"end":{"line":422,"column":4}},{"start":{"line":422,"column":4},"end":{"line":422,"column":4}}]},"78":{"line":422,"type":"binary-expr","locations":[{"start":{"line":422,"column":8},"end":{"line":422,"column":75}},{"start":{"line":422,"column":79},"end":{"line":422,"column":137}}]},"79":{"line":426,"type":"if","locations":[{"start":{"line":426,"column":4},"end":{"line":426,"column":4}},{"start":{"line":426,"column":4},"end":{"line":426,"column":4}}]},"80":{"line":426,"type":"binary-expr","locations":[{"start":{"line":426,"column":8},"end":{"line":426,"column":74}},{"start":{"line":426,"column":78},"end":{"line":426,"column":135}}]},"81":{"line":447,"type":"if","locations":[{"start":{"line":447,"column":4},"end":{"line":447,"column":4}},{"start":{"line":447,"column":4},"end":{"line":447,"column":4}}]},"82":{"line":449,"type":"if","locations":[{"start":{"line":449,"column":4},"end":{"line":449,"column":4}},{"start":{"line":449,"column":4},"end":{"line":449,"column":4}}]},"83":{"line":449,"type":"binary-expr","locations":[{"start":{"line":449,"column":8},"end":{"line":449,"column":20}},{"start":{"line":449,"column":24},"end":{"line":449,"column":81}}]},"84":{"line":452,"type":"if","locations":[{"start":{"line":452,"column":11},"end":{"line":452,"column":11}},{"start":{"line":452,"column":11},"end":{"line":452,"column":11}}]},"85":{"line":452,"type":"binary-expr","locations":[{"start":{"line":452,"column":15},"end":{"line":452,"column":27}},{"start":{"line":452,"column":31},"end":{"line":452,"column":86}}]},"86":{"line":455,"type":"if","locations":[{"start":{"line":455,"column":11},"end":{"line":455,"column":11}},{"start":{"line":455,"column":11},"end":{"line":455,"column":11}}]},"87":{"line":455,"type":"binary-expr","locations":[{"start":{"line":455,"column":15},"end":{"line":455,"column":27}},{"start":{"line":455,"column":31},"end":{"line":455,"column":95}}]},"88":{"line":459,"type":"if","locations":[{"start":{"line":459,"column":11},"end":{"line":459,"column":11}},{"start":{"line":459,"column":11},"end":{"line":459,"column":11}}]},"89":{"line":459,"type":"binary-expr","locations":[{"start":{"line":459,"column":15},"end":{"line":459,"column":27}},{"start":{"line":459,"column":31},"end":{"line":459,"column":93}}]},"90":{"line":466,"type":"if","locations":[{"start":{"line":466,"column":4},"end":{"line":466,"column":4}},{"start":{"line":466,"column":4},"end":{"line":466,"column":4}}]},"91":{"line":471,"type":"if","locations":[{"start":{"line":471,"column":4},"end":{"line":471,"column":4}},{"start":{"line":471,"column":4},"end":{"line":471,"column":4}}]},"92":{"line":476,"type":"if","locations":[{"start":{"line":476,"column":11},"end":{"line":476,"column":11}},{"start":{"line":476,"column":11},"end":{"line":476,"column":11}}]},"93":{"line":477,"type":"if","locations":[{"start":{"line":477,"column":6},"end":{"line":477,"column":6}},{"start":{"line":477,"column":6},"end":{"line":477,"column":6}}]},"94":{"line":481,"type":"if","locations":[{"start":{"line":481,"column":6},"end":{"line":481,"column":6}},{"start":{"line":481,"column":6},"end":{"line":481,"column":6}}]},"95":{"line":482,"type":"binary-expr","locations":[{"start":{"line":482,"column":10},"end":{"line":482,"column":51}},{"start":{"line":483,"column":10},"end":{"line":483,"column":52}},{"start":{"line":485,"column":12},"end":{"line":485,"column":64}},{"start":{"line":486,"column":12},"end":{"line":486,"column":64}}]},"96":{"line":494,"type":"if","locations":[{"start":{"line":494,"column":10},"end":{"line":494,"column":10}},{"start":{"line":494,"column":10},"end":{"line":494,"column":10}}]},"97":{"line":503,"type":"if","locations":[{"start":{"line":503,"column":10},"end":{"line":503,"column":10}},{"start":{"line":503,"column":10},"end":{"line":503,"column":10}}]},"98":{"line":508,"type":"if","locations":[{"start":{"line":508,"column":8},"end":{"line":508,"column":8}},{"start":{"line":508,"column":8},"end":{"line":508,"column":8}}]},"99":{"line":514,"type":"if","locations":[{"start":{"line":514,"column":11},"end":{"line":514,"column":11}},{"start":{"line":514,"column":11},"end":{"line":514,"column":11}}]},"100":{"line":516,"type":"if","locations":[{"start":{"line":516,"column":6},"end":{"line":516,"column":6}},{"start":{"line":516,"column":6},"end":{"line":516,"column":6}}]},"101":{"line":519,"type":"if","locations":[{"start":{"line":519,"column":6},"end":{"line":519,"column":6}},{"start":{"line":519,"column":6},"end":{"line":519,"column":6}}]},"102":{"line":519,"type":"binary-expr","locations":[{"start":{"line":519,"column":10},"end":{"line":519,"column":39}},{"start":{"line":519,"column":43},"end":{"line":519,"column":108}}]},"103":{"line":534,"type":"if","locations":[{"start":{"line":534,"column":4},"end":{"line":534,"column":4}},{"start":{"line":534,"column":4},"end":{"line":534,"column":4}}]},"104":{"line":547,"type":"if","locations":[{"start":{"line":547,"column":6},"end":{"line":547,"column":6}},{"start":{"line":547,"column":6},"end":{"line":547,"column":6}}]},"105":{"line":548,"type":"if","locations":[{"start":{"line":548,"column":8},"end":{"line":548,"column":8}},{"start":{"line":548,"column":8},"end":{"line":548,"column":8}}]},"106":{"line":570,"type":"if","locations":[{"start":{"line":570,"column":6},"end":{"line":570,"column":6}},{"start":{"line":570,"column":6},"end":{"line":570,"column":6}}]},"107":{"line":570,"type":"binary-expr","locations":[{"start":{"line":570,"column":10},"end":{"line":570,"column":59}},{"start":{"line":570,"column":63},"end":{"line":570,"column":103}}]},"108":{"line":585,"type":"if","locations":[{"start":{"line":585,"column":6},"end":{"line":585,"column":6}},{"start":{"line":585,"column":6},"end":{"line":585,"column":6}}]},"109":{"line":585,"type":"binary-expr","locations":[{"start":{"line":585,"column":10},"end":{"line":585,"column":54}},{"start":{"line":585,"column":58},"end":{"line":585,"column":101}}]},"110":{"line":587,"type":"if","locations":[{"start":{"line":587,"column":13},"end":{"line":587,"column":13}},{"start":{"line":587,"column":13},"end":{"line":587,"column":13}}]},"111":{"line":587,"type":"binary-expr","locations":[{"start":{"line":587,"column":17},"end":{"line":587,"column":59}},{"start":{"line":587,"column":63},"end":{"line":587,"column":90}}]},"112":{"line":598,"type":"if","locations":[{"start":{"line":598,"column":4},"end":{"line":598,"column":4}},{"start":{"line":598,"column":4},"end":{"line":598,"column":4}}]},"113":{"line":598,"type":"binary-expr","locations":[{"start":{"line":598,"column":8},"end":{"line":598,"column":15}},{"start":{"line":598,"column":19},"end":{"line":598,"column":43}},{"start":{"line":598,"column":47},"end":{"line":598,"column":69}}]},"114":{"line":600,"type":"if","locations":[{"start":{"line":600,"column":8},"end":{"line":600,"column":8}},{"start":{"line":600,"column":8},"end":{"line":600,"column":8}}]},"115":{"line":610,"type":"if","locations":[{"start":{"line":610,"column":4},"end":{"line":610,"column":4}},{"start":{"line":610,"column":4},"end":{"line":610,"column":4}}]},"116":{"line":610,"type":"binary-expr","locations":[{"start":{"line":610,"column":8},"end":{"line":610,"column":15}},{"start":{"line":610,"column":19},"end":{"line":610,"column":43}},{"start":{"line":610,"column":47},"end":{"line":610,"column":69}}]}},"code":["'use strict'","","const url = require('url')","const qs = require('qs')","const fs = require('fs')","const path = require('path')","const zlib = require('zlib')","const formidable = require('formidable')","const browserFingerprint = require('browser_fingerprint')","const Mime = require('mime')","const uuid = require('uuid')","const etag = require('etag')","","const initialize = function (api, options, next) {","  // ////////","  // INIT //","  // ////////","","  const type = 'web'","  const attributes = {","    canChat: false,","    logConnections: false,","    logExits: false,","    sendWelcomeMessage: false,","    verbs: [","      // no verbs for connections of this type, as they are to be very short-lived","    ]","  }","","  const server = new api.GenericServer(type, options, attributes)","","  if (['api', 'file'].indexOf(api.config.servers.web.rootEndpointType) < 0) {","    throw new Error('api.config.servers.web.rootEndpointType can only be \\'api\\' or \\'file\\'')","  }","","  // ////////////////////","  // REQUIRED METHODS //","  // ////////////////////","","  server.start = function (next) {","    if (options.secure === false) {","      const http = require('http')","      server.server = http.createServer((req, res) => {","        handleRequest(req, res)","      })","    } else {","      const https = require('https')","      server.server = https.createServer(api.config.servers.web.serverOptions, (req, res) => {","        handleRequest(req, res)","      })","    }","","    let bootAttempts = 0","    server.server.on('error', (e) => {","      bootAttempts++","      if (bootAttempts < api.config.servers.web.bootAttempts) {","        server.log('cannot boot web server; trying again [' + String(e) + ']', 'error')","        if (bootAttempts === 1) { cleanSocket(options.bindIP, options.port) }","        setTimeout(() => {","          server.log('attempting to boot again..')","          server.server.listen(options.port, options.bindIP)","        }, 1000)","      } else {","        return next(new Error('cannot start web server @ ' + options.bindIP + ':' + options.port + ' => ' + e.message))","      }","    })","","    server.server.listen(options.port, options.bindIP, () => {","      chmodSocket(options.bindIP, options.port)","      next()","    })","  }","","  server.stop = function (next) {","    if (server.server) { server.server.close() }","    process.nextTick(next)","  }","","  server.sendMessage = function (connection, message) {","    let stringResponse = ''","    if (connection.rawConnection.method !== 'HEAD') {","      stringResponse = String(message)","    }","","    cleanHeaders(connection)","    const headers = connection.rawConnection.responseHeaders","    const responseHttpCode = parseInt(connection.rawConnection.responseHttpCode)","","    server.sendWithCompression(connection, responseHttpCode, headers, stringResponse)","  }","","  server.sendFile = function (connection, error, fileStream, mime, length, lastModified) {","    let foundCacheControl = false","    let ifModifiedSince","    let reqHeaders","","    connection.rawConnection.responseHeaders.forEach((pair) => {","      if (pair[0].toLowerCase() === 'cache-control') { foundCacheControl = true }","    })","","    connection.rawConnection.responseHeaders.push(['Content-Type', mime])","","    if (fileStream) {","      if (!foundCacheControl) { connection.rawConnection.responseHeaders.push(['Cache-Control', 'max-age=' + api.config.servers.web.flatFileCacheDuration + ', must-revalidate, public']) }","    }","    if (fileStream && !api.config.servers.web.enableEtag) {","      if (lastModified) { connection.rawConnection.responseHeaders.push(['Last-Modified', new Date(lastModified).toUTCString()]) }","    }","","    cleanHeaders(connection)","    const headers = connection.rawConnection.responseHeaders","    reqHeaders = connection.rawConnection.req.headers","","    let sendRequestResult = function () {","      let responseHttpCode = parseInt(connection.rawConnection.responseHttpCode, 10)","      if (error) {","        server.sendWithCompression(connection, responseHttpCode, headers, String(error))","      } else if (responseHttpCode !== 304) {","        server.sendWithCompression(connection, responseHttpCode, headers, null, fileStream, length)","      } else {","        connection.rawConnection.res.writeHead(responseHttpCode, transformHeaders(headers))","        connection.rawConnection.res.end()","        connection.destroy()","      }","    }","","    if (error) {","      connection.rawConnection.responseHttpCode = 404","      return sendRequestResult()","    }","","    if (reqHeaders['if-modified-since']) {","      ifModifiedSince = new Date(reqHeaders['if-modified-since'])","      lastModified.setMilliseconds(0)","      if (lastModified <= ifModifiedSince) { connection.rawConnection.responseHttpCode = 304 }","      return sendRequestResult()","    }","","    if (api.config.servers.web.enableEtag && fileStream && fileStream.path) {","      fs.stat(fileStream.path, (error, filestats) => {","        if (error) {","          server.log('Error receving file statistics: ' + String(error), 'error')","          return sendRequestResult()","        }","        const fileEtag = etag(filestats, {weak: true})","        connection.rawConnection.responseHeaders.push(['ETag', fileEtag])","        let noneMatchHeader = reqHeaders['if-none-match']","        let cacheCtrlHeader = reqHeaders['cache-control']","        let noCache = false","        let etagMatches","        // check for no-cache cache request directive","        if (cacheCtrlHeader && cacheCtrlHeader.indexOf('no-cache') !== -1) {","          noCache = true","        }","        // parse if-none-match","        if (noneMatchHeader) { noneMatchHeader = noneMatchHeader.split(/ *, */) }","        // if-none-match","        if (noneMatchHeader) {","          etagMatches = noneMatchHeader.some((match) => {","            return match === '*' || match === fileEtag || match === 'W/' + fileEtag","          })","        }","        if (etagMatches && !noCache) {","          connection.rawConnection.responseHttpCode = 304","        }","        sendRequestResult()","      })","    } else {","      sendRequestResult()","    }","  }","","  server.sendWithCompression = function (connection, responseHttpCode, headers, stringResponse, fileStream, fileLength) {","    let acceptEncoding = connection.rawConnection.req.headers['accept-encoding']","    let compressor","    let stringEncoder","    if (!acceptEncoding) { acceptEncoding = '' }","","    // Note: this is not a conformant accept-encoding parser.","    // https://nodejs.org/api/zlib.html#zlib_zlib_createinflate_options","    // See http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.3","    if (api.config.servers.web.compress === true) {","      let gzipMatch = acceptEncoding.match(/\\bgzip\\b/)","      let deflateMatch = acceptEncoding.match(/\\bdeflate\\b/)","      if ((gzipMatch && !deflateMatch) || (gzipMatch && deflateMatch && gzipMatch.index < deflateMatch.index)) {","        headers.push(['Content-Encoding', 'gzip'])","        compressor = zlib.createGzip()","        stringEncoder = zlib.gzip","      } else if ((!gzipMatch && deflateMatch) || (gzipMatch && deflateMatch && deflateMatch.index < gzipMatch.index)) {","        headers.push(['Content-Encoding', 'deflate'])","        compressor = zlib.createDeflate()","        stringEncoder = zlib.deflate","      }","    }","","    // the 'finish' event deontes a successful transfer","    connection.rawConnection.res.on('finish', () => {","      connection.destroy()","    })","","    // the 'close' event deontes a failed transfer, but it is probably the client's fault","    connection.rawConnection.res.on('close', () => {","      connection.destroy()","    })","","    if (fileStream) {","      if (compressor) {","        // headers.push(['Content-Length', fileLength]); // TODO","        connection.rawConnection.res.writeHead(responseHttpCode, transformHeaders(headers))","        fileStream.pipe(compressor).pipe(connection.rawConnection.res)","      } else {","        // file length might be null if we don't know how long the stream is","        if (fileLength) {","          headers.push(['Content-Length', fileLength])","        }","        connection.rawConnection.res.writeHead(responseHttpCode, transformHeaders(headers))","        fileStream.pipe(connection.rawConnection.res)","      }","    } else {","      if (stringEncoder) {","        stringEncoder(stringResponse, (error, zippedString) => {","          if (error) { console.error(error) }","          headers.push(['Content-Length', zippedString.length])","          connection.rawConnection.res.writeHead(responseHttpCode, transformHeaders(headers))","          connection.rawConnection.res.end(zippedString)","        })","      } else {","        headers.push(['Content-Length', Buffer.byteLength(stringResponse)])","        connection.rawConnection.res.writeHead(responseHttpCode, transformHeaders(headers))","        connection.rawConnection.res.end(stringResponse)","      }","    }","  }","","  server.goodbye = function () {","    // disconnect handlers","  }","","  // //////////","  // EVENTS //","  // //////////","","  server.on('connection', (connection) => {","    determineRequestParams(connection, (requestMode) => {","      if (requestMode === 'api') {","        server.processAction(connection)","      } else if (requestMode === 'file') {","        server.processFile(connection)","      } else if (requestMode === 'options') {","        respondToOptions(connection)","      } else if (requestMode === 'trace') {","        respondToTrace(connection)","      }","    })","  })","","  server.on('actionComplete', (data) => {","    completeResponse(data)","  })","","  // ///////////","  // HELPERS //","  // ///////////","","  const handleRequest = function (req, res) {","    browserFingerprint.fingerprint(req, api.config.servers.web.fingerprintOptions, (error, fingerprint, elementHash, cookieHash) => {","      if (error) throw error","","      let responseHeaders = []","      let cookies = api.utils.parseCookies(req)","      let responseHttpCode = 200","      let method = req.method.toUpperCase()","      let parsedURL = url.parse(req.url, true)","      let i","      for (i in cookieHash) {","        responseHeaders.push([i, cookieHash[i]])","      }","","      // https://github.com/actionhero/actionhero/issues/189","      responseHeaders.push(['Content-Type', 'application/json; charset=utf-8'])","","      for (i in api.config.servers.web.httpHeaders) {","        if (api.config.servers.web.httpHeaders[i]) {","          responseHeaders.push([i, api.config.servers.web.httpHeaders[i]])","        }","      }","","      let remoteIP = req.connection.remoteAddress","      let remotePort = req.connection.remotePort","","      // helpers for unix socket bindings with no forward","      if (!remoteIP && !remotePort) {","        remoteIP = '0.0.0.0'","        remotePort = '0'","      }","","      if (req.headers['x-forwarded-for']) {","        let parts","        let forwardedIp = req.headers['x-forwarded-for'].split(',')[0]","        if (forwardedIp.indexOf('.') >= 0 || (forwardedIp.indexOf('.') < 0 && forwardedIp.indexOf(':') < 0)) {","          // IPv4","          forwardedIp = forwardedIp.replace('::ffff:', '') // remove any IPv6 information, ie: '::ffff:127.0.0.1'","          parts = forwardedIp.split(':')","          if (parts[0]) { remoteIP = parts[0] }","          if (parts[1]) { remotePort = parts[1] }","        } else {","          // IPv6","          parts = api.utils.parseIPv6URI(forwardedIp)","          if (parts.host) { remoteIP = parts.host }","          if (parts.port) { remotePort = parts.port }","        }","","        if (req.headers['x-forwarded-port']) {","          remotePort = req.headers['x-forwarded-port']","        }","      }","","      if (api.config.servers.web.allowedRequestHosts && api.config.servers.web.allowedRequestHosts.length > 0) {","        let guess = 'http://'","        if (options.secure) { guess = 'https://' }","        let fullRequestHost = (req.headers['x-forwarded-proto'] ? req.headers['x-forwarded-proto'] + '://' : guess) + req.headers.host","        if (api.config.servers.web.allowedRequestHosts.indexOf(fullRequestHost) < 0) {","          let newHost = api.config.servers.web.allowedRequestHosts[0]","          res.statusCode = 302","          res.setHeader('Location', newHost + req.url)","          return res.end(`You are being redirected to ${newHost + req.url}\\r\\n`)","        }","      }","","      server.buildConnection({","        // will emit 'connection'","        rawConnection: {","          req: req,","          res: res,","          params: {},","          method: method,","          cookies: cookies,","          responseHeaders: responseHeaders,","          responseHttpCode: responseHttpCode,","          parsedURL: parsedURL","        },","        id: fingerprint + '-' + uuid.v4(),","        fingerprint: fingerprint,","        remoteAddress: remoteIP,","        remotePort: remotePort","      })","    })","  }","","  const completeResponse = function (data) {","    if (data.toRender === true) {","      if (api.config.servers.web.metadataOptions.serverInformation && typeof data.response !== 'string') {","        const stopTime = new Date().getTime()","        data.response.serverInformation = {","          serverName: api.config.general.serverName,","          apiVersion: api.config.general.apiVersion,","          requestDuration: (stopTime - data.connection.connectedAt),","          currentTime: stopTime","        }","      }","","      if (api.config.servers.web.metadataOptions.requesterInformation && typeof data.response !== 'string') {","        data.response.requesterInformation = buildRequesterInformation(data.connection)","      }","","      if (data.response.error) {","        if (api.config.servers.web.returnErrorCodes === true && data.connection.rawConnection.responseHttpCode === 200) {","          if (data.actionStatus === 'unknown_action') {","            data.connection.rawConnection.responseHttpCode = 404","          } else if (data.actionStatus === 'missing_params') {","            data.connection.rawConnection.responseHttpCode = 422","          } else if (data.actionStatus === 'server_error') {","            data.connection.rawConnection.responseHttpCode = 500","          } else {","            data.connection.rawConnection.responseHttpCode = 400","          }","        }","      }","","      if (","          !data.response.error &&","          data.action &&","          data.params.apiVersion &&","          api.actions.actions[data.params.action][data.params.apiVersion].matchExtensionMimeType === true &&","          data.connection.extension","        ) {","        data.connection.rawConnection.responseHeaders.push(['Content-Type', Mime.lookup(data.connection.extension)])","      }","","      if (data.response.error) {","        data.response.error = api.config.errors.serializers.servers.web(data.response.error)","      }","","      let stringResponse = ''","","      if (extractHeader(data.connection, 'Content-Type').match(/json/)) {","        stringResponse = JSON.stringify(data.response, null, api.config.servers.web.padding)","        if (data.params.callback) {","          data.connection.rawConnection.responseHeaders.push(['Content-Type', 'application/javascript'])","          stringResponse = callbackHtmlEscape(data.connection.params.callback) + '(' + stringResponse + ');'","        }","      } else {","        stringResponse = data.response","      }","","      server.sendMessage(data.connection, stringResponse)","    }","  }","","  const extractHeader = function (connection, match) {","    let i = connection.rawConnection.responseHeaders.length - 1","    while (i >= 0) {","      if (connection.rawConnection.responseHeaders[i][0].toLowerCase() === match.toLowerCase()) {","        return connection.rawConnection.responseHeaders[i][1]","      }","      i--","    }","    return null","  }","","  const respondToOptions = function (connection) {","    if (!api.config.servers.web.httpHeaders['Access-Control-Allow-Methods'] && !extractHeader(connection, 'Access-Control-Allow-Methods')) {","      const methods = 'HEAD, GET, POST, PUT, DELETE, OPTIONS, TRACE'","      connection.rawConnection.responseHeaders.push(['Access-Control-Allow-Methods', methods])","    }","    if (!api.config.servers.web.httpHeaders['Access-Control-Allow-Origin'] && !extractHeader(connection, 'Access-Control-Allow-Origin')) {","      const origin = '*'","      connection.rawConnection.responseHeaders.push(['Access-Control-Allow-Origin', origin])","    }","    server.sendMessage(connection, '')","  }","","  const respondToTrace = function (connection) {","    const data = buildRequesterInformation(connection)","    const stringResponse = JSON.stringify(data, null, api.config.servers.web.padding)","    server.sendMessage(connection, stringResponse)","  }","","  const determineRequestParams = function (connection, callback) {","    // determine file or api request","    let requestMode = api.config.servers.web.rootEndpointType","    let pathname = connection.rawConnection.parsedURL.pathname","    let pathParts = pathname.split('/')","    let matcherLength","    let i","    while (pathParts[0] === '') { pathParts.shift() }","    if (pathParts[pathParts.length - 1] === '') { pathParts.pop() }","","    if (pathParts[0] && pathParts[0] === api.config.servers.web.urlPathForActions) {","      requestMode = 'api'","      pathParts.shift()","    } else if (pathParts[0] && pathParts[0] === api.config.servers.web.urlPathForFiles) {","      requestMode = 'file'","      pathParts.shift()","    } else if (pathParts[0] && pathname.indexOf(api.config.servers.web.urlPathForActions) === 0) {","      requestMode = 'api'","      matcherLength = api.config.servers.web.urlPathForActions.split('/').length","      for (i = 0; i < (matcherLength - 1); i++) { pathParts.shift() }","    } else if (pathParts[0] && pathname.indexOf(api.config.servers.web.urlPathForFiles) === 0) {","      requestMode = 'file'","      matcherLength = api.config.servers.web.urlPathForFiles.split('/').length","      for (i = 0; i < (matcherLength - 1); i++) { pathParts.shift() }","    }","","    let extensionParts = connection.rawConnection.parsedURL.pathname.split('.')","    if (extensionParts.length > 1) {","      connection.extension = extensionParts[(extensionParts.length - 1)]","    }","","    // OPTIONS","    if (connection.rawConnection.method === 'OPTIONS') {","      requestMode = 'options'","      callback(requestMode)","","    // API","    } else if (requestMode === 'api') {","      if (connection.rawConnection.method === 'TRACE') { requestMode = 'trace' }","      let search = connection.rawConnection.parsedURL.search.slice(1)","      fillParamsFromWebRequest(connection, qs.parse(search, api.config.servers.web.queryParseOptions))","      connection.rawConnection.params.query = connection.rawConnection.parsedURL.query","      if (","          connection.rawConnection.method !== 'GET' &&","          connection.rawConnection.method !== 'HEAD' &&","          (","            connection.rawConnection.req.headers['content-type'] ||","            connection.rawConnection.req.headers['Content-Type']","          )","      ) {","        connection.rawConnection.form = new formidable.IncomingForm()","        for (i in api.config.servers.web.formOptions) {","          connection.rawConnection.form[i] = api.config.servers.web.formOptions[i]","        }","        connection.rawConnection.form.parse(connection.rawConnection.req, (error, fields, files) => {","          if (error) {","            server.log('error processing form: ' + String(error), 'error')","            connection.error = new Error('There was an error processing this form.')","          } else {","            connection.rawConnection.params.body = fields","            connection.rawConnection.params.files = files","            fillParamsFromWebRequest(connection, files)","            fillParamsFromWebRequest(connection, fields)","          }","          if (api.config.servers.web.queryRouting !== true) { connection.params.action = null }","          api.routes.processRoute(connection, pathParts)","          callback(requestMode)","        })","      } else {","        if (api.config.servers.web.queryRouting !== true) { connection.params.action = null }","        api.routes.processRoute(connection, pathParts)","        callback(requestMode)","      }","","    // FILE","    } else if (requestMode === 'file') {","      api.routes.processRoute(connection, pathParts)","      if (!connection.params.file) {","        connection.params.file = pathParts.join(path.sep)","      }","      if (connection.params.file === '' || connection.params.file[connection.params.file.length - 1] === '/') {","        connection.params.file = connection.params.file + api.config.general.directoryFileType","      }","      try {","        connection.params.file = decodeURIComponent(connection.params.file)","      } catch (e) {","        connection.error = new Error('There was an error decoding URI: ' + e)","      }","      callback(requestMode)","    }","  }","","  const fillParamsFromWebRequest = function (connection, varsHash) {","    // helper for JSON posts","    let collapsedVarsHash = api.utils.collapseObjectToArray(varsHash)","    if (collapsedVarsHash !== false) {","      varsHash = {payload: collapsedVarsHash} // post was an array, lets call it \"payload\"","    }","","    for (let v in varsHash) {","      connection.params[v] = varsHash[v]","    }","  }","","  const transformHeaders = function (headersArray) {","    return headersArray.reduce((headers, currentHeader) => {","      let currentHeaderKey = currentHeader[0].toLowerCase()","      // we have a set-cookie, let's see what we have to do","      if (currentHeaderKey === 'set-cookie') {","        if (headers[currentHeaderKey]) {","          headers[currentHeaderKey].push(currentHeader[1])","        } else {","          headers[currentHeaderKey] = [currentHeader[1]]","        }","      } else {","        headers[currentHeaderKey] = currentHeader[1]","      }","","      return headers","    }, {})","  }","","  const buildRequesterInformation = function (connection) {","    let requesterInformation = {","      id: connection.id,","      fingerprint: connection.fingerprint,","      remoteIP: connection.remoteIP,","      receivedParams: {}","    }","","    for (let p in connection.params) {","      if (api.config.general.disableParamScrubbing === true || api.params.postVariables.indexOf(p) >= 0) {","        requesterInformation.receivedParams[p] = connection.params[p]","      }","    }","","    return requesterInformation","  }","","  const cleanHeaders = function (connection) {","    const originalHeaders = connection.rawConnection.responseHeaders.reverse()","    let foundHeaders = []","    let cleanedHeaders = []","    for (let i in originalHeaders) {","      let key = originalHeaders[i][0]","      let value = originalHeaders[i][1]","      if (foundHeaders.indexOf(key.toLowerCase()) >= 0 && key.toLowerCase().indexOf('set-cookie') < 0) {","        // ignore, it's a duplicate","      } else if (connection.rawConnection.method === 'HEAD' && key === 'Transfer-Encoding') {","        // ignore, we can't send this header for HEAD requests","      } else {","        foundHeaders.push(key.toLowerCase())","        cleanedHeaders.push([key, value])","      }","    }","    connection.rawConnection.responseHeaders = cleanedHeaders","  }","","  const cleanSocket = function (bindIP, port) {","    if (!bindIP && typeof port === 'string' && port.indexOf('/') >= 0) {","      fs.unlink(port, (error) => {","        if (error) {","          server.log('cannot remove stale socket @' + port + ' : ' + error)","        } else {","          server.log('removed stale unix socket @ ' + port)","        }","      })","    }","  }","","  const chmodSocket = function (bindIP, port) {","    if (!bindIP && typeof port === 'string' && port.indexOf('/') >= 0) {","      fs.chmodSync(port, '0777')","    }","  }","","  next(server)","}","","function callbackHtmlEscape (str) {","  return str","    .replace(/&/g, '&amp;')","    .replace(/\"/g, '&quot;')","    .replace(/'/g, '&#39;')","    .replace(/</g, '&lt;')","    .replace(/>/g, '&gt;')","    .replace(/\\)/g, '')","    .replace(/\\(/g, '')","}","","// ///////////////////////////////////////////////////////////////////","// exports","exports.initialize = initialize",""],"l":{"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"14":1,"19":0,"20":0,"30":0,"32":0,"33":0,"40":0,"41":0,"42":0,"43":0,"44":0,"47":0,"48":0,"49":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"64":0,"68":0,"69":0,"70":0,"74":0,"75":0,"76":0,"79":0,"80":0,"81":0,"82":0,"85":0,"86":0,"87":0,"89":0,"92":0,"93":0,"94":0,"95":0,"97":0,"98":0,"101":0,"103":0,"104":0,"106":0,"107":0,"110":0,"111":0,"112":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"121":0,"122":0,"123":0,"127":0,"128":0,"129":0,"132":0,"133":0,"134":0,"135":0,"136":0,"139":0,"140":0,"141":0,"142":0,"143":0,"145":0,"146":0,"147":0,"148":0,"149":0,"150":0,"152":0,"153":0,"156":0,"158":0,"159":0,"160":0,"163":0,"164":0,"166":0,"169":0,"173":0,"174":0,"175":0,"176":0,"177":0,"182":0,"183":0,"184":0,"185":0,"186":0,"187":0,"188":0,"189":0,"190":0,"191":0,"192":0,"197":0,"198":0,"202":0,"203":0,"206":0,"207":0,"209":0,"210":0,"213":0,"214":0,"216":0,"217":0,"220":0,"221":0,"222":0,"223":0,"224":0,"225":0,"228":0,"229":0,"230":0,"235":0,"243":0,"244":0,"245":0,"246":0,"247":0,"248":0,"249":0,"250":0,"251":0,"252":0,"257":0,"258":0,"265":0,"266":0,"267":0,"269":0,"270":0,"271":0,"272":0,"273":0,"274":0,"275":0,"276":0,"280":0,"282":0,"283":0,"284":0,"288":0,"289":0,"292":0,"293":0,"294":0,"297":0,"298":0,"299":0,"300":0,"302":0,"303":0,"304":0,"305":0,"308":0,"309":0,"310":0,"313":0,"314":0,"318":0,"319":0,"320":0,"321":0,"322":0,"323":0,"324":0,"325":0,"326":0,"330":0,"350":0,"351":0,"352":0,"353":0,"354":0,"362":0,"363":0,"366":0,"367":0,"368":0,"369":0,"370":0,"371":0,"372":0,"373":0,"375":0,"380":0,"387":0,"390":0,"391":0,"394":0,"396":0,"397":0,"398":0,"399":0,"400":0,"403":0,"406":0,"410":0,"411":0,"412":0,"413":0,"414":0,"416":0,"418":0,"421":0,"422":0,"423":0,"424":0,"426":0,"427":0,"428":0,"430":0,"433":0,"434":0,"435":0,"436":0,"439":0,"441":0,"442":0,"443":0,"444":0,"445":0,"446":0,"447":0,"449":0,"450":0,"451":0,"452":0,"453":0,"454":0,"455":0,"456":0,"457":0,"458":0,"459":0,"460":0,"461":0,"462":0,"465":0,"466":0,"467":0,"471":0,"472":0,"473":0,"476":0,"477":0,"478":0,"479":0,"480":0,"481":0,"489":0,"490":0,"491":0,"493":0,"494":0,"495":0,"496":0,"498":0,"499":0,"500":0,"501":0,"503":0,"504":0,"505":0,"508":0,"509":0,"510":0,"514":0,"515":0,"516":0,"517":0,"519":0,"520":0,"522":0,"523":0,"525":0,"527":0,"531":0,"533":0,"534":0,"535":0,"538":0,"539":0,"543":0,"544":0,"545":0,"547":0,"548":0,"549":0,"551":0,"554":0,"557":0,"561":0,"562":0,"569":0,"570":0,"571":0,"575":0,"578":0,"579":0,"580":0,"581":0,"582":0,"583":0,"584":0,"585":0,"587":0,"590":0,"591":0,"594":0,"597":0,"598":0,"599":0,"600":0,"601":0,"603":0,"609":0,"610":0,"611":0,"615":0,"618":1,"619":0,"631":1}},"/home/travis/build/npmtest/node-npmtest-actionhero/node_modules/actionhero/servers/websocket.js":{"path":"/home/travis/build/npmtest/node-npmtest-actionhero/node_modules/actionhero/servers/websocket.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0},"fnMap":{"1":{"name":"(anonymous_1)","line":10,"loc":{"start":{"line":10,"column":19},"end":{"line":10,"column":49}}},"2":{"name":"(anonymous_2)","line":39,"loc":{"start":{"line":39,"column":17},"end":{"line":39,"column":33}}},"3":{"name":"(anonymous_3)","line":59,"loc":{"start":{"line":59,"column":16},"end":{"line":59,"column":32}}},"4":{"name":"(anonymous_4)","line":69,"loc":{"start":{"line":69,"column":23},"end":{"line":69,"column":68}}},"5":{"name":"(anonymous_5)","line":80,"loc":{"start":{"line":80,"column":20},"end":{"line":80,"column":89}}},"6":{"name":"(anonymous_6)","line":92,"loc":{"start":{"line":92,"column":30},"end":{"line":92,"column":43}}},"7":{"name":"(anonymous_7)","line":106,"loc":{"start":{"line":106,"column":19},"end":{"line":106,"column":41}}},"8":{"name":"(anonymous_8)","line":114,"loc":{"start":{"line":114,"column":26},"end":{"line":114,"column":48}}},"9":{"name":"(anonymous_9)","line":120,"loc":{"start":{"line":120,"column":30},"end":{"line":120,"column":46}}},"10":{"name":"(anonymous_10)","line":131,"loc":{"start":{"line":131,"column":37},"end":{"line":131,"column":49}}},"11":{"name":"(anonymous_11)","line":147,"loc":{"start":{"line":147,"column":26},"end":{"line":147,"column":46}}},"12":{"name":"(anonymous_12)","line":166,"loc":{"start":{"line":166,"column":25},"end":{"line":166,"column":37}}},"13":{"name":"(anonymous_13)","line":199,"loc":{"start":{"line":199,"column":27},"end":{"line":199,"column":52}}},"14":{"name":"(anonymous_14)","line":210,"loc":{"start":{"line":210,"column":30},"end":{"line":210,"column":55}}},"15":{"name":"(anonymous_15)","line":219,"loc":{"start":{"line":219,"column":21},"end":{"line":219,"column":49}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":32}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":37}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":24}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":28}},"5":{"start":{"line":7,"column":0},"end":{"line":7,"column":28}},"6":{"start":{"line":8,"column":0},"end":{"line":8,"column":57}},"7":{"start":{"line":10,"column":0},"end":{"line":257,"column":1}},"8":{"start":{"line":15,"column":2},"end":{"line":15,"column":26}},"9":{"start":{"line":16,"column":2},"end":{"line":31,"column":3}},"10":{"start":{"line":33,"column":2},"end":{"line":33,"column":65}},"11":{"start":{"line":39,"column":2},"end":{"line":57,"column":3}},"12":{"start":{"line":40,"column":4},"end":{"line":40,"column":45}},"13":{"start":{"line":41,"column":4},"end":{"line":41,"column":85}},"14":{"start":{"line":43,"column":4},"end":{"line":45,"column":6}},"15":{"start":{"line":44,"column":6},"end":{"line":44,"column":37}},"16":{"start":{"line":47,"column":4},"end":{"line":49,"column":6}},"17":{"start":{"line":48,"column":6},"end":{"line":48,"column":40}},"18":{"start":{"line":51,"column":4},"end":{"line":51,"column":102}},"19":{"start":{"line":52,"column":4},"end":{"line":52,"column":24}},"20":{"start":{"line":54,"column":4},"end":{"line":54,"column":26}},"21":{"start":{"line":56,"column":4},"end":{"line":56,"column":10}},"22":{"start":{"line":59,"column":2},"end":{"line":67,"column":3}},"23":{"start":{"line":60,"column":4},"end":{"line":60,"column":25}},"24":{"start":{"line":61,"column":4},"end":{"line":65,"column":5}},"25":{"start":{"line":62,"column":6},"end":{"line":64,"column":8}},"26":{"start":{"line":63,"column":8},"end":{"line":63,"column":28}},"27":{"start":{"line":66,"column":4},"end":{"line":66,"column":26}},"28":{"start":{"line":69,"column":2},"end":{"line":78,"column":3}},"29":{"start":{"line":70,"column":4},"end":{"line":72,"column":5}},"30":{"start":{"line":71,"column":6},"end":{"line":71,"column":84}},"31":{"start":{"line":74,"column":4},"end":{"line":74,"column":58}},"32":{"start":{"line":74,"column":28},"end":{"line":74,"column":57}},"33":{"start":{"line":75,"column":4},"end":{"line":75,"column":65}},"34":{"start":{"line":75,"column":25},"end":{"line":75,"column":64}},"35":{"start":{"line":76,"column":4},"end":{"line":76,"column":104}},"36":{"start":{"line":76,"column":67},"end":{"line":76,"column":103}},"37":{"start":{"line":77,"column":4},"end":{"line":77,"column":43}},"38":{"start":{"line":80,"column":2},"end":{"line":104,"column":3}},"39":{"start":{"line":81,"column":4},"end":{"line":81,"column":20}},"40":{"start":{"line":82,"column":4},"end":{"line":88,"column":5}},"41":{"start":{"line":90,"column":4},"end":{"line":103,"column":5}},"42":{"start":{"line":91,"column":6},"end":{"line":99,"column":7}},"43":{"start":{"line":92,"column":8},"end":{"line":92,"column":60}},"44":{"start":{"line":92,"column":45},"end":{"line":92,"column":58}},"45":{"start":{"line":93,"column":8},"end":{"line":96,"column":10}},"46":{"start":{"line":94,"column":10},"end":{"line":94,"column":36}},"47":{"start":{"line":95,"column":10},"end":{"line":95,"column":75}},"48":{"start":{"line":98,"column":8},"end":{"line":98,"column":73}},"49":{"start":{"line":101,"column":6},"end":{"line":101,"column":27}},"50":{"start":{"line":102,"column":6},"end":{"line":102,"column":71}},"51":{"start":{"line":106,"column":2},"end":{"line":108,"column":3}},"52":{"start":{"line":107,"column":4},"end":{"line":107,"column":34}},"53":{"start":{"line":114,"column":2},"end":{"line":118,"column":4}},"54":{"start":{"line":115,"column":4},"end":{"line":117,"column":6}},"55":{"start":{"line":116,"column":6},"end":{"line":116,"column":34}},"56":{"start":{"line":120,"column":2},"end":{"line":125,"column":4}},"57":{"start":{"line":121,"column":4},"end":{"line":124,"column":5}},"58":{"start":{"line":122,"column":6},"end":{"line":122,"column":63}},"59":{"start":{"line":123,"column":6},"end":{"line":123,"column":75}},"60":{"start":{"line":131,"column":2},"end":{"line":145,"column":3}},"61":{"start":{"line":132,"column":4},"end":{"line":132,"column":107}},"62":{"start":{"line":133,"column":4},"end":{"line":133,"column":52}},"63":{"start":{"line":134,"column":4},"end":{"line":134,"column":60}},"64":{"start":{"line":135,"column":4},"end":{"line":135,"column":21}},"65":{"start":{"line":136,"column":4},"end":{"line":138,"column":5}},"66":{"start":{"line":137,"column":6},"end":{"line":137,"column":58}},"67":{"start":{"line":139,"column":4},"end":{"line":139,"column":22}},"68":{"start":{"line":140,"column":4},"end":{"line":140,"column":47}},"69":{"start":{"line":141,"column":4},"end":{"line":141,"column":99}},"70":{"start":{"line":142,"column":4},"end":{"line":142,"column":87}},"71":{"start":{"line":144,"column":4},"end":{"line":144,"column":25}},"72":{"start":{"line":147,"column":2},"end":{"line":164,"column":3}},"73":{"start":{"line":148,"column":4},"end":{"line":148,"column":39}},"74":{"start":{"line":148,"column":21},"end":{"line":148,"column":38}},"75":{"start":{"line":149,"column":4},"end":{"line":149,"column":66}},"76":{"start":{"line":150,"column":4},"end":{"line":150,"column":59}},"77":{"start":{"line":151,"column":4},"end":{"line":158,"column":64}},"78":{"start":{"line":159,"column":4},"end":{"line":163,"column":5}},"79":{"start":{"line":160,"column":6},"end":{"line":160,"column":98}},"80":{"start":{"line":162,"column":6},"end":{"line":162,"column":58}},"81":{"start":{"line":166,"column":2},"end":{"line":193,"column":3}},"82":{"start":{"line":167,"column":4},"end":{"line":169,"column":5}},"83":{"start":{"line":168,"column":6},"end":{"line":168,"column":12}},"84":{"start":{"line":170,"column":4},"end":{"line":192,"column":5}},"85":{"start":{"line":171,"column":6},"end":{"line":176,"column":7}},"86":{"start":{"line":177,"column":6},"end":{"line":177,"column":66}},"87":{"start":{"line":178,"column":6},"end":{"line":178,"column":56}},"88":{"start":{"line":179,"column":6},"end":{"line":191,"column":7}},"89":{"start":{"line":180,"column":8},"end":{"line":182,"column":9}},"90":{"start":{"line":181,"column":10},"end":{"line":181,"column":36}},"91":{"start":{"line":183,"column":8},"end":{"line":183,"column":80}},"92":{"start":{"line":184,"column":8},"end":{"line":184,"column":59}},"93":{"start":{"line":185,"column":8},"end":{"line":185,"column":83}},"94":{"start":{"line":186,"column":8},"end":{"line":186,"column":63}},"95":{"start":{"line":188,"column":8},"end":{"line":188,"column":79}},"96":{"start":{"line":189,"column":8},"end":{"line":189,"column":29}},"97":{"start":{"line":190,"column":8},"end":{"line":190,"column":15}},"98":{"start":{"line":199,"column":2},"end":{"line":208,"column":3}},"99":{"start":{"line":200,"column":4},"end":{"line":200,"column":72}},"100":{"start":{"line":201,"column":4},"end":{"line":201,"column":90}},"101":{"start":{"line":202,"column":4},"end":{"line":207,"column":6}},"102":{"start":{"line":210,"column":2},"end":{"line":217,"column":3}},"103":{"start":{"line":211,"column":4},"end":{"line":216,"column":5}},"104":{"start":{"line":212,"column":6},"end":{"line":215,"column":7}},"105":{"start":{"line":213,"column":8},"end":{"line":213,"column":41}},"106":{"start":{"line":214,"column":8},"end":{"line":214,"column":13}},"107":{"start":{"line":219,"column":2},"end":{"line":254,"column":3}},"108":{"start":{"line":220,"column":4},"end":{"line":220,"column":27}},"109":{"start":{"line":221,"column":4},"end":{"line":221,"column":21}},"110":{"start":{"line":222,"column":4},"end":{"line":222,"column":29}},"111":{"start":{"line":223,"column":4},"end":{"line":223,"column":26}},"112":{"start":{"line":224,"column":4},"end":{"line":253,"column":5}},"113":{"start":{"line":225,"column":6},"end":{"line":227,"column":7}},"114":{"start":{"line":226,"column":8},"end":{"line":226,"column":45}},"115":{"start":{"line":228,"column":6},"end":{"line":228,"column":29}},"116":{"start":{"line":229,"column":6},"end":{"line":229,"column":30}},"117":{"start":{"line":230,"column":6},"end":{"line":230,"column":38}},"118":{"start":{"line":231,"column":11},"end":{"line":253,"column":5}},"119":{"start":{"line":232,"column":6},"end":{"line":234,"column":7}},"120":{"start":{"line":235,"column":6},"end":{"line":235,"column":36}},"121":{"start":{"line":237,"column":6},"end":{"line":237,"column":20}},"122":{"start":{"line":238,"column":6},"end":{"line":238,"column":17}},"123":{"start":{"line":239,"column":6},"end":{"line":242,"column":7}},"124":{"start":{"line":240,"column":8},"end":{"line":240,"column":29}},"125":{"start":{"line":241,"column":8},"end":{"line":241,"column":24}},"126":{"start":{"line":243,"column":6},"end":{"line":243,"column":49}},"127":{"start":{"line":243,"column":28},"end":{"line":243,"column":48}},"128":{"start":{"line":244,"column":6},"end":{"line":252,"column":8}},"129":{"start":{"line":245,"column":8},"end":{"line":251,"column":9}},"130":{"start":{"line":246,"column":10},"end":{"line":246,"column":67}},"131":{"start":{"line":247,"column":10},"end":{"line":247,"column":49}},"132":{"start":{"line":249,"column":10},"end":{"line":249,"column":68}},"133":{"start":{"line":250,"column":10},"end":{"line":250,"column":49}},"134":{"start":{"line":256,"column":2},"end":{"line":256,"column":14}},"135":{"start":{"line":261,"column":0},"end":{"line":261,"column":31}}},"branchMap":{"1":{"line":61,"type":"if","locations":[{"start":{"line":61,"column":4},"end":{"line":61,"column":4}},{"start":{"line":61,"column":4},"end":{"line":61,"column":4}}]},"2":{"line":70,"type":"if","locations":[{"start":{"line":70,"column":4},"end":{"line":70,"column":4}},{"start":{"line":70,"column":4},"end":{"line":70,"column":4}}]},"3":{"line":74,"type":"if","locations":[{"start":{"line":74,"column":4},"end":{"line":74,"column":4}},{"start":{"line":74,"column":4},"end":{"line":74,"column":4}}]},"4":{"line":75,"type":"if","locations":[{"start":{"line":75,"column":4},"end":{"line":75,"column":4}},{"start":{"line":75,"column":4},"end":{"line":75,"column":4}}]},"5":{"line":76,"type":"if","locations":[{"start":{"line":76,"column":4},"end":{"line":76,"column":4}},{"start":{"line":76,"column":4},"end":{"line":76,"column":4}}]},"6":{"line":76,"type":"binary-expr","locations":[{"start":{"line":76,"column":8},"end":{"line":76,"column":38}},{"start":{"line":76,"column":42},"end":{"line":76,"column":63}}]},"7":{"line":91,"type":"if","locations":[{"start":{"line":91,"column":6},"end":{"line":91,"column":6}},{"start":{"line":91,"column":6},"end":{"line":91,"column":6}}]},"8":{"line":121,"type":"if","locations":[{"start":{"line":121,"column":4},"end":{"line":121,"column":4}},{"start":{"line":121,"column":4},"end":{"line":121,"column":4}}]},"9":{"line":148,"type":"if","locations":[{"start":{"line":148,"column":4},"end":{"line":148,"column":4}},{"start":{"line":148,"column":4},"end":{"line":148,"column":4}}]},"10":{"line":159,"type":"if","locations":[{"start":{"line":159,"column":4},"end":{"line":159,"column":4}},{"start":{"line":159,"column":4},"end":{"line":159,"column":4}}]},"11":{"line":167,"type":"if","locations":[{"start":{"line":167,"column":4},"end":{"line":167,"column":4}},{"start":{"line":167,"column":4},"end":{"line":167,"column":4}}]},"12":{"line":167,"type":"binary-expr","locations":[{"start":{"line":167,"column":8},"end":{"line":167,"column":43}},{"start":{"line":167,"column":47},"end":{"line":167,"column":94}}]},"13":{"line":170,"type":"if","locations":[{"start":{"line":170,"column":4},"end":{"line":170,"column":4}},{"start":{"line":170,"column":4},"end":{"line":170,"column":4}}]},"14":{"line":170,"type":"binary-expr","locations":[{"start":{"line":170,"column":8},"end":{"line":170,"column":49}},{"start":{"line":170,"column":53},"end":{"line":170,"column":94}}]},"15":{"line":180,"type":"if","locations":[{"start":{"line":180,"column":8},"end":{"line":180,"column":8}},{"start":{"line":180,"column":8},"end":{"line":180,"column":8}}]},"16":{"line":212,"type":"if","locations":[{"start":{"line":212,"column":6},"end":{"line":212,"column":6}},{"start":{"line":212,"column":6},"end":{"line":212,"column":6}}]},"17":{"line":212,"type":"binary-expr","locations":[{"start":{"line":212,"column":10},"end":{"line":212,"column":33}},{"start":{"line":212,"column":37},"end":{"line":212,"column":98}}]},"18":{"line":224,"type":"if","locations":[{"start":{"line":224,"column":4},"end":{"line":224,"column":4}},{"start":{"line":224,"column":4},"end":{"line":224,"column":4}}]},"19":{"line":231,"type":"if","locations":[{"start":{"line":231,"column":11},"end":{"line":231,"column":11}},{"start":{"line":231,"column":11},"end":{"line":231,"column":11}}]},"20":{"line":239,"type":"if","locations":[{"start":{"line":239,"column":6},"end":{"line":239,"column":6}},{"start":{"line":239,"column":6},"end":{"line":239,"column":6}}]},"21":{"line":245,"type":"if","locations":[{"start":{"line":245,"column":8},"end":{"line":245,"column":8}},{"start":{"line":245,"column":8},"end":{"line":245,"column":8}}]}},"code":["'use strict'","","const Primus = require('primus')","const UglifyJS = require('uglify-js')","const fs = require('fs')","const path = require('path')","const util = require('util')","const browserFingerprint = require('browser_fingerprint')","","const initialize = function (api, options, next) {","  // ////////","  // INIT //","  // ////////","","  const type = 'websocket'","  const attributes = {","    canChat: true,","    logConnections: true,","    logExits: true,","    sendWelcomeMessage: true,","    verbs: [","      'quit',","      'exit',","      'documentation',","      'roomAdd',","      'roomLeave',","      'roomView',","      'detailsView',","      'say'","    ]","  }","","  const server = new api.GenericServer(type, options, attributes)","","  // ////////////////////","  // REQUIRED METHODS //","  // ////////////////////","","  server.start = function (next) {","    const webserver = api.servers.servers.web","    server.server = new Primus(webserver.server, api.config.servers.websocket.server)","","    server.server.on('connection', (rawConnection) => {","      handleConnection(rawConnection)","    })","","    server.server.on('disconnection', (rawConnection) => {","      handleDisconnection(rawConnection)","    })","","    api.log(['webSockets bound to %s: %s', webserver.options.bindIP, webserver.options.port], 'debug')","    server.active = true","","    server.writeClientJS()","","    next()","  }","","  server.stop = function (next) {","    server.active = false","    if (api.config.servers.websocket.destroyClientsOnShutdown === true) {","      server.connections().forEach((connection) => {","        connection.destroy()","      })","    }","    process.nextTick(next)","  }","","  server.sendMessage = function (connection, message, messageCount) {","    if (message.error) {","      message.error = api.config.errors.serializers.servers.websocket(message.error)","    }","","    if (!message.context) { message.context = 'response' }","    if (!messageCount) { messageCount = connection.messageCount }","    if (message.context === 'response' && !message.messageCount) { message.messageCount = messageCount }","    connection.rawConnection.write(message)","  }","","  server.sendFile = function (connection, error, fileStream, mime, length, lastModified) {","    let content = ''","    let response = {","      error: error,","      content: null,","      mime: mime,","      length: length,","      lastModified: lastModified","    }","","    try {","      if (!error) {","        fileStream.on('data', function (d) { content += d })","        fileStream.on('end', () => {","          response.content = content","          server.sendMessage(connection, response, connection.messageCount)","        })","      } else {","        server.sendMessage(connection, response, connection.messageCount)","      }","    } catch (e) {","      api.log(e, 'warning')","      server.sendMessage(connection, response, connection.messageCount)","    }","  }","","  server.goodbye = function (connection) {","    connection.rawConnection.end()","  }","","  // //////////","  // EVENTS //","  // //////////","","  server.on('connection', function (connection) {","    connection.rawConnection.on('data', (data) => {","      handleData(connection, data)","    })","  })","","  server.on('actionComplete', function (data) {","    if (data.toRender !== false) {","      data.connection.response.messageCount = data.messageCount","      server.sendMessage(data.connection, data.response, data.messageCount)","    }","  })","","  // //////////","  // CLIENT //","  // //////////","","  server.compileActionheroClientJS = function () {","    let ahClientSource = fs.readFileSync(path.join(__dirname, '/../client/actionheroClient.js')).toString()","    let url = api.config.servers.websocket.clientUrl","    ahClientSource = ahClientSource.replace(/%%URL%%/g, url)","    let defaults = {}","    for (let i in api.config.servers.websocket.client) {","      defaults[i] = api.config.servers.websocket.client[i]","    }","    defaults.url = url","    let defaultsString = util.inspect(defaults)","    defaultsString = defaultsString.replace('\\'window.location.origin\\'', 'window.location.origin')","    ahClientSource = ahClientSource.replace('%%DEFAULTS%%', 'return ' + defaultsString)","","    return ahClientSource","  }","","  server.renderClientJS = function (minimize) {","    if (!minimize) { minimize = false }","    let libSource = api.servers.servers.websocket.server.library()","    let ahClientSource = server.compileActionheroClientJS()","    ahClientSource =","      ';;;\\r\\n' +","      '(function(exports){ \\r\\n' +","      ahClientSource +","      '\\r\\n' +","      'exports.ActionheroClient = ActionheroClient; \\r\\n' +","      'exports.actionheroClient = actionheroClient; \\r\\n' +","      '})(typeof exports === \\'undefined\\' ? window : exports);'","    if (minimize) {","      return UglifyJS.minify(libSource + '\\r\\n\\r\\n\\r\\n' + ahClientSource, {fromString: true}).code","    } else {","      return (libSource + '\\r\\n\\r\\n\\r\\n' + ahClientSource)","    }","  }","","  server.writeClientJS = function () {","    if (!api.config.general.paths['public'] || api.config.general.paths['public'].length === 0) {","      return","    }","    if (api.config.servers.websocket.clientJsPath && api.config.servers.websocket.clientJsName) {","      let clientJSPath = path.normalize(","        api.config.general.paths['public'][0] +","        path.sep +","        api.config.servers.websocket.clientJsPath +","        path.sep","      )","      let clientJSName = api.config.servers.websocket.clientJsName","      let clientJSFullPath = clientJSPath + clientJSName","      try {","        if (!fs.existsSync(clientJSPath)) {","          fs.mkdirSync(clientJSPath)","        }","        fs.writeFileSync(clientJSFullPath + '.js', server.renderClientJS(false))","        api.log(['wrote %s.js', clientJSFullPath], 'debug')","        fs.writeFileSync(clientJSFullPath + '.min.js', server.renderClientJS(true))","        api.log(['wrote %s.min.js', clientJSFullPath], 'debug')","      } catch (e) {","        api.log('Cannot write client-side JS for websocket server:', 'warning')","        api.log(e, 'warning')","        throw e","      }","    }","  }","","  // ///////////","  // HELPERS //","  // ///////////","","  const handleConnection = function (rawConnection) {","    const parsedCookies = browserFingerprint.parseCookies(rawConnection)","    const fingerprint = parsedCookies[api.config.servers.web.fingerprintOptions.cookieKey]","    server.buildConnection({","      rawConnection: rawConnection,","      remoteAddress: rawConnection.address.ip,","      remotePort: rawConnection.address.port,","      fingerprint: fingerprint","    })","  }","","  const handleDisconnection = function (rawConnection) {","    for (let i in server.connections()) {","      if (server.connections()[i] && rawConnection.id === server.connections()[i].rawConnection.id) {","        server.connections()[i].destroy()","        break","      }","    }","  }","","  const handleData = function (connection, data) {","    const verb = data.event","    delete data.event","    connection.messageCount++","    connection.params = {}","    if (verb === 'action') {","      for (let v in data.params) {","        connection.params[v] = data.params[v]","      }","      connection.error = null","      connection.response = {}","      server.processAction(connection)","    } else if (verb === 'file') {","      connection.params = {","        file: data.file","      }","      server.processFile(connection)","    } else {","      let words = []","      let message","      if (data.room) {","        words.push(data.room)","        delete data.room","      }","      for (let i in data) { words.push(data[i]) }","      connection.verbs(verb, words, (error, data) => {","        if (!error) {","          message = {status: 'OK', context: 'response', data: data}","          server.sendMessage(connection, message)","        } else {","          message = {status: error, context: 'response', data: data}","          server.sendMessage(connection, message)","        }","      })","    }","  }","","  next(server)","}","","// ///////////////////////////////////////////////////////////////////","// exports","exports.initialize = initialize",""],"l":{"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"10":1,"15":0,"16":0,"33":0,"39":0,"40":0,"41":0,"43":0,"44":0,"47":0,"48":0,"51":0,"52":0,"54":0,"56":0,"59":0,"60":0,"61":0,"62":0,"63":0,"66":0,"69":0,"70":0,"71":0,"74":0,"75":0,"76":0,"77":0,"80":0,"81":0,"82":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"98":0,"101":0,"102":0,"106":0,"107":0,"114":0,"115":0,"116":0,"120":0,"121":0,"122":0,"123":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":0,"139":0,"140":0,"141":0,"142":0,"144":0,"147":0,"148":0,"149":0,"150":0,"151":0,"159":0,"160":0,"162":0,"166":0,"167":0,"168":0,"170":0,"171":0,"177":0,"178":0,"179":0,"180":0,"181":0,"183":0,"184":0,"185":0,"186":0,"188":0,"189":0,"190":0,"199":0,"200":0,"201":0,"202":0,"210":0,"211":0,"212":0,"213":0,"214":0,"219":0,"220":0,"221":0,"222":0,"223":0,"224":0,"225":0,"226":0,"228":0,"229":0,"230":0,"231":0,"232":0,"235":0,"237":0,"238":0,"239":0,"240":0,"241":0,"243":0,"244":0,"245":0,"246":0,"247":0,"249":0,"250":0,"256":0,"261":1}},"/home/travis/build/npmtest/node-npmtest-actionhero/node_modules/actionhero/tasks/runAction.js":{"path":"/home/travis/build/npmtest/node-npmtest-actionhero/node_modules/actionhero/tasks/runAction.js","s":{"1":1,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":1},"b":{"1":[0,0],"2":[0,0]},"f":{"1":0,"2":0,"3":0},"fnMap":{"1":{"name":"(anonymous_1)","line":8,"loc":{"start":{"line":8,"column":7},"end":{"line":8,"column":36}}},"2":{"name":"(anonymous_2)","line":20,"loc":{"start":{"line":20,"column":64},"end":{"line":20,"column":80}}},"3":{"name":"(anonymous_3)","line":27,"loc":{"start":{"line":27,"column":25},"end":{"line":27,"column":37}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":34,"column":1}},"2":{"start":{"line":9,"column":4},"end":{"line":9,"column":32}},"3":{"start":{"line":9,"column":19},"end":{"line":9,"column":31}},"4":{"start":{"line":11,"column":4},"end":{"line":16,"column":6}},"5":{"start":{"line":18,"column":4},"end":{"line":18,"column":30}},"6":{"start":{"line":20,"column":4},"end":{"line":30,"column":6}},"7":{"start":{"line":21,"column":6},"end":{"line":25,"column":7}},"8":{"start":{"line":22,"column":8},"end":{"line":22,"column":96}},"9":{"start":{"line":24,"column":8},"end":{"line":24,"column":79}},"10":{"start":{"line":27,"column":6},"end":{"line":29,"column":8}},"11":{"start":{"line":28,"column":8},"end":{"line":28,"column":48}},"12":{"start":{"line":32,"column":4},"end":{"line":32,"column":35}},"13":{"start":{"line":36,"column":0},"end":{"line":36,"column":19}}},"branchMap":{"1":{"line":9,"type":"if","locations":[{"start":{"line":9,"column":4},"end":{"line":9,"column":4}},{"start":{"line":9,"column":4},"end":{"line":9,"column":4}}]},"2":{"line":21,"type":"if","locations":[{"start":{"line":21,"column":6},"end":{"line":21,"column":6}},{"start":{"line":21,"column":6},"end":{"line":21,"column":6}}]}},"code":["const task = {","  name: 'runAction',","  description: 'I will run an action and return the connection object',","  queue: 'default',","  plugins: [],","  pluginOptions: [],","  frequency: 0,","  run: function (api, params, next) {","    if (!params) { params = {} }","","    const connection = new api.Connection({","      type: 'task',","      remotePort: '0',","      remoteIP: '0',","      rawConnection: {}","    })","","    connection.params = params","","    const ActionProcessor = new api.ActionProcessor(connection, function (data) {","      if (data.response.error) {","        api.log('task error: ' + data.response.error, 'error', {params: JSON.stringify(params)})","      } else {","        api.log('[ action @ task ]', 'debug', {params: JSON.stringify(params)})","      }","","      connection.destroy(function () {","        next(data.response.error, data.response)","      })","    })","","    ActionProcessor.processAction()","  }","}","","exports.task = task",""],"l":{"1":1,"9":0,"11":0,"18":0,"20":0,"21":0,"22":0,"24":0,"27":0,"28":0,"32":0,"36":1}},"/home/travis/build/npmtest/node-npmtest-actionhero/node_modules/actionhero/bin/methods/console.js":{"path":"/home/travis/build/npmtest/node-npmtest-actionhero/node_modules/actionhero/bin/methods/console.js","s":{"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0},"b":{"1":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0},"fnMap":{"1":{"name":"(anonymous_1)","line":5,"loc":{"start":{"line":5,"column":17},"end":{"line":5,"column":38}}},"2":{"name":"(anonymous_2)","line":13,"loc":{"start":{"line":13,"column":40},"end":{"line":13,"column":57}}},"3":{"name":"(anonymous_3)","line":16,"loc":{"start":{"line":16,"column":15},"end":{"line":16,"column":27}}},"4":{"name":"(anonymous_4)","line":26,"loc":{"start":{"line":26,"column":22},"end":{"line":26,"column":34}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":28}},"2":{"start":{"line":5,"column":0},"end":{"line":31,"column":1}},"3":{"start":{"line":6,"column":2},"end":{"line":6,"column":77}},"4":{"start":{"line":6,"column":38},"end":{"line":6,"column":76}},"5":{"start":{"line":7,"column":2},"end":{"line":7,"column":44}},"6":{"start":{"line":8,"column":2},"end":{"line":8,"column":36}},"7":{"start":{"line":9,"column":2},"end":{"line":9,"column":30}},"8":{"start":{"line":10,"column":2},"end":{"line":10,"column":40}},"9":{"start":{"line":11,"column":2},"end":{"line":11,"column":40}},"10":{"start":{"line":13,"column":2},"end":{"line":30,"column":4}},"11":{"start":{"line":14,"column":4},"end":{"line":14,"column":37}},"12":{"start":{"line":14,"column":17},"end":{"line":14,"column":36}},"13":{"start":{"line":16,"column":4},"end":{"line":29,"column":11}},"14":{"start":{"line":17,"column":6},"end":{"line":22,"column":8}},"15":{"start":{"line":24,"column":6},"end":{"line":24,"column":28}},"16":{"start":{"line":26,"column":6},"end":{"line":28,"column":8}},"17":{"start":{"line":27,"column":8},"end":{"line":27,"column":24}}},"branchMap":{"1":{"line":14,"type":"if","locations":[{"start":{"line":14,"column":4},"end":{"line":14,"column":4}},{"start":{"line":14,"column":4},"end":{"line":14,"column":4}}]}},"code":["'use strict'","","const REPL = require('repl')","","module.exports = function (api, next) {","  for (let i in api.config.servers) { api.config.servers[i].enabled = false }","  api.config.general.developmentMode = false","  api.config.tasks.scheduler = false","  api.config.tasks.queues = []","  api.config.tasks.minTaskProcessors = 0","  api.config.tasks.maxTaskProcessors = 0","","  api.commands.start.call(api._context, function (error) {","    if (error) { return next(error) }","","    setTimeout(function () {","      const repl = REPL.start({","        prompt: '[ AH::' + api.env + ' ] >> ',","        input: process.stdin,","        output: process.stdout,","        useGlobal: false","      })","","      repl.context.api = api","","      repl.on('exit', function () {","        next(null, true)","      })","    }, 500)","  })","}",""],"l":{"3":1,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"13":0,"14":0,"16":0,"17":0,"24":0,"26":0,"27":0}},"/home/travis/build/npmtest/node-npmtest-actionhero/node_modules/actionhero/bin/methods/generate.js":{"path":"/home/travis/build/npmtest/node-npmtest-actionhero/node_modules/actionhero/bin/methods/generate.js","s":{"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0},"b":{"1":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0},"fnMap":{"1":{"name":"(anonymous_1)","line":6,"loc":{"start":{"line":6,"column":17},"end":{"line":6,"column":38}}},"2":{"name":"(anonymous_2)","line":8,"loc":{"start":{"line":8,"column":12},"end":{"line":8,"column":31}}},"3":{"name":"(anonymous_3)","line":13,"loc":{"start":{"line":13,"column":108},"end":{"line":13,"column":125}}},"4":{"name":"(anonymous_4)","line":73,"loc":{"start":{"line":73,"column":14},"end":{"line":73,"column":29}}},"5":{"name":"(anonymous_5)","line":109,"loc":{"start":{"line":109,"column":56},"end":{"line":109,"column":72}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":24}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":28}},"3":{"start":{"line":6,"column":0},"end":{"line":118,"column":1}},"4":{"start":{"line":8,"column":2},"end":{"line":10,"column":3}},"5":{"start":{"line":9,"column":4},"end":{"line":9,"column":24}},"6":{"start":{"line":13,"column":2},"end":{"line":117,"column":4}},"7":{"start":{"line":14,"column":4},"end":{"line":14,"column":37}},"8":{"start":{"line":14,"column":17},"end":{"line":14,"column":36}},"9":{"start":{"line":18,"column":4},"end":{"line":18,"column":22}},"10":{"start":{"line":20,"column":4},"end":{"line":20,"column":96}},"11":{"start":{"line":22,"column":4},"end":{"line":42,"column":5}},"12":{"start":{"line":44,"column":4},"end":{"line":46,"column":5}},"13":{"start":{"line":45,"column":6},"end":{"line":45,"column":90}},"14":{"start":{"line":48,"column":4},"end":{"line":48,"column":69}},"15":{"start":{"line":50,"column":4},"end":{"line":50,"column":103}},"16":{"start":{"line":51,"column":4},"end":{"line":51,"column":95}},"17":{"start":{"line":52,"column":4},"end":{"line":52,"column":97}},"18":{"start":{"line":56,"column":4},"end":{"line":56,"column":54}},"19":{"start":{"line":59,"column":4},"end":{"line":75,"column":6}},"20":{"start":{"line":74,"column":6},"end":{"line":74,"column":54}},"21":{"start":{"line":78,"column":4},"end":{"line":99,"column":5}},"22":{"start":{"line":101,"column":4},"end":{"line":103,"column":5}},"23":{"start":{"line":102,"column":6},"end":{"line":102,"column":85}},"24":{"start":{"line":105,"column":4},"end":{"line":105,"column":15}},"25":{"start":{"line":106,"column":4},"end":{"line":106,"column":82}},"26":{"start":{"line":108,"column":4},"end":{"line":108,"column":15}},"27":{"start":{"line":109,"column":4},"end":{"line":111,"column":6}},"28":{"start":{"line":110,"column":6},"end":{"line":110,"column":19}},"29":{"start":{"line":113,"column":4},"end":{"line":113,"column":86}},"30":{"start":{"line":114,"column":4},"end":{"line":114,"column":53}},"31":{"start":{"line":116,"column":4},"end":{"line":116,"column":20}}},"branchMap":{"1":{"line":14,"type":"if","locations":[{"start":{"line":14,"column":4},"end":{"line":14,"column":4}},{"start":{"line":14,"column":4},"end":{"line":14,"column":4}}]}},"code":["'use strict'","","const fs = require('fs')","const path = require('path')","","module.exports = function (api, next) {","  // proxy the logger, as we can't use the real one yet","  api.log = function (message) {","    console.log(message)","  }","","  // reload utils, as they won't have been loaded yet","  api.utils = require(path.normalize(path.join(__dirname, '/../../initializers/utils.js'))).initialize(api, function (error) {","    if (error) { return next(error) }","","    // ////// DOCUMENTS ////////","","    let documents = {}","","    documents.projectMap = fs.readFileSync(path.join(__dirname, '/../templates/projectMap.txt'))","","    const oldFileMap = {","      configApiJs: '/config/api.js',","      configLoggerJs: '/config/logger.js',","      configRedisJs: '/config/redis.js',","      configTasksJs: '/config/tasks.js',","      configErrorsJs: '/config/errors.js',","      configI18nJs: '/config/i18n.js',","      configRoutesJs: '/config/routes.js',","      configSocketJs: '/config/servers/socket.js',","      configWebJs: '/config/servers/web.js',","      configWebsocketJs: '/config/servers/websocket.js',","      packageJson: '/package.json',","      actionStatus: '/actions/status.js',","      actionChatRoom: '/actions/createChatRoom.js',","      actionDocumentation: '/actions/showDocumentation.js',","      publicIndex: '/public/index.html',","      publicChat: '/public/chat.html',","      publicLogo: '/public/logo/actionhero.png',","      publicCss: '/public/css/cosmo.css',","      exampleTest: '/test/template.js.example'","    }","","    for (let name in oldFileMap) {","      documents[name] = fs.readFileSync(path.join(__dirname, '/../../', oldFileMap[name]))","    }","","    const AHversionNumber = JSON.parse(documents.packageJson).version","","    documents.packageJson = String(fs.readFileSync(path.join(__dirname, '/../templates/package.json')))","    documents.packageJson = documents.packageJson.replace('%%versionNumber%%', AHversionNumber)","    documents.readmeMd = String(fs.readFileSync(path.join(__dirname, '/../templates/README.md')))","","    // ////// LOGIC ////////","","    api.log('Generating a new actionhero project...');","","    // make directories","    [","      '/actions',","      '/pids',","      '/config',","      '/config/servers',","      '/initializers',","      '/log',","      '/servers',","      '/public',","      '/public/javascript',","      '/public/css',","      '/public/logo',","      '/tasks',","      '/test'","    ].forEach(function (dir) {","      api.utils.createDirSafely(api.projectRoot + dir)","    })","","    // make files","    const newFileMap = {","      '/config/api.js': 'configApiJs',","      '/config/logger.js': 'configLoggerJs',","      '/config/redis.js': 'configRedisJs',","      '/config/tasks.js': 'configTasksJs',","      '/config/errors.js': 'configErrorsJs',","      '/config/i18n.js': 'configI18nJs',","      '/config/routes.js': 'configRoutesJs',","      '/config/servers/socket.js': 'configSocketJs',","      '/config/servers/web.js': 'configWebJs',","      '/config/servers/websocket.js': 'configWebsocketJs',","      '/package.json': 'packageJson',","      '/actions/status.js': 'actionStatus',","      '/actions/createChatRoom.js': 'actionChatRoom',","      '/actions/showDocumentation.js': 'actionDocumentation',","      '/public/index.html': 'publicIndex',","      '/public/chat.html': 'publicChat',","      '/public/css/cosmo.css': 'publicCss',","      '/public/logo/actionhero.png': 'publicLogo',","      '/README.md': 'readmeMd',","      '/test/example.js': 'exampleTest'","    }","","    for (let file in newFileMap) {","      api.utils.createFileSafely(api.projectRoot + file, documents[newFileMap[file]])","    }","","    api.log('')","    api.log('Generation Complete.  Your project directory should look like this:')","","    api.log('')","    documents.projectMap.toString().split('\\n').forEach(function (line) {","      api.log(line)","    })","","    api.log('You may need to run `npm install` to install some dependancies', 'alert')","    api.log('Run \\'npm start\\' to start your server')","","    next(null, true)","  })","}",""],"l":{"3":1,"4":1,"6":1,"8":0,"9":0,"13":0,"14":0,"18":0,"20":0,"22":0,"44":0,"45":0,"48":0,"50":0,"51":0,"52":0,"56":0,"59":0,"74":0,"78":0,"101":0,"102":0,"105":0,"106":0,"108":0,"109":0,"110":0,"113":0,"114":0,"116":0}},"/home/travis/build/npmtest/node-npmtest-actionhero/node_modules/actionhero/bin/methods/help.js":{"path":"/home/travis/build/npmtest/node-npmtest-actionhero/node_modules/actionhero/bin/methods/help.js","s":{"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0},"b":{},"f":{"1":0,"2":0},"fnMap":{"1":{"name":"(anonymous_1)","line":6,"loc":{"start":{"line":6,"column":17},"end":{"line":6,"column":38}}},"2":{"name":"(anonymous_2)","line":8,"loc":{"start":{"line":8,"column":27},"end":{"line":8,"column":43}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":24}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":28}},"3":{"start":{"line":6,"column":0},"end":{"line":10,"column":1}},"4":{"start":{"line":7,"column":2},"end":{"line":7,"column":89}},"5":{"start":{"line":8,"column":2},"end":{"line":8,"column":65}},"6":{"start":{"line":8,"column":45},"end":{"line":8,"column":63}},"7":{"start":{"line":9,"column":2},"end":{"line":9,"column":18}}},"branchMap":{},"code":["'use strict'","","const fs = require('fs')","const path = require('path')","","module.exports = function (api, next) {","  const help = fs.readFileSync(path.join(__dirname, '/../templates/help.txt')).toString()","  help.split('\\n').forEach(function (line) { console.log(line) })","  next(null, true)","}",""],"l":{"3":1,"4":1,"6":1,"7":0,"8":0,"9":0}},"/home/travis/build/npmtest/node-npmtest-actionhero/node_modules/actionhero/bin/methods/link.js":{"path":"/home/travis/build/npmtest/node-npmtest-actionhero/node_modules/actionhero/bin/methods/link.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0},"fnMap":{"1":{"name":"(anonymous_1)","line":14,"loc":{"start":{"line":14,"column":17},"end":{"line":14,"column":38}}},"2":{"name":"(anonymous_2)","line":19,"loc":{"start":{"line":19,"column":42},"end":{"line":19,"column":64}}},"3":{"name":"(anonymous_3)","line":41,"loc":{"start":{"line":41,"column":12},"end":{"line":41,"column":25}}},"4":{"name":"(anonymous_4)","line":52,"loc":{"start":{"line":52,"column":20},"end":{"line":52,"column":44}}},"5":{"name":"(anonymous_5)","line":55,"loc":{"start":{"line":55,"column":34},"end":{"line":55,"column":62}}}},"statementMap":{"1":{"start":{"line":4,"column":0},"end":{"line":4,"column":28}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":24}},"3":{"start":{"line":6,"column":0},"end":{"line":6,"column":36}},"4":{"start":{"line":7,"column":0},"end":{"line":12,"column":7}},"5":{"start":{"line":14,"column":0},"end":{"line":77,"column":1}},"6":{"start":{"line":15,"column":2},"end":{"line":15,"column":51}},"7":{"start":{"line":16,"column":2},"end":{"line":16,"column":16}},"8":{"start":{"line":17,"column":2},"end":{"line":17,"column":29}},"9":{"start":{"line":19,"column":2},"end":{"line":24,"column":4}},"10":{"start":{"line":20,"column":4},"end":{"line":20,"column":77}},"11":{"start":{"line":21,"column":4},"end":{"line":23,"column":5}},"12":{"start":{"line":22,"column":6},"end":{"line":22,"column":36}},"13":{"start":{"line":26,"column":2},"end":{"line":29,"column":3}},"14":{"start":{"line":27,"column":4},"end":{"line":27,"column":109}},"15":{"start":{"line":28,"column":4},"end":{"line":28,"column":27}},"16":{"start":{"line":31,"column":2},"end":{"line":31,"column":67}},"17":{"start":{"line":32,"column":2},"end":{"line":32,"column":66}},"18":{"start":{"line":35,"column":2},"end":{"line":50,"column":4}},"19":{"start":{"line":42,"column":4},"end":{"line":42,"column":85}},"20":{"start":{"line":43,"column":4},"end":{"line":43,"column":95}},"21":{"start":{"line":44,"column":4},"end":{"line":44,"column":79}},"22":{"start":{"line":46,"column":4},"end":{"line":49,"column":5}},"23":{"start":{"line":47,"column":6},"end":{"line":47,"column":51}},"24":{"start":{"line":48,"column":6},"end":{"line":48,"column":79}},"25":{"start":{"line":52,"column":2},"end":{"line":71,"column":3}},"26":{"start":{"line":53,"column":4},"end":{"line":53,"column":34}},"27":{"start":{"line":53,"column":20},"end":{"line":53,"column":33}},"28":{"start":{"line":54,"column":4},"end":{"line":70,"column":5}},"29":{"start":{"line":55,"column":6},"end":{"line":69,"column":8}},"30":{"start":{"line":56,"column":8},"end":{"line":56,"column":70}},"31":{"start":{"line":57,"column":8},"end":{"line":57,"column":40}},"32":{"start":{"line":58,"column":8},"end":{"line":68,"column":9}},"33":{"start":{"line":59,"column":10},"end":{"line":59,"column":77}},"34":{"start":{"line":61,"column":10},"end":{"line":61,"column":47}},"35":{"start":{"line":62,"column":10},"end":{"line":62,"column":60}},"36":{"start":{"line":63,"column":10},"end":{"line":63,"column":116}},"37":{"start":{"line":64,"column":10},"end":{"line":66,"column":11}},"38":{"start":{"line":65,"column":12},"end":{"line":65,"column":116}},"39":{"start":{"line":67,"column":10},"end":{"line":67,"column":95}},"40":{"start":{"line":74,"column":2},"end":{"line":74,"column":58}},"41":{"start":{"line":75,"column":2},"end":{"line":75,"column":28}},"42":{"start":{"line":76,"column":2},"end":{"line":76,"column":18}}},"branchMap":{"1":{"line":21,"type":"if","locations":[{"start":{"line":21,"column":4},"end":{"line":21,"column":4}},{"start":{"line":21,"column":4},"end":{"line":21,"column":4}}]},"2":{"line":21,"type":"binary-expr","locations":[{"start":{"line":21,"column":8},"end":{"line":21,"column":19}},{"start":{"line":21,"column":23},"end":{"line":21,"column":77}}]},"3":{"line":26,"type":"if","locations":[{"start":{"line":26,"column":2},"end":{"line":26,"column":2}},{"start":{"line":26,"column":2},"end":{"line":26,"column":2}}]},"4":{"line":46,"type":"if","locations":[{"start":{"line":46,"column":4},"end":{"line":46,"column":4}},{"start":{"line":46,"column":4},"end":{"line":46,"column":4}}]},"5":{"line":53,"type":"if","locations":[{"start":{"line":53,"column":4},"end":{"line":53,"column":4}},{"start":{"line":53,"column":4},"end":{"line":53,"column":4}}]},"6":{"line":54,"type":"if","locations":[{"start":{"line":54,"column":4},"end":{"line":54,"column":4}},{"start":{"line":54,"column":4},"end":{"line":54,"column":4}}]},"7":{"line":58,"type":"if","locations":[{"start":{"line":58,"column":8},"end":{"line":58,"column":8}},{"start":{"line":58,"column":8},"end":{"line":58,"column":8}}]},"8":{"line":64,"type":"if","locations":[{"start":{"line":64,"column":10},"end":{"line":64,"column":10}},{"start":{"line":64,"column":10},"end":{"line":64,"column":10}}]}},"code":["'use strict'","","// use me to include the files from a plugin within this project","const path = require('path')","const fs = require('fs')","const optimist = require('optimist')","const argv = optimist","  .demand('name')","  .describe('name', 'The name of the plugin')","  .describe('overwriteConfig', 'Should we overwrite existing config files for this plugin?')","  .default('overwriteConfig', false)","  .argv","","module.exports = function (api, next) {","  let linkRelativeBase = api.projectRoot + path.sep","  let pluginRoot","  let overwriteConfig = false","","  api.config.general.paths.plugin.forEach(function (pluginPath) {","    let pluginPathAttempt = path.normalize(pluginPath + path.sep + argv.name)","    if (!pluginRoot && api.utils.dirExists(pluginPath + path.sep + argv.name)) {","      pluginRoot = pluginPathAttempt","    }","  })","","  if (!pluginRoot) {","    api.log(['plugin `%s` not found in plugin paths', argv.name], 'warning', api.config.general.paths.plugin)","    return next(null, true)","  }","","  let pluginRootRelative = pluginRoot.replace(linkRelativeBase, '')","  api.log(['linking the plugin found at %s', pluginRootRelative]);","","  // link actionable files","  [","    ['action', 'actions'],","    ['task', 'tasks'],","    ['public', 'public'],","    ['server', 'servers'],","    ['initializer', 'initializers']","  ].forEach(function (c) {","    let localLinkDirectory = api.config.general.paths[c[0]][0] + path.sep + 'plugins'","    let localLinkLocation = path.normalize(localLinkDirectory + path.sep + argv.name + '.link')","    let pluginSubSection = path.normalize(pluginRootRelative + path.sep + c[1])","","    if (api.utils.dirExists(pluginSubSection)) {","      api.utils.createDirSafely(localLinkDirectory)","      api.utils.createLinkfileSafely(localLinkLocation, c[1], pluginSubSection)","    }","  })","","  const copyFiles = function (dir, prepend) {","    if (!prepend) { prepend = '' }","    if (api.utils.dirExists(dir)) {","      fs.readdirSync(dir).forEach(function (pluginConfigFile) {","        const file = path.normalize(dir + path.sep + pluginConfigFile)","        const stats = fs.lstatSync(file)","        if (stats.isDirectory()) {","          copyFiles(file, (prepend + path.sep + pluginConfigFile + path.sep))","        } else {","          const content = fs.readFileSync(file)","          const fileParts = pluginConfigFile.split(path.sep)","          let localConfigFile = linkRelativeBase + 'config' + path.sep + prepend + fileParts[(fileParts.length - 1)]","          if (process.env.ACTIONHERO_CONFIG) {","            localConfigFile = process.env.ACTIONHERO_CONFIG + path.sep + prepend + fileParts[(fileParts.length - 1)]","          }","          api.utils.createFileSafely(path.normalize(localConfigFile), content, overwriteConfig)","        }","      })","    }","  }","","  // copy config files","  const pluginConfigDir = pluginRoot + path.sep + 'config'","  copyFiles(pluginConfigDir)","  next(null, true)","}",""],"l":{"4":1,"5":1,"6":1,"7":1,"14":1,"15":0,"16":0,"17":0,"19":0,"20":0,"21":0,"22":0,"26":0,"27":0,"28":0,"31":0,"32":0,"35":0,"42":0,"43":0,"44":0,"46":0,"47":0,"48":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"61":0,"62":0,"63":0,"64":0,"65":0,"67":0,"74":0,"75":0,"76":0}},"/home/travis/build/npmtest/node-npmtest-actionhero/node_modules/actionhero/bin/methods/start.js":{"path":"/home/travis/build/npmtest/node-npmtest-actionhero/node_modules/actionhero/bin/methods/start.js","s":{"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"fnMap":{"1":{"name":"(anonymous_1)","line":7,"loc":{"start":{"line":7,"column":17},"end":{"line":7,"column":38}}},"2":{"name":"(anonymous_2)","line":16,"loc":{"start":{"line":16,"column":22},"end":{"line":16,"column":42}}},"3":{"name":"(anonymous_3)","line":19,"loc":{"start":{"line":19,"column":23},"end":{"line":19,"column":57}}},"4":{"name":"(anonymous_4)","line":33,"loc":{"start":{"line":33,"column":21},"end":{"line":33,"column":41}}},"5":{"name":"(anonymous_5)","line":36,"loc":{"start":{"line":36,"column":22},"end":{"line":36,"column":34}}},"6":{"name":"(anonymous_6)","line":44,"loc":{"start":{"line":44,"column":24},"end":{"line":44,"column":44}}},"7":{"name":"(anonymous_7)","line":47,"loc":{"start":{"line":47,"column":25},"end":{"line":47,"column":59}}},"8":{"name":"(anonymous_8)","line":57,"loc":{"start":{"line":57,"column":22},"end":{"line":57,"column":34}}},"9":{"name":"(anonymous_9)","line":58,"loc":{"start":{"line":58,"column":15},"end":{"line":58,"column":27}}},"10":{"name":"(anonymous_10)","line":62,"loc":{"start":{"line":62,"column":15},"end":{"line":62,"column":27}}},"11":{"name":"(anonymous_11)","line":63,"loc":{"start":{"line":63,"column":23},"end":{"line":63,"column":35}}},"12":{"name":"(anonymous_12)","line":70,"loc":{"start":{"line":70,"column":30},"end":{"line":70,"column":42}}},"13":{"name":"(anonymous_13)","line":79,"loc":{"start":{"line":79,"column":26},"end":{"line":79,"column":41}}},"14":{"name":"(anonymous_14)","line":91,"loc":{"start":{"line":91,"column":36},"end":{"line":91,"column":53}}},"15":{"name":"(anonymous_15)","line":105,"loc":{"start":{"line":105,"column":37},"end":{"line":105,"column":58}}},"16":{"name":"(anonymous_16)","line":111,"loc":{"start":{"line":111,"column":23},"end":{"line":111,"column":35}}},"17":{"name":"(anonymous_17)","line":112,"loc":{"start":{"line":112,"column":24},"end":{"line":112,"column":36}}},"18":{"name":"(anonymous_18)","line":113,"loc":{"start":{"line":113,"column":24},"end":{"line":113,"column":36}}},"19":{"name":"(anonymous_19)","line":120,"loc":{"start":{"line":120,"column":20},"end":{"line":120,"column":32}}},"20":{"name":"(anonymous_20)","line":126,"loc":{"start":{"line":126,"column":14},"end":{"line":126,"column":26}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":34}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":36}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":24}},"4":{"start":{"line":7,"column":0},"end":{"line":129,"column":1}},"5":{"start":{"line":8,"column":2},"end":{"line":8,"column":11}},"6":{"start":{"line":11,"column":2},"end":{"line":11,"column":33}},"7":{"start":{"line":12,"column":2},"end":{"line":14,"column":3}},"8":{"start":{"line":13,"column":4},"end":{"line":13,"column":71}},"9":{"start":{"line":16,"column":2},"end":{"line":31,"column":3}},"10":{"start":{"line":17,"column":4},"end":{"line":17,"column":22}},"11":{"start":{"line":18,"column":4},"end":{"line":18,"column":58}},"12":{"start":{"line":18,"column":28},"end":{"line":18,"column":57}},"13":{"start":{"line":19,"column":4},"end":{"line":30,"column":6}},"14":{"start":{"line":20,"column":6},"end":{"line":29,"column":7}},"15":{"start":{"line":21,"column":8},"end":{"line":21,"column":30}},"16":{"start":{"line":22,"column":8},"end":{"line":22,"column":23}},"17":{"start":{"line":24,"column":8},"end":{"line":24,"column":25}},"18":{"start":{"line":25,"column":8},"end":{"line":25,"column":62}},"19":{"start":{"line":25,"column":32},"end":{"line":25,"column":61}},"20":{"start":{"line":26,"column":8},"end":{"line":26,"column":29}},"21":{"start":{"line":27,"column":8},"end":{"line":27,"column":29}},"22":{"start":{"line":28,"column":8},"end":{"line":28,"column":67}},"23":{"start":{"line":28,"column":46},"end":{"line":28,"column":66}},"24":{"start":{"line":33,"column":2},"end":{"line":42,"column":3}},"25":{"start":{"line":34,"column":4},"end":{"line":34,"column":22}},"26":{"start":{"line":35,"column":4},"end":{"line":35,"column":58}},"27":{"start":{"line":35,"column":28},"end":{"line":35,"column":57}},"28":{"start":{"line":36,"column":4},"end":{"line":41,"column":6}},"29":{"start":{"line":37,"column":6},"end":{"line":37,"column":23}},"30":{"start":{"line":38,"column":6},"end":{"line":38,"column":60}},"31":{"start":{"line":38,"column":30},"end":{"line":38,"column":59}},"32":{"start":{"line":39,"column":6},"end":{"line":39,"column":16}},"33":{"start":{"line":40,"column":6},"end":{"line":40,"column":65}},"34":{"start":{"line":40,"column":44},"end":{"line":40,"column":64}},"35":{"start":{"line":44,"column":2},"end":{"line":55,"column":3}},"36":{"start":{"line":45,"column":4},"end":{"line":45,"column":24}},"37":{"start":{"line":46,"column":4},"end":{"line":46,"column":58}},"38":{"start":{"line":46,"column":28},"end":{"line":46,"column":57}},"39":{"start":{"line":47,"column":4},"end":{"line":54,"column":6}},"40":{"start":{"line":48,"column":6},"end":{"line":48,"column":34}},"41":{"start":{"line":48,"column":19},"end":{"line":48,"column":33}},"42":{"start":{"line":50,"column":6},"end":{"line":50,"column":23}},"43":{"start":{"line":51,"column":6},"end":{"line":51,"column":60}},"44":{"start":{"line":51,"column":30},"end":{"line":51,"column":59}},"45":{"start":{"line":52,"column":6},"end":{"line":52,"column":27}},"46":{"start":{"line":53,"column":6},"end":{"line":53,"column":65}},"47":{"start":{"line":53,"column":44},"end":{"line":53,"column":64}},"48":{"start":{"line":57,"column":2},"end":{"line":67,"column":3}},"49":{"start":{"line":58,"column":4},"end":{"line":60,"column":23}},"50":{"start":{"line":59,"column":6},"end":{"line":59,"column":72}},"51":{"start":{"line":62,"column":4},"end":{"line":66,"column":6}},"52":{"start":{"line":63,"column":6},"end":{"line":65,"column":8}},"53":{"start":{"line":64,"column":8},"end":{"line":64,"column":22}},"54":{"start":{"line":69,"column":2},"end":{"line":69,"column":30}},"55":{"start":{"line":70,"column":2},"end":{"line":76,"column":3}},"56":{"start":{"line":71,"column":4},"end":{"line":71,"column":42}},"57":{"start":{"line":72,"column":4},"end":{"line":74,"column":5}},"58":{"start":{"line":73,"column":6},"end":{"line":73,"column":21}},"59":{"start":{"line":75,"column":4},"end":{"line":75,"column":79}},"60":{"start":{"line":78,"column":2},"end":{"line":109,"column":3}},"61":{"start":{"line":79,"column":4},"end":{"line":89,"column":6}},"62":{"start":{"line":80,"column":6},"end":{"line":88,"column":53}},"63":{"start":{"line":81,"column":8},"end":{"line":81,"column":21}},"64":{"start":{"line":82,"column":13},"end":{"line":88,"column":53}},"65":{"start":{"line":83,"column":8},"end":{"line":83,"column":20}},"66":{"start":{"line":84,"column":13},"end":{"line":88,"column":53}},"67":{"start":{"line":85,"column":8},"end":{"line":85,"column":21}},"68":{"start":{"line":88,"column":13},"end":{"line":88,"column":53}},"69":{"start":{"line":88,"column":38},"end":{"line":88,"column":52}},"70":{"start":{"line":91,"column":4},"end":{"line":103,"column":6}},"71":{"start":{"line":92,"column":6},"end":{"line":92,"column":15}},"72":{"start":{"line":93,"column":6},"end":{"line":97,"column":7}},"73":{"start":{"line":94,"column":8},"end":{"line":94,"column":41}},"74":{"start":{"line":96,"column":8},"end":{"line":96,"column":23}},"75":{"start":{"line":98,"column":6},"end":{"line":101,"column":9}},"76":{"start":{"line":102,"column":6},"end":{"line":102,"column":36}},"77":{"start":{"line":105,"column":4},"end":{"line":108,"column":6}},"78":{"start":{"line":106,"column":6},"end":{"line":106,"column":64}},"79":{"start":{"line":107,"column":6},"end":{"line":107,"column":36}},"80":{"start":{"line":111,"column":2},"end":{"line":111,"column":53}},"81":{"start":{"line":111,"column":37},"end":{"line":111,"column":51}},"82":{"start":{"line":112,"column":2},"end":{"line":112,"column":54}},"83":{"start":{"line":112,"column":38},"end":{"line":112,"column":52}},"84":{"start":{"line":113,"column":2},"end":{"line":113,"column":56}},"85":{"start":{"line":113,"column":38},"end":{"line":113,"column":54}},"86":{"start":{"line":115,"column":2},"end":{"line":123,"column":3}},"87":{"start":{"line":116,"column":4},"end":{"line":119,"column":6}},"88":{"start":{"line":120,"column":4},"end":{"line":122,"column":6}},"89":{"start":{"line":121,"column":6},"end":{"line":121,"column":28}},"90":{"start":{"line":126,"column":2},"end":{"line":128,"column":4}},"91":{"start":{"line":127,"column":4},"end":{"line":127,"column":15}}},"branchMap":{"1":{"line":12,"type":"if","locations":[{"start":{"line":12,"column":2},"end":{"line":12,"column":2}},{"start":{"line":12,"column":2},"end":{"line":12,"column":2}}]},"2":{"line":18,"type":"if","locations":[{"start":{"line":18,"column":4},"end":{"line":18,"column":4}},{"start":{"line":18,"column":4},"end":{"line":18,"column":4}}]},"3":{"line":20,"type":"if","locations":[{"start":{"line":20,"column":6},"end":{"line":20,"column":6}},{"start":{"line":20,"column":6},"end":{"line":20,"column":6}}]},"4":{"line":25,"type":"if","locations":[{"start":{"line":25,"column":8},"end":{"line":25,"column":8}},{"start":{"line":25,"column":8},"end":{"line":25,"column":8}}]},"5":{"line":28,"type":"if","locations":[{"start":{"line":28,"column":8},"end":{"line":28,"column":8}},{"start":{"line":28,"column":8},"end":{"line":28,"column":8}}]},"6":{"line":35,"type":"if","locations":[{"start":{"line":35,"column":4},"end":{"line":35,"column":4}},{"start":{"line":35,"column":4},"end":{"line":35,"column":4}}]},"7":{"line":38,"type":"if","locations":[{"start":{"line":38,"column":6},"end":{"line":38,"column":6}},{"start":{"line":38,"column":6},"end":{"line":38,"column":6}}]},"8":{"line":40,"type":"if","locations":[{"start":{"line":40,"column":6},"end":{"line":40,"column":6}},{"start":{"line":40,"column":6},"end":{"line":40,"column":6}}]},"9":{"line":46,"type":"if","locations":[{"start":{"line":46,"column":4},"end":{"line":46,"column":4}},{"start":{"line":46,"column":4},"end":{"line":46,"column":4}}]},"10":{"line":48,"type":"if","locations":[{"start":{"line":48,"column":6},"end":{"line":48,"column":6}},{"start":{"line":48,"column":6},"end":{"line":48,"column":6}}]},"11":{"line":51,"type":"if","locations":[{"start":{"line":51,"column":6},"end":{"line":51,"column":6}},{"start":{"line":51,"column":6},"end":{"line":51,"column":6}}]},"12":{"line":53,"type":"if","locations":[{"start":{"line":53,"column":6},"end":{"line":53,"column":6}},{"start":{"line":53,"column":6},"end":{"line":53,"column":6}}]},"13":{"line":72,"type":"if","locations":[{"start":{"line":72,"column":4},"end":{"line":72,"column":4}},{"start":{"line":72,"column":4},"end":{"line":72,"column":4}}]},"14":{"line":72,"type":"binary-expr","locations":[{"start":{"line":72,"column":8},"end":{"line":72,"column":28}},{"start":{"line":72,"column":32},"end":{"line":72,"column":51}}]},"15":{"line":78,"type":"if","locations":[{"start":{"line":78,"column":2},"end":{"line":78,"column":2}},{"start":{"line":78,"column":2},"end":{"line":78,"column":2}}]},"16":{"line":80,"type":"if","locations":[{"start":{"line":80,"column":6},"end":{"line":80,"column":6}},{"start":{"line":80,"column":6},"end":{"line":80,"column":6}}]},"17":{"line":82,"type":"if","locations":[{"start":{"line":82,"column":13},"end":{"line":82,"column":13}},{"start":{"line":82,"column":13},"end":{"line":82,"column":13}}]},"18":{"line":84,"type":"if","locations":[{"start":{"line":84,"column":13},"end":{"line":84,"column":13}},{"start":{"line":84,"column":13},"end":{"line":84,"column":13}}]},"19":{"line":88,"type":"if","locations":[{"start":{"line":88,"column":13},"end":{"line":88,"column":13}},{"start":{"line":88,"column":13},"end":{"line":88,"column":13}}]},"20":{"line":115,"type":"if","locations":[{"start":{"line":115,"column":2},"end":{"line":115,"column":2}},{"start":{"line":115,"column":2},"end":{"line":115,"column":2}}]},"21":{"line":115,"type":"binary-expr","locations":[{"start":{"line":115,"column":6},"end":{"line":115,"column":34}},{"start":{"line":115,"column":38},"end":{"line":115,"column":66}}]}},"code":["'use strict'","","const cluster = require('cluster')","const readline = require('readline')","const os = require('os')","","module.exports = function (api, next) {","  let state","","  // number of ms to wait to do a forcible shutdown if actionhero won't stop gracefully","  let shutdownTimeout = 1000 * 30","  if (process.env.ACTIONHERO_SHUTDOWN_TIMEOUT) {","    shutdownTimeout = parseInt(process.env.ACTIONHERO_SHUTDOWN_TIMEOUT)","  }","","  const startServer = function (callback) {","    state = 'starting'","    if (cluster.isWorker) { process.send({state: state}) }","    api._context.start(function (error, apiFromCallback) {","      if (error) {","        api.log(['%s', error])","        process.exit(1)","      } else {","        state = 'started'","        if (cluster.isWorker) { process.send({state: state}) }","        api = apiFromCallback","        checkForInernalStop()","        if (typeof callback === 'function') { callback(null, api) }","      }","    })","  }","","  const stopServer = function (callback) {","    state = 'stopping'","    if (cluster.isWorker) { process.send({state: state}) }","    api._context.stop(function () {","      state = 'stopped'","      if (cluster.isWorker) { process.send({state: state}) }","      api = null","      if (typeof callback === 'function') { callback(null, api) }","    })","  }","","  const restartServer = function (callback) {","    state = 'restarting'","    if (cluster.isWorker) { process.send({state: state}) }","    api._context.restart(function (error, apiFromCallback) {","      if (error) { throw (error) }","","      state = 'started'","      if (cluster.isWorker) { process.send({state: state}) }","      api = apiFromCallback","      if (typeof callback === 'function') { callback(null, api) }","    })","  }","","  const stopProcess = function () {","    setTimeout(function () {","      throw new Error('process stop timeout reached.  terminating now.')","    }, shutdownTimeout)","    // finalTimer.unref();","    stopServer(function () {","      process.nextTick(function () {","        process.exit()","      })","    })","  }","","  let checkForInernalStopTimer","  const checkForInernalStop = function () {","    clearTimeout(checkForInernalStopTimer)","    if (api.running !== true && state === 'started') {","      process.exit(0)","    }","    checkForInernalStopTimer = setTimeout(checkForInernalStop, shutdownTimeout)","  }","","  if (cluster.isWorker) {","    process.on('message', function (msg) {","      if (msg === 'start') {","        startServer()","      } else if (msg === 'stop') {","        stopServer()","      } else if (msg === 'stopProcess') {","        stopProcess()","      // in cluster, we cannot re-bind the port","      // so kill this worker, and then let the cluster start a new worker","      } else if (msg === 'restart') { stopProcess() }","    })","","    process.on('uncaughtException', function (error) {","      let stack","      try {","        stack = error.stack.split(os.EOL)","      } catch (e) {","        stack = [error]","      }","      process.send({uncaughtException: {","        message: error.message,","        stack: stack","      }})","      process.nextTick(process.exit)","    })","","    process.on('unhandledRejection', function (reason, p) {","      process.send({unhandledRejection: {reason: reason, p: p}})","      process.nextTick(process.exit)","    })","  }","","  process.on('SIGINT', function () { stopProcess() })","  process.on('SIGTERM', function () { stopProcess() })","  process.on('SIGUSR2', function () { restartServer() })","","  if (process.platform === 'win32' && !process.env.IISNODE_VERSION) {","    const rl = readline.createInterface({","      input: process.stdin,","      output: process.stdout","    })","    rl.on('SIGINT', function () {","      process.emit('SIGINT')","    })","  }","","  // start the server!","  startServer(function () {","    next(false)","  })","}",""],"l":{"3":1,"4":1,"5":1,"7":1,"8":0,"11":0,"12":0,"13":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"24":0,"25":0,"26":0,"27":0,"28":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"44":0,"45":0,"46":0,"47":0,"48":0,"50":0,"51":0,"52":0,"53":0,"57":0,"58":0,"59":0,"62":0,"63":0,"64":0,"69":0,"70":0,"71":0,"72":0,"73":0,"75":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"88":0,"91":0,"92":0,"93":0,"94":0,"96":0,"98":0,"102":0,"105":0,"106":0,"107":0,"111":0,"112":0,"113":0,"115":0,"116":0,"120":0,"121":0,"126":0,"127":0}},"/home/travis/build/npmtest/node-npmtest-actionhero/node_modules/actionhero/bin/methods/unlink.js":{"path":"/home/travis/build/npmtest/node-npmtest-actionhero/node_modules/actionhero/bin/methods/unlink.js","s":{"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0]},"f":{"1":0,"2":0,"3":0},"fnMap":{"1":{"name":"(anonymous_1)","line":11,"loc":{"start":{"line":11,"column":17},"end":{"line":11,"column":38}}},"2":{"name":"(anonymous_2)","line":15,"loc":{"start":{"line":15,"column":42},"end":{"line":15,"column":64}}},"3":{"name":"(anonymous_3)","line":37,"loc":{"start":{"line":37,"column":12},"end":{"line":37,"column":25}}}},"statementMap":{"1":{"start":{"line":4,"column":0},"end":{"line":4,"column":28}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":36}},"3":{"start":{"line":6,"column":0},"end":{"line":9,"column":7}},"4":{"start":{"line":11,"column":0},"end":{"line":49,"column":1}},"5":{"start":{"line":12,"column":2},"end":{"line":12,"column":53}},"6":{"start":{"line":13,"column":2},"end":{"line":13,"column":16}},"7":{"start":{"line":15,"column":2},"end":{"line":20,"column":4}},"8":{"start":{"line":16,"column":4},"end":{"line":16,"column":79}},"9":{"start":{"line":17,"column":4},"end":{"line":19,"column":5}},"10":{"start":{"line":18,"column":6},"end":{"line":18,"column":36}},"11":{"start":{"line":22,"column":2},"end":{"line":25,"column":3}},"12":{"start":{"line":23,"column":4},"end":{"line":23,"column":109}},"13":{"start":{"line":24,"column":4},"end":{"line":24,"column":27}},"14":{"start":{"line":27,"column":2},"end":{"line":27,"column":69}},"15":{"start":{"line":28,"column":2},"end":{"line":28,"column":68}},"16":{"start":{"line":31,"column":2},"end":{"line":44,"column":4}},"17":{"start":{"line":38,"column":4},"end":{"line":38,"column":103}},"18":{"start":{"line":39,"column":4},"end":{"line":39,"column":97}},"19":{"start":{"line":41,"column":4},"end":{"line":43,"column":5}},"20":{"start":{"line":42,"column":6},"end":{"line":42,"column":55}},"21":{"start":{"line":46,"column":2},"end":{"line":46,"column":78}},"22":{"start":{"line":47,"column":2},"end":{"line":47,"column":154}},"23":{"start":{"line":48,"column":2},"end":{"line":48,"column":18}}},"branchMap":{"1":{"line":17,"type":"if","locations":[{"start":{"line":17,"column":4},"end":{"line":17,"column":4}},{"start":{"line":17,"column":4},"end":{"line":17,"column":4}}]},"2":{"line":17,"type":"binary-expr","locations":[{"start":{"line":17,"column":8},"end":{"line":17,"column":19}},{"start":{"line":17,"column":23},"end":{"line":17,"column":77}}]},"3":{"line":22,"type":"if","locations":[{"start":{"line":22,"column":2},"end":{"line":22,"column":2}},{"start":{"line":22,"column":2},"end":{"line":22,"column":2}}]},"4":{"line":41,"type":"if","locations":[{"start":{"line":41,"column":4},"end":{"line":41,"column":4}},{"start":{"line":41,"column":4},"end":{"line":41,"column":4}}]}},"code":["'use strict'","","// use me to exclude the files from a plugin within this project","const path = require('path')","const optimist = require('optimist')","const argv = optimist","  .demand('name')","  .describe('name', 'The name of the plugin')","  .argv","","module.exports = function (api, next) {","  const linkRelativeBase = api.projectRoot + path.sep","  let pluginRoot","","  api.config.general.paths.plugin.forEach(function (pluginPath) {","    const pluginPathAttempt = path.normalize(pluginPath + path.sep + argv.name)","    if (!pluginRoot && api.utils.dirExists(pluginPath + path.sep + argv.name)) {","      pluginRoot = pluginPathAttempt","    }","  })","","  if (!pluginRoot) {","    api.log(['plugin `%s` not found in plugin paths', argv.name], 'warning', api.config.general.paths.plugin)","    return next(null, true)","  }","","  const pluginRootRelative = pluginRoot.replace(linkRelativeBase, '')","  api.log(['unlinking the plugin found at %s', pluginRootRelative]);","","  // unlink actionable files","  [","    ['action', 'actions'],","    ['task', 'tasks'],","    ['public', 'public'],","    ['server', 'servers'],","    ['initializer', 'initializers']","  ].forEach(function (c) {","    const localLinkDirectory = path.normalize(api.config.general.paths[c[0]][0] + path.sep + 'plugins')","    const localLinkLocation = path.normalize(localLinkDirectory + path.sep + argv.name + '.link')","","    if (api.utils.dirExists(localLinkDirectory)) {","      api.utils.removeLinkfileSafely(localLinkLocation)","    }","  })","","  api.log('Remember that config files have to be deleted manually', 'warning')","  api.log('If your plugin was installed via NPM, also be sure to remove it from your package.json or uninstall it with \"npm uninstall --save\"', 'warning')","  next(null, true)","}",""],"l":{"4":1,"5":1,"6":1,"11":1,"12":0,"13":0,"15":0,"16":0,"17":0,"18":0,"22":0,"23":0,"24":0,"27":0,"28":0,"31":0,"38":0,"39":0,"41":0,"42":0,"46":0,"47":0,"48":0}},"/home/travis/build/npmtest/node-npmtest-actionhero/node_modules/actionhero/bin/methods/version.js":{"path":"/home/travis/build/npmtest/node-npmtest-actionhero/node_modules/actionhero/bin/methods/version.js","s":{"1":1,"2":1,"3":1,"4":0,"5":0},"b":{},"f":{"1":0},"fnMap":{"1":{"name":"(anonymous_1)","line":6,"loc":{"start":{"line":6,"column":17},"end":{"line":6,"column":38}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":28}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":72}},"3":{"start":{"line":6,"column":0},"end":{"line":9,"column":1}},"4":{"start":{"line":7,"column":2},"end":{"line":7,"column":34}},"5":{"start":{"line":8,"column":2},"end":{"line":8,"column":18}}},"branchMap":{},"code":["'use strict'","","const path = require('path')","const packageJSON = require(path.join(__dirname, '/../../package.json'))","","module.exports = function (api, next) {","  console.log(packageJSON.version)","  next(null, true)","}",""],"l":{"3":1,"4":1,"6":1,"7":0,"8":0}},"/home/travis/build/npmtest/node-npmtest-actionhero/node_modules/actionhero/bin/templates/action.js":{"path":"/home/travis/build/npmtest/node-npmtest-actionhero/node_modules/actionhero/bin/templates/action.js","s":{"1":1,"2":0,"3":0},"b":{},"f":{"1":0},"fnMap":{"1":{"name":"(anonymous_1)","line":15,"loc":{"start":{"line":15,"column":7},"end":{"line":15,"column":34}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":20,"column":1}},"2":{"start":{"line":16,"column":4},"end":{"line":16,"column":20}},"3":{"start":{"line":18,"column":4},"end":{"line":18,"column":15}}},"branchMap":{},"code":["'use strict'","","exports.action = {","  name: '%%name%%',","  description: '%%description%%',","  blockedConnectionTypes: [],","  outputExample: {},","  matchExtensionMimeType: false,","  version: 1.0,","  toDocument: true,","  middleware: [],","","  inputs: {},","","  run: function (api, data, next) {","    let error = null","    // your logic here","    next(error)","  }","}",""],"l":{"3":1,"16":0,"18":0}},"/home/travis/build/npmtest/node-npmtest-actionhero/node_modules/actionhero/bin/templates/server.js":{"path":"/home/travis/build/npmtest/node-npmtest-actionhero/node_modules/actionhero/bin/templates/server.js","s":{"1":1,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":1},"b":{},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0},"fnMap":{"1":{"name":"(anonymous_1)","line":3,"loc":{"start":{"line":3,"column":19},"end":{"line":3,"column":49}}},"2":{"name":"(anonymous_2)","line":24,"loc":{"start":{"line":24,"column":17},"end":{"line":24,"column":33}}},"3":{"name":"(anonymous_3)","line":28,"loc":{"start":{"line":28,"column":16},"end":{"line":28,"column":32}}},"4":{"name":"(anonymous_4)","line":32,"loc":{"start":{"line":32,"column":23},"end":{"line":32,"column":68}}},"5":{"name":"(anonymous_5)","line":36,"loc":{"start":{"line":36,"column":20},"end":{"line":36,"column":75}}},"6":{"name":"(anonymous_6)","line":40,"loc":{"start":{"line":40,"column":19},"end":{"line":40,"column":49}}},"7":{"name":"(anonymous_7)","line":48,"loc":{"start":{"line":48,"column":26},"end":{"line":48,"column":48}}},"8":{"name":"(anonymous_8)","line":52,"loc":{"start":{"line":52,"column":30},"end":{"line":52,"column":46}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":61,"column":1}},"2":{"start":{"line":8,"column":2},"end":{"line":8,"column":25}},"3":{"start":{"line":10,"column":2},"end":{"line":16,"column":3}},"4":{"start":{"line":18,"column":2},"end":{"line":18,"column":65}},"5":{"start":{"line":24,"column":2},"end":{"line":26,"column":3}},"6":{"start":{"line":25,"column":4},"end":{"line":25,"column":10}},"7":{"start":{"line":28,"column":2},"end":{"line":30,"column":3}},"8":{"start":{"line":29,"column":4},"end":{"line":29,"column":10}},"9":{"start":{"line":32,"column":2},"end":{"line":34,"column":3}},"10":{"start":{"line":36,"column":2},"end":{"line":38,"column":3}},"11":{"start":{"line":40,"column":2},"end":{"line":42,"column":3}},"12":{"start":{"line":48,"column":2},"end":{"line":50,"column":4}},"13":{"start":{"line":52,"column":2},"end":{"line":54,"column":4}},"14":{"start":{"line":60,"column":2},"end":{"line":60,"column":14}},"15":{"start":{"line":63,"column":0},"end":{"line":63,"column":31}}},"branchMap":{},"code":["'use strict'","","const initialize = function (api, options, next) {","  // ////////","  // INIT //","  // ////////","","  const type = '%%name%%'","","  const attributes = {","    canChat: true,","    logConnections: true,","    logExits: true,","    sendWelcomeMessage: true,","    verbs: []","  }","","  const server = new api.GenericServer(type, options, attributes)","","  // ////////////////////","  // REQUIRED METHODS //","  // ////////////////////","","  server.start = function (next) {","    next()","  }","","  server.stop = function (next) {","    next()","  }","","  server.sendMessage = function (connection, message, messageCount) {","","  }","","  server.sendFile = function (connection, error, fileStream, mime, length) {","","  }","","  server.goodbye = function (connection, reason) {","","  }","","  // //////////","  // EVENTS //","  // //////////","","  server.on('connection', function (connection) {","","  })","","  server.on('actionComplete', function (data) {","","  })","","  // ///////////","  // HELPERS //","  // ///////////","","  next(server)","}","","exports.initialize = initialize",""],"l":{"3":1,"8":0,"10":0,"18":0,"24":0,"25":0,"28":0,"29":0,"32":0,"36":0,"40":0,"48":0,"52":0,"60":0,"63":1}}}